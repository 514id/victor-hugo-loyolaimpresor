<!DOCTYPE html><html lang="en"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-140352188-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-140352188-1');</script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="description" content="The CDN for lunr"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="timestamp" content="2021-01-12T17:09:51.699Z"/><link rel="shortcut icon" href="/favicon.ico"/><title>UNPKG - lunr</title><script>window.Promise || document.write('\x3Cscript src="/es6-promise@4.2.5/dist/es6-promise.min.js">\x3C/script>\x3Cscript>ES6Promise.polyfill()\x3C/script>')</script><script>window.fetch || document.write('\x3Cscript src="/whatwg-fetch@3.0.0/dist/fetch.umd.js">\x3C/script>')</script><script>window.__DATA__ = {"packageName":"lunr","packageVersion":"2.3.9","availableVersions":["0.2.0","0.2.1","0.2.2","0.2.3","0.3.0","0.3.1","0.3.2","0.3.3","0.4.0","0.4.1","0.4.2","0.4.3","0.4.4","0.4.5","0.5.1","0.5.2","0.5.3","0.5.4","0.5.5","0.5.6","0.5.7","0.5.8","0.5.9","0.5.10","0.5.11","0.5.12","0.6.0","0.7.0","0.7.1","0.7.2","1.0.0","2.0.0-alpha.1","2.0.0-alpha.2","2.0.0-alpha.3","2.0.0-alpha.4","2.0.0-alpha.5","2.0.0","2.0.1","2.0.2","2.0.3","2.0.4","2.1.0-alpha.1","2.1.0-alpha.2","2.1.0","2.1.1","2.1.2","2.1.3","2.1.4","2.1.5","2.1.6","2.2.0-alpha.1","2.2.0-alpha.2","2.2.0","2.2.1","2.3.0","2.3.1","2.3.2","2.3.3","2.3.4","2.3.5","2.3.6","2.3.7","2.3.8","2.3.9"],"filename":"/lunr.js","target":{"path":"/lunr.js","type":"file","details":{"contentType":"application/javascript","integrity":"sha384-Mrc0XsDxndfJgV5jLnEeThch4j9dNEXAE1vbWeyzmERxSvF8siQfuEczzgUelQQH","language":"JavaScript","size":99804,"uri":null,"highlights":["<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> * @license MIT\n</span>","<span class=\"code-comment\"> */</span>\n","\n",";(<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A convenience function for configuring and constructing\n</span>","<span class=\"code-comment\"> * a new lunr Index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * A lunr.Builder instance is created and the pipeline setup\n</span>","<span class=\"code-comment\"> * with a trimmer, stop word filter and stemmer.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This builder object is yielded to the configuration function\n</span>","<span class=\"code-comment\"> * that is passed as a parameter, allowing the list of fields\n</span>","<span class=\"code-comment\"> * and other builder parameters to be customised.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * All documents _must_ be added within the passed config function.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @example\n</span>","<span class=\"code-comment\"> * var idx = lunr(function () {\n</span>","<span class=\"code-comment\"> *   this.field('title')\n</span>","<span class=\"code-comment\"> *   this.field('body')\n</span>","<span class=\"code-comment\"> *   this.ref('id')\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> *   documents.forEach(function (doc) {\n</span>","<span class=\"code-comment\"> *     this.add(doc)\n</span>","<span class=\"code-comment\"> *   }, this)\n</span>","<span class=\"code-comment\"> * })\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @see {@link lunr.Builder}\n</span>","<span class=\"code-comment\"> * @see {@link lunr.Pipeline}\n</span>","<span class=\"code-comment\"> * @see {@link lunr.trimmer}\n</span>","<span class=\"code-comment\"> * @see {@link lunr.stopWordFilter}\n</span>","<span class=\"code-comment\"> * @see {@link lunr.stemmer}\n</span>","<span class=\"code-comment\"> * @namespace {function} lunr\n</span>","<span class=\"code-comment\"> */</span>\n","<span class=\"code-keyword\">var</span> lunr = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">config</span>) </span>{\n","  <span class=\"code-keyword\">var</span> builder = <span class=\"code-keyword\">new</span> lunr.Builder\n","\n","  builder.pipeline.add(\n","    lunr.trimmer,\n","    lunr.stopWordFilter,\n","    lunr.stemmer\n","  )\n","\n","  builder.searchPipeline.add(\n","    lunr.stemmer\n","  )\n","\n","  config.call(builder, builder)\n","  <span class=\"code-keyword\">return</span> builder.build()\n","}\n","\n","lunr.version = <span class=\"code-string\">\"2.3.9\"</span>\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.utils\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A namespace containing utils for the rest of the lunr library\n</span>","<span class=\"code-comment\"> * @namespace lunr.utils\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.utils = {}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Print a warning message to the console.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {String} message The message to be printed.\n</span>","<span class=\"code-comment\"> * @memberOf lunr.utils\n</span>","<span class=\"code-comment\"> * @function\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.utils.warn = (<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">global</span>) </span>{\n","  <span class=\"code-comment\">/* eslint-disable no-console */</span>\n","  <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">message</span>) </span>{\n","    <span class=\"code-keyword\">if</span> (global.console &amp;&amp; <span class=\"code-built_in\">console</span>.warn) {\n","      <span class=\"code-built_in\">console</span>.warn(message)\n","    }\n","  }\n","  <span class=\"code-comment\">/* eslint-enable no-console */</span>\n","})(<span class=\"code-keyword\">this</span>)\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Convert an object to a string.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * In the case of `null` and `undefined` the function returns\n</span>","<span class=\"code-comment\"> * the empty string, in all other cases the result of calling\n</span>","<span class=\"code-comment\"> * `toString` on the passed object is returned.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Any} obj The object to convert to a string.\n</span>","<span class=\"code-comment\"> * @return {String} string representation of the passed object.\n</span>","<span class=\"code-comment\"> * @memberOf lunr.utils\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.utils.asString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">obj</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (obj === <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span> || obj === <span class=\"code-literal\">null</span>) {\n","    <span class=\"code-keyword\">return</span> <span class=\"code-string\">\"\"</span>\n","  } <span class=\"code-keyword\">else</span> {\n","    <span class=\"code-keyword\">return</span> obj.toString()\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Clones an object.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Will create a copy of an existing object such that any mutations\n</span>","<span class=\"code-comment\"> * on the copy cannot affect the original.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Only shallow objects are supported, passing a nested object to this\n</span>","<span class=\"code-comment\"> * function will cause a TypeError.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Objects with primitives, and arrays of primitives are supported.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Object} obj The object to clone.\n</span>","<span class=\"code-comment\"> * @return {Object} a clone of the passed object.\n</span>","<span class=\"code-comment\"> * @throws {TypeError} when a nested object is passed.\n</span>","<span class=\"code-comment\"> * @memberOf Utils\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.utils.clone = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">obj</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (obj === <span class=\"code-literal\">null</span> || obj === <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span> obj\n","  }\n","\n","  <span class=\"code-keyword\">var</span> clone = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>),\n","      keys = <span class=\"code-built_in\">Object</span>.keys(obj)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; keys.length; i++) {\n","    <span class=\"code-keyword\">var</span> key = keys[i],\n","        val = obj[key]\n","\n","    <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Array</span>.isArray(val)) {\n","      clone[key] = val.slice()\n","      <span class=\"code-keyword\">continue</span>\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> val === <span class=\"code-string\">'string'</span> ||\n","        <span class=\"code-keyword\">typeof</span> val === <span class=\"code-string\">'number'</span> ||\n","        <span class=\"code-keyword\">typeof</span> val === <span class=\"code-string\">'boolean'</span>) {\n","      clone[key] = val\n","      <span class=\"code-keyword\">continue</span>\n","    }\n","\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">TypeError</span>(<span class=\"code-string\">\"clone is not deep and does not support nested objects\"</span>)\n","  }\n","\n","  <span class=\"code-keyword\">return</span> clone\n","}\n","lunr.FieldRef = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">docRef, fieldName, stringValue</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.docRef = docRef\n","  <span class=\"code-keyword\">this</span>.fieldName = fieldName\n","  <span class=\"code-keyword\">this</span>._stringValue = stringValue\n","}\n","\n","lunr.FieldRef.joiner = <span class=\"code-string\">\"/\"</span>\n","\n","lunr.FieldRef.fromString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">s</span>) </span>{\n","  <span class=\"code-keyword\">var</span> n = s.indexOf(lunr.FieldRef.joiner)\n","\n","  <span class=\"code-keyword\">if</span> (n === <span class=\"code-number\">-1</span>) {\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-string\">\"malformed field ref string\"</span>\n","  }\n","\n","  <span class=\"code-keyword\">var</span> fieldRef = s.slice(<span class=\"code-number\">0</span>, n),\n","      docRef = s.slice(n + <span class=\"code-number\">1</span>)\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> lunr.FieldRef (docRef, fieldRef, s)\n","}\n","\n","lunr.FieldRef.prototype.toString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>._stringValue == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">this</span>._stringValue = <span class=\"code-keyword\">this</span>.fieldName + lunr.FieldRef.joiner + <span class=\"code-keyword\">this</span>.docRef\n","  }\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>._stringValue\n","}\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.Set\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A lunr set.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Set = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">elements</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.elements = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","\n","  <span class=\"code-keyword\">if</span> (elements) {\n","    <span class=\"code-keyword\">this</span>.length = elements.length\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; <span class=\"code-keyword\">this</span>.length; i++) {\n","      <span class=\"code-keyword\">this</span>.elements[elements[i]] = <span class=\"code-literal\">true</span>\n","    }\n","  } <span class=\"code-keyword\">else</span> {\n","    <span class=\"code-keyword\">this</span>.length = <span class=\"code-number\">0</span>\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A complete set that contains all elements.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @static\n</span>","<span class=\"code-comment\"> * @readonly\n</span>","<span class=\"code-comment\"> * @type {lunr.Set}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Set.complete = {\n","  intersect: <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">other</span>) </span>{\n","    <span class=\"code-keyword\">return</span> other\n","  },\n","\n","  union: <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","    <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","  },\n","\n","  contains: <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","    <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * An empty set that contains no elements.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @static\n</span>","<span class=\"code-comment\"> * @readonly\n</span>","<span class=\"code-comment\"> * @type {lunr.Set}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Set.empty = {\n","  intersect: <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","    <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","  },\n","\n","  union: <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">other</span>) </span>{\n","    <span class=\"code-keyword\">return</span> other\n","  },\n","\n","  contains: <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","    <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Returns true if this set contains the specified object.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {object} object - Object whose presence in this set is to be tested.\n</span>","<span class=\"code-comment\"> * @returns {boolean} - True if this set contains the specified object.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Set.prototype.contains = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">object</span>) </span>{\n","  <span class=\"code-keyword\">return</span> !!<span class=\"code-keyword\">this</span>.elements[object]\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Returns a new set containing only the elements that are present in both\n</span>","<span class=\"code-comment\"> * this set and the specified set.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Set} other - set to intersect with this set.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Set} a new set that is the intersection of this and the specified set.\n</span>","<span class=\"code-comment\"> */</span>\n","\n","lunr.Set.prototype.intersect = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">other</span>) </span>{\n","  <span class=\"code-keyword\">var</span> a, b, elements, intersection = []\n","\n","  <span class=\"code-keyword\">if</span> (other === lunr.Set.complete) {\n","    <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (other === lunr.Set.empty) {\n","    <span class=\"code-keyword\">return</span> other\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.length &lt; other.length) {\n","    a = <span class=\"code-keyword\">this</span>\n","    b = other\n","  } <span class=\"code-keyword\">else</span> {\n","    a = other\n","    b = <span class=\"code-keyword\">this</span>\n","  }\n","\n","  elements = <span class=\"code-built_in\">Object</span>.keys(a.elements)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; elements.length; i++) {\n","    <span class=\"code-keyword\">var</span> element = elements[i]\n","    <span class=\"code-keyword\">if</span> (element <span class=\"code-keyword\">in</span> b.elements) {\n","      intersection.push(element)\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> lunr.Set (intersection)\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Returns a new set combining the elements of this and the specified set.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Set} other - set to union with this set.\n</span>","<span class=\"code-comment\"> * @return {lunr.Set} a new set that is the union of this and the specified set.\n</span>","<span class=\"code-comment\"> */</span>\n","\n","lunr.Set.prototype.union = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">other</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (other === lunr.Set.complete) {\n","    <span class=\"code-keyword\">return</span> lunr.Set.complete\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (other === lunr.Set.empty) {\n","    <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","  }\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> lunr.Set(<span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.elements).concat(<span class=\"code-built_in\">Object</span>.keys(other.elements)))\n","}\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A function to calculate the inverse document frequency for\n</span>","<span class=\"code-comment\"> * a posting. This is shared between the builder and the index\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @private\n</span>","<span class=\"code-comment\"> * @param {object} posting - The posting for a given term\n</span>","<span class=\"code-comment\"> * @param {number} documentCount - The total number of documents.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.idf = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">posting, documentCount</span>) </span>{\n","  <span class=\"code-keyword\">var</span> documentsWithTerm = <span class=\"code-number\">0</span>\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> fieldName <span class=\"code-keyword\">in</span> posting) {\n","    <span class=\"code-keyword\">if</span> (fieldName == <span class=\"code-string\">'_index'</span>) <span class=\"code-keyword\">continue</span> <span class=\"code-comment\">// Ignore the term index, its not a field</span>\n","    documentsWithTerm += <span class=\"code-built_in\">Object</span>.keys(posting[fieldName]).length\n","  }\n","\n","  <span class=\"code-keyword\">var</span> x = (documentCount - documentsWithTerm + <span class=\"code-number\">0.5</span>) / (documentsWithTerm + <span class=\"code-number\">0.5</span>)\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-built_in\">Math</span>.log(<span class=\"code-number\">1</span> + <span class=\"code-built_in\">Math</span>.abs(x))\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A token wraps a string representation of a token\n</span>","<span class=\"code-comment\"> * as it is passed through the text processing pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> * @param {string} [str=''] - The string token being wrapped.\n</span>","<span class=\"code-comment\"> * @param {object} [metadata={}] - Metadata associated with this token.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Token = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">str, metadata</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.str = str || <span class=\"code-string\">\"\"</span>\n","  <span class=\"code-keyword\">this</span>.metadata = metadata || {}\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Returns the token string that is being wrapped by this object.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {string}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Token.prototype.toString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.str\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A token update function is used when updating or optionally\n</span>","<span class=\"code-comment\"> * when cloning a token.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @callback lunr.Token~updateFunction\n</span>","<span class=\"code-comment\"> * @param {string} str - The string representation of the token.\n</span>","<span class=\"code-comment\"> * @param {Object} metadata - All metadata associated with this token.\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Applies the given function to the wrapped string token.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @example\n</span>","<span class=\"code-comment\"> * token.update(function (str, metadata) {\n</span>","<span class=\"code-comment\"> *   return str.toUpperCase()\n</span>","<span class=\"code-comment\"> * })\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Token~updateFunction} fn - A function to apply to the token string.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Token}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Token.prototype.update = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.str = fn(<span class=\"code-keyword\">this</span>.str, <span class=\"code-keyword\">this</span>.metadata)\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Creates a clone of this token. Optionally a function can be\n</span>","<span class=\"code-comment\"> * applied to the cloned token.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Token~updateFunction} [fn] - An optional function to apply to the cloned token.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Token}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Token.prototype.clone = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","  fn = fn || <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">s</span>) </span>{ <span class=\"code-keyword\">return</span> s }\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> lunr.Token (fn(<span class=\"code-keyword\">this</span>.str, <span class=\"code-keyword\">this</span>.metadata), <span class=\"code-keyword\">this</span>.metadata)\n","}\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.tokenizer\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A function for splitting a string into tokens ready to be inserted into\n</span>","<span class=\"code-comment\"> * the search index. Uses `lunr.tokenizer.separator` to split strings, change\n</span>","<span class=\"code-comment\"> * the value of this property to change how strings are split into tokens.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This tokenizer will convert its parameter to a string by calling `toString` and\n</span>","<span class=\"code-comment\"> * then will split this string on the character in `lunr.tokenizer.separator`.\n</span>","<span class=\"code-comment\"> * Arrays will have their elements converted to strings and wrapped in a lunr.Token.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Optional metadata can be passed to the tokenizer, this metadata will be cloned and\n</span>","<span class=\"code-comment\"> * added as metadata to every token that is created from the object to be tokenized.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @static\n</span>","<span class=\"code-comment\"> * @param {?(string|object|object[])} obj - The object to convert into tokens\n</span>","<span class=\"code-comment\"> * @param {?object} metadata - Optional metadata to associate with every token\n</span>","<span class=\"code-comment\"> * @returns {lunr.Token[]}\n</span>","<span class=\"code-comment\"> * @see {@link lunr.Pipeline}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.tokenizer = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">obj, metadata</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (obj == <span class=\"code-literal\">null</span> || obj == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span> []\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Array</span>.isArray(obj)) {\n","    <span class=\"code-keyword\">return</span> obj.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">t</span>) </span>{\n","      <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> lunr.Token(\n","        lunr.utils.asString(t).toLowerCase(),\n","        lunr.utils.clone(metadata)\n","      )\n","    })\n","  }\n","\n","  <span class=\"code-keyword\">var</span> str = obj.toString().toLowerCase(),\n","      len = str.length,\n","      tokens = []\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> sliceEnd = <span class=\"code-number\">0</span>, sliceStart = <span class=\"code-number\">0</span>; sliceEnd &lt;= len; sliceEnd++) {\n","    <span class=\"code-keyword\">var</span> char = str.charAt(sliceEnd),\n","        sliceLength = sliceEnd - sliceStart\n","\n","    <span class=\"code-keyword\">if</span> ((char.match(lunr.tokenizer.separator) || sliceEnd == len)) {\n","\n","      <span class=\"code-keyword\">if</span> (sliceLength &gt; <span class=\"code-number\">0</span>) {\n","        <span class=\"code-keyword\">var</span> tokenMetadata = lunr.utils.clone(metadata) || {}\n","        tokenMetadata[<span class=\"code-string\">\"position\"</span>] = [sliceStart, sliceLength]\n","        tokenMetadata[<span class=\"code-string\">\"index\"</span>] = tokens.length\n","\n","        tokens.push(\n","          <span class=\"code-keyword\">new</span> lunr.Token (\n","            str.slice(sliceStart, sliceEnd),\n","            tokenMetadata\n","          )\n","        )\n","      }\n","\n","      sliceStart = sliceEnd + <span class=\"code-number\">1</span>\n","    }\n","\n","  }\n","\n","  <span class=\"code-keyword\">return</span> tokens\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * The separator used to split a string into tokens. Override this property to change the behaviour of\n</span>","<span class=\"code-comment\"> * `lunr.tokenizer` behaviour when tokenizing strings. By default this splits on whitespace and hyphens.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @static\n</span>","<span class=\"code-comment\"> * @see lunr.tokenizer\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.tokenizer.separator = <span class=\"code-regexp\">/[\\s\\-]+/</span>\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.Pipeline\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * lunr.Pipelines maintain an ordered list of functions to be applied to all\n</span>","<span class=\"code-comment\"> * tokens in documents entering the search index and queries being ran against\n</span>","<span class=\"code-comment\"> * the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * An instance of lunr.Index created with the lunr shortcut will contain a\n</span>","<span class=\"code-comment\"> * pipeline with a stop word filter and an English language stemmer. Extra\n</span>","<span class=\"code-comment\"> * functions can be added before or after either of these functions or these\n</span>","<span class=\"code-comment\"> * default functions can be removed.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * When run the pipeline will call each function in turn, passing a token, the\n</span>","<span class=\"code-comment\"> * index of that token in the original list of all tokens and finally a list of\n</span>","<span class=\"code-comment\"> * all the original tokens.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The output of functions in the pipeline will be passed to the next function\n</span>","<span class=\"code-comment\"> * in the pipeline. To exclude a token from entering the index the function\n</span>","<span class=\"code-comment\"> * should return undefined, the rest of the pipeline will not be called with\n</span>","<span class=\"code-comment\"> * this token.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * For serialisation of pipelines to work, all functions used in an instance of\n</span>","<span class=\"code-comment\"> * a pipeline should be registered with lunr.Pipeline. Registered functions can\n</span>","<span class=\"code-comment\"> * then be loaded. If trying to load a serialised pipeline that uses functions\n</span>","<span class=\"code-comment\"> * that are not registered an error will be thrown.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * If not planning on serialising the pipeline then registering pipeline functions\n</span>","<span class=\"code-comment\"> * is not necessary.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>._stack = []\n","}\n","\n","lunr.Pipeline.registeredFunctions = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A pipeline function maps lunr.Token to lunr.Token. A lunr.Token contains the token\n</span>","<span class=\"code-comment\"> * string as well as all known metadata. A pipeline function can mutate the token string\n</span>","<span class=\"code-comment\"> * or mutate (or add) metadata for a given token.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * A pipeline function can indicate that the passed token should be discarded by returning\n</span>","<span class=\"code-comment\"> * null, undefined or an empty string. This token will not be passed to any downstream pipeline\n</span>","<span class=\"code-comment\"> * functions and will not be added to the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Multiple tokens can be returned by returning an array of tokens. Each token will be passed\n</span>","<span class=\"code-comment\"> * to any downstream pipeline functions and all will returned tokens will be added to the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Any number of pipeline functions may be chained together using a lunr.Pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @interface lunr.PipelineFunction\n</span>","<span class=\"code-comment\"> * @param {lunr.Token} token - A token from the document being processed.\n</span>","<span class=\"code-comment\"> * @param {number} i - The index of this token in the complete list of tokens for this document/field.\n</span>","<span class=\"code-comment\"> * @param {lunr.Token[]} tokens - All tokens for this document/field.\n</span>","<span class=\"code-comment\"> * @returns {(?lunr.Token|lunr.Token[])}\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Register a function with the pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Functions that are used in the pipeline should be registered if the pipeline\n</span>","<span class=\"code-comment\"> * needs to be serialised, or a serialised pipeline needs to be loaded.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Registering a function does not add it to a pipeline, functions must still be\n</span>","<span class=\"code-comment\"> * added to instances of the pipeline for them to be used when running a pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction} fn - The function to check for.\n</span>","<span class=\"code-comment\"> * @param {String} label - The label to register this function with\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.registerFunction = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn, label</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (label <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.registeredFunctions) {\n","    lunr.utils.warn(<span class=\"code-string\">'Overwriting existing registered function: '</span> + label)\n","  }\n","\n","  fn.label = label\n","  lunr.Pipeline.registeredFunctions[fn.label] = fn\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Warns if the function is not registered as a Pipeline function.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction} fn - The function to check for.\n</span>","<span class=\"code-comment\"> * @private\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.warnIfFunctionNotRegistered = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","  <span class=\"code-keyword\">var</span> isRegistered = fn.label &amp;&amp; (fn.label <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.registeredFunctions)\n","\n","  <span class=\"code-keyword\">if</span> (!isRegistered) {\n","    lunr.utils.warn(<span class=\"code-string\">'Function is not registered with pipeline. This may cause problems when serialising the index.\\n'</span>, fn)\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Loads a previously serialised pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * All functions to be loaded must already be registered with lunr.Pipeline.\n</span>","<span class=\"code-comment\"> * If any function from the serialised data has not been registered then an\n</span>","<span class=\"code-comment\"> * error will be thrown.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Object} serialised - The serialised pipeline to load.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Pipeline}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.load = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">serialised</span>) </span>{\n","  <span class=\"code-keyword\">var</span> pipeline = <span class=\"code-keyword\">new</span> lunr.Pipeline\n","\n","  serialised.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fnName</span>) </span>{\n","    <span class=\"code-keyword\">var</span> fn = lunr.Pipeline.registeredFunctions[fnName]\n","\n","    <span class=\"code-keyword\">if</span> (fn) {\n","      pipeline.add(fn)\n","    } <span class=\"code-keyword\">else</span> {\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Cannot load unregistered function: '</span> + fnName)\n","    }\n","  })\n","\n","  <span class=\"code-keyword\">return</span> pipeline\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Adds new functions to the end of the pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Logs a warning if the function has not been registered.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction[]} functions - Any number of functions to add to the pipeline.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.add = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> fns = <span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>)\n","\n","  fns.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","    lunr.Pipeline.warnIfFunctionNotRegistered(fn)\n","    <span class=\"code-keyword\">this</span>._stack.push(fn)\n","  }, <span class=\"code-keyword\">this</span>)\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Adds a single function after a function that already exists in the\n</span>","<span class=\"code-comment\"> * pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Logs a warning if the function has not been registered.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.after = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">existingFn, newFn</span>) </span>{\n","  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)\n","\n","  <span class=\"code-keyword\">var</span> pos = <span class=\"code-keyword\">this</span>._stack.indexOf(existingFn)\n","  <span class=\"code-keyword\">if</span> (pos == <span class=\"code-number\">-1</span>) {\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Cannot find existingFn'</span>)\n","  }\n","\n","  pos = pos + <span class=\"code-number\">1</span>\n","  <span class=\"code-keyword\">this</span>._stack.splice(pos, <span class=\"code-number\">0</span>, newFn)\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Adds a single function before a function that already exists in the\n</span>","<span class=\"code-comment\"> * pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Logs a warning if the function has not been registered.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.before = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">existingFn, newFn</span>) </span>{\n","  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)\n","\n","  <span class=\"code-keyword\">var</span> pos = <span class=\"code-keyword\">this</span>._stack.indexOf(existingFn)\n","  <span class=\"code-keyword\">if</span> (pos == <span class=\"code-number\">-1</span>) {\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>(<span class=\"code-string\">'Cannot find existingFn'</span>)\n","  }\n","\n","  <span class=\"code-keyword\">this</span>._stack.splice(pos, <span class=\"code-number\">0</span>, newFn)\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Removes a function from the pipeline.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.PipelineFunction} fn The function to remove from the pipeline.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.remove = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","  <span class=\"code-keyword\">var</span> pos = <span class=\"code-keyword\">this</span>._stack.indexOf(fn)\n","  <span class=\"code-keyword\">if</span> (pos == <span class=\"code-number\">-1</span>) {\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">this</span>._stack.splice(pos, <span class=\"code-number\">1</span>)\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Runs the current list of functions that make up the pipeline against the\n</span>","<span class=\"code-comment\"> * passed tokens.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Array} tokens The tokens to run through the pipeline.\n</span>","<span class=\"code-comment\"> * @returns {Array}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.run = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">tokens</span>) </span>{\n","  <span class=\"code-keyword\">var</span> stackLength = <span class=\"code-keyword\">this</span>._stack.length\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; stackLength; i++) {\n","    <span class=\"code-keyword\">var</span> fn = <span class=\"code-keyword\">this</span>._stack[i]\n","    <span class=\"code-keyword\">var</span> memo = []\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> j = <span class=\"code-number\">0</span>; j &lt; tokens.length; j++) {\n","      <span class=\"code-keyword\">var</span> result = fn(tokens[j], j, tokens)\n","\n","      <span class=\"code-keyword\">if</span> (result === <span class=\"code-literal\">null</span> || result === <span class=\"code-keyword\">void</span> <span class=\"code-number\">0</span> || result === <span class=\"code-string\">''</span>) <span class=\"code-keyword\">continue</span>\n","\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Array</span>.isArray(result)) {\n","        <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> k = <span class=\"code-number\">0</span>; k &lt; result.length; k++) {\n","          memo.push(result[k])\n","        }\n","      } <span class=\"code-keyword\">else</span> {\n","        memo.push(result)\n","      }\n","    }\n","\n","    tokens = memo\n","  }\n","\n","  <span class=\"code-keyword\">return</span> tokens\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Convenience method for passing a string through a pipeline and getting\n</span>","<span class=\"code-comment\"> * strings out. This method takes care of wrapping the passed string in a\n</span>","<span class=\"code-comment\"> * token and mapping the resulting tokens back to strings.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {string} str - The string to pass through the pipeline.\n</span>","<span class=\"code-comment\"> * @param {?object} metadata - Optional metadata to associate with the token\n</span>","<span class=\"code-comment\"> * passed to the pipeline.\n</span>","<span class=\"code-comment\"> * @returns {string[]}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.runString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">str, metadata</span>) </span>{\n","  <span class=\"code-keyword\">var</span> token = <span class=\"code-keyword\">new</span> lunr.Token (str, metadata)\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.run([token]).map(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">t</span>) </span>{\n","    <span class=\"code-keyword\">return</span> t.toString()\n","  })\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Resets the pipeline by removing any existing processors.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.reset = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>._stack = []\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Returns a representation of the pipeline ready for serialisation.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Logs a warning if the function has not been registered.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {Array}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Pipeline.prototype.toJSON = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>._stack.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","    lunr.Pipeline.warnIfFunctionNotRegistered(fn)\n","\n","    <span class=\"code-keyword\">return</span> fn.label\n","  })\n","}\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.Vector\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A vector is used to construct the vector space of documents and queries. These\n</span>","<span class=\"code-comment\"> * vectors support operations to determine the similarity between two documents or\n</span>","<span class=\"code-comment\"> * a document and a query.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Normally no parameters are required for initializing a vector, but in the case of\n</span>","<span class=\"code-comment\"> * loading a previously dumped vector the raw elements can be provided to the constructor.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * For performance reasons vectors are implemented with a flat array, where an elements\n</span>","<span class=\"code-comment\"> * index is immediately followed by its value. E.g. [index, value, index, value]. This\n</span>","<span class=\"code-comment\"> * allows the underlying array to be as sparse as possible and still offer decent\n</span>","<span class=\"code-comment\"> * performance when being used for vector calculations.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> * @param {Number[]} [elements] - The flat list of element index and element value pairs.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">elements</span>) </span>{\n","  <span class=\"code-keyword\">this</span>._magnitude = <span class=\"code-number\">0</span>\n","  <span class=\"code-keyword\">this</span>.elements = elements || []\n","}\n","\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Calculates the position within the vector to insert a given index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This is used internally by insert and upsert. If there are duplicate indexes then\n</span>","<span class=\"code-comment\"> * the position is returned as if the value for that index were to be updated, but it\n</span>","<span class=\"code-comment\"> * is the callers responsibility to check whether there is a duplicate at that index\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Number} insertIdx - The index at which the element should be inserted.\n</span>","<span class=\"code-comment\"> * @returns {Number}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.positionForIndex = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">index</span>) </span>{\n","  <span class=\"code-comment\">// For an empty vector the tuple can be inserted at the beginning</span>\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.elements.length == <span class=\"code-number\">0</span>) {\n","    <span class=\"code-keyword\">return</span> <span class=\"code-number\">0</span>\n","  }\n","\n","  <span class=\"code-keyword\">var</span> start = <span class=\"code-number\">0</span>,\n","      end = <span class=\"code-keyword\">this</span>.elements.length / <span class=\"code-number\">2</span>,\n","      sliceLength = end - start,\n","      pivotPoint = <span class=\"code-built_in\">Math</span>.floor(sliceLength / <span class=\"code-number\">2</span>),\n","      pivotIndex = <span class=\"code-keyword\">this</span>.elements[pivotPoint * <span class=\"code-number\">2</span>]\n","\n","  <span class=\"code-keyword\">while</span> (sliceLength &gt; <span class=\"code-number\">1</span>) {\n","    <span class=\"code-keyword\">if</span> (pivotIndex &lt; index) {\n","      start = pivotPoint\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (pivotIndex &gt; index) {\n","      end = pivotPoint\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (pivotIndex == index) {\n","      <span class=\"code-keyword\">break</span>\n","    }\n","\n","    sliceLength = end - start\n","    pivotPoint = start + <span class=\"code-built_in\">Math</span>.floor(sliceLength / <span class=\"code-number\">2</span>)\n","    pivotIndex = <span class=\"code-keyword\">this</span>.elements[pivotPoint * <span class=\"code-number\">2</span>]\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (pivotIndex == index) {\n","    <span class=\"code-keyword\">return</span> pivotPoint * <span class=\"code-number\">2</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (pivotIndex &gt; index) {\n","    <span class=\"code-keyword\">return</span> pivotPoint * <span class=\"code-number\">2</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (pivotIndex &lt; index) {\n","    <span class=\"code-keyword\">return</span> (pivotPoint + <span class=\"code-number\">1</span>) * <span class=\"code-number\">2</span>\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Inserts an element at an index within the vector.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Does not allow duplicates, will throw an error if there is already an entry\n</span>","<span class=\"code-comment\"> * for this index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Number} insertIdx - The index at which the element should be inserted.\n</span>","<span class=\"code-comment\"> * @param {Number} val - The value to be inserted into the vector.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.insert = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">insertIdx, val</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.upsert(insertIdx, val, <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-string\">\"duplicate index\"</span>\n","  })\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Inserts or updates an existing index within the vector.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Number} insertIdx - The index at which the element should be inserted.\n</span>","<span class=\"code-comment\"> * @param {Number} val - The value to be inserted into the vector.\n</span>","<span class=\"code-comment\"> * @param {function} fn - A function that is called for updates, the existing value and the\n</span>","<span class=\"code-comment\"> * requested value are passed as arguments\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.upsert = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">insertIdx, val, fn</span>) </span>{\n","  <span class=\"code-keyword\">this</span>._magnitude = <span class=\"code-number\">0</span>\n","  <span class=\"code-keyword\">var</span> position = <span class=\"code-keyword\">this</span>.positionForIndex(insertIdx)\n","\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.elements[position] == insertIdx) {\n","    <span class=\"code-keyword\">this</span>.elements[position + <span class=\"code-number\">1</span>] = fn(<span class=\"code-keyword\">this</span>.elements[position + <span class=\"code-number\">1</span>], val)\n","  } <span class=\"code-keyword\">else</span> {\n","    <span class=\"code-keyword\">this</span>.elements.splice(position, <span class=\"code-number\">0</span>, insertIdx, val)\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Calculates the magnitude of this vector.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {Number}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.magnitude = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>._magnitude) <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>._magnitude\n","\n","  <span class=\"code-keyword\">var</span> sumOfSquares = <span class=\"code-number\">0</span>,\n","      elementsLength = <span class=\"code-keyword\">this</span>.elements.length\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">1</span>; i &lt; elementsLength; i += <span class=\"code-number\">2</span>) {\n","    <span class=\"code-keyword\">var</span> val = <span class=\"code-keyword\">this</span>.elements[i]\n","    sumOfSquares += val * val\n","  }\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>._magnitude = <span class=\"code-built_in\">Math</span>.sqrt(sumOfSquares)\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Calculates the dot product of this vector and another vector.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Vector} otherVector - The vector to compute the dot product with.\n</span>","<span class=\"code-comment\"> * @returns {Number}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.dot = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">otherVector</span>) </span>{\n","  <span class=\"code-keyword\">var</span> dotProduct = <span class=\"code-number\">0</span>,\n","      a = <span class=\"code-keyword\">this</span>.elements, b = otherVector.elements,\n","      aLen = a.length, bLen = b.length,\n","      aVal = <span class=\"code-number\">0</span>, bVal = <span class=\"code-number\">0</span>,\n","      i = <span class=\"code-number\">0</span>, j = <span class=\"code-number\">0</span>\n","\n","  <span class=\"code-keyword\">while</span> (i &lt; aLen &amp;&amp; j &lt; bLen) {\n","    aVal = a[i], bVal = b[j]\n","    <span class=\"code-keyword\">if</span> (aVal &lt; bVal) {\n","      i += <span class=\"code-number\">2</span>\n","    } <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (aVal &gt; bVal) {\n","      j += <span class=\"code-number\">2</span>\n","    } <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (aVal == bVal) {\n","      dotProduct += a[i + <span class=\"code-number\">1</span>] * b[j + <span class=\"code-number\">1</span>]\n","      i += <span class=\"code-number\">2</span>\n","      j += <span class=\"code-number\">2</span>\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">return</span> dotProduct\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Calculates the similarity between this vector and another vector.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Vector} otherVector - The other vector to calculate the\n</span>","<span class=\"code-comment\"> * similarity with.\n</span>","<span class=\"code-comment\"> * @returns {Number}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.similarity = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">otherVector</span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.dot(otherVector) / <span class=\"code-keyword\">this</span>.magnitude() || <span class=\"code-number\">0</span>\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Converts the vector to an array of the elements within the vector.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {Number[]}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.toArray = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> output = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Array</span> (<span class=\"code-keyword\">this</span>.elements.length / <span class=\"code-number\">2</span>)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">1</span>, j = <span class=\"code-number\">0</span>; i &lt; <span class=\"code-keyword\">this</span>.elements.length; i += <span class=\"code-number\">2</span>, j++) {\n","    output[j] = <span class=\"code-keyword\">this</span>.elements[i]\n","  }\n","\n","  <span class=\"code-keyword\">return</span> output\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A JSON serializable representation of the vector.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {Number[]}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Vector.prototype.toJSON = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.elements\n","}\n","<span class=\"code-comment\">/* eslint-disable */</span>\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.stemmer\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * lunr.stemmer is an english language stemmer, this is a JavaScript\n</span>","<span class=\"code-comment\"> * implementation of the PorterStemmer taken from http://tartarus.org/~martin\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @static\n</span>","<span class=\"code-comment\"> * @implements {lunr.PipelineFunction}\n</span>","<span class=\"code-comment\"> * @param {lunr.Token} token - The string to stem\n</span>","<span class=\"code-comment\"> * @returns {lunr.Token}\n</span>","<span class=\"code-comment\"> * @see {@link lunr.Pipeline}\n</span>","<span class=\"code-comment\"> * @function\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.stemmer = (<span class=\"code-function\"><span class=\"code-keyword\">function</span>(<span class=\"code-params\"></span>)</span>{\n","  <span class=\"code-keyword\">var</span> step2list = {\n","      <span class=\"code-string\">\"ational\"</span> : <span class=\"code-string\">\"ate\"</span>,\n","      <span class=\"code-string\">\"tional\"</span> : <span class=\"code-string\">\"tion\"</span>,\n","      <span class=\"code-string\">\"enci\"</span> : <span class=\"code-string\">\"ence\"</span>,\n","      <span class=\"code-string\">\"anci\"</span> : <span class=\"code-string\">\"ance\"</span>,\n","      <span class=\"code-string\">\"izer\"</span> : <span class=\"code-string\">\"ize\"</span>,\n","      <span class=\"code-string\">\"bli\"</span> : <span class=\"code-string\">\"ble\"</span>,\n","      <span class=\"code-string\">\"alli\"</span> : <span class=\"code-string\">\"al\"</span>,\n","      <span class=\"code-string\">\"entli\"</span> : <span class=\"code-string\">\"ent\"</span>,\n","      <span class=\"code-string\">\"eli\"</span> : <span class=\"code-string\">\"e\"</span>,\n","      <span class=\"code-string\">\"ousli\"</span> : <span class=\"code-string\">\"ous\"</span>,\n","      <span class=\"code-string\">\"ization\"</span> : <span class=\"code-string\">\"ize\"</span>,\n","      <span class=\"code-string\">\"ation\"</span> : <span class=\"code-string\">\"ate\"</span>,\n","      <span class=\"code-string\">\"ator\"</span> : <span class=\"code-string\">\"ate\"</span>,\n","      <span class=\"code-string\">\"alism\"</span> : <span class=\"code-string\">\"al\"</span>,\n","      <span class=\"code-string\">\"iveness\"</span> : <span class=\"code-string\">\"ive\"</span>,\n","      <span class=\"code-string\">\"fulness\"</span> : <span class=\"code-string\">\"ful\"</span>,\n","      <span class=\"code-string\">\"ousness\"</span> : <span class=\"code-string\">\"ous\"</span>,\n","      <span class=\"code-string\">\"aliti\"</span> : <span class=\"code-string\">\"al\"</span>,\n","      <span class=\"code-string\">\"iviti\"</span> : <span class=\"code-string\">\"ive\"</span>,\n","      <span class=\"code-string\">\"biliti\"</span> : <span class=\"code-string\">\"ble\"</span>,\n","      <span class=\"code-string\">\"logi\"</span> : <span class=\"code-string\">\"log\"</span>\n","    },\n","\n","    step3list = {\n","      <span class=\"code-string\">\"icate\"</span> : <span class=\"code-string\">\"ic\"</span>,\n","      <span class=\"code-string\">\"ative\"</span> : <span class=\"code-string\">\"\"</span>,\n","      <span class=\"code-string\">\"alize\"</span> : <span class=\"code-string\">\"al\"</span>,\n","      <span class=\"code-string\">\"iciti\"</span> : <span class=\"code-string\">\"ic\"</span>,\n","      <span class=\"code-string\">\"ical\"</span> : <span class=\"code-string\">\"ic\"</span>,\n","      <span class=\"code-string\">\"ful\"</span> : <span class=\"code-string\">\"\"</span>,\n","      <span class=\"code-string\">\"ness\"</span> : <span class=\"code-string\">\"\"</span>\n","    },\n","\n","    c = <span class=\"code-string\">\"[^aeiou]\"</span>,          <span class=\"code-comment\">// consonant</span>\n","    v = <span class=\"code-string\">\"[aeiouy]\"</span>,          <span class=\"code-comment\">// vowel</span>\n","    C = c + <span class=\"code-string\">\"[^aeiouy]*\"</span>,    <span class=\"code-comment\">// consonant sequence</span>\n","    V = v + <span class=\"code-string\">\"[aeiou]*\"</span>,      <span class=\"code-comment\">// vowel sequence</span>\n","\n","    mgr0 = <span class=\"code-string\">\"^(\"</span> + C + <span class=\"code-string\">\")?\"</span> + V + C,               <span class=\"code-comment\">// [C]VC... is m&gt;0</span>\n","    meq1 = <span class=\"code-string\">\"^(\"</span> + C + <span class=\"code-string\">\")?\"</span> + V + C + <span class=\"code-string\">\"(\"</span> + V + <span class=\"code-string\">\")?$\"</span>,  <span class=\"code-comment\">// [C]VC[V] is m=1</span>\n","    mgr1 = <span class=\"code-string\">\"^(\"</span> + C + <span class=\"code-string\">\")?\"</span> + V + C + V + C,       <span class=\"code-comment\">// [C]VCVC... is m&gt;1</span>\n","    s_v = <span class=\"code-string\">\"^(\"</span> + C + <span class=\"code-string\">\")?\"</span> + v;                   <span class=\"code-comment\">// vowel in stem</span>\n","\n","  <span class=\"code-keyword\">var</span> re_mgr0 = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(mgr0);\n","  <span class=\"code-keyword\">var</span> re_mgr1 = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(mgr1);\n","  <span class=\"code-keyword\">var</span> re_meq1 = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(meq1);\n","  <span class=\"code-keyword\">var</span> re_s_v = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(s_v);\n","\n","  <span class=\"code-keyword\">var</span> re_1a = <span class=\"code-regexp\">/^(.+?)(ss|i)es$/</span>;\n","  <span class=\"code-keyword\">var</span> re2_1a = <span class=\"code-regexp\">/^(.+?)([^s])s$/</span>;\n","  <span class=\"code-keyword\">var</span> re_1b = <span class=\"code-regexp\">/^(.+?)eed$/</span>;\n","  <span class=\"code-keyword\">var</span> re2_1b = <span class=\"code-regexp\">/^(.+?)(ed|ing)$/</span>;\n","  <span class=\"code-keyword\">var</span> re_1b_2 = <span class=\"code-regexp\">/.$/</span>;\n","  <span class=\"code-keyword\">var</span> re2_1b_2 = <span class=\"code-regexp\">/(at|bl|iz)$/</span>;\n","  <span class=\"code-keyword\">var</span> re3_1b_2 = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(<span class=\"code-string\">\"([^aeiouylsz])\\\\1$\"</span>);\n","  <span class=\"code-keyword\">var</span> re4_1b_2 = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(<span class=\"code-string\">\"^\"</span> + C + v + <span class=\"code-string\">\"[^aeiouwxy]$\"</span>);\n","\n","  <span class=\"code-keyword\">var</span> re_1c = <span class=\"code-regexp\">/^(.+?[^aeiou])y$/</span>;\n","  <span class=\"code-keyword\">var</span> re_2 = <span class=\"code-regexp\">/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/</span>;\n","\n","  <span class=\"code-keyword\">var</span> re_3 = <span class=\"code-regexp\">/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/</span>;\n","\n","  <span class=\"code-keyword\">var</span> re_4 = <span class=\"code-regexp\">/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/</span>;\n","  <span class=\"code-keyword\">var</span> re2_4 = <span class=\"code-regexp\">/^(.+?)(s|t)(ion)$/</span>;\n","\n","  <span class=\"code-keyword\">var</span> re_5 = <span class=\"code-regexp\">/^(.+?)e$/</span>;\n","  <span class=\"code-keyword\">var</span> re_5_1 = <span class=\"code-regexp\">/ll$/</span>;\n","  <span class=\"code-keyword\">var</span> re3_5 = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RegExp</span>(<span class=\"code-string\">\"^\"</span> + C + v + <span class=\"code-string\">\"[^aeiouwxy]$\"</span>);\n","\n","  <span class=\"code-keyword\">var</span> porterStemmer = <span class=\"code-function\"><span class=\"code-keyword\">function</span> <span class=\"code-title\">porterStemmer</span>(<span class=\"code-params\">w</span>) </span>{\n","    <span class=\"code-keyword\">var</span> stem,\n","      suffix,\n","      firstch,\n","      re,\n","      re2,\n","      re3,\n","      re4;\n","\n","    <span class=\"code-keyword\">if</span> (w.length &lt; <span class=\"code-number\">3</span>) { <span class=\"code-keyword\">return</span> w; }\n","\n","    firstch = w.substr(<span class=\"code-number\">0</span>,<span class=\"code-number\">1</span>);\n","    <span class=\"code-keyword\">if</span> (firstch == <span class=\"code-string\">\"y\"</span>) {\n","      w = firstch.toUpperCase() + w.substr(<span class=\"code-number\">1</span>);\n","    }\n","\n","    <span class=\"code-comment\">// Step 1a</span>\n","    re = re_1a\n","    re2 = re2_1a;\n","\n","    <span class=\"code-keyword\">if</span> (re.test(w)) { w = w.replace(re,<span class=\"code-string\">\"$1$2\"</span>); }\n","    <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (re2.test(w)) { w = w.replace(re2,<span class=\"code-string\">\"$1$2\"</span>); }\n","\n","    <span class=\"code-comment\">// Step 1b</span>\n","    re = re_1b;\n","    re2 = re2_1b;\n","    <span class=\"code-keyword\">if</span> (re.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re.exec(w);\n","      re = re_mgr0;\n","      <span class=\"code-keyword\">if</span> (re.test(fp[<span class=\"code-number\">1</span>])) {\n","        re = re_1b_2;\n","        w = w.replace(re,<span class=\"code-string\">\"\"</span>);\n","      }\n","    } <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (re2.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re2.exec(w);\n","      stem = fp[<span class=\"code-number\">1</span>];\n","      re2 = re_s_v;\n","      <span class=\"code-keyword\">if</span> (re2.test(stem)) {\n","        w = stem;\n","        re2 = re2_1b_2;\n","        re3 = re3_1b_2;\n","        re4 = re4_1b_2;\n","        <span class=\"code-keyword\">if</span> (re2.test(w)) { w = w + <span class=\"code-string\">\"e\"</span>; }\n","        <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (re3.test(w)) { re = re_1b_2; w = w.replace(re,<span class=\"code-string\">\"\"</span>); }\n","        <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (re4.test(w)) { w = w + <span class=\"code-string\">\"e\"</span>; }\n","      }\n","    }\n","\n","    <span class=\"code-comment\">// Step 1c - replace suffix y or Y by i if preceded by a non-vowel which is not the first letter of the word (so cry -&gt; cri, by -&gt; by, say -&gt; say)</span>\n","    re = re_1c;\n","    <span class=\"code-keyword\">if</span> (re.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re.exec(w);\n","      stem = fp[<span class=\"code-number\">1</span>];\n","      w = stem + <span class=\"code-string\">\"i\"</span>;\n","    }\n","\n","    <span class=\"code-comment\">// Step 2</span>\n","    re = re_2;\n","    <span class=\"code-keyword\">if</span> (re.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re.exec(w);\n","      stem = fp[<span class=\"code-number\">1</span>];\n","      suffix = fp[<span class=\"code-number\">2</span>];\n","      re = re_mgr0;\n","      <span class=\"code-keyword\">if</span> (re.test(stem)) {\n","        w = stem + step2list[suffix];\n","      }\n","    }\n","\n","    <span class=\"code-comment\">// Step 3</span>\n","    re = re_3;\n","    <span class=\"code-keyword\">if</span> (re.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re.exec(w);\n","      stem = fp[<span class=\"code-number\">1</span>];\n","      suffix = fp[<span class=\"code-number\">2</span>];\n","      re = re_mgr0;\n","      <span class=\"code-keyword\">if</span> (re.test(stem)) {\n","        w = stem + step3list[suffix];\n","      }\n","    }\n","\n","    <span class=\"code-comment\">// Step 4</span>\n","    re = re_4;\n","    re2 = re2_4;\n","    <span class=\"code-keyword\">if</span> (re.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re.exec(w);\n","      stem = fp[<span class=\"code-number\">1</span>];\n","      re = re_mgr1;\n","      <span class=\"code-keyword\">if</span> (re.test(stem)) {\n","        w = stem;\n","      }\n","    } <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (re2.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re2.exec(w);\n","      stem = fp[<span class=\"code-number\">1</span>] + fp[<span class=\"code-number\">2</span>];\n","      re2 = re_mgr1;\n","      <span class=\"code-keyword\">if</span> (re2.test(stem)) {\n","        w = stem;\n","      }\n","    }\n","\n","    <span class=\"code-comment\">// Step 5</span>\n","    re = re_5;\n","    <span class=\"code-keyword\">if</span> (re.test(w)) {\n","      <span class=\"code-keyword\">var</span> fp = re.exec(w);\n","      stem = fp[<span class=\"code-number\">1</span>];\n","      re = re_mgr1;\n","      re2 = re_meq1;\n","      re3 = re3_5;\n","      <span class=\"code-keyword\">if</span> (re.test(stem) || (re2.test(stem) &amp;&amp; !(re3.test(stem)))) {\n","        w = stem;\n","      }\n","    }\n","\n","    re = re_5_1;\n","    re2 = re_mgr1;\n","    <span class=\"code-keyword\">if</span> (re.test(w) &amp;&amp; re2.test(w)) {\n","      re = re_1b_2;\n","      w = w.replace(re,<span class=\"code-string\">\"\"</span>);\n","    }\n","\n","    <span class=\"code-comment\">// and turn initial Y back to y</span>\n","\n","    <span class=\"code-keyword\">if</span> (firstch == <span class=\"code-string\">\"y\"</span>) {\n","      w = firstch.toLowerCase() + w.substr(<span class=\"code-number\">1</span>);\n","    }\n","\n","    <span class=\"code-keyword\">return</span> w;\n","  };\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">token</span>) </span>{\n","    <span class=\"code-keyword\">return</span> token.update(porterStemmer);\n","  }\n","})();\n","\n","lunr.Pipeline.registerFunction(lunr.stemmer, <span class=\"code-string\">'stemmer'</span>)\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.stopWordFilter\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * lunr.generateStopWordFilter builds a stopWordFilter function from the provided\n</span>","<span class=\"code-comment\"> * list of stop words.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The built in lunr.stopWordFilter is built using this generator and can be used\n</span>","<span class=\"code-comment\"> * to generate custom stopWordFilters for applications or non English languages.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @function\n</span>","<span class=\"code-comment\"> * @param {Array} token The token to pass through the filter\n</span>","<span class=\"code-comment\"> * @returns {lunr.PipelineFunction}\n</span>","<span class=\"code-comment\"> * @see lunr.Pipeline\n</span>","<span class=\"code-comment\"> * @see lunr.stopWordFilter\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.generateStopWordFilter = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">stopWords</span>) </span>{\n","  <span class=\"code-keyword\">var</span> words = stopWords.reduce(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">memo, stopWord</span>) </span>{\n","    memo[stopWord] = stopWord\n","    <span class=\"code-keyword\">return</span> memo\n","  }, {})\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">token</span>) </span>{\n","    <span class=\"code-keyword\">if</span> (token &amp;&amp; words[token.toString()] !== token.toString()) <span class=\"code-keyword\">return</span> token\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * lunr.stopWordFilter is an English language stop word list filter, any words\n</span>","<span class=\"code-comment\"> * contained in the list will not be passed through the filter.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This is intended to be used in the Pipeline. If the token does not pass the\n</span>","<span class=\"code-comment\"> * filter then undefined will be returned.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @function\n</span>","<span class=\"code-comment\"> * @implements {lunr.PipelineFunction}\n</span>","<span class=\"code-comment\"> * @params {lunr.Token} token - A token to check for being a stop word.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Token}\n</span>","<span class=\"code-comment\"> * @see {@link lunr.Pipeline}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.stopWordFilter = lunr.generateStopWordFilter([\n","  <span class=\"code-string\">'a'</span>,\n","  <span class=\"code-string\">'able'</span>,\n","  <span class=\"code-string\">'about'</span>,\n","  <span class=\"code-string\">'across'</span>,\n","  <span class=\"code-string\">'after'</span>,\n","  <span class=\"code-string\">'all'</span>,\n","  <span class=\"code-string\">'almost'</span>,\n","  <span class=\"code-string\">'also'</span>,\n","  <span class=\"code-string\">'am'</span>,\n","  <span class=\"code-string\">'among'</span>,\n","  <span class=\"code-string\">'an'</span>,\n","  <span class=\"code-string\">'and'</span>,\n","  <span class=\"code-string\">'any'</span>,\n","  <span class=\"code-string\">'are'</span>,\n","  <span class=\"code-string\">'as'</span>,\n","  <span class=\"code-string\">'at'</span>,\n","  <span class=\"code-string\">'be'</span>,\n","  <span class=\"code-string\">'because'</span>,\n","  <span class=\"code-string\">'been'</span>,\n","  <span class=\"code-string\">'but'</span>,\n","  <span class=\"code-string\">'by'</span>,\n","  <span class=\"code-string\">'can'</span>,\n","  <span class=\"code-string\">'cannot'</span>,\n","  <span class=\"code-string\">'could'</span>,\n","  <span class=\"code-string\">'dear'</span>,\n","  <span class=\"code-string\">'did'</span>,\n","  <span class=\"code-string\">'do'</span>,\n","  <span class=\"code-string\">'does'</span>,\n","  <span class=\"code-string\">'either'</span>,\n","  <span class=\"code-string\">'else'</span>,\n","  <span class=\"code-string\">'ever'</span>,\n","  <span class=\"code-string\">'every'</span>,\n","  <span class=\"code-string\">'for'</span>,\n","  <span class=\"code-string\">'from'</span>,\n","  <span class=\"code-string\">'get'</span>,\n","  <span class=\"code-string\">'got'</span>,\n","  <span class=\"code-string\">'had'</span>,\n","  <span class=\"code-string\">'has'</span>,\n","  <span class=\"code-string\">'have'</span>,\n","  <span class=\"code-string\">'he'</span>,\n","  <span class=\"code-string\">'her'</span>,\n","  <span class=\"code-string\">'hers'</span>,\n","  <span class=\"code-string\">'him'</span>,\n","  <span class=\"code-string\">'his'</span>,\n","  <span class=\"code-string\">'how'</span>,\n","  <span class=\"code-string\">'however'</span>,\n","  <span class=\"code-string\">'i'</span>,\n","  <span class=\"code-string\">'if'</span>,\n","  <span class=\"code-string\">'in'</span>,\n","  <span class=\"code-string\">'into'</span>,\n","  <span class=\"code-string\">'is'</span>,\n","  <span class=\"code-string\">'it'</span>,\n","  <span class=\"code-string\">'its'</span>,\n","  <span class=\"code-string\">'just'</span>,\n","  <span class=\"code-string\">'least'</span>,\n","  <span class=\"code-string\">'let'</span>,\n","  <span class=\"code-string\">'like'</span>,\n","  <span class=\"code-string\">'likely'</span>,\n","  <span class=\"code-string\">'may'</span>,\n","  <span class=\"code-string\">'me'</span>,\n","  <span class=\"code-string\">'might'</span>,\n","  <span class=\"code-string\">'most'</span>,\n","  <span class=\"code-string\">'must'</span>,\n","  <span class=\"code-string\">'my'</span>,\n","  <span class=\"code-string\">'neither'</span>,\n","  <span class=\"code-string\">'no'</span>,\n","  <span class=\"code-string\">'nor'</span>,\n","  <span class=\"code-string\">'not'</span>,\n","  <span class=\"code-string\">'of'</span>,\n","  <span class=\"code-string\">'off'</span>,\n","  <span class=\"code-string\">'often'</span>,\n","  <span class=\"code-string\">'on'</span>,\n","  <span class=\"code-string\">'only'</span>,\n","  <span class=\"code-string\">'or'</span>,\n","  <span class=\"code-string\">'other'</span>,\n","  <span class=\"code-string\">'our'</span>,\n","  <span class=\"code-string\">'own'</span>,\n","  <span class=\"code-string\">'rather'</span>,\n","  <span class=\"code-string\">'said'</span>,\n","  <span class=\"code-string\">'say'</span>,\n","  <span class=\"code-string\">'says'</span>,\n","  <span class=\"code-string\">'she'</span>,\n","  <span class=\"code-string\">'should'</span>,\n","  <span class=\"code-string\">'since'</span>,\n","  <span class=\"code-string\">'so'</span>,\n","  <span class=\"code-string\">'some'</span>,\n","  <span class=\"code-string\">'than'</span>,\n","  <span class=\"code-string\">'that'</span>,\n","  <span class=\"code-string\">'the'</span>,\n","  <span class=\"code-string\">'their'</span>,\n","  <span class=\"code-string\">'them'</span>,\n","  <span class=\"code-string\">'then'</span>,\n","  <span class=\"code-string\">'there'</span>,\n","  <span class=\"code-string\">'these'</span>,\n","  <span class=\"code-string\">'they'</span>,\n","  <span class=\"code-string\">'this'</span>,\n","  <span class=\"code-string\">'tis'</span>,\n","  <span class=\"code-string\">'to'</span>,\n","  <span class=\"code-string\">'too'</span>,\n","  <span class=\"code-string\">'twas'</span>,\n","  <span class=\"code-string\">'us'</span>,\n","  <span class=\"code-string\">'wants'</span>,\n","  <span class=\"code-string\">'was'</span>,\n","  <span class=\"code-string\">'we'</span>,\n","  <span class=\"code-string\">'were'</span>,\n","  <span class=\"code-string\">'what'</span>,\n","  <span class=\"code-string\">'when'</span>,\n","  <span class=\"code-string\">'where'</span>,\n","  <span class=\"code-string\">'which'</span>,\n","  <span class=\"code-string\">'while'</span>,\n","  <span class=\"code-string\">'who'</span>,\n","  <span class=\"code-string\">'whom'</span>,\n","  <span class=\"code-string\">'why'</span>,\n","  <span class=\"code-string\">'will'</span>,\n","  <span class=\"code-string\">'with'</span>,\n","  <span class=\"code-string\">'would'</span>,\n","  <span class=\"code-string\">'yet'</span>,\n","  <span class=\"code-string\">'you'</span>,\n","  <span class=\"code-string\">'your'</span>\n","])\n","\n","lunr.Pipeline.registerFunction(lunr.stopWordFilter, <span class=\"code-string\">'stopWordFilter'</span>)\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.trimmer\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * lunr.trimmer is a pipeline function for trimming non word\n</span>","<span class=\"code-comment\"> * characters from the beginning and end of tokens before they\n</span>","<span class=\"code-comment\"> * enter the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This implementation may not work correctly for non latin\n</span>","<span class=\"code-comment\"> * characters and should either be removed or adapted for use\n</span>","<span class=\"code-comment\"> * with languages with non-latin characters.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @static\n</span>","<span class=\"code-comment\"> * @implements {lunr.PipelineFunction}\n</span>","<span class=\"code-comment\"> * @param {lunr.Token} token The token to pass through the filter\n</span>","<span class=\"code-comment\"> * @returns {lunr.Token}\n</span>","<span class=\"code-comment\"> * @see lunr.Pipeline\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.trimmer = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">token</span>) </span>{\n","  <span class=\"code-keyword\">return</span> token.update(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">s</span>) </span>{\n","    <span class=\"code-keyword\">return</span> s.replace(<span class=\"code-regexp\">/^\\W+/</span>, <span class=\"code-string\">''</span>).replace(<span class=\"code-regexp\">/\\W+$/</span>, <span class=\"code-string\">''</span>)\n","  })\n","}\n","\n","lunr.Pipeline.registerFunction(lunr.trimmer, <span class=\"code-string\">'trimmer'</span>)\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.TokenSet\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A token set is used to store the unique list of all tokens\n</span>","<span class=\"code-comment\"> * within an index. Token sets are also used to represent an\n</span>","<span class=\"code-comment\"> * incoming query to the index, this query token set and index\n</span>","<span class=\"code-comment\"> * token set are then intersected to find which tokens to look\n</span>","<span class=\"code-comment\"> * up in the inverted index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * A token set can hold multiple tokens, as in the case of the\n</span>","<span class=\"code-comment\"> * index token set, or it can hold a single token as in the\n</span>","<span class=\"code-comment\"> * case of a simple query token set.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Additionally token sets are used to perform wildcard matching.\n</span>","<span class=\"code-comment\"> * Leading, contained and trailing wildcards are supported, and\n</span>","<span class=\"code-comment\"> * from this edit distance matching can also be provided.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Token sets are implemented as a minimal finite state automata,\n</span>","<span class=\"code-comment\"> * where both common prefixes and suffixes are shared between tokens.\n</span>","<span class=\"code-comment\"> * This helps to reduce the space used for storing the token set.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.final = <span class=\"code-literal\">false</span>\n","  <span class=\"code-keyword\">this</span>.edges = {}\n","  <span class=\"code-keyword\">this</span>.id = lunr.TokenSet._nextId\n","  lunr.TokenSet._nextId += <span class=\"code-number\">1</span>\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Keeps track of the next, auto increment, identifier to assign\n</span>","<span class=\"code-comment\"> * to a new tokenSet.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * TokenSets require a unique identifier to be correctly minimised.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @private\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet._nextId = <span class=\"code-number\">1</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Creates a TokenSet instance from the given sorted array of words.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {String[]} arr - A sorted array of strings to create the set from.\n</span>","<span class=\"code-comment\"> * @returns {lunr.TokenSet}\n</span>","<span class=\"code-comment\"> * @throws Will throw an error if the input array is not sorted.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet.fromArray = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">arr</span>) </span>{\n","  <span class=\"code-keyword\">var</span> builder = <span class=\"code-keyword\">new</span> lunr.TokenSet.Builder\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>, len = arr.length; i &lt; len; i++) {\n","    builder.insert(arr[i])\n","  }\n","\n","  builder.finish()\n","  <span class=\"code-keyword\">return</span> builder.root\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Creates a token set from a query clause.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @private\n</span>","<span class=\"code-comment\"> * @param {Object} clause - A single clause from lunr.Query.\n</span>","<span class=\"code-comment\"> * @param {string} clause.term - The query clause term.\n</span>","<span class=\"code-comment\"> * @param {number} [clause.editDistance] - The optional edit distance for the term.\n</span>","<span class=\"code-comment\"> * @returns {lunr.TokenSet}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet.fromClause = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">clause</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-string\">'editDistance'</span> <span class=\"code-keyword\">in</span> clause) {\n","    <span class=\"code-keyword\">return</span> lunr.TokenSet.fromFuzzyString(clause.term, clause.editDistance)\n","  } <span class=\"code-keyword\">else</span> {\n","    <span class=\"code-keyword\">return</span> lunr.TokenSet.fromString(clause.term)\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Creates a token set representing a single string with a specified\n</span>","<span class=\"code-comment\"> * edit distance.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Insertions, deletions, substitutions and transpositions are each\n</span>","<span class=\"code-comment\"> * treated as an edit distance of 1.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Increasing the allowed edit distance will have a dramatic impact\n</span>","<span class=\"code-comment\"> * on the performance of both creating and intersecting these TokenSets.\n</span>","<span class=\"code-comment\"> * It is advised to keep the edit distance less than 3.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {string} str - The string to create the token set from.\n</span>","<span class=\"code-comment\"> * @param {number} editDistance - The allowed edit distance to match.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Vector}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet.fromFuzzyString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">str, editDistance</span>) </span>{\n","  <span class=\"code-keyword\">var</span> root = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","\n","  <span class=\"code-keyword\">var</span> stack = [{\n","    node: root,\n","    editsRemaining: editDistance,\n","    str: str\n","  }]\n","\n","  <span class=\"code-keyword\">while</span> (stack.length) {\n","    <span class=\"code-keyword\">var</span> frame = stack.pop()\n","\n","    <span class=\"code-comment\">// no edit</span>\n","    <span class=\"code-keyword\">if</span> (frame.str.length &gt; <span class=\"code-number\">0</span>) {\n","      <span class=\"code-keyword\">var</span> char = frame.str.charAt(<span class=\"code-number\">0</span>),\n","          noEditNode\n","\n","      <span class=\"code-keyword\">if</span> (char <span class=\"code-keyword\">in</span> frame.node.edges) {\n","        noEditNode = frame.node.edges[char]\n","      } <span class=\"code-keyword\">else</span> {\n","        noEditNode = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","        frame.node.edges[char] = noEditNode\n","      }\n","\n","      <span class=\"code-keyword\">if</span> (frame.str.length == <span class=\"code-number\">1</span>) {\n","        noEditNode.final = <span class=\"code-literal\">true</span>\n","      }\n","\n","      stack.push({\n","        node: noEditNode,\n","        editsRemaining: frame.editsRemaining,\n","        str: frame.str.slice(<span class=\"code-number\">1</span>)\n","      })\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (frame.editsRemaining == <span class=\"code-number\">0</span>) {\n","      <span class=\"code-keyword\">continue</span>\n","    }\n","\n","    <span class=\"code-comment\">// insertion</span>\n","    <span class=\"code-keyword\">if</span> (<span class=\"code-string\">\"*\"</span> <span class=\"code-keyword\">in</span> frame.node.edges) {\n","      <span class=\"code-keyword\">var</span> insertionNode = frame.node.edges[<span class=\"code-string\">\"*\"</span>]\n","    } <span class=\"code-keyword\">else</span> {\n","      <span class=\"code-keyword\">var</span> insertionNode = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","      frame.node.edges[<span class=\"code-string\">\"*\"</span>] = insertionNode\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (frame.str.length == <span class=\"code-number\">0</span>) {\n","      insertionNode.final = <span class=\"code-literal\">true</span>\n","    }\n","\n","    stack.push({\n","      node: insertionNode,\n","      editsRemaining: frame.editsRemaining - <span class=\"code-number\">1</span>,\n","      str: frame.str\n","    })\n","\n","    <span class=\"code-comment\">// deletion</span>\n","    <span class=\"code-comment\">// can only do a deletion if we have enough edits remaining</span>\n","    <span class=\"code-comment\">// and if there are characters left to delete in the string</span>\n","    <span class=\"code-keyword\">if</span> (frame.str.length &gt; <span class=\"code-number\">1</span>) {\n","      stack.push({\n","        node: frame.node,\n","        editsRemaining: frame.editsRemaining - <span class=\"code-number\">1</span>,\n","        str: frame.str.slice(<span class=\"code-number\">1</span>)\n","      })\n","    }\n","\n","    <span class=\"code-comment\">// deletion</span>\n","    <span class=\"code-comment\">// just removing the last character from the str</span>\n","    <span class=\"code-keyword\">if</span> (frame.str.length == <span class=\"code-number\">1</span>) {\n","      frame.node.final = <span class=\"code-literal\">true</span>\n","    }\n","\n","    <span class=\"code-comment\">// substitution</span>\n","    <span class=\"code-comment\">// can only do a substitution if we have enough edits remaining</span>\n","    <span class=\"code-comment\">// and if there are characters left to substitute</span>\n","    <span class=\"code-keyword\">if</span> (frame.str.length &gt;= <span class=\"code-number\">1</span>) {\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-string\">\"*\"</span> <span class=\"code-keyword\">in</span> frame.node.edges) {\n","        <span class=\"code-keyword\">var</span> substitutionNode = frame.node.edges[<span class=\"code-string\">\"*\"</span>]\n","      } <span class=\"code-keyword\">else</span> {\n","        <span class=\"code-keyword\">var</span> substitutionNode = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","        frame.node.edges[<span class=\"code-string\">\"*\"</span>] = substitutionNode\n","      }\n","\n","      <span class=\"code-keyword\">if</span> (frame.str.length == <span class=\"code-number\">1</span>) {\n","        substitutionNode.final = <span class=\"code-literal\">true</span>\n","      }\n","\n","      stack.push({\n","        node: substitutionNode,\n","        editsRemaining: frame.editsRemaining - <span class=\"code-number\">1</span>,\n","        str: frame.str.slice(<span class=\"code-number\">1</span>)\n","      })\n","    }\n","\n","    <span class=\"code-comment\">// transposition</span>\n","    <span class=\"code-comment\">// can only do a transposition if there are edits remaining</span>\n","    <span class=\"code-comment\">// and there are enough characters to transpose</span>\n","    <span class=\"code-keyword\">if</span> (frame.str.length &gt; <span class=\"code-number\">1</span>) {\n","      <span class=\"code-keyword\">var</span> charA = frame.str.charAt(<span class=\"code-number\">0</span>),\n","          charB = frame.str.charAt(<span class=\"code-number\">1</span>),\n","          transposeNode\n","\n","      <span class=\"code-keyword\">if</span> (charB <span class=\"code-keyword\">in</span> frame.node.edges) {\n","        transposeNode = frame.node.edges[charB]\n","      } <span class=\"code-keyword\">else</span> {\n","        transposeNode = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","        frame.node.edges[charB] = transposeNode\n","      }\n","\n","      <span class=\"code-keyword\">if</span> (frame.str.length == <span class=\"code-number\">1</span>) {\n","        transposeNode.final = <span class=\"code-literal\">true</span>\n","      }\n","\n","      stack.push({\n","        node: transposeNode,\n","        editsRemaining: frame.editsRemaining - <span class=\"code-number\">1</span>,\n","        str: charA + frame.str.slice(<span class=\"code-number\">2</span>)\n","      })\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">return</span> root\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Creates a TokenSet from a string.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The string may contain one or more wildcard characters (*)\n</span>","<span class=\"code-comment\"> * that will allow wildcard matching when intersecting with\n</span>","<span class=\"code-comment\"> * another TokenSet.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {string} str - The string to create a TokenSet from.\n</span>","<span class=\"code-comment\"> * @returns {lunr.TokenSet}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet.fromString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">str</span>) </span>{\n","  <span class=\"code-keyword\">var</span> node = <span class=\"code-keyword\">new</span> lunr.TokenSet,\n","      root = node\n","\n","  <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">   * Iterates through all characters within the passed string\n</span>","<span class=\"code-comment\">   * appending a node for each character.\n</span>","<span class=\"code-comment\">   *\n</span>","<span class=\"code-comment\">   * When a wildcard character is found then a self\n</span>","<span class=\"code-comment\">   * referencing edge is introduced to continually match\n</span>","<span class=\"code-comment\">   * any number of any characters.\n</span>","<span class=\"code-comment\">   */</span>\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>, len = str.length; i &lt; len; i++) {\n","    <span class=\"code-keyword\">var</span> char = str[i],\n","        final = (i == len - <span class=\"code-number\">1</span>)\n","\n","    <span class=\"code-keyword\">if</span> (char == <span class=\"code-string\">\"*\"</span>) {\n","      node.edges[char] = node\n","      node.final = final\n","\n","    } <span class=\"code-keyword\">else</span> {\n","      <span class=\"code-keyword\">var</span> next = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","      next.final = final\n","\n","      node.edges[char] = next\n","      node = next\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">return</span> root\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Converts this TokenSet into an array of strings\n</span>","<span class=\"code-comment\"> * contained within the TokenSet.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This is not intended to be used on a TokenSet that\n</span>","<span class=\"code-comment\"> * contains wildcards, in these cases the results are\n</span>","<span class=\"code-comment\"> * undefined and are likely to cause an infinite loop.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {string[]}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet.prototype.toArray = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> words = []\n","\n","  <span class=\"code-keyword\">var</span> stack = [{\n","    prefix: <span class=\"code-string\">\"\"</span>,\n","    node: <span class=\"code-keyword\">this</span>\n","  }]\n","\n","  <span class=\"code-keyword\">while</span> (stack.length) {\n","    <span class=\"code-keyword\">var</span> frame = stack.pop(),\n","        edges = <span class=\"code-built_in\">Object</span>.keys(frame.node.edges),\n","        len = edges.length\n","\n","    <span class=\"code-keyword\">if</span> (frame.node.final) {\n","      <span class=\"code-comment\">/* In Safari, at this point the prefix is sometimes corrupted, see:\n</span>","<span class=\"code-comment\">       * https://github.com/olivernn/lunr.js/issues/279 Calling any\n</span>","<span class=\"code-comment\">       * String.prototype method forces Safari to \"cast\" this string to what\n</span>","<span class=\"code-comment\">       * it's supposed to be, fixing the bug. */</span>\n","      frame.prefix.charAt(<span class=\"code-number\">0</span>)\n","      words.push(frame.prefix)\n","    }\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; len; i++) {\n","      <span class=\"code-keyword\">var</span> edge = edges[i]\n","\n","      stack.push({\n","        prefix: frame.prefix.concat(edge),\n","        node: frame.node.edges[edge]\n","      })\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">return</span> words\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Generates a string representation of a TokenSet.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This is intended to allow TokenSets to be used as keys\n</span>","<span class=\"code-comment\"> * in objects, largely to aid the construction and minimisation\n</span>","<span class=\"code-comment\"> * of a TokenSet. As such it is not designed to be a human\n</span>","<span class=\"code-comment\"> * friendly representation of the TokenSet.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {string}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet.prototype.toString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-comment\">// <span class=\"code-doctag\">NOTE:</span> Using Object.keys here as this.edges is very likely</span>\n","  <span class=\"code-comment\">// to enter 'hash-mode' with many keys being added</span>\n","  <span class=\"code-comment\">//</span>\n","  <span class=\"code-comment\">// avoiding a for-in loop here as it leads to the function</span>\n","  <span class=\"code-comment\">// being de-optimised (at least in V8). From some simple</span>\n","  <span class=\"code-comment\">// benchmarks the performance is comparable, but allowing</span>\n","  <span class=\"code-comment\">// V8 to optimize may mean easy performance wins in the future.</span>\n","\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>._str) {\n","    <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>._str\n","  }\n","\n","  <span class=\"code-keyword\">var</span> str = <span class=\"code-keyword\">this</span>.final ? <span class=\"code-string\">'1'</span> : <span class=\"code-string\">'0'</span>,\n","      labels = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.edges).sort(),\n","      len = labels.length\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; len; i++) {\n","    <span class=\"code-keyword\">var</span> label = labels[i],\n","        node = <span class=\"code-keyword\">this</span>.edges[label]\n","\n","    str = str + label + node.id\n","  }\n","\n","  <span class=\"code-keyword\">return</span> str\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Returns a new TokenSet that is the intersection of\n</span>","<span class=\"code-comment\"> * this TokenSet and the passed TokenSet.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This intersection will take into account any wildcards\n</span>","<span class=\"code-comment\"> * contained within the TokenSet.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.TokenSet} b - An other TokenSet to intersect with.\n</span>","<span class=\"code-comment\"> * @returns {lunr.TokenSet}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.TokenSet.prototype.intersect = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">b</span>) </span>{\n","  <span class=\"code-keyword\">var</span> output = <span class=\"code-keyword\">new</span> lunr.TokenSet,\n","      frame = <span class=\"code-literal\">undefined</span>\n","\n","  <span class=\"code-keyword\">var</span> stack = [{\n","    qNode: b,\n","    output: output,\n","    node: <span class=\"code-keyword\">this</span>\n","  }]\n","\n","  <span class=\"code-keyword\">while</span> (stack.length) {\n","    frame = stack.pop()\n","\n","    <span class=\"code-comment\">// <span class=\"code-doctag\">NOTE:</span> As with the #toString method, we are using</span>\n","    <span class=\"code-comment\">// Object.keys and a for loop instead of a for-in loop</span>\n","    <span class=\"code-comment\">// as both of these objects enter 'hash' mode, causing</span>\n","    <span class=\"code-comment\">// the function to be de-optimised in V8</span>\n","    <span class=\"code-keyword\">var</span> qEdges = <span class=\"code-built_in\">Object</span>.keys(frame.qNode.edges),\n","        qLen = qEdges.length,\n","        nEdges = <span class=\"code-built_in\">Object</span>.keys(frame.node.edges),\n","        nLen = nEdges.length\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> q = <span class=\"code-number\">0</span>; q &lt; qLen; q++) {\n","      <span class=\"code-keyword\">var</span> qEdge = qEdges[q]\n","\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> n = <span class=\"code-number\">0</span>; n &lt; nLen; n++) {\n","        <span class=\"code-keyword\">var</span> nEdge = nEdges[n]\n","\n","        <span class=\"code-keyword\">if</span> (nEdge == qEdge || qEdge == <span class=\"code-string\">'*'</span>) {\n","          <span class=\"code-keyword\">var</span> node = frame.node.edges[nEdge],\n","              qNode = frame.qNode.edges[qEdge],\n","              final = node.final &amp;&amp; qNode.final,\n","              next = <span class=\"code-literal\">undefined</span>\n","\n","          <span class=\"code-keyword\">if</span> (nEdge <span class=\"code-keyword\">in</span> frame.output.edges) {\n","            <span class=\"code-comment\">// an edge already exists for this character</span>\n","            <span class=\"code-comment\">// no need to create a new node, just set the finality</span>\n","            <span class=\"code-comment\">// bit unless this node is already final</span>\n","            next = frame.output.edges[nEdge]\n","            next.final = next.final || final\n","\n","          } <span class=\"code-keyword\">else</span> {\n","            <span class=\"code-comment\">// no edge exists yet, must create one</span>\n","            <span class=\"code-comment\">// set the finality bit and insert it</span>\n","            <span class=\"code-comment\">// into the output</span>\n","            next = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","            next.final = final\n","            frame.output.edges[nEdge] = next\n","          }\n","\n","          stack.push({\n","            qNode: qNode,\n","            output: next,\n","            node: node\n","          })\n","        }\n","      }\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">return</span> output\n","}\n","lunr.TokenSet.Builder = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.previousWord = <span class=\"code-string\">\"\"</span>\n","  <span class=\"code-keyword\">this</span>.root = <span class=\"code-keyword\">new</span> lunr.TokenSet\n","  <span class=\"code-keyword\">this</span>.uncheckedNodes = []\n","  <span class=\"code-keyword\">this</span>.minimizedNodes = {}\n","}\n","\n","lunr.TokenSet.Builder.prototype.insert = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">word</span>) </span>{\n","  <span class=\"code-keyword\">var</span> node,\n","      commonPrefix = <span class=\"code-number\">0</span>\n","\n","  <span class=\"code-keyword\">if</span> (word &lt; <span class=\"code-keyword\">this</span>.previousWord) {\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span> (<span class=\"code-string\">\"Out of order word insertion\"</span>)\n","  }\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; word.length &amp;&amp; i &lt; <span class=\"code-keyword\">this</span>.previousWord.length; i++) {\n","    <span class=\"code-keyword\">if</span> (word[i] != <span class=\"code-keyword\">this</span>.previousWord[i]) <span class=\"code-keyword\">break</span>\n","    commonPrefix++\n","  }\n","\n","  <span class=\"code-keyword\">this</span>.minimize(commonPrefix)\n","\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.uncheckedNodes.length == <span class=\"code-number\">0</span>) {\n","    node = <span class=\"code-keyword\">this</span>.root\n","  } <span class=\"code-keyword\">else</span> {\n","    node = <span class=\"code-keyword\">this</span>.uncheckedNodes[<span class=\"code-keyword\">this</span>.uncheckedNodes.length - <span class=\"code-number\">1</span>].child\n","  }\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = commonPrefix; i &lt; word.length; i++) {\n","    <span class=\"code-keyword\">var</span> nextNode = <span class=\"code-keyword\">new</span> lunr.TokenSet,\n","        char = word[i]\n","\n","    node.edges[char] = nextNode\n","\n","    <span class=\"code-keyword\">this</span>.uncheckedNodes.push({\n","      parent: node,\n","      char: char,\n","      child: nextNode\n","    })\n","\n","    node = nextNode\n","  }\n","\n","  node.final = <span class=\"code-literal\">true</span>\n","  <span class=\"code-keyword\">this</span>.previousWord = word\n","}\n","\n","lunr.TokenSet.Builder.prototype.finish = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.minimize(<span class=\"code-number\">0</span>)\n","}\n","\n","lunr.TokenSet.Builder.prototype.minimize = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">downTo</span>) </span>{\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-keyword\">this</span>.uncheckedNodes.length - <span class=\"code-number\">1</span>; i &gt;= downTo; i--) {\n","    <span class=\"code-keyword\">var</span> node = <span class=\"code-keyword\">this</span>.uncheckedNodes[i],\n","        childKey = node.child.toString()\n","\n","    <span class=\"code-keyword\">if</span> (childKey <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.minimizedNodes) {\n","      node.parent.edges[node.char] = <span class=\"code-keyword\">this</span>.minimizedNodes[childKey]\n","    } <span class=\"code-keyword\">else</span> {\n","      <span class=\"code-comment\">// Cache the key for this node since</span>\n","      <span class=\"code-comment\">// we know it can't change anymore</span>\n","      node.child._str = childKey\n","\n","      <span class=\"code-keyword\">this</span>.minimizedNodes[childKey] = node.child\n","    }\n","\n","    <span class=\"code-keyword\">this</span>.uncheckedNodes.pop()\n","  }\n","}\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.Index\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * An index contains the built index of all documents and provides a query interface\n</span>","<span class=\"code-comment\"> * to the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Usually instances of lunr.Index will not be created using this constructor, instead\n</span>","<span class=\"code-comment\"> * lunr.Builder should be used to construct new indexes, or lunr.Index.load should be\n</span>","<span class=\"code-comment\"> * used to load previously built and serialized indexes.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> * @param {Object} attrs - The attributes of the built search index.\n</span>","<span class=\"code-comment\"> * @param {Object} attrs.invertedIndex - An index of term/field to document reference.\n</span>","<span class=\"code-comment\"> * @param {Object&lt;string, lunr.Vector&gt;} attrs.fieldVectors - Field vectors\n</span>","<span class=\"code-comment\"> * @param {lunr.TokenSet} attrs.tokenSet - An set of all corpus tokens.\n</span>","<span class=\"code-comment\"> * @param {string[]} attrs.fields - The names of indexed document fields.\n</span>","<span class=\"code-comment\"> * @param {lunr.Pipeline} attrs.pipeline - The pipeline to use for search terms.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Index = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">attrs</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.invertedIndex = attrs.invertedIndex\n","  <span class=\"code-keyword\">this</span>.fieldVectors = attrs.fieldVectors\n","  <span class=\"code-keyword\">this</span>.tokenSet = attrs.tokenSet\n","  <span class=\"code-keyword\">this</span>.fields = attrs.fields\n","  <span class=\"code-keyword\">this</span>.pipeline = attrs.pipeline\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A result contains details of a document matching a search query.\n</span>","<span class=\"code-comment\"> * @typedef {Object} lunr.Index~Result\n</span>","<span class=\"code-comment\"> * @property {string} ref - The reference of the document this result represents.\n</span>","<span class=\"code-comment\"> * @property {number} score - A number between 0 and 1 representing how similar this document is to the query.\n</span>","<span class=\"code-comment\"> * @property {lunr.MatchData} matchData - Contains metadata about this match including which term(s) caused the match.\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Although lunr provides the ability to create queries using lunr.Query, it also provides a simple\n</span>","<span class=\"code-comment\"> * query language which itself is parsed into an instance of lunr.Query.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * For programmatically building queries it is advised to directly use lunr.Query, the query language\n</span>","<span class=\"code-comment\"> * is best used for human entered text rather than program generated text.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * At its simplest queries can just be a single term, e.g. `hello`, multiple terms are also supported\n</span>","<span class=\"code-comment\"> * and will be combined with OR, e.g `hello world` will match documents that contain either 'hello'\n</span>","<span class=\"code-comment\"> * or 'world', though those that contain both will rank higher in the results.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Wildcards can be included in terms to match one or more unspecified characters, these wildcards can\n</span>","<span class=\"code-comment\"> * be inserted anywhere within the term, and more than one wildcard can exist in a single term. Adding\n</span>","<span class=\"code-comment\"> * wildcards will increase the number of documents that will be found but can also have a negative\n</span>","<span class=\"code-comment\"> * impact on query performance, especially with wildcards at the beginning of a term.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Terms can be restricted to specific fields, e.g. `title:hello`, only documents with the term\n</span>","<span class=\"code-comment\"> * hello in the title field will match this query. Using a field not present in the index will lead\n</span>","<span class=\"code-comment\"> * to an error being thrown.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Modifiers can also be added to terms, lunr supports edit distance and boost modifiers on terms. A term\n</span>","<span class=\"code-comment\"> * boost will make documents matching that term score higher, e.g. `foo^5`. Edit distance is also supported\n</span>","<span class=\"code-comment\"> * to provide fuzzy matching, e.g. 'hello~2' will match documents with hello with an edit distance of 2.\n</span>","<span class=\"code-comment\"> * Avoid large values for edit distance to improve query performance.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Each term also supports a presence modifier. By default a term's presence in document is optional, however\n</span>","<span class=\"code-comment\"> * this can be changed to either required or prohibited. For a term's presence to be required in a document the\n</span>","<span class=\"code-comment\"> * term should be prefixed with a '+', e.g. `+foo bar` is a search for documents that must contain 'foo' and\n</span>","<span class=\"code-comment\"> * optionally contain 'bar'. Conversely a leading '-' sets the terms presence to prohibited, i.e. it must not\n</span>","<span class=\"code-comment\"> * appear in a document, e.g. `-foo bar` is a search for documents that do not contain 'foo' but may contain 'bar'.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * To escape special characters the backslash character '\\' can be used, this allows searches to include\n</span>","<span class=\"code-comment\"> * characters that would normally be considered modifiers, e.g. `foo\\~2` will search for a term \"foo~2\" instead\n</span>","<span class=\"code-comment\"> * of attempting to apply a boost of 2 to the search term \"foo\".\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @typedef {string} lunr.Index~QueryString\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;Simple single term query&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * hello\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;Multiple term query&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * hello world\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;term scoped to a field&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * title:hello\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;term with a boost of 10&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * hello^10\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;term with an edit distance of 2&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * hello~2\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;terms with presence modifiers&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * -foo +bar baz\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Performs a search against the index using lunr query syntax.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Results will be returned sorted by their score, the most relevant results\n</span>","<span class=\"code-comment\"> * will be returned first.  For details on how the score is calculated, please see\n</span>","<span class=\"code-comment\"> * the {@link https://lunrjs.com/guides/searching.html#scoring|guide}.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * For more programmatic querying use lunr.Index#query.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Index~QueryString} queryString - A string containing a lunr query.\n</span>","<span class=\"code-comment\"> * @throws {lunr.QueryParseError} If the passed query string cannot be parsed.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Index~Result[]}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Index.prototype.search = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">queryString</span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.query(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">query</span>) </span>{\n","    <span class=\"code-keyword\">var</span> parser = <span class=\"code-keyword\">new</span> lunr.QueryParser(queryString, query)\n","    parser.parse()\n","  })\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A query builder callback provides a query object to be used to express\n</span>","<span class=\"code-comment\"> * the query to perform on the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @callback lunr.Index~queryBuilder\n</span>","<span class=\"code-comment\"> * @param {lunr.Query} query - The query object to build up.\n</span>","<span class=\"code-comment\"> * @this lunr.Query\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Performs a query against the index using the yielded lunr.Query object.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * If performing programmatic queries against the index, this method is preferred\n</span>","<span class=\"code-comment\"> * over lunr.Index#search so as to avoid the additional query parsing overhead.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * A query object is yielded to the supplied function which should be used to\n</span>","<span class=\"code-comment\"> * express the query to be run against the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Note that although this function takes a callback parameter it is _not_ an\n</span>","<span class=\"code-comment\"> * asynchronous operation, the callback is just yielded a query object to be\n</span>","<span class=\"code-comment\"> * customized.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Index~queryBuilder} fn - A function that is used to build the query.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Index~Result[]}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Index.prototype.query = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","  <span class=\"code-comment\">// for each query clause</span>\n","  <span class=\"code-comment\">// * process terms</span>\n","  <span class=\"code-comment\">// * expand terms from token set</span>\n","  <span class=\"code-comment\">// * find matching documents and metadata</span>\n","  <span class=\"code-comment\">// * get document vectors</span>\n","  <span class=\"code-comment\">// * score documents</span>\n","\n","  <span class=\"code-keyword\">var</span> query = <span class=\"code-keyword\">new</span> lunr.Query(<span class=\"code-keyword\">this</span>.fields),\n","      matchingFields = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>),\n","      queryVectors = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>),\n","      termFieldCache = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>),\n","      requiredMatches = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>),\n","      prohibitedMatches = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","\n","  <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">   * To support field level boosts a query vector is created per\n</span>","<span class=\"code-comment\">   * field. An empty vector is eagerly created to support negated\n</span>","<span class=\"code-comment\">   * queries.\n</span>","<span class=\"code-comment\">   */</span>\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; <span class=\"code-keyword\">this</span>.fields.length; i++) {\n","    queryVectors[<span class=\"code-keyword\">this</span>.fields[i]] = <span class=\"code-keyword\">new</span> lunr.Vector\n","  }\n","\n","  fn.call(query, query)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; query.clauses.length; i++) {\n","    <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">     * Unless the pipeline has been disabled for this term, which is\n</span>","<span class=\"code-comment\">     * the case for terms with wildcards, we need to pass the clause\n</span>","<span class=\"code-comment\">     * term through the search pipeline. A pipeline returns an array\n</span>","<span class=\"code-comment\">     * of processed terms. Pipeline functions may expand the passed\n</span>","<span class=\"code-comment\">     * term, which means we may end up performing multiple index lookups\n</span>","<span class=\"code-comment\">     * for a single query term.\n</span>","<span class=\"code-comment\">     */</span>\n","    <span class=\"code-keyword\">var</span> clause = query.clauses[i],\n","        terms = <span class=\"code-literal\">null</span>,\n","        clauseMatches = lunr.Set.empty\n","\n","    <span class=\"code-keyword\">if</span> (clause.usePipeline) {\n","      terms = <span class=\"code-keyword\">this</span>.pipeline.runString(clause.term, {\n","        fields: clause.fields\n","      })\n","    } <span class=\"code-keyword\">else</span> {\n","      terms = [clause.term]\n","    }\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> m = <span class=\"code-number\">0</span>; m &lt; terms.length; m++) {\n","      <span class=\"code-keyword\">var</span> term = terms[m]\n","\n","      <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">       * Each term returned from the pipeline needs to use the same query\n</span>","<span class=\"code-comment\">       * clause object, e.g. the same boost and or edit distance. The\n</span>","<span class=\"code-comment\">       * simplest way to do this is to re-use the clause object but mutate\n</span>","<span class=\"code-comment\">       * its term property.\n</span>","<span class=\"code-comment\">       */</span>\n","      clause.term = term\n","\n","      <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">       * From the term in the clause we create a token set which will then\n</span>","<span class=\"code-comment\">       * be used to intersect the indexes token set to get a list of terms\n</span>","<span class=\"code-comment\">       * to lookup in the inverted index\n</span>","<span class=\"code-comment\">       */</span>\n","      <span class=\"code-keyword\">var</span> termTokenSet = lunr.TokenSet.fromClause(clause),\n","          expandedTerms = <span class=\"code-keyword\">this</span>.tokenSet.intersect(termTokenSet).toArray()\n","\n","      <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">       * If a term marked as required does not exist in the tokenSet it is\n</span>","<span class=\"code-comment\">       * impossible for the search to return any matches. We set all the field\n</span>","<span class=\"code-comment\">       * scoped required matches set to empty and stop examining any further\n</span>","<span class=\"code-comment\">       * clauses.\n</span>","<span class=\"code-comment\">       */</span>\n","      <span class=\"code-keyword\">if</span> (expandedTerms.length === <span class=\"code-number\">0</span> &amp;&amp; clause.presence === lunr.Query.presence.REQUIRED) {\n","        <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> k = <span class=\"code-number\">0</span>; k &lt; clause.fields.length; k++) {\n","          <span class=\"code-keyword\">var</span> field = clause.fields[k]\n","          requiredMatches[field] = lunr.Set.empty\n","        }\n","\n","        <span class=\"code-keyword\">break</span>\n","      }\n","\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> j = <span class=\"code-number\">0</span>; j &lt; expandedTerms.length; j++) {\n","        <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">         * For each term get the posting and termIndex, this is required for\n</span>","<span class=\"code-comment\">         * building the query vector.\n</span>","<span class=\"code-comment\">         */</span>\n","        <span class=\"code-keyword\">var</span> expandedTerm = expandedTerms[j],\n","            posting = <span class=\"code-keyword\">this</span>.invertedIndex[expandedTerm],\n","            termIndex = posting._index\n","\n","        <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> k = <span class=\"code-number\">0</span>; k &lt; clause.fields.length; k++) {\n","          <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">           * For each field that this query term is scoped by (by default\n</span>","<span class=\"code-comment\">           * all fields are in scope) we need to get all the document refs\n</span>","<span class=\"code-comment\">           * that have this term in that field.\n</span>","<span class=\"code-comment\">           *\n</span>","<span class=\"code-comment\">           * The posting is the entry in the invertedIndex for the matching\n</span>","<span class=\"code-comment\">           * term from above.\n</span>","<span class=\"code-comment\">           */</span>\n","          <span class=\"code-keyword\">var</span> field = clause.fields[k],\n","              fieldPosting = posting[field],\n","              matchingDocumentRefs = <span class=\"code-built_in\">Object</span>.keys(fieldPosting),\n","              termField = expandedTerm + <span class=\"code-string\">\"/\"</span> + field,\n","              matchingDocumentsSet = <span class=\"code-keyword\">new</span> lunr.Set(matchingDocumentRefs)\n","\n","          <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">           * if the presence of this term is required ensure that the matching\n</span>","<span class=\"code-comment\">           * documents are added to the set of required matches for this clause.\n</span>","<span class=\"code-comment\">           *\n</span>","<span class=\"code-comment\">           */</span>\n","          <span class=\"code-keyword\">if</span> (clause.presence == lunr.Query.presence.REQUIRED) {\n","            clauseMatches = clauseMatches.union(matchingDocumentsSet)\n","\n","            <span class=\"code-keyword\">if</span> (requiredMatches[field] === <span class=\"code-literal\">undefined</span>) {\n","              requiredMatches[field] = lunr.Set.complete\n","            }\n","          }\n","\n","          <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">           * if the presence of this term is prohibited ensure that the matching\n</span>","<span class=\"code-comment\">           * documents are added to the set of prohibited matches for this field,\n</span>","<span class=\"code-comment\">           * creating that set if it does not yet exist.\n</span>","<span class=\"code-comment\">           */</span>\n","          <span class=\"code-keyword\">if</span> (clause.presence == lunr.Query.presence.PROHIBITED) {\n","            <span class=\"code-keyword\">if</span> (prohibitedMatches[field] === <span class=\"code-literal\">undefined</span>) {\n","              prohibitedMatches[field] = lunr.Set.empty\n","            }\n","\n","            prohibitedMatches[field] = prohibitedMatches[field].union(matchingDocumentsSet)\n","\n","            <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">             * Prohibited matches should not be part of the query vector used for\n</span>","<span class=\"code-comment\">             * similarity scoring and no metadata should be extracted so we continue\n</span>","<span class=\"code-comment\">             * to the next field\n</span>","<span class=\"code-comment\">             */</span>\n","            <span class=\"code-keyword\">continue</span>\n","          }\n","\n","          <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">           * The query field vector is populated using the termIndex found for\n</span>","<span class=\"code-comment\">           * the term and a unit value with the appropriate boost applied.\n</span>","<span class=\"code-comment\">           * Using upsert because there could already be an entry in the vector\n</span>","<span class=\"code-comment\">           * for the term we are working with. In that case we just add the scores\n</span>","<span class=\"code-comment\">           * together.\n</span>","<span class=\"code-comment\">           */</span>\n","          queryVectors[field].upsert(termIndex, clause.boost, <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">a, b</span>) </span>{ <span class=\"code-keyword\">return</span> a + b })\n","\n","          <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">           * If we've already seen this term, field combo then we've already collected\n</span>","<span class=\"code-comment\">           * the matching documents and metadata, no need to go through all that again\n</span>","<span class=\"code-comment\">           */</span>\n","          <span class=\"code-keyword\">if</span> (termFieldCache[termField]) {\n","            <span class=\"code-keyword\">continue</span>\n","          }\n","\n","          <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> l = <span class=\"code-number\">0</span>; l &lt; matchingDocumentRefs.length; l++) {\n","            <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">             * All metadata for this term/field/document triple\n</span>","<span class=\"code-comment\">             * are then extracted and collected into an instance\n</span>","<span class=\"code-comment\">             * of lunr.MatchData ready to be returned in the query\n</span>","<span class=\"code-comment\">             * results\n</span>","<span class=\"code-comment\">             */</span>\n","            <span class=\"code-keyword\">var</span> matchingDocumentRef = matchingDocumentRefs[l],\n","                matchingFieldRef = <span class=\"code-keyword\">new</span> lunr.FieldRef (matchingDocumentRef, field),\n","                metadata = fieldPosting[matchingDocumentRef],\n","                fieldMatch\n","\n","            <span class=\"code-keyword\">if</span> ((fieldMatch = matchingFields[matchingFieldRef]) === <span class=\"code-literal\">undefined</span>) {\n","              matchingFields[matchingFieldRef] = <span class=\"code-keyword\">new</span> lunr.MatchData (expandedTerm, field, metadata)\n","            } <span class=\"code-keyword\">else</span> {\n","              fieldMatch.add(expandedTerm, field, metadata)\n","            }\n","\n","          }\n","\n","          termFieldCache[termField] = <span class=\"code-literal\">true</span>\n","        }\n","      }\n","    }\n","\n","    <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">     * If the presence was required we need to update the requiredMatches field sets.\n</span>","<span class=\"code-comment\">     * We do this after all fields for the term have collected their matches because\n</span>","<span class=\"code-comment\">     * the clause terms presence is required in _any_ of the fields not _all_ of the\n</span>","<span class=\"code-comment\">     * fields.\n</span>","<span class=\"code-comment\">     */</span>\n","    <span class=\"code-keyword\">if</span> (clause.presence === lunr.Query.presence.REQUIRED) {\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> k = <span class=\"code-number\">0</span>; k &lt; clause.fields.length; k++) {\n","        <span class=\"code-keyword\">var</span> field = clause.fields[k]\n","        requiredMatches[field] = requiredMatches[field].intersect(clauseMatches)\n","      }\n","    }\n","  }\n","\n","  <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">   * Need to combine the field scoped required and prohibited\n</span>","<span class=\"code-comment\">   * matching documents into a global set of required and prohibited\n</span>","<span class=\"code-comment\">   * matches\n</span>","<span class=\"code-comment\">   */</span>\n","  <span class=\"code-keyword\">var</span> allRequiredMatches = lunr.Set.complete,\n","      allProhibitedMatches = lunr.Set.empty\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; <span class=\"code-keyword\">this</span>.fields.length; i++) {\n","    <span class=\"code-keyword\">var</span> field = <span class=\"code-keyword\">this</span>.fields[i]\n","\n","    <span class=\"code-keyword\">if</span> (requiredMatches[field]) {\n","      allRequiredMatches = allRequiredMatches.intersect(requiredMatches[field])\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (prohibitedMatches[field]) {\n","      allProhibitedMatches = allProhibitedMatches.union(prohibitedMatches[field])\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">var</span> matchingFieldRefs = <span class=\"code-built_in\">Object</span>.keys(matchingFields),\n","      results = [],\n","      matches = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","\n","  <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">   * If the query is negated (contains only prohibited terms)\n</span>","<span class=\"code-comment\">   * we need to get _all_ fieldRefs currently existing in the\n</span>","<span class=\"code-comment\">   * index. This is only done when we know that the query is\n</span>","<span class=\"code-comment\">   * entirely prohibited terms to avoid any cost of getting all\n</span>","<span class=\"code-comment\">   * fieldRefs unnecessarily.\n</span>","<span class=\"code-comment\">   *\n</span>","<span class=\"code-comment\">   * Additionally, blank MatchData must be created to correctly\n</span>","<span class=\"code-comment\">   * populate the results.\n</span>","<span class=\"code-comment\">   */</span>\n","  <span class=\"code-keyword\">if</span> (query.isNegated()) {\n","    matchingFieldRefs = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.fieldVectors)\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; matchingFieldRefs.length; i++) {\n","      <span class=\"code-keyword\">var</span> matchingFieldRef = matchingFieldRefs[i]\n","      <span class=\"code-keyword\">var</span> fieldRef = lunr.FieldRef.fromString(matchingFieldRef)\n","      matchingFields[matchingFieldRef] = <span class=\"code-keyword\">new</span> lunr.MatchData\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; matchingFieldRefs.length; i++) {\n","    <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">     * Currently we have document fields that match the query, but we\n</span>","<span class=\"code-comment\">     * need to return documents. The matchData and scores are combined\n</span>","<span class=\"code-comment\">     * from multiple fields belonging to the same document.\n</span>","<span class=\"code-comment\">     *\n</span>","<span class=\"code-comment\">     * Scores are calculated by field, using the query vectors created\n</span>","<span class=\"code-comment\">     * above, and combined into a final document score using addition.\n</span>","<span class=\"code-comment\">     */</span>\n","    <span class=\"code-keyword\">var</span> fieldRef = lunr.FieldRef.fromString(matchingFieldRefs[i]),\n","        docRef = fieldRef.docRef\n","\n","    <span class=\"code-keyword\">if</span> (!allRequiredMatches.contains(docRef)) {\n","      <span class=\"code-keyword\">continue</span>\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (allProhibitedMatches.contains(docRef)) {\n","      <span class=\"code-keyword\">continue</span>\n","    }\n","\n","    <span class=\"code-keyword\">var</span> fieldVector = <span class=\"code-keyword\">this</span>.fieldVectors[fieldRef],\n","        score = queryVectors[fieldRef.fieldName].similarity(fieldVector),\n","        docMatch\n","\n","    <span class=\"code-keyword\">if</span> ((docMatch = matches[docRef]) !== <span class=\"code-literal\">undefined</span>) {\n","      docMatch.score += score\n","      docMatch.matchData.combine(matchingFields[fieldRef])\n","    } <span class=\"code-keyword\">else</span> {\n","      <span class=\"code-keyword\">var</span> match = {\n","        ref: docRef,\n","        score: score,\n","        matchData: matchingFields[fieldRef]\n","      }\n","      matches[docRef] = match\n","      results.push(match)\n","    }\n","  }\n","\n","  <span class=\"code-comment\">/*\n</span>","<span class=\"code-comment\">   * Sort the results objects by score, highest first.\n</span>","<span class=\"code-comment\">   */</span>\n","  <span class=\"code-keyword\">return</span> results.sort(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">a, b</span>) </span>{\n","    <span class=\"code-keyword\">return</span> b.score - a.score\n","  })\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Prepares the index for JSON serialization.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The schema for this JSON blob will be described in a\n</span>","<span class=\"code-comment\"> * separate JSON schema file.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {Object}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Index.prototype.toJSON = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> invertedIndex = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.invertedIndex)\n","    .sort()\n","    .map(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">term</span>) </span>{\n","      <span class=\"code-keyword\">return</span> [term, <span class=\"code-keyword\">this</span>.invertedIndex[term]]\n","    }, <span class=\"code-keyword\">this</span>)\n","\n","  <span class=\"code-keyword\">var</span> fieldVectors = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.fieldVectors)\n","    .map(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">ref</span>) </span>{\n","      <span class=\"code-keyword\">return</span> [ref, <span class=\"code-keyword\">this</span>.fieldVectors[ref].toJSON()]\n","    }, <span class=\"code-keyword\">this</span>)\n","\n","  <span class=\"code-keyword\">return</span> {\n","    version: lunr.version,\n","    fields: <span class=\"code-keyword\">this</span>.fields,\n","    fieldVectors: fieldVectors,\n","    invertedIndex: invertedIndex,\n","    pipeline: <span class=\"code-keyword\">this</span>.pipeline.toJSON()\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Loads a previously serialized lunr.Index\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Object} serializedIndex - A previously serialized lunr.Index\n</span>","<span class=\"code-comment\"> * @returns {lunr.Index}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Index.load = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">serializedIndex</span>) </span>{\n","  <span class=\"code-keyword\">var</span> attrs = {},\n","      fieldVectors = {},\n","      serializedVectors = serializedIndex.fieldVectors,\n","      invertedIndex = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>),\n","      serializedInvertedIndex = serializedIndex.invertedIndex,\n","      tokenSetBuilder = <span class=\"code-keyword\">new</span> lunr.TokenSet.Builder,\n","      pipeline = lunr.Pipeline.load(serializedIndex.pipeline)\n","\n","  <span class=\"code-keyword\">if</span> (serializedIndex.version != lunr.version) {\n","    lunr.utils.warn(<span class=\"code-string\">\"Version mismatch when loading serialised index. Current version of lunr '\"</span> + lunr.version + <span class=\"code-string\">\"' does not match serialized index '\"</span> + serializedIndex.version + <span class=\"code-string\">\"'\"</span>)\n","  }\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; serializedVectors.length; i++) {\n","    <span class=\"code-keyword\">var</span> tuple = serializedVectors[i],\n","        ref = tuple[<span class=\"code-number\">0</span>],\n","        elements = tuple[<span class=\"code-number\">1</span>]\n","\n","    fieldVectors[ref] = <span class=\"code-keyword\">new</span> lunr.Vector(elements)\n","  }\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; serializedInvertedIndex.length; i++) {\n","    <span class=\"code-keyword\">var</span> tuple = serializedInvertedIndex[i],\n","        term = tuple[<span class=\"code-number\">0</span>],\n","        posting = tuple[<span class=\"code-number\">1</span>]\n","\n","    tokenSetBuilder.insert(term)\n","    invertedIndex[term] = posting\n","  }\n","\n","  tokenSetBuilder.finish()\n","\n","  attrs.fields = serializedIndex.fields\n","\n","  attrs.fieldVectors = fieldVectors\n","  attrs.invertedIndex = invertedIndex\n","  attrs.tokenSet = tokenSetBuilder.root\n","  attrs.pipeline = pipeline\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> lunr.Index(attrs)\n","}\n","<span class=\"code-comment\">/*!\n</span>","<span class=\"code-comment\"> * lunr.Builder\n</span>","<span class=\"code-comment\"> * Copyright (C) 2020 Oliver Nightingale\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * lunr.Builder performs indexing on a set of documents and\n</span>","<span class=\"code-comment\"> * returns instances of lunr.Index ready for querying.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * All configuration of the index is done via the builder, the\n</span>","<span class=\"code-comment\"> * fields to index, the document reference, the text processing\n</span>","<span class=\"code-comment\"> * pipeline and document scoring parameters are all set on the\n</span>","<span class=\"code-comment\"> * builder before indexing.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> * @property {string} _ref - Internal reference to the document reference field.\n</span>","<span class=\"code-comment\"> * @property {string[]} _fields - Internal reference to the document fields to index.\n</span>","<span class=\"code-comment\"> * @property {object} invertedIndex - The inverted index maps terms to document fields.\n</span>","<span class=\"code-comment\"> * @property {object} documentTermFrequencies - Keeps track of document term frequencies.\n</span>","<span class=\"code-comment\"> * @property {object} documentLengths - Keeps track of the length of documents added to the index.\n</span>","<span class=\"code-comment\"> * @property {lunr.tokenizer} tokenizer - Function for splitting strings into tokens for indexing.\n</span>","<span class=\"code-comment\"> * @property {lunr.Pipeline} pipeline - The pipeline performs text processing on tokens before indexing.\n</span>","<span class=\"code-comment\"> * @property {lunr.Pipeline} searchPipeline - A pipeline for processing search terms before querying the index.\n</span>","<span class=\"code-comment\"> * @property {number} documentCount - Keeps track of the total number of documents indexed.\n</span>","<span class=\"code-comment\"> * @property {number} _b - A parameter to control field length normalization, setting this to 0 disabled normalization, 1 fully normalizes field lengths, the default value is 0.75.\n</span>","<span class=\"code-comment\"> * @property {number} _k1 - A parameter to control how quickly an increase in term frequency results in term frequency saturation, the default value is 1.2.\n</span>","<span class=\"code-comment\"> * @property {number} termIndex - A counter incremented for each unique term, used to identify a terms position in the vector space.\n</span>","<span class=\"code-comment\"> * @property {array} metadataWhitelist - A list of metadata keys that have been whitelisted for entry in the index.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>._ref = <span class=\"code-string\">\"id\"</span>\n","  <span class=\"code-keyword\">this</span>._fields = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","  <span class=\"code-keyword\">this</span>._documents = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","  <span class=\"code-keyword\">this</span>.invertedIndex = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","  <span class=\"code-keyword\">this</span>.fieldTermFrequencies = {}\n","  <span class=\"code-keyword\">this</span>.fieldLengths = {}\n","  <span class=\"code-keyword\">this</span>.tokenizer = lunr.tokenizer\n","  <span class=\"code-keyword\">this</span>.pipeline = <span class=\"code-keyword\">new</span> lunr.Pipeline\n","  <span class=\"code-keyword\">this</span>.searchPipeline = <span class=\"code-keyword\">new</span> lunr.Pipeline\n","  <span class=\"code-keyword\">this</span>.documentCount = <span class=\"code-number\">0</span>\n","  <span class=\"code-keyword\">this</span>._b = <span class=\"code-number\">0.75</span>\n","  <span class=\"code-keyword\">this</span>._k1 = <span class=\"code-number\">1.2</span>\n","  <span class=\"code-keyword\">this</span>.termIndex = <span class=\"code-number\">0</span>\n","  <span class=\"code-keyword\">this</span>.metadataWhitelist = []\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Sets the document field used as the document reference. Every document must have this field.\n</span>","<span class=\"code-comment\"> * The type of this field in the document should be a string, if it is not a string it will be\n</span>","<span class=\"code-comment\"> * coerced into a string by calling toString.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The default ref is 'id'.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The ref should _not_ be changed during indexing, it should be set before any documents are\n</span>","<span class=\"code-comment\"> * added to the index. Changing it during indexing can lead to inconsistent results.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {string} ref - The name of the reference field in the document.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.ref = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">ref</span>) </span>{\n","  <span class=\"code-keyword\">this</span>._ref = ref\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A function that is used to extract a field from a document.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Lunr expects a field to be at the top level of a document, if however the field\n</span>","<span class=\"code-comment\"> * is deeply nested within a document an extractor function can be used to extract\n</span>","<span class=\"code-comment\"> * the right field for indexing.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @callback fieldExtractor\n</span>","<span class=\"code-comment\"> * @param {object} doc - The document being added to the index.\n</span>","<span class=\"code-comment\"> * @returns {?(string|object|object[])} obj - The object that will be indexed for this field.\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;Extracting a nested field&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * function (doc) { return doc.nested.field }\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Adds a field to the list of document fields that will be indexed. Every document being\n</span>","<span class=\"code-comment\"> * indexed should have this field. Null values for this field in indexed documents will\n</span>","<span class=\"code-comment\"> * not cause errors but will limit the chance of that document being retrieved by searches.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * All fields should be added before adding documents to the index. Adding fields after\n</span>","<span class=\"code-comment\"> * a document has been indexed will have no effect on already indexed documents.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Fields can be boosted at build time. This allows terms within that field to have more\n</span>","<span class=\"code-comment\"> * importance when ranking search results. Use a field boost to specify that matches within\n</span>","<span class=\"code-comment\"> * one field are more important than other fields.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {string} fieldName - The name of a field to index in all documents.\n</span>","<span class=\"code-comment\"> * @param {object} attributes - Optional attributes associated with this field.\n</span>","<span class=\"code-comment\"> * @param {number} [attributes.boost=1] - Boost applied to all terms within this field.\n</span>","<span class=\"code-comment\"> * @param {fieldExtractor} [attributes.extractor] - Function to extract a field from a document.\n</span>","<span class=\"code-comment\"> * @throws {RangeError} fieldName cannot contain unsupported characters '/'\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.field = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fieldName, attributes</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-regexp\">/\\//</span>.test(fieldName)) {\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">RangeError</span> (<span class=\"code-string\">\"Field '\"</span> + fieldName + <span class=\"code-string\">\"' contains illegal character '/'\"</span>)\n","  }\n","\n","  <span class=\"code-keyword\">this</span>._fields[fieldName] = attributes || {}\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A parameter to tune the amount of field length normalisation that is applied when\n</span>","<span class=\"code-comment\"> * calculating relevance scores. A value of 0 will completely disable any normalisation\n</span>","<span class=\"code-comment\"> * and a value of 1 will fully normalise field lengths. The default is 0.75. Values of b\n</span>","<span class=\"code-comment\"> * will be clamped to the range 0 - 1.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {number} number - The value to set for this tuning parameter.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.b = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">number</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (number &lt; <span class=\"code-number\">0</span>) {\n","    <span class=\"code-keyword\">this</span>._b = <span class=\"code-number\">0</span>\n","  } <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (number &gt; <span class=\"code-number\">1</span>) {\n","    <span class=\"code-keyword\">this</span>._b = <span class=\"code-number\">1</span>\n","  } <span class=\"code-keyword\">else</span> {\n","    <span class=\"code-keyword\">this</span>._b = number\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A parameter that controls the speed at which a rise in term frequency results in term\n</span>","<span class=\"code-comment\"> * frequency saturation. The default value is 1.2. Setting this to a higher value will give\n</span>","<span class=\"code-comment\"> * slower saturation levels, a lower value will result in quicker saturation.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {number} number - The value to set for this tuning parameter.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.k1 = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">number</span>) </span>{\n","  <span class=\"code-keyword\">this</span>._k1 = number\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Adds a document to the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Before adding fields to the index the index should have been fully setup, with the document\n</span>","<span class=\"code-comment\"> * ref and all fields to index already having been specified.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The document must have a field name as specified by the ref (by default this is 'id') and\n</span>","<span class=\"code-comment\"> * it should have all fields defined for indexing, though null or undefined values will not\n</span>","<span class=\"code-comment\"> * cause errors.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Entire documents can be boosted at build time. Applying a boost to a document indicates that\n</span>","<span class=\"code-comment\"> * this document should rank higher in search results than other documents.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {object} doc - The document to add to the index.\n</span>","<span class=\"code-comment\"> * @param {object} attributes - Optional attributes associated with this document.\n</span>","<span class=\"code-comment\"> * @param {number} [attributes.boost=1] - Boost applied to all terms within this document.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.add = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">doc, attributes</span>) </span>{\n","  <span class=\"code-keyword\">var</span> docRef = doc[<span class=\"code-keyword\">this</span>._ref],\n","      fields = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>._fields)\n","\n","  <span class=\"code-keyword\">this</span>._documents[docRef] = attributes || {}\n","  <span class=\"code-keyword\">this</span>.documentCount += <span class=\"code-number\">1</span>\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; fields.length; i++) {\n","    <span class=\"code-keyword\">var</span> fieldName = fields[i],\n","        extractor = <span class=\"code-keyword\">this</span>._fields[fieldName].extractor,\n","        field = extractor ? extractor(doc) : doc[fieldName],\n","        tokens = <span class=\"code-keyword\">this</span>.tokenizer(field, {\n","          fields: [fieldName]\n","        }),\n","        terms = <span class=\"code-keyword\">this</span>.pipeline.run(tokens),\n","        fieldRef = <span class=\"code-keyword\">new</span> lunr.FieldRef (docRef, fieldName),\n","        fieldTerms = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","\n","    <span class=\"code-keyword\">this</span>.fieldTermFrequencies[fieldRef] = fieldTerms\n","    <span class=\"code-keyword\">this</span>.fieldLengths[fieldRef] = <span class=\"code-number\">0</span>\n","\n","    <span class=\"code-comment\">// store the length of this field for this document</span>\n","    <span class=\"code-keyword\">this</span>.fieldLengths[fieldRef] += terms.length\n","\n","    <span class=\"code-comment\">// calculate term frequencies for this field</span>\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> j = <span class=\"code-number\">0</span>; j &lt; terms.length; j++) {\n","      <span class=\"code-keyword\">var</span> term = terms[j]\n","\n","      <span class=\"code-keyword\">if</span> (fieldTerms[term] == <span class=\"code-literal\">undefined</span>) {\n","        fieldTerms[term] = <span class=\"code-number\">0</span>\n","      }\n","\n","      fieldTerms[term] += <span class=\"code-number\">1</span>\n","\n","      <span class=\"code-comment\">// add to inverted index</span>\n","      <span class=\"code-comment\">// create an initial posting if one doesn't exist</span>\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.invertedIndex[term] == <span class=\"code-literal\">undefined</span>) {\n","        <span class=\"code-keyword\">var</span> posting = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","        posting[<span class=\"code-string\">\"_index\"</span>] = <span class=\"code-keyword\">this</span>.termIndex\n","        <span class=\"code-keyword\">this</span>.termIndex += <span class=\"code-number\">1</span>\n","\n","        <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> k = <span class=\"code-number\">0</span>; k &lt; fields.length; k++) {\n","          posting[fields[k]] = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","        }\n","\n","        <span class=\"code-keyword\">this</span>.invertedIndex[term] = posting\n","      }\n","\n","      <span class=\"code-comment\">// add an entry for this term/fieldName/docRef to the invertedIndex</span>\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.invertedIndex[term][fieldName][docRef] == <span class=\"code-literal\">undefined</span>) {\n","        <span class=\"code-keyword\">this</span>.invertedIndex[term][fieldName][docRef] = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","      }\n","\n","      <span class=\"code-comment\">// store all whitelisted metadata about this token in the</span>\n","      <span class=\"code-comment\">// inverted index</span>\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> l = <span class=\"code-number\">0</span>; l &lt; <span class=\"code-keyword\">this</span>.metadataWhitelist.length; l++) {\n","        <span class=\"code-keyword\">var</span> metadataKey = <span class=\"code-keyword\">this</span>.metadataWhitelist[l],\n","            metadata = term.metadata[metadataKey]\n","\n","        <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.invertedIndex[term][fieldName][docRef][metadataKey] == <span class=\"code-literal\">undefined</span>) {\n","          <span class=\"code-keyword\">this</span>.invertedIndex[term][fieldName][docRef][metadataKey] = []\n","        }\n","\n","        <span class=\"code-keyword\">this</span>.invertedIndex[term][fieldName][docRef][metadataKey].push(metadata)\n","      }\n","    }\n","\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Calculates the average document length for this index\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @private\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.calculateAverageFieldLengths = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","\n","  <span class=\"code-keyword\">var</span> fieldRefs = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.fieldLengths),\n","      numberOfFields = fieldRefs.length,\n","      accumulator = {},\n","      documentsWithField = {}\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; numberOfFields; i++) {\n","    <span class=\"code-keyword\">var</span> fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),\n","        field = fieldRef.fieldName\n","\n","    documentsWithField[field] || (documentsWithField[field] = <span class=\"code-number\">0</span>)\n","    documentsWithField[field] += <span class=\"code-number\">1</span>\n","\n","    accumulator[field] || (accumulator[field] = <span class=\"code-number\">0</span>)\n","    accumulator[field] += <span class=\"code-keyword\">this</span>.fieldLengths[fieldRef]\n","  }\n","\n","  <span class=\"code-keyword\">var</span> fields = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>._fields)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; fields.length; i++) {\n","    <span class=\"code-keyword\">var</span> fieldName = fields[i]\n","    accumulator[fieldName] = accumulator[fieldName] / documentsWithField[fieldName]\n","  }\n","\n","  <span class=\"code-keyword\">this</span>.averageFieldLength = accumulator\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Builds a vector space model of every document using lunr.Vector\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @private\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.createFieldVectors = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> fieldVectors = {},\n","      fieldRefs = <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.fieldTermFrequencies),\n","      fieldRefsLength = fieldRefs.length,\n","      termIdfCache = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; fieldRefsLength; i++) {\n","    <span class=\"code-keyword\">var</span> fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),\n","        fieldName = fieldRef.fieldName,\n","        fieldLength = <span class=\"code-keyword\">this</span>.fieldLengths[fieldRef],\n","        fieldVector = <span class=\"code-keyword\">new</span> lunr.Vector,\n","        termFrequencies = <span class=\"code-keyword\">this</span>.fieldTermFrequencies[fieldRef],\n","        terms = <span class=\"code-built_in\">Object</span>.keys(termFrequencies),\n","        termsLength = terms.length\n","\n","\n","    <span class=\"code-keyword\">var</span> fieldBoost = <span class=\"code-keyword\">this</span>._fields[fieldName].boost || <span class=\"code-number\">1</span>,\n","        docBoost = <span class=\"code-keyword\">this</span>._documents[fieldRef.docRef].boost || <span class=\"code-number\">1</span>\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> j = <span class=\"code-number\">0</span>; j &lt; termsLength; j++) {\n","      <span class=\"code-keyword\">var</span> term = terms[j],\n","          tf = termFrequencies[term],\n","          termIndex = <span class=\"code-keyword\">this</span>.invertedIndex[term]._index,\n","          idf, score, scoreWithPrecision\n","\n","      <span class=\"code-keyword\">if</span> (termIdfCache[term] === <span class=\"code-literal\">undefined</span>) {\n","        idf = lunr.idf(<span class=\"code-keyword\">this</span>.invertedIndex[term], <span class=\"code-keyword\">this</span>.documentCount)\n","        termIdfCache[term] = idf\n","      } <span class=\"code-keyword\">else</span> {\n","        idf = termIdfCache[term]\n","      }\n","\n","      score = idf * ((<span class=\"code-keyword\">this</span>._k1 + <span class=\"code-number\">1</span>) * tf) / (<span class=\"code-keyword\">this</span>._k1 * (<span class=\"code-number\">1</span> - <span class=\"code-keyword\">this</span>._b + <span class=\"code-keyword\">this</span>._b * (fieldLength / <span class=\"code-keyword\">this</span>.averageFieldLength[fieldName])) + tf)\n","      score *= fieldBoost\n","      score *= docBoost\n","      scoreWithPrecision = <span class=\"code-built_in\">Math</span>.round(score * <span class=\"code-number\">1000</span>) / <span class=\"code-number\">1000</span>\n","      <span class=\"code-comment\">// Converts 1.23456789 to 1.234.</span>\n","      <span class=\"code-comment\">// Reducing the precision so that the vectors take up less</span>\n","      <span class=\"code-comment\">// space when serialised. Doing it now so that they behave</span>\n","      <span class=\"code-comment\">// the same before and after serialisation. Also, this is</span>\n","      <span class=\"code-comment\">// the fastest approach to reducing a number's precision in</span>\n","      <span class=\"code-comment\">// JavaScript.</span>\n","\n","      fieldVector.insert(termIndex, scoreWithPrecision)\n","    }\n","\n","    fieldVectors[fieldRef] = fieldVector\n","  }\n","\n","  <span class=\"code-keyword\">this</span>.fieldVectors = fieldVectors\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Creates a token set of all tokens in the index using lunr.TokenSet\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @private\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.createTokenSet = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.tokenSet = lunr.TokenSet.fromArray(\n","    <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>.invertedIndex).sort()\n","  )\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Builds the index, creating an instance of lunr.Index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This completes the indexing process and should only be called\n</span>","<span class=\"code-comment\"> * once all documents have been added to the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns {lunr.Index}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.build = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.calculateAverageFieldLengths()\n","  <span class=\"code-keyword\">this</span>.createFieldVectors()\n","  <span class=\"code-keyword\">this</span>.createTokenSet()\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">new</span> lunr.Index({\n","    invertedIndex: <span class=\"code-keyword\">this</span>.invertedIndex,\n","    fieldVectors: <span class=\"code-keyword\">this</span>.fieldVectors,\n","    tokenSet: <span class=\"code-keyword\">this</span>.tokenSet,\n","    fields: <span class=\"code-built_in\">Object</span>.keys(<span class=\"code-keyword\">this</span>._fields),\n","    pipeline: <span class=\"code-keyword\">this</span>.searchPipeline\n","  })\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Applies a plugin to the index builder.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * A plugin is a function that is called with the index builder as its context.\n</span>","<span class=\"code-comment\"> * Plugins can be used to customise or extend the behaviour of the index\n</span>","<span class=\"code-comment\"> * in some way. A plugin is just a function, that encapsulated the custom\n</span>","<span class=\"code-comment\"> * behaviour that should be applied when building the index.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The plugin function will be called with the index builder as its argument, additional\n</span>","<span class=\"code-comment\"> * arguments can also be passed when calling use. The function will be called\n</span>","<span class=\"code-comment\"> * with the index builder as its context.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {Function} plugin The plugin to apply.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Builder.prototype.use = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">fn</span>) </span>{\n","  <span class=\"code-keyword\">var</span> args = <span class=\"code-built_in\">Array</span>.prototype.slice.call(<span class=\"code-built_in\">arguments</span>, <span class=\"code-number\">1</span>)\n","  args.unshift(<span class=\"code-keyword\">this</span>)\n","  fn.apply(<span class=\"code-keyword\">this</span>, args)\n","}\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Contains and collects metadata about a matching document.\n</span>","<span class=\"code-comment\"> * A single instance of lunr.MatchData is returned as part of every\n</span>","<span class=\"code-comment\"> * lunr.Index~Result.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> * @param {string} term - The term this match data is associated with\n</span>","<span class=\"code-comment\"> * @param {string} field - The field in which the term was found\n</span>","<span class=\"code-comment\"> * @param {object} metadata - The metadata recorded about this term in this field\n</span>","<span class=\"code-comment\"> * @property {object} metadata - A cloned collection of metadata associated with this document.\n</span>","<span class=\"code-comment\"> * @see {@link lunr.Index~Result}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.MatchData = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">term, field, metadata</span>) </span>{\n","  <span class=\"code-keyword\">var</span> clonedMetadata = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>),\n","      metadataKeys = <span class=\"code-built_in\">Object</span>.keys(metadata || {})\n","\n","  <span class=\"code-comment\">// Cloning the metadata to prevent the original</span>\n","  <span class=\"code-comment\">// being mutated during match data combination.</span>\n","  <span class=\"code-comment\">// Metadata is kept in an array within the inverted</span>\n","  <span class=\"code-comment\">// index so cloning the data can be done with</span>\n","  <span class=\"code-comment\">// Array#slice</span>\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; metadataKeys.length; i++) {\n","    <span class=\"code-keyword\">var</span> key = metadataKeys[i]\n","    clonedMetadata[key] = metadata[key].slice()\n","  }\n","\n","  <span class=\"code-keyword\">this</span>.metadata = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","\n","  <span class=\"code-keyword\">if</span> (term !== <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">this</span>.metadata[term] = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","    <span class=\"code-keyword\">this</span>.metadata[term][field] = clonedMetadata\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * An instance of lunr.MatchData will be created for every term that matches a\n</span>","<span class=\"code-comment\"> * document. However only one instance is required in a lunr.Index~Result. This\n</span>","<span class=\"code-comment\"> * method combines metadata from another instance of lunr.MatchData with this\n</span>","<span class=\"code-comment\"> * objects metadata.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.MatchData} otherMatchData - Another instance of match data to merge with this one.\n</span>","<span class=\"code-comment\"> * @see {@link lunr.Index~Result}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.MatchData.prototype.combine = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">otherMatchData</span>) </span>{\n","  <span class=\"code-keyword\">var</span> terms = <span class=\"code-built_in\">Object</span>.keys(otherMatchData.metadata)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; terms.length; i++) {\n","    <span class=\"code-keyword\">var</span> term = terms[i],\n","        fields = <span class=\"code-built_in\">Object</span>.keys(otherMatchData.metadata[term])\n","\n","    <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.metadata[term] == <span class=\"code-literal\">undefined</span>) {\n","      <span class=\"code-keyword\">this</span>.metadata[term] = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","    }\n","\n","    <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> j = <span class=\"code-number\">0</span>; j &lt; fields.length; j++) {\n","      <span class=\"code-keyword\">var</span> field = fields[j],\n","          keys = <span class=\"code-built_in\">Object</span>.keys(otherMatchData.metadata[term][field])\n","\n","      <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.metadata[term][field] == <span class=\"code-literal\">undefined</span>) {\n","        <span class=\"code-keyword\">this</span>.metadata[term][field] = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","      }\n","\n","      <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> k = <span class=\"code-number\">0</span>; k &lt; keys.length; k++) {\n","        <span class=\"code-keyword\">var</span> key = keys[k]\n","\n","        <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.metadata[term][field][key] == <span class=\"code-literal\">undefined</span>) {\n","          <span class=\"code-keyword\">this</span>.metadata[term][field][key] = otherMatchData.metadata[term][field][key]\n","        } <span class=\"code-keyword\">else</span> {\n","          <span class=\"code-keyword\">this</span>.metadata[term][field][key] = <span class=\"code-keyword\">this</span>.metadata[term][field][key].concat(otherMatchData.metadata[term][field][key])\n","        }\n","\n","      }\n","    }\n","  }\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Add metadata for a term/field pair to this instance of match data.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {string} term - The term this match data is associated with\n</span>","<span class=\"code-comment\"> * @param {string} field - The field in which the term was found\n</span>","<span class=\"code-comment\"> * @param {object} metadata - The metadata recorded about this term in this field\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.MatchData.prototype.add = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">term, field, metadata</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (!(term <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.metadata)) {\n","    <span class=\"code-keyword\">this</span>.metadata[term] = <span class=\"code-built_in\">Object</span>.create(<span class=\"code-literal\">null</span>)\n","    <span class=\"code-keyword\">this</span>.metadata[term][field] = metadata\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (!(field <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.metadata[term])) {\n","    <span class=\"code-keyword\">this</span>.metadata[term][field] = metadata\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">var</span> metadataKeys = <span class=\"code-built_in\">Object</span>.keys(metadata)\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; metadataKeys.length; i++) {\n","    <span class=\"code-keyword\">var</span> key = metadataKeys[i]\n","\n","    <span class=\"code-keyword\">if</span> (key <span class=\"code-keyword\">in</span> <span class=\"code-keyword\">this</span>.metadata[term][field]) {\n","      <span class=\"code-keyword\">this</span>.metadata[term][field][key] = <span class=\"code-keyword\">this</span>.metadata[term][field][key].concat(metadata[key])\n","    } <span class=\"code-keyword\">else</span> {\n","      <span class=\"code-keyword\">this</span>.metadata[term][field][key] = metadata[key]\n","    }\n","  }\n","}\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A lunr.Query provides a programmatic way of defining queries to be performed\n</span>","<span class=\"code-comment\"> * against a {@link lunr.Index}.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Prefer constructing a lunr.Query using the {@link lunr.Index#query} method\n</span>","<span class=\"code-comment\"> * so the query object is pre-initialized with the right index fields.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constructor\n</span>","<span class=\"code-comment\"> * @property {lunr.Query~Clause[]} clauses - An array of query clauses.\n</span>","<span class=\"code-comment\"> * @property {string[]} allFields - An array of all available fields in a lunr.Index.\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Query = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">allFields</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.clauses = []\n","  <span class=\"code-keyword\">this</span>.allFields = allFields\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Constants for indicating what kind of automatic wildcard insertion will be used when constructing a query clause.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * This allows wildcards to be added to the beginning and end of a term without having to manually do any string\n</span>","<span class=\"code-comment\"> * concatenation.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The wildcard constants can be bitwise combined to select both leading and trailing wildcards.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constant\n</span>","<span class=\"code-comment\"> * @default\n</span>","<span class=\"code-comment\"> * @property {number} wildcard.NONE - The term will have no wildcards inserted, this is the default behaviour\n</span>","<span class=\"code-comment\"> * @property {number} wildcard.LEADING - Prepend the term with a wildcard, unless a leading wildcard already exists\n</span>","<span class=\"code-comment\"> * @property {number} wildcard.TRAILING - Append a wildcard to the term, unless a trailing wildcard already exists\n</span>","<span class=\"code-comment\"> * @see lunr.Query~Clause\n</span>","<span class=\"code-comment\"> * @see lunr.Query#clause\n</span>","<span class=\"code-comment\"> * @see lunr.Query#term\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;query term with trailing wildcard&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * query.term('foo', { wildcard: lunr.Query.wildcard.TRAILING })\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;query term with leading and trailing wildcard&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * query.term('foo', {\n</span>","<span class=\"code-comment\"> *   wildcard: lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING\n</span>","<span class=\"code-comment\"> * })\n</span>","<span class=\"code-comment\"> */</span>\n","\n","lunr.Query.wildcard = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">String</span> (<span class=\"code-string\">\"*\"</span>)\n","lunr.Query.wildcard.NONE = <span class=\"code-number\">0</span>\n","lunr.Query.wildcard.LEADING = <span class=\"code-number\">1</span>\n","lunr.Query.wildcard.TRAILING = <span class=\"code-number\">2</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Constants for indicating what kind of presence a term must have in matching documents.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @constant\n</span>","<span class=\"code-comment\"> * @enum {number}\n</span>","<span class=\"code-comment\"> * @see lunr.Query~Clause\n</span>","<span class=\"code-comment\"> * @see lunr.Query#clause\n</span>","<span class=\"code-comment\"> * @see lunr.Query#term\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;query term with required presence&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * query.term('foo', { presence: lunr.Query.presence.REQUIRED })\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Query.presence = {\n","  <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">   * Term's presence in a document is optional, this is the default value.\n</span>","<span class=\"code-comment\">   */</span>\n","  OPTIONAL: <span class=\"code-number\">1</span>,\n","\n","  <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">   * Term's presence in a document is required, documents that do not contain\n</span>","<span class=\"code-comment\">   * this term will not be returned.\n</span>","<span class=\"code-comment\">   */</span>\n","  REQUIRED: <span class=\"code-number\">2</span>,\n","\n","  <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">   * Term's presence in a document is prohibited, documents that do contain\n</span>","<span class=\"code-comment\">   * this term will not be returned.\n</span>","<span class=\"code-comment\">   */</span>\n","  PROHIBITED: <span class=\"code-number\">3</span>\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A single clause in a {@link lunr.Query} contains a term and details on how to\n</span>","<span class=\"code-comment\"> * match that term against a {@link lunr.Index}.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @typedef {Object} lunr.Query~Clause\n</span>","<span class=\"code-comment\"> * @property {string[]} fields - The fields in an index this clause should be matched against.\n</span>","<span class=\"code-comment\"> * @property {number} [boost=1] - Any boost that should be applied when matching this clause.\n</span>","<span class=\"code-comment\"> * @property {number} [editDistance] - Whether the term should have fuzzy matching applied, and how fuzzy the match should be.\n</span>","<span class=\"code-comment\"> * @property {boolean} [usePipeline] - Whether the term should be passed through the search pipeline.\n</span>","<span class=\"code-comment\"> * @property {number} [wildcard=lunr.Query.wildcard.NONE] - Whether the term should have wildcards appended or prepended.\n</span>","<span class=\"code-comment\"> * @property {number} [presence=lunr.Query.presence.OPTIONAL] - The terms presence in any matching documents.\n</span>","<span class=\"code-comment\"> */</span>\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Adds a {@link lunr.Query~Clause} to this query.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * Unless the clause contains the fields to be matched all fields will be matched. In addition\n</span>","<span class=\"code-comment\"> * a default boost of 1 is applied to the clause.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {lunr.Query~Clause} clause - The clause to add to this query.\n</span>","<span class=\"code-comment\"> * @see lunr.Query~Clause\n</span>","<span class=\"code-comment\"> * @returns {lunr.Query}\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Query.prototype.clause = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">clause</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (!(<span class=\"code-string\">'fields'</span> <span class=\"code-keyword\">in</span> clause)) {\n","    clause.fields = <span class=\"code-keyword\">this</span>.allFields\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (!(<span class=\"code-string\">'boost'</span> <span class=\"code-keyword\">in</span> clause)) {\n","    clause.boost = <span class=\"code-number\">1</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (!(<span class=\"code-string\">'usePipeline'</span> <span class=\"code-keyword\">in</span> clause)) {\n","    clause.usePipeline = <span class=\"code-literal\">true</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (!(<span class=\"code-string\">'wildcard'</span> <span class=\"code-keyword\">in</span> clause)) {\n","    clause.wildcard = lunr.Query.wildcard.NONE\n","  }\n","\n","  <span class=\"code-keyword\">if</span> ((clause.wildcard &amp; lunr.Query.wildcard.LEADING) &amp;&amp; (clause.term.charAt(<span class=\"code-number\">0</span>) != lunr.Query.wildcard)) {\n","    clause.term = <span class=\"code-string\">\"*\"</span> + clause.term\n","  }\n","\n","  <span class=\"code-keyword\">if</span> ((clause.wildcard &amp; lunr.Query.wildcard.TRAILING) &amp;&amp; (clause.term.slice(<span class=\"code-number\">-1</span>) != lunr.Query.wildcard)) {\n","    clause.term = <span class=\"code-string\">\"\"</span> + clause.term + <span class=\"code-string\">\"*\"</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (!(<span class=\"code-string\">'presence'</span> <span class=\"code-keyword\">in</span> clause)) {\n","    clause.presence = lunr.Query.presence.OPTIONAL\n","  }\n","\n","  <span class=\"code-keyword\">this</span>.clauses.push(clause)\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * A negated query is one in which every clause has a presence of\n</span>","<span class=\"code-comment\"> * prohibited. These queries require some special processing to return\n</span>","<span class=\"code-comment\"> * the expected results.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @returns boolean\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Query.prototype.isNegated = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; <span class=\"code-keyword\">this</span>.clauses.length; i++) {\n","    <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.clauses[i].presence != lunr.Query.presence.PROHIBITED) {\n","      <span class=\"code-keyword\">return</span> <span class=\"code-literal\">false</span>\n","    }\n","  }\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-literal\">true</span>\n","}\n","\n","<span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\"> * Adds a term to the current query, under the covers this will create a {@link lunr.Query~Clause}\n</span>","<span class=\"code-comment\"> * to the list of clauses that make up this query.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The term is used as is, i.e. no tokenization will be performed by this method. Instead conversion\n</span>","<span class=\"code-comment\"> * to a token or token-like string should be done before calling this method.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * The term will be converted to a string by calling `toString`. Multiple terms can be passed as an\n</span>","<span class=\"code-comment\"> * array, each term in the array will share the same options.\n</span>","<span class=\"code-comment\"> *\n</span>","<span class=\"code-comment\"> * @param {object|object[]} term - The term(s) to add to the query.\n</span>","<span class=\"code-comment\"> * @param {object} [options] - Any additional properties to add to the query clause.\n</span>","<span class=\"code-comment\"> * @returns {lunr.Query}\n</span>","<span class=\"code-comment\"> * @see lunr.Query#clause\n</span>","<span class=\"code-comment\"> * @see lunr.Query~Clause\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;adding a single term to a query&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * query.term(\"foo\")\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;adding a single term to a query and specifying search fields, term boost and automatic trailing wildcard&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * query.term(\"foo\", {\n</span>","<span class=\"code-comment\"> *   fields: [\"title\"],\n</span>","<span class=\"code-comment\"> *   boost: 10,\n</span>","<span class=\"code-comment\"> *   wildcard: lunr.Query.wildcard.TRAILING\n</span>","<span class=\"code-comment\"> * })\n</span>","<span class=\"code-comment\"> * @example &lt;caption&gt;using lunr.tokenizer to convert a string to tokens before using them as terms&lt;/caption&gt;\n</span>","<span class=\"code-comment\"> * query.term(lunr.tokenizer(\"foo bar\"))\n</span>","<span class=\"code-comment\"> */</span>\n","lunr.Query.prototype.term = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">term, options</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">Array</span>.isArray(term)) {\n","    term.forEach(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">t</span>) </span>{ <span class=\"code-keyword\">this</span>.term(t, lunr.utils.clone(options)) }, <span class=\"code-keyword\">this</span>)\n","    <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","  }\n","\n","  <span class=\"code-keyword\">var</span> clause = options || {}\n","  clause.term = term.toString()\n","\n","  <span class=\"code-keyword\">this</span>.clause(clause)\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>\n","}\n","lunr.QueryParseError = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">message, start, end</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.name = <span class=\"code-string\">\"QueryParseError\"</span>\n","  <span class=\"code-keyword\">this</span>.message = message\n","  <span class=\"code-keyword\">this</span>.start = start\n","  <span class=\"code-keyword\">this</span>.end = end\n","}\n","\n","lunr.QueryParseError.prototype = <span class=\"code-keyword\">new</span> <span class=\"code-built_in\">Error</span>\n","lunr.QueryLexer = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">str</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.lexemes = []\n","  <span class=\"code-keyword\">this</span>.str = str\n","  <span class=\"code-keyword\">this</span>.length = str.length\n","  <span class=\"code-keyword\">this</span>.pos = <span class=\"code-number\">0</span>\n","  <span class=\"code-keyword\">this</span>.start = <span class=\"code-number\">0</span>\n","  <span class=\"code-keyword\">this</span>.escapeCharPositions = []\n","}\n","\n","lunr.QueryLexer.prototype.run = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> state = lunr.QueryLexer.lexText\n","\n","  <span class=\"code-keyword\">while</span> (state) {\n","    state = state(<span class=\"code-keyword\">this</span>)\n","  }\n","}\n","\n","lunr.QueryLexer.prototype.sliceString = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> subSlices = [],\n","      sliceStart = <span class=\"code-keyword\">this</span>.start,\n","      sliceEnd = <span class=\"code-keyword\">this</span>.pos\n","\n","  <span class=\"code-keyword\">for</span> (<span class=\"code-keyword\">var</span> i = <span class=\"code-number\">0</span>; i &lt; <span class=\"code-keyword\">this</span>.escapeCharPositions.length; i++) {\n","    sliceEnd = <span class=\"code-keyword\">this</span>.escapeCharPositions[i]\n","    subSlices.push(<span class=\"code-keyword\">this</span>.str.slice(sliceStart, sliceEnd))\n","    sliceStart = sliceEnd + <span class=\"code-number\">1</span>\n","  }\n","\n","  subSlices.push(<span class=\"code-keyword\">this</span>.str.slice(sliceStart, <span class=\"code-keyword\">this</span>.pos))\n","  <span class=\"code-keyword\">this</span>.escapeCharPositions.length = <span class=\"code-number\">0</span>\n","\n","  <span class=\"code-keyword\">return</span> subSlices.join(<span class=\"code-string\">''</span>)\n","}\n","\n","lunr.QueryLexer.prototype.emit = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">type</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.lexemes.push({\n","    type: type,\n","    str: <span class=\"code-keyword\">this</span>.sliceString(),\n","    start: <span class=\"code-keyword\">this</span>.start,\n","    end: <span class=\"code-keyword\">this</span>.pos\n","  })\n","\n","  <span class=\"code-keyword\">this</span>.start = <span class=\"code-keyword\">this</span>.pos\n","}\n","\n","lunr.QueryLexer.prototype.escapeCharacter = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.escapeCharPositions.push(<span class=\"code-keyword\">this</span>.pos - <span class=\"code-number\">1</span>)\n","  <span class=\"code-keyword\">this</span>.pos += <span class=\"code-number\">1</span>\n","}\n","\n","lunr.QueryLexer.prototype.next = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.pos &gt;= <span class=\"code-keyword\">this</span>.length) {\n","    <span class=\"code-keyword\">return</span> lunr.QueryLexer.EOS\n","  }\n","\n","  <span class=\"code-keyword\">var</span> char = <span class=\"code-keyword\">this</span>.str.charAt(<span class=\"code-keyword\">this</span>.pos)\n","  <span class=\"code-keyword\">this</span>.pos += <span class=\"code-number\">1</span>\n","  <span class=\"code-keyword\">return</span> char\n","}\n","\n","lunr.QueryLexer.prototype.width = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.pos - <span class=\"code-keyword\">this</span>.start\n","}\n","\n","lunr.QueryLexer.prototype.ignore = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">this</span>.start == <span class=\"code-keyword\">this</span>.pos) {\n","    <span class=\"code-keyword\">this</span>.pos += <span class=\"code-number\">1</span>\n","  }\n","\n","  <span class=\"code-keyword\">this</span>.start = <span class=\"code-keyword\">this</span>.pos\n","}\n","\n","lunr.QueryLexer.prototype.backup = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.pos -= <span class=\"code-number\">1</span>\n","}\n","\n","lunr.QueryLexer.prototype.acceptDigitRun = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> char, charCode\n","\n","  <span class=\"code-keyword\">do</span> {\n","    char = <span class=\"code-keyword\">this</span>.next()\n","    charCode = char.charCodeAt(<span class=\"code-number\">0</span>)\n","  } <span class=\"code-keyword\">while</span> (charCode &gt; <span class=\"code-number\">47</span> &amp;&amp; charCode &lt; <span class=\"code-number\">58</span>)\n","\n","  <span class=\"code-keyword\">if</span> (char != lunr.QueryLexer.EOS) {\n","    <span class=\"code-keyword\">this</span>.backup()\n","  }\n","}\n","\n","lunr.QueryLexer.prototype.more = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.pos &lt; <span class=\"code-keyword\">this</span>.length\n","}\n","\n","lunr.QueryLexer.EOS = <span class=\"code-string\">'EOS'</span>\n","lunr.QueryLexer.FIELD = <span class=\"code-string\">'FIELD'</span>\n","lunr.QueryLexer.TERM = <span class=\"code-string\">'TERM'</span>\n","lunr.QueryLexer.EDIT_DISTANCE = <span class=\"code-string\">'EDIT_DISTANCE'</span>\n","lunr.QueryLexer.BOOST = <span class=\"code-string\">'BOOST'</span>\n","lunr.QueryLexer.PRESENCE = <span class=\"code-string\">'PRESENCE'</span>\n","\n","lunr.QueryLexer.lexField = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">lexer</span>) </span>{\n","  lexer.backup()\n","  lexer.emit(lunr.QueryLexer.FIELD)\n","  lexer.ignore()\n","  <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexText\n","}\n","\n","lunr.QueryLexer.lexTerm = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">lexer</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (lexer.width() &gt; <span class=\"code-number\">1</span>) {\n","    lexer.backup()\n","    lexer.emit(lunr.QueryLexer.TERM)\n","  }\n","\n","  lexer.ignore()\n","\n","  <span class=\"code-keyword\">if</span> (lexer.more()) {\n","    <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexText\n","  }\n","}\n","\n","lunr.QueryLexer.lexEditDistance = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">lexer</span>) </span>{\n","  lexer.ignore()\n","  lexer.acceptDigitRun()\n","  lexer.emit(lunr.QueryLexer.EDIT_DISTANCE)\n","  <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexText\n","}\n","\n","lunr.QueryLexer.lexBoost = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">lexer</span>) </span>{\n","  lexer.ignore()\n","  lexer.acceptDigitRun()\n","  lexer.emit(lunr.QueryLexer.BOOST)\n","  <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexText\n","}\n","\n","lunr.QueryLexer.lexEOS = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">lexer</span>) </span>{\n","  <span class=\"code-keyword\">if</span> (lexer.width() &gt; <span class=\"code-number\">0</span>) {\n","    lexer.emit(lunr.QueryLexer.TERM)\n","  }\n","}\n","\n","<span class=\"code-comment\">// This matches the separator used when tokenising fields</span>\n","<span class=\"code-comment\">// within a document. These should match otherwise it is</span>\n","<span class=\"code-comment\">// not possible to search for some tokens within a document.</span>\n","<span class=\"code-comment\">//</span>\n","<span class=\"code-comment\">// It is possible for the user to change the separator on the</span>\n","<span class=\"code-comment\">// tokenizer so it _might_ clash with any other of the special</span>\n","<span class=\"code-comment\">// characters already used within the search string, e.g. :.</span>\n","<span class=\"code-comment\">//</span>\n","<span class=\"code-comment\">// This means that it is possible to change the separator in</span>\n","<span class=\"code-comment\">// such a way that makes some words unsearchable using a search</span>\n","<span class=\"code-comment\">// string.</span>\n","lunr.QueryLexer.termSeparator = lunr.tokenizer.separator\n","\n","lunr.QueryLexer.lexText = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">lexer</span>) </span>{\n","  <span class=\"code-keyword\">while</span> (<span class=\"code-literal\">true</span>) {\n","    <span class=\"code-keyword\">var</span> char = lexer.next()\n","\n","    <span class=\"code-keyword\">if</span> (char == lunr.QueryLexer.EOS) {\n","      <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexEOS\n","    }\n","\n","    <span class=\"code-comment\">// Escape character is '\\'</span>\n","    <span class=\"code-keyword\">if</span> (char.charCodeAt(<span class=\"code-number\">0</span>) == <span class=\"code-number\">92</span>) {\n","      lexer.escapeCharacter()\n","      <span class=\"code-keyword\">continue</span>\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (char == <span class=\"code-string\">\":\"</span>) {\n","      <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexField\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (char == <span class=\"code-string\">\"~\"</span>) {\n","      lexer.backup()\n","      <span class=\"code-keyword\">if</span> (lexer.width() &gt; <span class=\"code-number\">0</span>) {\n","        lexer.emit(lunr.QueryLexer.TERM)\n","      }\n","      <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexEditDistance\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (char == <span class=\"code-string\">\"^\"</span>) {\n","      lexer.backup()\n","      <span class=\"code-keyword\">if</span> (lexer.width() &gt; <span class=\"code-number\">0</span>) {\n","        lexer.emit(lunr.QueryLexer.TERM)\n","      }\n","      <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexBoost\n","    }\n","\n","    <span class=\"code-comment\">// \"+\" indicates term presence is required</span>\n","    <span class=\"code-comment\">// checking for length to ensure that only</span>\n","    <span class=\"code-comment\">// leading \"+\" are considered</span>\n","    <span class=\"code-keyword\">if</span> (char == <span class=\"code-string\">\"+\"</span> &amp;&amp; lexer.width() === <span class=\"code-number\">1</span>) {\n","      lexer.emit(lunr.QueryLexer.PRESENCE)\n","      <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexText\n","    }\n","\n","    <span class=\"code-comment\">// \"-\" indicates term presence is prohibited</span>\n","    <span class=\"code-comment\">// checking for length to ensure that only</span>\n","    <span class=\"code-comment\">// leading \"-\" are considered</span>\n","    <span class=\"code-keyword\">if</span> (char == <span class=\"code-string\">\"-\"</span> &amp;&amp; lexer.width() === <span class=\"code-number\">1</span>) {\n","      lexer.emit(lunr.QueryLexer.PRESENCE)\n","      <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexText\n","    }\n","\n","    <span class=\"code-keyword\">if</span> (char.match(lunr.QueryLexer.termSeparator)) {\n","      <span class=\"code-keyword\">return</span> lunr.QueryLexer.lexTerm\n","    }\n","  }\n","}\n","\n","lunr.QueryParser = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">str, query</span>) </span>{\n","  <span class=\"code-keyword\">this</span>.lexer = <span class=\"code-keyword\">new</span> lunr.QueryLexer (str)\n","  <span class=\"code-keyword\">this</span>.query = query\n","  <span class=\"code-keyword\">this</span>.currentClause = {}\n","  <span class=\"code-keyword\">this</span>.lexemeIdx = <span class=\"code-number\">0</span>\n","}\n","\n","lunr.QueryParser.prototype.parse = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">this</span>.lexer.run()\n","  <span class=\"code-keyword\">this</span>.lexemes = <span class=\"code-keyword\">this</span>.lexer.lexemes\n","\n","  <span class=\"code-keyword\">var</span> state = lunr.QueryParser.parseClause\n","\n","  <span class=\"code-keyword\">while</span> (state) {\n","    state = state(<span class=\"code-keyword\">this</span>)\n","  }\n","\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.query\n","}\n","\n","lunr.QueryParser.prototype.peekLexeme = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">return</span> <span class=\"code-keyword\">this</span>.lexemes[<span class=\"code-keyword\">this</span>.lexemeIdx]\n","}\n","\n","lunr.QueryParser.prototype.consumeLexeme = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> lexeme = <span class=\"code-keyword\">this</span>.peekLexeme()\n","  <span class=\"code-keyword\">this</span>.lexemeIdx += <span class=\"code-number\">1</span>\n","  <span class=\"code-keyword\">return</span> lexeme\n","}\n","\n","lunr.QueryParser.prototype.nextClause = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","  <span class=\"code-keyword\">var</span> completedClause = <span class=\"code-keyword\">this</span>.currentClause\n","  <span class=\"code-keyword\">this</span>.query.clause(completedClause)\n","  <span class=\"code-keyword\">this</span>.currentClause = {}\n","}\n","\n","lunr.QueryParser.parseClause = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">parser</span>) </span>{\n","  <span class=\"code-keyword\">var</span> lexeme = parser.peekLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (lexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">switch</span> (lexeme.type) {\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.PRESENCE:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parsePresence\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.FIELD:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseField\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.TERM:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseTerm\n","    <span class=\"code-keyword\">default</span>:\n","      <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"expected either a field or a term, found \"</span> + lexeme.type\n","\n","      <span class=\"code-keyword\">if</span> (lexeme.str.length &gt;= <span class=\"code-number\">1</span>) {\n","        errorMessage += <span class=\"code-string\">\" with value '\"</span> + lexeme.str + <span class=\"code-string\">\"'\"</span>\n","      }\n","\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n","  }\n","}\n","\n","lunr.QueryParser.parsePresence = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">parser</span>) </span>{\n","  <span class=\"code-keyword\">var</span> lexeme = parser.consumeLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (lexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">switch</span> (lexeme.str) {\n","    <span class=\"code-keyword\">case</span> <span class=\"code-string\">\"-\"</span>:\n","      parser.currentClause.presence = lunr.Query.presence.PROHIBITED\n","      <span class=\"code-keyword\">break</span>\n","    <span class=\"code-keyword\">case</span> <span class=\"code-string\">\"+\"</span>:\n","      parser.currentClause.presence = lunr.Query.presence.REQUIRED\n","      <span class=\"code-keyword\">break</span>\n","    <span class=\"code-keyword\">default</span>:\n","      <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"unrecognised presence operator'\"</span> + lexeme.str + <span class=\"code-string\">\"'\"</span>\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n","  }\n","\n","  <span class=\"code-keyword\">var</span> nextLexeme = parser.peekLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (nextLexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"expecting term or field, found nothing\"</span>\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n","  }\n","\n","  <span class=\"code-keyword\">switch</span> (nextLexeme.type) {\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.FIELD:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseField\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.TERM:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseTerm\n","    <span class=\"code-keyword\">default</span>:\n","      <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"expecting term or field, found '\"</span> + nextLexeme.type + <span class=\"code-string\">\"'\"</span>\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n","  }\n","}\n","\n","lunr.QueryParser.parseField = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">parser</span>) </span>{\n","  <span class=\"code-keyword\">var</span> lexeme = parser.consumeLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (lexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">if</span> (parser.query.allFields.indexOf(lexeme.str) == <span class=\"code-number\">-1</span>) {\n","    <span class=\"code-keyword\">var</span> possibleFields = parser.query.allFields.map(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">f</span>) </span>{ <span class=\"code-keyword\">return</span> <span class=\"code-string\">\"'\"</span> + f + <span class=\"code-string\">\"'\"</span> }).join(<span class=\"code-string\">', '</span>),\n","        errorMessage = <span class=\"code-string\">\"unrecognised field '\"</span> + lexeme.str + <span class=\"code-string\">\"', possible fields: \"</span> + possibleFields\n","\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n","  }\n","\n","  parser.currentClause.fields = [lexeme.str]\n","\n","  <span class=\"code-keyword\">var</span> nextLexeme = parser.peekLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (nextLexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"expecting term, found nothing\"</span>\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n","  }\n","\n","  <span class=\"code-keyword\">switch</span> (nextLexeme.type) {\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.TERM:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseTerm\n","    <span class=\"code-keyword\">default</span>:\n","      <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"expecting term, found '\"</span> + nextLexeme.type + <span class=\"code-string\">\"'\"</span>\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n","  }\n","}\n","\n","lunr.QueryParser.parseTerm = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">parser</span>) </span>{\n","  <span class=\"code-keyword\">var</span> lexeme = parser.consumeLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (lexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  parser.currentClause.term = lexeme.str.toLowerCase()\n","\n","  <span class=\"code-keyword\">if</span> (lexeme.str.indexOf(<span class=\"code-string\">\"*\"</span>) != <span class=\"code-number\">-1</span>) {\n","    parser.currentClause.usePipeline = <span class=\"code-literal\">false</span>\n","  }\n","\n","  <span class=\"code-keyword\">var</span> nextLexeme = parser.peekLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (nextLexeme == <span class=\"code-literal\">undefined</span>) {\n","    parser.nextClause()\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">switch</span> (nextLexeme.type) {\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.TERM:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseTerm\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.FIELD:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseField\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.EDIT_DISTANCE:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseEditDistance\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.BOOST:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseBoost\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.PRESENCE:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parsePresence\n","    <span class=\"code-keyword\">default</span>:\n","      <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"Unexpected lexeme type '\"</span> + nextLexeme.type + <span class=\"code-string\">\"'\"</span>\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n","  }\n","}\n","\n","lunr.QueryParser.parseEditDistance = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">parser</span>) </span>{\n","  <span class=\"code-keyword\">var</span> lexeme = parser.consumeLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (lexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">var</span> editDistance = <span class=\"code-built_in\">parseInt</span>(lexeme.str, <span class=\"code-number\">10</span>)\n","\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">isNaN</span>(editDistance)) {\n","    <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"edit distance must be numeric\"</span>\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n","  }\n","\n","  parser.currentClause.editDistance = editDistance\n","\n","  <span class=\"code-keyword\">var</span> nextLexeme = parser.peekLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (nextLexeme == <span class=\"code-literal\">undefined</span>) {\n","    parser.nextClause()\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">switch</span> (nextLexeme.type) {\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.TERM:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseTerm\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.FIELD:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseField\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.EDIT_DISTANCE:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseEditDistance\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.BOOST:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseBoost\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.PRESENCE:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parsePresence\n","    <span class=\"code-keyword\">default</span>:\n","      <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"Unexpected lexeme type '\"</span> + nextLexeme.type + <span class=\"code-string\">\"'\"</span>\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n","  }\n","}\n","\n","lunr.QueryParser.parseBoost = <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">parser</span>) </span>{\n","  <span class=\"code-keyword\">var</span> lexeme = parser.consumeLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (lexeme == <span class=\"code-literal\">undefined</span>) {\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">var</span> boost = <span class=\"code-built_in\">parseInt</span>(lexeme.str, <span class=\"code-number\">10</span>)\n","\n","  <span class=\"code-keyword\">if</span> (<span class=\"code-built_in\">isNaN</span>(boost)) {\n","    <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"boost must be numeric\"</span>\n","    <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)\n","  }\n","\n","  parser.currentClause.boost = boost\n","\n","  <span class=\"code-keyword\">var</span> nextLexeme = parser.peekLexeme()\n","\n","  <span class=\"code-keyword\">if</span> (nextLexeme == <span class=\"code-literal\">undefined</span>) {\n","    parser.nextClause()\n","    <span class=\"code-keyword\">return</span>\n","  }\n","\n","  <span class=\"code-keyword\">switch</span> (nextLexeme.type) {\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.TERM:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseTerm\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.FIELD:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseField\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.EDIT_DISTANCE:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseEditDistance\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.BOOST:\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parseBoost\n","    <span class=\"code-keyword\">case</span> lunr.QueryLexer.PRESENCE:\n","      parser.nextClause()\n","      <span class=\"code-keyword\">return</span> lunr.QueryParser.parsePresence\n","    <span class=\"code-keyword\">default</span>:\n","      <span class=\"code-keyword\">var</span> errorMessage = <span class=\"code-string\">\"Unexpected lexeme type '\"</span> + nextLexeme.type + <span class=\"code-string\">\"'\"</span>\n","      <span class=\"code-keyword\">throw</span> <span class=\"code-keyword\">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)\n","  }\n","}\n","\n","  <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">   * export the module via AMD, CommonJS or as a browser global\n</span>","<span class=\"code-comment\">   * Export code from https://github.com/umdjs/umd/blob/master/returnExports.js\n</span>","<span class=\"code-comment\">   */</span>\n","  ;(<span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\">root, factory</span>) </span>{\n","    <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> define === <span class=\"code-string\">'function'</span> &amp;&amp; define.amd) {\n","      <span class=\"code-comment\">// AMD. Register as an anonymous module.</span>\n","      define(factory)\n","    } <span class=\"code-keyword\">else</span> <span class=\"code-keyword\">if</span> (<span class=\"code-keyword\">typeof</span> exports === <span class=\"code-string\">'object'</span>) {\n","      <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">       * Node. Does not work with strict CommonJS, but\n</span>","<span class=\"code-comment\">       * only CommonJS-like enviroments that support module.exports,\n</span>","<span class=\"code-comment\">       * like Node.\n</span>","<span class=\"code-comment\">       */</span>\n","      <span class=\"code-built_in\">module</span>.exports = factory()\n","    } <span class=\"code-keyword\">else</span> {\n","      <span class=\"code-comment\">// Browser globals (root is window)</span>\n","      root.lunr = factory()\n","    }\n","  }(<span class=\"code-keyword\">this</span>, <span class=\"code-function\"><span class=\"code-keyword\">function</span> (<span class=\"code-params\"></span>) </span>{\n","    <span class=\"code-comment\">/**\n</span>","<span class=\"code-comment\">     * Just return a value to define the module export.\n</span>","<span class=\"code-comment\">     * This example returns an object, but the module\n</span>","<span class=\"code-comment\">     * can return a function as the exported value.\n</span>","<span class=\"code-comment\">     */</span>\n","    <span class=\"code-keyword\">return</span> lunr\n","  }))\n","})();\n",""]}}}</script></head><body><div id="root"><style data-emotion-css="gtfibm">html{box-sizing:border-box;}*,*:before,*:after{box-sizing:inherit;}html,body,#root{height:100%;margin:0;}body{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;font-size:16px;line-height:1.5;overflow-wrap:break-word;background:white;color:black;}code{font-family:Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;}th,td{padding:0;}select{font-size:inherit;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1r6h1r6">.code-listing{background:#fbfdff;color:#383a42;}.code-comment,.code-quote{color:#a0a1a7;font-style:italic;}.code-doctag,.code-keyword,.code-link,.code-formula{color:#a626a4;}.code-section,.code-name,.code-selector-tag,.code-deletion,.code-subst{color:#e45649;}.code-literal{color:#0184bb;}.code-string,.code-regexp,.code-addition,.code-attribute,.code-meta-string{color:#50a14f;}.code-built_in,.code-class .code-title{color:#c18401;}.code-attr,.code-variable,.code-template-variable,.code-type,.code-selector-class,.code-selector-attr,.code-selector-pseudo,.code-number{color:#986801;}.code-symbol,.code-bullet,.code-meta,.code-selector-id,.code-title{color:#4078f2;}.code-emphasis{font-style:italic;}.code-strong{font-weight:bold;}</style><style data-emotion-css="1c3h18e">.css-1c3h18e{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;}</style><div class="css-1c3h18e"><style data-emotion-css="1cfuj1t">.css-1cfuj1t{max-width:940px;padding:0 20px;margin:0 auto;}</style><div class="css-1cfuj1t"><style data-emotion-css="i51og3">.css-i51og3{margin-top:2rem;}</style><header class="css-i51og3"><style data-emotion-css="1y7u1xh">.css-1y7u1xh{text-align:center;font-size:3rem;-webkit-letter-spacing:0.05em;-moz-letter-spacing:0.05em;-ms-letter-spacing:0.05em;letter-spacing:0.05em;}</style><h1 class="css-1y7u1xh"><style data-emotion-css="1ydg16i">.css-1ydg16i{color:#000;-webkit-text-decoration:none;text-decoration:none;}</style><a href="/" class="css-1ydg16i">UNPKG</a></h1></header></div><div class="css-1cfuj1t"><style data-emotion-css="93o42g">.css-93o42g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:700px){.css-93o42g{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><header class="css-93o42g"><style data-emotion-css="1dlpvgi">.css-1dlpvgi{font-size:1.5rem;font-weight:normal;-webkit-flex:1;-ms-flex:1;flex:1;word-break:break-all;}</style><h1 class="css-1dlpvgi"><nav><style data-emotion-css="xt128v">.css-xt128v{color:#0076ff;-webkit-text-decoration:none;text-decoration:none;}.css-xt128v:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="/browse/lunr@2.3.9/" class="css-xt128v">lunr</a><style data-emotion-css="lllnmq">.css-lllnmq{padding-left:5px;padding-right:5px;}</style><span class="css-lllnmq">/</span><strong>lunr.js</strong></nav></h1><style data-emotion-css="1nr3dab">.css-1nr3dab{margin-left:20px;}@media (max-width:700px){.css-1nr3dab{margin-left:0;margin-bottom:0;}}</style><p class="css-1nr3dab"><label>Version:<!-- --> <style data-emotion-css="un3bt6">.css-un3bt6{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;padding:4px 24px 4px 8px;font-weight:600;font-size:0.9em;color:#24292e;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-color:#eff3f6;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==);background-position:right 8px center;background-repeat:no-repeat;background-size:auto 25%;}.css-un3bt6:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-un3bt6:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><select name="version" class="css-un3bt6"><option value="0.2.0">0.2.0</option><option value="0.2.1">0.2.1</option><option value="0.2.2">0.2.2</option><option value="0.2.3">0.2.3</option><option value="0.3.0">0.3.0</option><option value="0.3.1">0.3.1</option><option value="0.3.2">0.3.2</option><option value="0.3.3">0.3.3</option><option value="0.4.0">0.4.0</option><option value="0.4.1">0.4.1</option><option value="0.4.2">0.4.2</option><option value="0.4.3">0.4.3</option><option value="0.4.4">0.4.4</option><option value="0.4.5">0.4.5</option><option value="0.5.1">0.5.1</option><option value="0.5.2">0.5.2</option><option value="0.5.3">0.5.3</option><option value="0.5.4">0.5.4</option><option value="0.5.5">0.5.5</option><option value="0.5.6">0.5.6</option><option value="0.5.7">0.5.7</option><option value="0.5.8">0.5.8</option><option value="0.5.9">0.5.9</option><option value="0.5.10">0.5.10</option><option value="0.5.11">0.5.11</option><option value="0.5.12">0.5.12</option><option value="0.6.0">0.6.0</option><option value="0.7.0">0.7.0</option><option value="0.7.1">0.7.1</option><option value="0.7.2">0.7.2</option><option value="1.0.0">1.0.0</option><option value="2.0.0-alpha.1">2.0.0-alpha.1</option><option value="2.0.0-alpha.2">2.0.0-alpha.2</option><option value="2.0.0-alpha.3">2.0.0-alpha.3</option><option value="2.0.0-alpha.4">2.0.0-alpha.4</option><option value="2.0.0-alpha.5">2.0.0-alpha.5</option><option value="2.0.0">2.0.0</option><option value="2.0.1">2.0.1</option><option value="2.0.2">2.0.2</option><option value="2.0.3">2.0.3</option><option value="2.0.4">2.0.4</option><option value="2.1.0-alpha.1">2.1.0-alpha.1</option><option value="2.1.0-alpha.2">2.1.0-alpha.2</option><option value="2.1.0">2.1.0</option><option value="2.1.1">2.1.1</option><option value="2.1.2">2.1.2</option><option value="2.1.3">2.1.3</option><option value="2.1.4">2.1.4</option><option value="2.1.5">2.1.5</option><option value="2.1.6">2.1.6</option><option value="2.2.0-alpha.1">2.2.0-alpha.1</option><option value="2.2.0-alpha.2">2.2.0-alpha.2</option><option value="2.2.0">2.2.0</option><option value="2.2.1">2.2.1</option><option value="2.3.0">2.3.0</option><option value="2.3.1">2.3.1</option><option value="2.3.2">2.3.2</option><option value="2.3.3">2.3.3</option><option value="2.3.4">2.3.4</option><option value="2.3.5">2.3.5</option><option value="2.3.6">2.3.6</option><option value="2.3.7">2.3.7</option><option value="2.3.8">2.3.8</option><option selected="" value="2.3.9">2.3.9</option></select></label></p></header></div><style data-emotion-css="107j3ms">.css-107j3ms{max-width:940px;padding:0 20px;margin:0 auto;}@media (max-width:700px){.css-107j3ms{padding:0;margin:0;}}</style><div class="css-107j3ms"><style data-emotion-css="q3frg4">.css-q3frg4{border:1px solid #dfe2e5;border-radius:3px;}@media (max-width:700px){.css-q3frg4{border-right-width:0;border-left-width:0;}}</style><div class="css-q3frg4"><style data-emotion-css="10o5omr">.css-10o5omr{padding:10px;background:#f6f8fa;color:#424242;border:1px solid #d1d5da;border-top-left-radius:3px;border-top-right-radius:3px;margin:-1px -1px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media (max-width:700px){.css-10o5omr{padding-right:20px;padding-left:20px;}}</style><div class="css-10o5omr"><span>99.8 kB</span><span>JavaScript</span><span><style data-emotion-css="18x593j">.css-18x593j{display:inline-block;margin-left:8px;padding:2px 8px;-webkit-text-decoration:none;text-decoration:none;font-weight:600;font-size:0.9rem;color:#24292e;background-color:#eff3f6;border:1px solid rgba(27,31,35,.2);border-radius:3px;}.css-18x593j:hover{background-color:#e6ebf1;border-color:rgba(27,31,35,.35);}.css-18x593j:active{background-color:#e9ecef;border-color:rgba(27,31,35,.35);box-shadow:inset 0 0.15em 0.3em rgba(27,31,35,.15);}</style><a href="/lunr@2.3.9/lunr.js" class="css-18x593j">View Raw</a></span></div><style data-emotion-css="1i31ihw">.css-1i31ihw{overflow-x:auto;overflow-y:hidden;padding-top:5px;padding-bottom:5px;}</style><div class="code-listing css-1i31ihw"><style data-emotion-css="173nir8">.css-173nir8{border:none;border-collapse:collapse;border-spacing:0;}</style><table class="css-173nir8"><tbody><tr><style data-emotion-css="a4x74f">.css-a4x74f{padding-left:10px;padding-right:10px;color:rgba(27,31,35,.3);text-align:right;vertical-align:top;width:1%;min-width:50px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><td id="L1" class="css-a4x74f"><span>1</span></td><style data-emotion-css="1dcdqdg">.css-1dcdqdg{padding-left:10px;padding-right:10px;color:#24292e;white-space:pre;}</style><td id="LC1" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2" class="css-a4x74f"><span>2</span></td><td id="LC2" class="css-1dcdqdg"><code><span class="code-comment"> * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.9
</span></code></td></tr><tr><td id="L3" class="css-a4x74f"><span>3</span></td><td id="LC3" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L4" class="css-a4x74f"><span>4</span></td><td id="LC4" class="css-1dcdqdg"><code><span class="code-comment"> * @license MIT
</span></code></td></tr><tr><td id="L5" class="css-a4x74f"><span>5</span></td><td id="LC5" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L6" class="css-a4x74f"><span>6</span></td><td id="LC6" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L7" class="css-a4x74f"><span>7</span></td><td id="LC7" class="css-1dcdqdg"><code>;(<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{
</code></td></tr><tr><td id="L8" class="css-a4x74f"><span>8</span></td><td id="LC8" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L9" class="css-a4x74f"><span>9</span></td><td id="LC9" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L10" class="css-a4x74f"><span>10</span></td><td id="LC10" class="css-1dcdqdg"><code><span class="code-comment"> * A convenience function for configuring and constructing
</span></code></td></tr><tr><td id="L11" class="css-a4x74f"><span>11</span></td><td id="LC11" class="css-1dcdqdg"><code><span class="code-comment"> * a new lunr Index.
</span></code></td></tr><tr><td id="L12" class="css-a4x74f"><span>12</span></td><td id="LC12" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L13" class="css-a4x74f"><span>13</span></td><td id="LC13" class="css-1dcdqdg"><code><span class="code-comment"> * A lunr.Builder instance is created and the pipeline setup
</span></code></td></tr><tr><td id="L14" class="css-a4x74f"><span>14</span></td><td id="LC14" class="css-1dcdqdg"><code><span class="code-comment"> * with a trimmer, stop word filter and stemmer.
</span></code></td></tr><tr><td id="L15" class="css-a4x74f"><span>15</span></td><td id="LC15" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L16" class="css-a4x74f"><span>16</span></td><td id="LC16" class="css-1dcdqdg"><code><span class="code-comment"> * This builder object is yielded to the configuration function
</span></code></td></tr><tr><td id="L17" class="css-a4x74f"><span>17</span></td><td id="LC17" class="css-1dcdqdg"><code><span class="code-comment"> * that is passed as a parameter, allowing the list of fields
</span></code></td></tr><tr><td id="L18" class="css-a4x74f"><span>18</span></td><td id="LC18" class="css-1dcdqdg"><code><span class="code-comment"> * and other builder parameters to be customised.
</span></code></td></tr><tr><td id="L19" class="css-a4x74f"><span>19</span></td><td id="LC19" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L20" class="css-a4x74f"><span>20</span></td><td id="LC20" class="css-1dcdqdg"><code><span class="code-comment"> * All documents _must_ be added within the passed config function.
</span></code></td></tr><tr><td id="L21" class="css-a4x74f"><span>21</span></td><td id="LC21" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L22" class="css-a4x74f"><span>22</span></td><td id="LC22" class="css-1dcdqdg"><code><span class="code-comment"> * @example
</span></code></td></tr><tr><td id="L23" class="css-a4x74f"><span>23</span></td><td id="LC23" class="css-1dcdqdg"><code><span class="code-comment"> * var idx = lunr(function () {
</span></code></td></tr><tr><td id="L24" class="css-a4x74f"><span>24</span></td><td id="LC24" class="css-1dcdqdg"><code><span class="code-comment"> *   this.field('title')
</span></code></td></tr><tr><td id="L25" class="css-a4x74f"><span>25</span></td><td id="LC25" class="css-1dcdqdg"><code><span class="code-comment"> *   this.field('body')
</span></code></td></tr><tr><td id="L26" class="css-a4x74f"><span>26</span></td><td id="LC26" class="css-1dcdqdg"><code><span class="code-comment"> *   this.ref('id')
</span></code></td></tr><tr><td id="L27" class="css-a4x74f"><span>27</span></td><td id="LC27" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L28" class="css-a4x74f"><span>28</span></td><td id="LC28" class="css-1dcdqdg"><code><span class="code-comment"> *   documents.forEach(function (doc) {
</span></code></td></tr><tr><td id="L29" class="css-a4x74f"><span>29</span></td><td id="LC29" class="css-1dcdqdg"><code><span class="code-comment"> *     this.add(doc)
</span></code></td></tr><tr><td id="L30" class="css-a4x74f"><span>30</span></td><td id="LC30" class="css-1dcdqdg"><code><span class="code-comment"> *   }, this)
</span></code></td></tr><tr><td id="L31" class="css-a4x74f"><span>31</span></td><td id="LC31" class="css-1dcdqdg"><code><span class="code-comment"> * })
</span></code></td></tr><tr><td id="L32" class="css-a4x74f"><span>32</span></td><td id="LC32" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L33" class="css-a4x74f"><span>33</span></td><td id="LC33" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.Builder}
</span></code></td></tr><tr><td id="L34" class="css-a4x74f"><span>34</span></td><td id="LC34" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.Pipeline}
</span></code></td></tr><tr><td id="L35" class="css-a4x74f"><span>35</span></td><td id="LC35" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.trimmer}
</span></code></td></tr><tr><td id="L36" class="css-a4x74f"><span>36</span></td><td id="LC36" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.stopWordFilter}
</span></code></td></tr><tr><td id="L37" class="css-a4x74f"><span>37</span></td><td id="LC37" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.stemmer}
</span></code></td></tr><tr><td id="L38" class="css-a4x74f"><span>38</span></td><td id="LC38" class="css-1dcdqdg"><code><span class="code-comment"> * @namespace {function} lunr
</span></code></td></tr><tr><td id="L39" class="css-a4x74f"><span>39</span></td><td id="LC39" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L40" class="css-a4x74f"><span>40</span></td><td id="LC40" class="css-1dcdqdg"><code><span class="code-keyword">var</span> lunr = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">config</span>) </span>{
</code></td></tr><tr><td id="L41" class="css-a4x74f"><span>41</span></td><td id="LC41" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> builder = <span class="code-keyword">new</span> lunr.Builder
</code></td></tr><tr><td id="L42" class="css-a4x74f"><span>42</span></td><td id="LC42" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L43" class="css-a4x74f"><span>43</span></td><td id="LC43" class="css-1dcdqdg"><code>  builder.pipeline.add(
</code></td></tr><tr><td id="L44" class="css-a4x74f"><span>44</span></td><td id="LC44" class="css-1dcdqdg"><code>    lunr.trimmer,
</code></td></tr><tr><td id="L45" class="css-a4x74f"><span>45</span></td><td id="LC45" class="css-1dcdqdg"><code>    lunr.stopWordFilter,
</code></td></tr><tr><td id="L46" class="css-a4x74f"><span>46</span></td><td id="LC46" class="css-1dcdqdg"><code>    lunr.stemmer
</code></td></tr><tr><td id="L47" class="css-a4x74f"><span>47</span></td><td id="LC47" class="css-1dcdqdg"><code>  )
</code></td></tr><tr><td id="L48" class="css-a4x74f"><span>48</span></td><td id="LC48" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L49" class="css-a4x74f"><span>49</span></td><td id="LC49" class="css-1dcdqdg"><code>  builder.searchPipeline.add(
</code></td></tr><tr><td id="L50" class="css-a4x74f"><span>50</span></td><td id="LC50" class="css-1dcdqdg"><code>    lunr.stemmer
</code></td></tr><tr><td id="L51" class="css-a4x74f"><span>51</span></td><td id="LC51" class="css-1dcdqdg"><code>  )
</code></td></tr><tr><td id="L52" class="css-a4x74f"><span>52</span></td><td id="LC52" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L53" class="css-a4x74f"><span>53</span></td><td id="LC53" class="css-1dcdqdg"><code>  config.call(builder, builder)
</code></td></tr><tr><td id="L54" class="css-a4x74f"><span>54</span></td><td id="LC54" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> builder.build()
</code></td></tr><tr><td id="L55" class="css-a4x74f"><span>55</span></td><td id="LC55" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L56" class="css-a4x74f"><span>56</span></td><td id="LC56" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L57" class="css-a4x74f"><span>57</span></td><td id="LC57" class="css-1dcdqdg"><code>lunr.version = <span class="code-string">"2.3.9"</span>
</code></td></tr><tr><td id="L58" class="css-a4x74f"><span>58</span></td><td id="LC58" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L59" class="css-a4x74f"><span>59</span></td><td id="LC59" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.utils
</span></code></td></tr><tr><td id="L60" class="css-a4x74f"><span>60</span></td><td id="LC60" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L61" class="css-a4x74f"><span>61</span></td><td id="LC61" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L62" class="css-a4x74f"><span>62</span></td><td id="LC62" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L63" class="css-a4x74f"><span>63</span></td><td id="LC63" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L64" class="css-a4x74f"><span>64</span></td><td id="LC64" class="css-1dcdqdg"><code><span class="code-comment"> * A namespace containing utils for the rest of the lunr library
</span></code></td></tr><tr><td id="L65" class="css-a4x74f"><span>65</span></td><td id="LC65" class="css-1dcdqdg"><code><span class="code-comment"> * @namespace lunr.utils
</span></code></td></tr><tr><td id="L66" class="css-a4x74f"><span>66</span></td><td id="LC66" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L67" class="css-a4x74f"><span>67</span></td><td id="LC67" class="css-1dcdqdg"><code>lunr.utils = {}
</code></td></tr><tr><td id="L68" class="css-a4x74f"><span>68</span></td><td id="LC68" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L69" class="css-a4x74f"><span>69</span></td><td id="LC69" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L70" class="css-a4x74f"><span>70</span></td><td id="LC70" class="css-1dcdqdg"><code><span class="code-comment"> * Print a warning message to the console.
</span></code></td></tr><tr><td id="L71" class="css-a4x74f"><span>71</span></td><td id="LC71" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L72" class="css-a4x74f"><span>72</span></td><td id="LC72" class="css-1dcdqdg"><code><span class="code-comment"> * @param {String} message The message to be printed.
</span></code></td></tr><tr><td id="L73" class="css-a4x74f"><span>73</span></td><td id="LC73" class="css-1dcdqdg"><code><span class="code-comment"> * @memberOf lunr.utils
</span></code></td></tr><tr><td id="L74" class="css-a4x74f"><span>74</span></td><td id="LC74" class="css-1dcdqdg"><code><span class="code-comment"> * @function
</span></code></td></tr><tr><td id="L75" class="css-a4x74f"><span>75</span></td><td id="LC75" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L76" class="css-a4x74f"><span>76</span></td><td id="LC76" class="css-1dcdqdg"><code>lunr.utils.warn = (<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">global</span>) </span>{
</code></td></tr><tr><td id="L77" class="css-a4x74f"><span>77</span></td><td id="LC77" class="css-1dcdqdg"><code>  <span class="code-comment">/* eslint-disable no-console */</span>
</code></td></tr><tr><td id="L78" class="css-a4x74f"><span>78</span></td><td id="LC78" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">message</span>) </span>{
</code></td></tr><tr><td id="L79" class="css-a4x74f"><span>79</span></td><td id="LC79" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (global.console &amp;&amp; <span class="code-built_in">console</span>.warn) {
</code></td></tr><tr><td id="L80" class="css-a4x74f"><span>80</span></td><td id="LC80" class="css-1dcdqdg"><code>      <span class="code-built_in">console</span>.warn(message)
</code></td></tr><tr><td id="L81" class="css-a4x74f"><span>81</span></td><td id="LC81" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L82" class="css-a4x74f"><span>82</span></td><td id="LC82" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L83" class="css-a4x74f"><span>83</span></td><td id="LC83" class="css-1dcdqdg"><code>  <span class="code-comment">/* eslint-enable no-console */</span>
</code></td></tr><tr><td id="L84" class="css-a4x74f"><span>84</span></td><td id="LC84" class="css-1dcdqdg"><code>})(<span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L85" class="css-a4x74f"><span>85</span></td><td id="LC85" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L86" class="css-a4x74f"><span>86</span></td><td id="LC86" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L87" class="css-a4x74f"><span>87</span></td><td id="LC87" class="css-1dcdqdg"><code><span class="code-comment"> * Convert an object to a string.
</span></code></td></tr><tr><td id="L88" class="css-a4x74f"><span>88</span></td><td id="LC88" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L89" class="css-a4x74f"><span>89</span></td><td id="LC89" class="css-1dcdqdg"><code><span class="code-comment"> * In the case of `null` and `undefined` the function returns
</span></code></td></tr><tr><td id="L90" class="css-a4x74f"><span>90</span></td><td id="LC90" class="css-1dcdqdg"><code><span class="code-comment"> * the empty string, in all other cases the result of calling
</span></code></td></tr><tr><td id="L91" class="css-a4x74f"><span>91</span></td><td id="LC91" class="css-1dcdqdg"><code><span class="code-comment"> * `toString` on the passed object is returned.
</span></code></td></tr><tr><td id="L92" class="css-a4x74f"><span>92</span></td><td id="LC92" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L93" class="css-a4x74f"><span>93</span></td><td id="LC93" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Any} obj The object to convert to a string.
</span></code></td></tr><tr><td id="L94" class="css-a4x74f"><span>94</span></td><td id="LC94" class="css-1dcdqdg"><code><span class="code-comment"> * @return {String} string representation of the passed object.
</span></code></td></tr><tr><td id="L95" class="css-a4x74f"><span>95</span></td><td id="LC95" class="css-1dcdqdg"><code><span class="code-comment"> * @memberOf lunr.utils
</span></code></td></tr><tr><td id="L96" class="css-a4x74f"><span>96</span></td><td id="LC96" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L97" class="css-a4x74f"><span>97</span></td><td id="LC97" class="css-1dcdqdg"><code>lunr.utils.asString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">obj</span>) </span>{
</code></td></tr><tr><td id="L98" class="css-a4x74f"><span>98</span></td><td id="LC98" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (obj === <span class="code-keyword">void</span> <span class="code-number">0</span> || obj === <span class="code-literal">null</span>) {
</code></td></tr><tr><td id="L99" class="css-a4x74f"><span>99</span></td><td id="LC99" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-string">""</span>
</code></td></tr><tr><td id="L100" class="css-a4x74f"><span>100</span></td><td id="LC100" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L101" class="css-a4x74f"><span>101</span></td><td id="LC101" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> obj.toString()
</code></td></tr><tr><td id="L102" class="css-a4x74f"><span>102</span></td><td id="LC102" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L103" class="css-a4x74f"><span>103</span></td><td id="LC103" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L104" class="css-a4x74f"><span>104</span></td><td id="LC104" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L105" class="css-a4x74f"><span>105</span></td><td id="LC105" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L106" class="css-a4x74f"><span>106</span></td><td id="LC106" class="css-1dcdqdg"><code><span class="code-comment"> * Clones an object.
</span></code></td></tr><tr><td id="L107" class="css-a4x74f"><span>107</span></td><td id="LC107" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L108" class="css-a4x74f"><span>108</span></td><td id="LC108" class="css-1dcdqdg"><code><span class="code-comment"> * Will create a copy of an existing object such that any mutations
</span></code></td></tr><tr><td id="L109" class="css-a4x74f"><span>109</span></td><td id="LC109" class="css-1dcdqdg"><code><span class="code-comment"> * on the copy cannot affect the original.
</span></code></td></tr><tr><td id="L110" class="css-a4x74f"><span>110</span></td><td id="LC110" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L111" class="css-a4x74f"><span>111</span></td><td id="LC111" class="css-1dcdqdg"><code><span class="code-comment"> * Only shallow objects are supported, passing a nested object to this
</span></code></td></tr><tr><td id="L112" class="css-a4x74f"><span>112</span></td><td id="LC112" class="css-1dcdqdg"><code><span class="code-comment"> * function will cause a TypeError.
</span></code></td></tr><tr><td id="L113" class="css-a4x74f"><span>113</span></td><td id="LC113" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L114" class="css-a4x74f"><span>114</span></td><td id="LC114" class="css-1dcdqdg"><code><span class="code-comment"> * Objects with primitives, and arrays of primitives are supported.
</span></code></td></tr><tr><td id="L115" class="css-a4x74f"><span>115</span></td><td id="LC115" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L116" class="css-a4x74f"><span>116</span></td><td id="LC116" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object} obj The object to clone.
</span></code></td></tr><tr><td id="L117" class="css-a4x74f"><span>117</span></td><td id="LC117" class="css-1dcdqdg"><code><span class="code-comment"> * @return {Object} a clone of the passed object.
</span></code></td></tr><tr><td id="L118" class="css-a4x74f"><span>118</span></td><td id="LC118" class="css-1dcdqdg"><code><span class="code-comment"> * @throws {TypeError} when a nested object is passed.
</span></code></td></tr><tr><td id="L119" class="css-a4x74f"><span>119</span></td><td id="LC119" class="css-1dcdqdg"><code><span class="code-comment"> * @memberOf Utils
</span></code></td></tr><tr><td id="L120" class="css-a4x74f"><span>120</span></td><td id="LC120" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L121" class="css-a4x74f"><span>121</span></td><td id="LC121" class="css-1dcdqdg"><code>lunr.utils.clone = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">obj</span>) </span>{
</code></td></tr><tr><td id="L122" class="css-a4x74f"><span>122</span></td><td id="LC122" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (obj === <span class="code-literal">null</span> || obj === <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L123" class="css-a4x74f"><span>123</span></td><td id="LC123" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> obj
</code></td></tr><tr><td id="L124" class="css-a4x74f"><span>124</span></td><td id="LC124" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L125" class="css-a4x74f"><span>125</span></td><td id="LC125" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L126" class="css-a4x74f"><span>126</span></td><td id="LC126" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> clone = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>),
</code></td></tr><tr><td id="L127" class="css-a4x74f"><span>127</span></td><td id="LC127" class="css-1dcdqdg"><code>      keys = <span class="code-built_in">Object</span>.keys(obj)
</code></td></tr><tr><td id="L128" class="css-a4x74f"><span>128</span></td><td id="LC128" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L129" class="css-a4x74f"><span>129</span></td><td id="LC129" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; keys.length; i++) {
</code></td></tr><tr><td id="L130" class="css-a4x74f"><span>130</span></td><td id="LC130" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> key = keys[i],
</code></td></tr><tr><td id="L131" class="css-a4x74f"><span>131</span></td><td id="LC131" class="css-1dcdqdg"><code>        val = obj[key]
</code></td></tr><tr><td id="L132" class="css-a4x74f"><span>132</span></td><td id="LC132" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L133" class="css-a4x74f"><span>133</span></td><td id="LC133" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (<span class="code-built_in">Array</span>.isArray(val)) {
</code></td></tr><tr><td id="L134" class="css-a4x74f"><span>134</span></td><td id="LC134" class="css-1dcdqdg"><code>      clone[key] = val.slice()
</code></td></tr><tr><td id="L135" class="css-a4x74f"><span>135</span></td><td id="LC135" class="css-1dcdqdg"><code>      <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L136" class="css-a4x74f"><span>136</span></td><td id="LC136" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L137" class="css-a4x74f"><span>137</span></td><td id="LC137" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L138" class="css-a4x74f"><span>138</span></td><td id="LC138" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> val === <span class="code-string">'string'</span> ||
</code></td></tr><tr><td id="L139" class="css-a4x74f"><span>139</span></td><td id="LC139" class="css-1dcdqdg"><code>        <span class="code-keyword">typeof</span> val === <span class="code-string">'number'</span> ||
</code></td></tr><tr><td id="L140" class="css-a4x74f"><span>140</span></td><td id="LC140" class="css-1dcdqdg"><code>        <span class="code-keyword">typeof</span> val === <span class="code-string">'boolean'</span>) {
</code></td></tr><tr><td id="L141" class="css-a4x74f"><span>141</span></td><td id="LC141" class="css-1dcdqdg"><code>      clone[key] = val
</code></td></tr><tr><td id="L142" class="css-a4x74f"><span>142</span></td><td id="LC142" class="css-1dcdqdg"><code>      <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L143" class="css-a4x74f"><span>143</span></td><td id="LC143" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L144" class="css-a4x74f"><span>144</span></td><td id="LC144" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L145" class="css-a4x74f"><span>145</span></td><td id="LC145" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">TypeError</span>(<span class="code-string">"clone is not deep and does not support nested objects"</span>)
</code></td></tr><tr><td id="L146" class="css-a4x74f"><span>146</span></td><td id="LC146" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L147" class="css-a4x74f"><span>147</span></td><td id="LC147" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L148" class="css-a4x74f"><span>148</span></td><td id="LC148" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> clone
</code></td></tr><tr><td id="L149" class="css-a4x74f"><span>149</span></td><td id="LC149" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L150" class="css-a4x74f"><span>150</span></td><td id="LC150" class="css-1dcdqdg"><code>lunr.FieldRef = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">docRef, fieldName, stringValue</span>) </span>{
</code></td></tr><tr><td id="L151" class="css-a4x74f"><span>151</span></td><td id="LC151" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.docRef = docRef
</code></td></tr><tr><td id="L152" class="css-a4x74f"><span>152</span></td><td id="LC152" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.fieldName = fieldName
</code></td></tr><tr><td id="L153" class="css-a4x74f"><span>153</span></td><td id="LC153" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._stringValue = stringValue
</code></td></tr><tr><td id="L154" class="css-a4x74f"><span>154</span></td><td id="LC154" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L155" class="css-a4x74f"><span>155</span></td><td id="LC155" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L156" class="css-a4x74f"><span>156</span></td><td id="LC156" class="css-1dcdqdg"><code>lunr.FieldRef.joiner = <span class="code-string">"/"</span>
</code></td></tr><tr><td id="L157" class="css-a4x74f"><span>157</span></td><td id="LC157" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L158" class="css-a4x74f"><span>158</span></td><td id="LC158" class="css-1dcdqdg"><code>lunr.FieldRef.fromString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">s</span>) </span>{
</code></td></tr><tr><td id="L159" class="css-a4x74f"><span>159</span></td><td id="LC159" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> n = s.indexOf(lunr.FieldRef.joiner)
</code></td></tr><tr><td id="L160" class="css-a4x74f"><span>160</span></td><td id="LC160" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L161" class="css-a4x74f"><span>161</span></td><td id="LC161" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (n === <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L162" class="css-a4x74f"><span>162</span></td><td id="LC162" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-string">"malformed field ref string"</span>
</code></td></tr><tr><td id="L163" class="css-a4x74f"><span>163</span></td><td id="LC163" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L164" class="css-a4x74f"><span>164</span></td><td id="LC164" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L165" class="css-a4x74f"><span>165</span></td><td id="LC165" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> fieldRef = s.slice(<span class="code-number">0</span>, n),
</code></td></tr><tr><td id="L166" class="css-a4x74f"><span>166</span></td><td id="LC166" class="css-1dcdqdg"><code>      docRef = s.slice(n + <span class="code-number">1</span>)
</code></td></tr><tr><td id="L167" class="css-a4x74f"><span>167</span></td><td id="LC167" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L168" class="css-a4x74f"><span>168</span></td><td id="LC168" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">new</span> lunr.FieldRef (docRef, fieldRef, s)
</code></td></tr><tr><td id="L169" class="css-a4x74f"><span>169</span></td><td id="LC169" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L170" class="css-a4x74f"><span>170</span></td><td id="LC170" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L171" class="css-a4x74f"><span>171</span></td><td id="LC171" class="css-1dcdqdg"><code>lunr.FieldRef.prototype.toString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L172" class="css-a4x74f"><span>172</span></td><td id="LC172" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>._stringValue == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L173" class="css-a4x74f"><span>173</span></td><td id="LC173" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>._stringValue = <span class="code-keyword">this</span>.fieldName + lunr.FieldRef.joiner + <span class="code-keyword">this</span>.docRef
</code></td></tr><tr><td id="L174" class="css-a4x74f"><span>174</span></td><td id="LC174" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L175" class="css-a4x74f"><span>175</span></td><td id="LC175" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L176" class="css-a4x74f"><span>176</span></td><td id="LC176" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>._stringValue
</code></td></tr><tr><td id="L177" class="css-a4x74f"><span>177</span></td><td id="LC177" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L178" class="css-a4x74f"><span>178</span></td><td id="LC178" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L179" class="css-a4x74f"><span>179</span></td><td id="LC179" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Set
</span></code></td></tr><tr><td id="L180" class="css-a4x74f"><span>180</span></td><td id="LC180" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L181" class="css-a4x74f"><span>181</span></td><td id="LC181" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L182" class="css-a4x74f"><span>182</span></td><td id="LC182" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L183" class="css-a4x74f"><span>183</span></td><td id="LC183" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L184" class="css-a4x74f"><span>184</span></td><td id="LC184" class="css-1dcdqdg"><code><span class="code-comment"> * A lunr set.
</span></code></td></tr><tr><td id="L185" class="css-a4x74f"><span>185</span></td><td id="LC185" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L186" class="css-a4x74f"><span>186</span></td><td id="LC186" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L187" class="css-a4x74f"><span>187</span></td><td id="LC187" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L188" class="css-a4x74f"><span>188</span></td><td id="LC188" class="css-1dcdqdg"><code>lunr.Set = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">elements</span>) </span>{
</code></td></tr><tr><td id="L189" class="css-a4x74f"><span>189</span></td><td id="LC189" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.elements = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L190" class="css-a4x74f"><span>190</span></td><td id="LC190" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L191" class="css-a4x74f"><span>191</span></td><td id="LC191" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (elements) {
</code></td></tr><tr><td id="L192" class="css-a4x74f"><span>192</span></td><td id="LC192" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.length = elements.length
</code></td></tr><tr><td id="L193" class="css-a4x74f"><span>193</span></td><td id="LC193" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L194" class="css-a4x74f"><span>194</span></td><td id="LC194" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; <span class="code-keyword">this</span>.length; i++) {
</code></td></tr><tr><td id="L195" class="css-a4x74f"><span>195</span></td><td id="LC195" class="css-1dcdqdg"><code>      <span class="code-keyword">this</span>.elements[elements[i]] = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L196" class="css-a4x74f"><span>196</span></td><td id="LC196" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L197" class="css-a4x74f"><span>197</span></td><td id="LC197" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L198" class="css-a4x74f"><span>198</span></td><td id="LC198" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.length = <span class="code-number">0</span>
</code></td></tr><tr><td id="L199" class="css-a4x74f"><span>199</span></td><td id="LC199" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L200" class="css-a4x74f"><span>200</span></td><td id="LC200" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L201" class="css-a4x74f"><span>201</span></td><td id="LC201" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L202" class="css-a4x74f"><span>202</span></td><td id="LC202" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L203" class="css-a4x74f"><span>203</span></td><td id="LC203" class="css-1dcdqdg"><code><span class="code-comment"> * A complete set that contains all elements.
</span></code></td></tr><tr><td id="L204" class="css-a4x74f"><span>204</span></td><td id="LC204" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L205" class="css-a4x74f"><span>205</span></td><td id="LC205" class="css-1dcdqdg"><code><span class="code-comment"> * @static
</span></code></td></tr><tr><td id="L206" class="css-a4x74f"><span>206</span></td><td id="LC206" class="css-1dcdqdg"><code><span class="code-comment"> * @readonly
</span></code></td></tr><tr><td id="L207" class="css-a4x74f"><span>207</span></td><td id="LC207" class="css-1dcdqdg"><code><span class="code-comment"> * @type {lunr.Set}
</span></code></td></tr><tr><td id="L208" class="css-a4x74f"><span>208</span></td><td id="LC208" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L209" class="css-a4x74f"><span>209</span></td><td id="LC209" class="css-1dcdqdg"><code>lunr.Set.complete = {
</code></td></tr><tr><td id="L210" class="css-a4x74f"><span>210</span></td><td id="LC210" class="css-1dcdqdg"><code>  intersect: <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">other</span>) </span>{
</code></td></tr><tr><td id="L211" class="css-a4x74f"><span>211</span></td><td id="LC211" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> other
</code></td></tr><tr><td id="L212" class="css-a4x74f"><span>212</span></td><td id="LC212" class="css-1dcdqdg"><code>  },
</code></td></tr><tr><td id="L213" class="css-a4x74f"><span>213</span></td><td id="LC213" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L214" class="css-a4x74f"><span>214</span></td><td id="LC214" class="css-1dcdqdg"><code>  union: <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L215" class="css-a4x74f"><span>215</span></td><td id="LC215" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L216" class="css-a4x74f"><span>216</span></td><td id="LC216" class="css-1dcdqdg"><code>  },
</code></td></tr><tr><td id="L217" class="css-a4x74f"><span>217</span></td><td id="LC217" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L218" class="css-a4x74f"><span>218</span></td><td id="LC218" class="css-1dcdqdg"><code>  contains: <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L219" class="css-a4x74f"><span>219</span></td><td id="LC219" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-literal">true</span>
</code></td></tr><tr><td id="L220" class="css-a4x74f"><span>220</span></td><td id="LC220" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L221" class="css-a4x74f"><span>221</span></td><td id="LC221" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L222" class="css-a4x74f"><span>222</span></td><td id="LC222" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L223" class="css-a4x74f"><span>223</span></td><td id="LC223" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L224" class="css-a4x74f"><span>224</span></td><td id="LC224" class="css-1dcdqdg"><code><span class="code-comment"> * An empty set that contains no elements.
</span></code></td></tr><tr><td id="L225" class="css-a4x74f"><span>225</span></td><td id="LC225" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L226" class="css-a4x74f"><span>226</span></td><td id="LC226" class="css-1dcdqdg"><code><span class="code-comment"> * @static
</span></code></td></tr><tr><td id="L227" class="css-a4x74f"><span>227</span></td><td id="LC227" class="css-1dcdqdg"><code><span class="code-comment"> * @readonly
</span></code></td></tr><tr><td id="L228" class="css-a4x74f"><span>228</span></td><td id="LC228" class="css-1dcdqdg"><code><span class="code-comment"> * @type {lunr.Set}
</span></code></td></tr><tr><td id="L229" class="css-a4x74f"><span>229</span></td><td id="LC229" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L230" class="css-a4x74f"><span>230</span></td><td id="LC230" class="css-1dcdqdg"><code>lunr.Set.empty = {
</code></td></tr><tr><td id="L231" class="css-a4x74f"><span>231</span></td><td id="LC231" class="css-1dcdqdg"><code>  intersect: <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L232" class="css-a4x74f"><span>232</span></td><td id="LC232" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L233" class="css-a4x74f"><span>233</span></td><td id="LC233" class="css-1dcdqdg"><code>  },
</code></td></tr><tr><td id="L234" class="css-a4x74f"><span>234</span></td><td id="LC234" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L235" class="css-a4x74f"><span>235</span></td><td id="LC235" class="css-1dcdqdg"><code>  union: <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">other</span>) </span>{
</code></td></tr><tr><td id="L236" class="css-a4x74f"><span>236</span></td><td id="LC236" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> other
</code></td></tr><tr><td id="L237" class="css-a4x74f"><span>237</span></td><td id="LC237" class="css-1dcdqdg"><code>  },
</code></td></tr><tr><td id="L238" class="css-a4x74f"><span>238</span></td><td id="LC238" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L239" class="css-a4x74f"><span>239</span></td><td id="LC239" class="css-1dcdqdg"><code>  contains: <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L240" class="css-a4x74f"><span>240</span></td><td id="LC240" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-literal">false</span>
</code></td></tr><tr><td id="L241" class="css-a4x74f"><span>241</span></td><td id="LC241" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L242" class="css-a4x74f"><span>242</span></td><td id="LC242" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L243" class="css-a4x74f"><span>243</span></td><td id="LC243" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L244" class="css-a4x74f"><span>244</span></td><td id="LC244" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L245" class="css-a4x74f"><span>245</span></td><td id="LC245" class="css-1dcdqdg"><code><span class="code-comment"> * Returns true if this set contains the specified object.
</span></code></td></tr><tr><td id="L246" class="css-a4x74f"><span>246</span></td><td id="LC246" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L247" class="css-a4x74f"><span>247</span></td><td id="LC247" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} object - Object whose presence in this set is to be tested.
</span></code></td></tr><tr><td id="L248" class="css-a4x74f"><span>248</span></td><td id="LC248" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {boolean} - True if this set contains the specified object.
</span></code></td></tr><tr><td id="L249" class="css-a4x74f"><span>249</span></td><td id="LC249" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L250" class="css-a4x74f"><span>250</span></td><td id="LC250" class="css-1dcdqdg"><code>lunr.Set.prototype.contains = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">object</span>) </span>{
</code></td></tr><tr><td id="L251" class="css-a4x74f"><span>251</span></td><td id="LC251" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> !!<span class="code-keyword">this</span>.elements[object]
</code></td></tr><tr><td id="L252" class="css-a4x74f"><span>252</span></td><td id="LC252" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L253" class="css-a4x74f"><span>253</span></td><td id="LC253" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L254" class="css-a4x74f"><span>254</span></td><td id="LC254" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L255" class="css-a4x74f"><span>255</span></td><td id="LC255" class="css-1dcdqdg"><code><span class="code-comment"> * Returns a new set containing only the elements that are present in both
</span></code></td></tr><tr><td id="L256" class="css-a4x74f"><span>256</span></td><td id="LC256" class="css-1dcdqdg"><code><span class="code-comment"> * this set and the specified set.
</span></code></td></tr><tr><td id="L257" class="css-a4x74f"><span>257</span></td><td id="LC257" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L258" class="css-a4x74f"><span>258</span></td><td id="LC258" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Set} other - set to intersect with this set.
</span></code></td></tr><tr><td id="L259" class="css-a4x74f"><span>259</span></td><td id="LC259" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Set} a new set that is the intersection of this and the specified set.
</span></code></td></tr><tr><td id="L260" class="css-a4x74f"><span>260</span></td><td id="LC260" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L261" class="css-a4x74f"><span>261</span></td><td id="LC261" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L262" class="css-a4x74f"><span>262</span></td><td id="LC262" class="css-1dcdqdg"><code>lunr.Set.prototype.intersect = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">other</span>) </span>{
</code></td></tr><tr><td id="L263" class="css-a4x74f"><span>263</span></td><td id="LC263" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> a, b, elements, intersection = []
</code></td></tr><tr><td id="L264" class="css-a4x74f"><span>264</span></td><td id="LC264" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L265" class="css-a4x74f"><span>265</span></td><td id="LC265" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (other === lunr.Set.complete) {
</code></td></tr><tr><td id="L266" class="css-a4x74f"><span>266</span></td><td id="LC266" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L267" class="css-a4x74f"><span>267</span></td><td id="LC267" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L268" class="css-a4x74f"><span>268</span></td><td id="LC268" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L269" class="css-a4x74f"><span>269</span></td><td id="LC269" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (other === lunr.Set.empty) {
</code></td></tr><tr><td id="L270" class="css-a4x74f"><span>270</span></td><td id="LC270" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> other
</code></td></tr><tr><td id="L271" class="css-a4x74f"><span>271</span></td><td id="LC271" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L272" class="css-a4x74f"><span>272</span></td><td id="LC272" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L273" class="css-a4x74f"><span>273</span></td><td id="LC273" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.length &lt; other.length) {
</code></td></tr><tr><td id="L274" class="css-a4x74f"><span>274</span></td><td id="LC274" class="css-1dcdqdg"><code>    a = <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L275" class="css-a4x74f"><span>275</span></td><td id="LC275" class="css-1dcdqdg"><code>    b = other
</code></td></tr><tr><td id="L276" class="css-a4x74f"><span>276</span></td><td id="LC276" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L277" class="css-a4x74f"><span>277</span></td><td id="LC277" class="css-1dcdqdg"><code>    a = other
</code></td></tr><tr><td id="L278" class="css-a4x74f"><span>278</span></td><td id="LC278" class="css-1dcdqdg"><code>    b = <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L279" class="css-a4x74f"><span>279</span></td><td id="LC279" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L280" class="css-a4x74f"><span>280</span></td><td id="LC280" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L281" class="css-a4x74f"><span>281</span></td><td id="LC281" class="css-1dcdqdg"><code>  elements = <span class="code-built_in">Object</span>.keys(a.elements)
</code></td></tr><tr><td id="L282" class="css-a4x74f"><span>282</span></td><td id="LC282" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L283" class="css-a4x74f"><span>283</span></td><td id="LC283" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; elements.length; i++) {
</code></td></tr><tr><td id="L284" class="css-a4x74f"><span>284</span></td><td id="LC284" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> element = elements[i]
</code></td></tr><tr><td id="L285" class="css-a4x74f"><span>285</span></td><td id="LC285" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (element <span class="code-keyword">in</span> b.elements) {
</code></td></tr><tr><td id="L286" class="css-a4x74f"><span>286</span></td><td id="LC286" class="css-1dcdqdg"><code>      intersection.push(element)
</code></td></tr><tr><td id="L287" class="css-a4x74f"><span>287</span></td><td id="LC287" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L288" class="css-a4x74f"><span>288</span></td><td id="LC288" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L289" class="css-a4x74f"><span>289</span></td><td id="LC289" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L290" class="css-a4x74f"><span>290</span></td><td id="LC290" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">new</span> lunr.Set (intersection)
</code></td></tr><tr><td id="L291" class="css-a4x74f"><span>291</span></td><td id="LC291" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L292" class="css-a4x74f"><span>292</span></td><td id="LC292" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L293" class="css-a4x74f"><span>293</span></td><td id="LC293" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L294" class="css-a4x74f"><span>294</span></td><td id="LC294" class="css-1dcdqdg"><code><span class="code-comment"> * Returns a new set combining the elements of this and the specified set.
</span></code></td></tr><tr><td id="L295" class="css-a4x74f"><span>295</span></td><td id="LC295" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L296" class="css-a4x74f"><span>296</span></td><td id="LC296" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Set} other - set to union with this set.
</span></code></td></tr><tr><td id="L297" class="css-a4x74f"><span>297</span></td><td id="LC297" class="css-1dcdqdg"><code><span class="code-comment"> * @return {lunr.Set} a new set that is the union of this and the specified set.
</span></code></td></tr><tr><td id="L298" class="css-a4x74f"><span>298</span></td><td id="LC298" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L299" class="css-a4x74f"><span>299</span></td><td id="LC299" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L300" class="css-a4x74f"><span>300</span></td><td id="LC300" class="css-1dcdqdg"><code>lunr.Set.prototype.union = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">other</span>) </span>{
</code></td></tr><tr><td id="L301" class="css-a4x74f"><span>301</span></td><td id="LC301" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (other === lunr.Set.complete) {
</code></td></tr><tr><td id="L302" class="css-a4x74f"><span>302</span></td><td id="LC302" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> lunr.Set.complete
</code></td></tr><tr><td id="L303" class="css-a4x74f"><span>303</span></td><td id="LC303" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L304" class="css-a4x74f"><span>304</span></td><td id="LC304" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L305" class="css-a4x74f"><span>305</span></td><td id="LC305" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (other === lunr.Set.empty) {
</code></td></tr><tr><td id="L306" class="css-a4x74f"><span>306</span></td><td id="LC306" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L307" class="css-a4x74f"><span>307</span></td><td id="LC307" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L308" class="css-a4x74f"><span>308</span></td><td id="LC308" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L309" class="css-a4x74f"><span>309</span></td><td id="LC309" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">new</span> lunr.Set(<span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.elements).concat(<span class="code-built_in">Object</span>.keys(other.elements)))
</code></td></tr><tr><td id="L310" class="css-a4x74f"><span>310</span></td><td id="LC310" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L311" class="css-a4x74f"><span>311</span></td><td id="LC311" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L312" class="css-a4x74f"><span>312</span></td><td id="LC312" class="css-1dcdqdg"><code><span class="code-comment"> * A function to calculate the inverse document frequency for
</span></code></td></tr><tr><td id="L313" class="css-a4x74f"><span>313</span></td><td id="LC313" class="css-1dcdqdg"><code><span class="code-comment"> * a posting. This is shared between the builder and the index
</span></code></td></tr><tr><td id="L314" class="css-a4x74f"><span>314</span></td><td id="LC314" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L315" class="css-a4x74f"><span>315</span></td><td id="LC315" class="css-1dcdqdg"><code><span class="code-comment"> * @private
</span></code></td></tr><tr><td id="L316" class="css-a4x74f"><span>316</span></td><td id="LC316" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} posting - The posting for a given term
</span></code></td></tr><tr><td id="L317" class="css-a4x74f"><span>317</span></td><td id="LC317" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} documentCount - The total number of documents.
</span></code></td></tr><tr><td id="L318" class="css-a4x74f"><span>318</span></td><td id="LC318" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L319" class="css-a4x74f"><span>319</span></td><td id="LC319" class="css-1dcdqdg"><code>lunr.idf = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">posting, documentCount</span>) </span>{
</code></td></tr><tr><td id="L320" class="css-a4x74f"><span>320</span></td><td id="LC320" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> documentsWithTerm = <span class="code-number">0</span>
</code></td></tr><tr><td id="L321" class="css-a4x74f"><span>321</span></td><td id="LC321" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L322" class="css-a4x74f"><span>322</span></td><td id="LC322" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> fieldName <span class="code-keyword">in</span> posting) {
</code></td></tr><tr><td id="L323" class="css-a4x74f"><span>323</span></td><td id="LC323" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (fieldName == <span class="code-string">'_index'</span>) <span class="code-keyword">continue</span> <span class="code-comment">// Ignore the term index, its not a field</span>
</code></td></tr><tr><td id="L324" class="css-a4x74f"><span>324</span></td><td id="LC324" class="css-1dcdqdg"><code>    documentsWithTerm += <span class="code-built_in">Object</span>.keys(posting[fieldName]).length
</code></td></tr><tr><td id="L325" class="css-a4x74f"><span>325</span></td><td id="LC325" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L326" class="css-a4x74f"><span>326</span></td><td id="LC326" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L327" class="css-a4x74f"><span>327</span></td><td id="LC327" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> x = (documentCount - documentsWithTerm + <span class="code-number">0.5</span>) / (documentsWithTerm + <span class="code-number">0.5</span>)
</code></td></tr><tr><td id="L328" class="css-a4x74f"><span>328</span></td><td id="LC328" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L329" class="css-a4x74f"><span>329</span></td><td id="LC329" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-built_in">Math</span>.log(<span class="code-number">1</span> + <span class="code-built_in">Math</span>.abs(x))
</code></td></tr><tr><td id="L330" class="css-a4x74f"><span>330</span></td><td id="LC330" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L331" class="css-a4x74f"><span>331</span></td><td id="LC331" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L332" class="css-a4x74f"><span>332</span></td><td id="LC332" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L333" class="css-a4x74f"><span>333</span></td><td id="LC333" class="css-1dcdqdg"><code><span class="code-comment"> * A token wraps a string representation of a token
</span></code></td></tr><tr><td id="L334" class="css-a4x74f"><span>334</span></td><td id="LC334" class="css-1dcdqdg"><code><span class="code-comment"> * as it is passed through the text processing pipeline.
</span></code></td></tr><tr><td id="L335" class="css-a4x74f"><span>335</span></td><td id="LC335" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L336" class="css-a4x74f"><span>336</span></td><td id="LC336" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L337" class="css-a4x74f"><span>337</span></td><td id="LC337" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} [str=''] - The string token being wrapped.
</span></code></td></tr><tr><td id="L338" class="css-a4x74f"><span>338</span></td><td id="LC338" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} [metadata={}] - Metadata associated with this token.
</span></code></td></tr><tr><td id="L339" class="css-a4x74f"><span>339</span></td><td id="LC339" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L340" class="css-a4x74f"><span>340</span></td><td id="LC340" class="css-1dcdqdg"><code>lunr.Token = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">str, metadata</span>) </span>{
</code></td></tr><tr><td id="L341" class="css-a4x74f"><span>341</span></td><td id="LC341" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.str = str || <span class="code-string">""</span>
</code></td></tr><tr><td id="L342" class="css-a4x74f"><span>342</span></td><td id="LC342" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.metadata = metadata || {}
</code></td></tr><tr><td id="L343" class="css-a4x74f"><span>343</span></td><td id="LC343" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L344" class="css-a4x74f"><span>344</span></td><td id="LC344" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L345" class="css-a4x74f"><span>345</span></td><td id="LC345" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L346" class="css-a4x74f"><span>346</span></td><td id="LC346" class="css-1dcdqdg"><code><span class="code-comment"> * Returns the token string that is being wrapped by this object.
</span></code></td></tr><tr><td id="L347" class="css-a4x74f"><span>347</span></td><td id="LC347" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L348" class="css-a4x74f"><span>348</span></td><td id="LC348" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {string}
</span></code></td></tr><tr><td id="L349" class="css-a4x74f"><span>349</span></td><td id="LC349" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L350" class="css-a4x74f"><span>350</span></td><td id="LC350" class="css-1dcdqdg"><code>lunr.Token.prototype.toString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L351" class="css-a4x74f"><span>351</span></td><td id="LC351" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.str
</code></td></tr><tr><td id="L352" class="css-a4x74f"><span>352</span></td><td id="LC352" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L353" class="css-a4x74f"><span>353</span></td><td id="LC353" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L354" class="css-a4x74f"><span>354</span></td><td id="LC354" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L355" class="css-a4x74f"><span>355</span></td><td id="LC355" class="css-1dcdqdg"><code><span class="code-comment"> * A token update function is used when updating or optionally
</span></code></td></tr><tr><td id="L356" class="css-a4x74f"><span>356</span></td><td id="LC356" class="css-1dcdqdg"><code><span class="code-comment"> * when cloning a token.
</span></code></td></tr><tr><td id="L357" class="css-a4x74f"><span>357</span></td><td id="LC357" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L358" class="css-a4x74f"><span>358</span></td><td id="LC358" class="css-1dcdqdg"><code><span class="code-comment"> * @callback lunr.Token~updateFunction
</span></code></td></tr><tr><td id="L359" class="css-a4x74f"><span>359</span></td><td id="LC359" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} str - The string representation of the token.
</span></code></td></tr><tr><td id="L360" class="css-a4x74f"><span>360</span></td><td id="LC360" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object} metadata - All metadata associated with this token.
</span></code></td></tr><tr><td id="L361" class="css-a4x74f"><span>361</span></td><td id="LC361" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L362" class="css-a4x74f"><span>362</span></td><td id="LC362" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L363" class="css-a4x74f"><span>363</span></td><td id="LC363" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L364" class="css-a4x74f"><span>364</span></td><td id="LC364" class="css-1dcdqdg"><code><span class="code-comment"> * Applies the given function to the wrapped string token.
</span></code></td></tr><tr><td id="L365" class="css-a4x74f"><span>365</span></td><td id="LC365" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L366" class="css-a4x74f"><span>366</span></td><td id="LC366" class="css-1dcdqdg"><code><span class="code-comment"> * @example
</span></code></td></tr><tr><td id="L367" class="css-a4x74f"><span>367</span></td><td id="LC367" class="css-1dcdqdg"><code><span class="code-comment"> * token.update(function (str, metadata) {
</span></code></td></tr><tr><td id="L368" class="css-a4x74f"><span>368</span></td><td id="LC368" class="css-1dcdqdg"><code><span class="code-comment"> *   return str.toUpperCase()
</span></code></td></tr><tr><td id="L369" class="css-a4x74f"><span>369</span></td><td id="LC369" class="css-1dcdqdg"><code><span class="code-comment"> * })
</span></code></td></tr><tr><td id="L370" class="css-a4x74f"><span>370</span></td><td id="LC370" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L371" class="css-a4x74f"><span>371</span></td><td id="LC371" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Token~updateFunction} fn - A function to apply to the token string.
</span></code></td></tr><tr><td id="L372" class="css-a4x74f"><span>372</span></td><td id="LC372" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Token}
</span></code></td></tr><tr><td id="L373" class="css-a4x74f"><span>373</span></td><td id="LC373" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L374" class="css-a4x74f"><span>374</span></td><td id="LC374" class="css-1dcdqdg"><code>lunr.Token.prototype.update = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L375" class="css-a4x74f"><span>375</span></td><td id="LC375" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.str = fn(<span class="code-keyword">this</span>.str, <span class="code-keyword">this</span>.metadata)
</code></td></tr><tr><td id="L376" class="css-a4x74f"><span>376</span></td><td id="LC376" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L377" class="css-a4x74f"><span>377</span></td><td id="LC377" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L378" class="css-a4x74f"><span>378</span></td><td id="LC378" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L379" class="css-a4x74f"><span>379</span></td><td id="LC379" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L380" class="css-a4x74f"><span>380</span></td><td id="LC380" class="css-1dcdqdg"><code><span class="code-comment"> * Creates a clone of this token. Optionally a function can be
</span></code></td></tr><tr><td id="L381" class="css-a4x74f"><span>381</span></td><td id="LC381" class="css-1dcdqdg"><code><span class="code-comment"> * applied to the cloned token.
</span></code></td></tr><tr><td id="L382" class="css-a4x74f"><span>382</span></td><td id="LC382" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L383" class="css-a4x74f"><span>383</span></td><td id="LC383" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Token~updateFunction} [fn] - An optional function to apply to the cloned token.
</span></code></td></tr><tr><td id="L384" class="css-a4x74f"><span>384</span></td><td id="LC384" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Token}
</span></code></td></tr><tr><td id="L385" class="css-a4x74f"><span>385</span></td><td id="LC385" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L386" class="css-a4x74f"><span>386</span></td><td id="LC386" class="css-1dcdqdg"><code>lunr.Token.prototype.clone = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L387" class="css-a4x74f"><span>387</span></td><td id="LC387" class="css-1dcdqdg"><code>  fn = fn || <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">s</span>) </span>{ <span class="code-keyword">return</span> s }
</code></td></tr><tr><td id="L388" class="css-a4x74f"><span>388</span></td><td id="LC388" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">new</span> lunr.Token (fn(<span class="code-keyword">this</span>.str, <span class="code-keyword">this</span>.metadata), <span class="code-keyword">this</span>.metadata)
</code></td></tr><tr><td id="L389" class="css-a4x74f"><span>389</span></td><td id="LC389" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L390" class="css-a4x74f"><span>390</span></td><td id="LC390" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L391" class="css-a4x74f"><span>391</span></td><td id="LC391" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.tokenizer
</span></code></td></tr><tr><td id="L392" class="css-a4x74f"><span>392</span></td><td id="LC392" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L393" class="css-a4x74f"><span>393</span></td><td id="LC393" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L394" class="css-a4x74f"><span>394</span></td><td id="LC394" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L395" class="css-a4x74f"><span>395</span></td><td id="LC395" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L396" class="css-a4x74f"><span>396</span></td><td id="LC396" class="css-1dcdqdg"><code><span class="code-comment"> * A function for splitting a string into tokens ready to be inserted into
</span></code></td></tr><tr><td id="L397" class="css-a4x74f"><span>397</span></td><td id="LC397" class="css-1dcdqdg"><code><span class="code-comment"> * the search index. Uses `lunr.tokenizer.separator` to split strings, change
</span></code></td></tr><tr><td id="L398" class="css-a4x74f"><span>398</span></td><td id="LC398" class="css-1dcdqdg"><code><span class="code-comment"> * the value of this property to change how strings are split into tokens.
</span></code></td></tr><tr><td id="L399" class="css-a4x74f"><span>399</span></td><td id="LC399" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L400" class="css-a4x74f"><span>400</span></td><td id="LC400" class="css-1dcdqdg"><code><span class="code-comment"> * This tokenizer will convert its parameter to a string by calling `toString` and
</span></code></td></tr><tr><td id="L401" class="css-a4x74f"><span>401</span></td><td id="LC401" class="css-1dcdqdg"><code><span class="code-comment"> * then will split this string on the character in `lunr.tokenizer.separator`.
</span></code></td></tr><tr><td id="L402" class="css-a4x74f"><span>402</span></td><td id="LC402" class="css-1dcdqdg"><code><span class="code-comment"> * Arrays will have their elements converted to strings and wrapped in a lunr.Token.
</span></code></td></tr><tr><td id="L403" class="css-a4x74f"><span>403</span></td><td id="LC403" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L404" class="css-a4x74f"><span>404</span></td><td id="LC404" class="css-1dcdqdg"><code><span class="code-comment"> * Optional metadata can be passed to the tokenizer, this metadata will be cloned and
</span></code></td></tr><tr><td id="L405" class="css-a4x74f"><span>405</span></td><td id="LC405" class="css-1dcdqdg"><code><span class="code-comment"> * added as metadata to every token that is created from the object to be tokenized.
</span></code></td></tr><tr><td id="L406" class="css-a4x74f"><span>406</span></td><td id="LC406" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L407" class="css-a4x74f"><span>407</span></td><td id="LC407" class="css-1dcdqdg"><code><span class="code-comment"> * @static
</span></code></td></tr><tr><td id="L408" class="css-a4x74f"><span>408</span></td><td id="LC408" class="css-1dcdqdg"><code><span class="code-comment"> * @param {?(string|object|object[])} obj - The object to convert into tokens
</span></code></td></tr><tr><td id="L409" class="css-a4x74f"><span>409</span></td><td id="LC409" class="css-1dcdqdg"><code><span class="code-comment"> * @param {?object} metadata - Optional metadata to associate with every token
</span></code></td></tr><tr><td id="L410" class="css-a4x74f"><span>410</span></td><td id="LC410" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Token[]}
</span></code></td></tr><tr><td id="L411" class="css-a4x74f"><span>411</span></td><td id="LC411" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.Pipeline}
</span></code></td></tr><tr><td id="L412" class="css-a4x74f"><span>412</span></td><td id="LC412" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L413" class="css-a4x74f"><span>413</span></td><td id="LC413" class="css-1dcdqdg"><code>lunr.tokenizer = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">obj, metadata</span>) </span>{
</code></td></tr><tr><td id="L414" class="css-a4x74f"><span>414</span></td><td id="LC414" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (obj == <span class="code-literal">null</span> || obj == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L415" class="css-a4x74f"><span>415</span></td><td id="LC415" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> []
</code></td></tr><tr><td id="L416" class="css-a4x74f"><span>416</span></td><td id="LC416" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L417" class="css-a4x74f"><span>417</span></td><td id="LC417" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L418" class="css-a4x74f"><span>418</span></td><td id="LC418" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-built_in">Array</span>.isArray(obj)) {
</code></td></tr><tr><td id="L419" class="css-a4x74f"><span>419</span></td><td id="LC419" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> obj.map(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">t</span>) </span>{
</code></td></tr><tr><td id="L420" class="css-a4x74f"><span>420</span></td><td id="LC420" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-keyword">new</span> lunr.Token(
</code></td></tr><tr><td id="L421" class="css-a4x74f"><span>421</span></td><td id="LC421" class="css-1dcdqdg"><code>        lunr.utils.asString(t).toLowerCase(),
</code></td></tr><tr><td id="L422" class="css-a4x74f"><span>422</span></td><td id="LC422" class="css-1dcdqdg"><code>        lunr.utils.clone(metadata)
</code></td></tr><tr><td id="L423" class="css-a4x74f"><span>423</span></td><td id="LC423" class="css-1dcdqdg"><code>      )
</code></td></tr><tr><td id="L424" class="css-a4x74f"><span>424</span></td><td id="LC424" class="css-1dcdqdg"><code>    })
</code></td></tr><tr><td id="L425" class="css-a4x74f"><span>425</span></td><td id="LC425" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L426" class="css-a4x74f"><span>426</span></td><td id="LC426" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L427" class="css-a4x74f"><span>427</span></td><td id="LC427" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> str = obj.toString().toLowerCase(),
</code></td></tr><tr><td id="L428" class="css-a4x74f"><span>428</span></td><td id="LC428" class="css-1dcdqdg"><code>      len = str.length,
</code></td></tr><tr><td id="L429" class="css-a4x74f"><span>429</span></td><td id="LC429" class="css-1dcdqdg"><code>      tokens = []
</code></td></tr><tr><td id="L430" class="css-a4x74f"><span>430</span></td><td id="LC430" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L431" class="css-a4x74f"><span>431</span></td><td id="LC431" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> sliceEnd = <span class="code-number">0</span>, sliceStart = <span class="code-number">0</span>; sliceEnd &lt;= len; sliceEnd++) {
</code></td></tr><tr><td id="L432" class="css-a4x74f"><span>432</span></td><td id="LC432" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> char = str.charAt(sliceEnd),
</code></td></tr><tr><td id="L433" class="css-a4x74f"><span>433</span></td><td id="LC433" class="css-1dcdqdg"><code>        sliceLength = sliceEnd - sliceStart
</code></td></tr><tr><td id="L434" class="css-a4x74f"><span>434</span></td><td id="LC434" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L435" class="css-a4x74f"><span>435</span></td><td id="LC435" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> ((char.match(lunr.tokenizer.separator) || sliceEnd == len)) {
</code></td></tr><tr><td id="L436" class="css-a4x74f"><span>436</span></td><td id="LC436" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L437" class="css-a4x74f"><span>437</span></td><td id="LC437" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (sliceLength &gt; <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L438" class="css-a4x74f"><span>438</span></td><td id="LC438" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> tokenMetadata = lunr.utils.clone(metadata) || {}
</code></td></tr><tr><td id="L439" class="css-a4x74f"><span>439</span></td><td id="LC439" class="css-1dcdqdg"><code>        tokenMetadata[<span class="code-string">"position"</span>] = [sliceStart, sliceLength]
</code></td></tr><tr><td id="L440" class="css-a4x74f"><span>440</span></td><td id="LC440" class="css-1dcdqdg"><code>        tokenMetadata[<span class="code-string">"index"</span>] = tokens.length
</code></td></tr><tr><td id="L441" class="css-a4x74f"><span>441</span></td><td id="LC441" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L442" class="css-a4x74f"><span>442</span></td><td id="LC442" class="css-1dcdqdg"><code>        tokens.push(
</code></td></tr><tr><td id="L443" class="css-a4x74f"><span>443</span></td><td id="LC443" class="css-1dcdqdg"><code>          <span class="code-keyword">new</span> lunr.Token (
</code></td></tr><tr><td id="L444" class="css-a4x74f"><span>444</span></td><td id="LC444" class="css-1dcdqdg"><code>            str.slice(sliceStart, sliceEnd),
</code></td></tr><tr><td id="L445" class="css-a4x74f"><span>445</span></td><td id="LC445" class="css-1dcdqdg"><code>            tokenMetadata
</code></td></tr><tr><td id="L446" class="css-a4x74f"><span>446</span></td><td id="LC446" class="css-1dcdqdg"><code>          )
</code></td></tr><tr><td id="L447" class="css-a4x74f"><span>447</span></td><td id="LC447" class="css-1dcdqdg"><code>        )
</code></td></tr><tr><td id="L448" class="css-a4x74f"><span>448</span></td><td id="LC448" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L449" class="css-a4x74f"><span>449</span></td><td id="LC449" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L450" class="css-a4x74f"><span>450</span></td><td id="LC450" class="css-1dcdqdg"><code>      sliceStart = sliceEnd + <span class="code-number">1</span>
</code></td></tr><tr><td id="L451" class="css-a4x74f"><span>451</span></td><td id="LC451" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L452" class="css-a4x74f"><span>452</span></td><td id="LC452" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L453" class="css-a4x74f"><span>453</span></td><td id="LC453" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L454" class="css-a4x74f"><span>454</span></td><td id="LC454" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L455" class="css-a4x74f"><span>455</span></td><td id="LC455" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> tokens
</code></td></tr><tr><td id="L456" class="css-a4x74f"><span>456</span></td><td id="LC456" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L457" class="css-a4x74f"><span>457</span></td><td id="LC457" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L458" class="css-a4x74f"><span>458</span></td><td id="LC458" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L459" class="css-a4x74f"><span>459</span></td><td id="LC459" class="css-1dcdqdg"><code><span class="code-comment"> * The separator used to split a string into tokens. Override this property to change the behaviour of
</span></code></td></tr><tr><td id="L460" class="css-a4x74f"><span>460</span></td><td id="LC460" class="css-1dcdqdg"><code><span class="code-comment"> * `lunr.tokenizer` behaviour when tokenizing strings. By default this splits on whitespace and hyphens.
</span></code></td></tr><tr><td id="L461" class="css-a4x74f"><span>461</span></td><td id="LC461" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L462" class="css-a4x74f"><span>462</span></td><td id="LC462" class="css-1dcdqdg"><code><span class="code-comment"> * @static
</span></code></td></tr><tr><td id="L463" class="css-a4x74f"><span>463</span></td><td id="LC463" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.tokenizer
</span></code></td></tr><tr><td id="L464" class="css-a4x74f"><span>464</span></td><td id="LC464" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L465" class="css-a4x74f"><span>465</span></td><td id="LC465" class="css-1dcdqdg"><code>lunr.tokenizer.separator = <span class="code-regexp">/[\s\-]+/</span>
</code></td></tr><tr><td id="L466" class="css-a4x74f"><span>466</span></td><td id="LC466" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L467" class="css-a4x74f"><span>467</span></td><td id="LC467" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Pipeline
</span></code></td></tr><tr><td id="L468" class="css-a4x74f"><span>468</span></td><td id="LC468" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L469" class="css-a4x74f"><span>469</span></td><td id="LC469" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L470" class="css-a4x74f"><span>470</span></td><td id="LC470" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L471" class="css-a4x74f"><span>471</span></td><td id="LC471" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L472" class="css-a4x74f"><span>472</span></td><td id="LC472" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Pipelines maintain an ordered list of functions to be applied to all
</span></code></td></tr><tr><td id="L473" class="css-a4x74f"><span>473</span></td><td id="LC473" class="css-1dcdqdg"><code><span class="code-comment"> * tokens in documents entering the search index and queries being ran against
</span></code></td></tr><tr><td id="L474" class="css-a4x74f"><span>474</span></td><td id="LC474" class="css-1dcdqdg"><code><span class="code-comment"> * the index.
</span></code></td></tr><tr><td id="L475" class="css-a4x74f"><span>475</span></td><td id="LC475" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L476" class="css-a4x74f"><span>476</span></td><td id="LC476" class="css-1dcdqdg"><code><span class="code-comment"> * An instance of lunr.Index created with the lunr shortcut will contain a
</span></code></td></tr><tr><td id="L477" class="css-a4x74f"><span>477</span></td><td id="LC477" class="css-1dcdqdg"><code><span class="code-comment"> * pipeline with a stop word filter and an English language stemmer. Extra
</span></code></td></tr><tr><td id="L478" class="css-a4x74f"><span>478</span></td><td id="LC478" class="css-1dcdqdg"><code><span class="code-comment"> * functions can be added before or after either of these functions or these
</span></code></td></tr><tr><td id="L479" class="css-a4x74f"><span>479</span></td><td id="LC479" class="css-1dcdqdg"><code><span class="code-comment"> * default functions can be removed.
</span></code></td></tr><tr><td id="L480" class="css-a4x74f"><span>480</span></td><td id="LC480" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L481" class="css-a4x74f"><span>481</span></td><td id="LC481" class="css-1dcdqdg"><code><span class="code-comment"> * When run the pipeline will call each function in turn, passing a token, the
</span></code></td></tr><tr><td id="L482" class="css-a4x74f"><span>482</span></td><td id="LC482" class="css-1dcdqdg"><code><span class="code-comment"> * index of that token in the original list of all tokens and finally a list of
</span></code></td></tr><tr><td id="L483" class="css-a4x74f"><span>483</span></td><td id="LC483" class="css-1dcdqdg"><code><span class="code-comment"> * all the original tokens.
</span></code></td></tr><tr><td id="L484" class="css-a4x74f"><span>484</span></td><td id="LC484" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L485" class="css-a4x74f"><span>485</span></td><td id="LC485" class="css-1dcdqdg"><code><span class="code-comment"> * The output of functions in the pipeline will be passed to the next function
</span></code></td></tr><tr><td id="L486" class="css-a4x74f"><span>486</span></td><td id="LC486" class="css-1dcdqdg"><code><span class="code-comment"> * in the pipeline. To exclude a token from entering the index the function
</span></code></td></tr><tr><td id="L487" class="css-a4x74f"><span>487</span></td><td id="LC487" class="css-1dcdqdg"><code><span class="code-comment"> * should return undefined, the rest of the pipeline will not be called with
</span></code></td></tr><tr><td id="L488" class="css-a4x74f"><span>488</span></td><td id="LC488" class="css-1dcdqdg"><code><span class="code-comment"> * this token.
</span></code></td></tr><tr><td id="L489" class="css-a4x74f"><span>489</span></td><td id="LC489" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L490" class="css-a4x74f"><span>490</span></td><td id="LC490" class="css-1dcdqdg"><code><span class="code-comment"> * For serialisation of pipelines to work, all functions used in an instance of
</span></code></td></tr><tr><td id="L491" class="css-a4x74f"><span>491</span></td><td id="LC491" class="css-1dcdqdg"><code><span class="code-comment"> * a pipeline should be registered with lunr.Pipeline. Registered functions can
</span></code></td></tr><tr><td id="L492" class="css-a4x74f"><span>492</span></td><td id="LC492" class="css-1dcdqdg"><code><span class="code-comment"> * then be loaded. If trying to load a serialised pipeline that uses functions
</span></code></td></tr><tr><td id="L493" class="css-a4x74f"><span>493</span></td><td id="LC493" class="css-1dcdqdg"><code><span class="code-comment"> * that are not registered an error will be thrown.
</span></code></td></tr><tr><td id="L494" class="css-a4x74f"><span>494</span></td><td id="LC494" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L495" class="css-a4x74f"><span>495</span></td><td id="LC495" class="css-1dcdqdg"><code><span class="code-comment"> * If not planning on serialising the pipeline then registering pipeline functions
</span></code></td></tr><tr><td id="L496" class="css-a4x74f"><span>496</span></td><td id="LC496" class="css-1dcdqdg"><code><span class="code-comment"> * is not necessary.
</span></code></td></tr><tr><td id="L497" class="css-a4x74f"><span>497</span></td><td id="LC497" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L498" class="css-a4x74f"><span>498</span></td><td id="LC498" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L499" class="css-a4x74f"><span>499</span></td><td id="LC499" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L500" class="css-a4x74f"><span>500</span></td><td id="LC500" class="css-1dcdqdg"><code>lunr.Pipeline = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L501" class="css-a4x74f"><span>501</span></td><td id="LC501" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._stack = []
</code></td></tr><tr><td id="L502" class="css-a4x74f"><span>502</span></td><td id="LC502" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L503" class="css-a4x74f"><span>503</span></td><td id="LC503" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L504" class="css-a4x74f"><span>504</span></td><td id="LC504" class="css-1dcdqdg"><code>lunr.Pipeline.registeredFunctions = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L505" class="css-a4x74f"><span>505</span></td><td id="LC505" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L506" class="css-a4x74f"><span>506</span></td><td id="LC506" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L507" class="css-a4x74f"><span>507</span></td><td id="LC507" class="css-1dcdqdg"><code><span class="code-comment"> * A pipeline function maps lunr.Token to lunr.Token. A lunr.Token contains the token
</span></code></td></tr><tr><td id="L508" class="css-a4x74f"><span>508</span></td><td id="LC508" class="css-1dcdqdg"><code><span class="code-comment"> * string as well as all known metadata. A pipeline function can mutate the token string
</span></code></td></tr><tr><td id="L509" class="css-a4x74f"><span>509</span></td><td id="LC509" class="css-1dcdqdg"><code><span class="code-comment"> * or mutate (or add) metadata for a given token.
</span></code></td></tr><tr><td id="L510" class="css-a4x74f"><span>510</span></td><td id="LC510" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L511" class="css-a4x74f"><span>511</span></td><td id="LC511" class="css-1dcdqdg"><code><span class="code-comment"> * A pipeline function can indicate that the passed token should be discarded by returning
</span></code></td></tr><tr><td id="L512" class="css-a4x74f"><span>512</span></td><td id="LC512" class="css-1dcdqdg"><code><span class="code-comment"> * null, undefined or an empty string. This token will not be passed to any downstream pipeline
</span></code></td></tr><tr><td id="L513" class="css-a4x74f"><span>513</span></td><td id="LC513" class="css-1dcdqdg"><code><span class="code-comment"> * functions and will not be added to the index.
</span></code></td></tr><tr><td id="L514" class="css-a4x74f"><span>514</span></td><td id="LC514" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L515" class="css-a4x74f"><span>515</span></td><td id="LC515" class="css-1dcdqdg"><code><span class="code-comment"> * Multiple tokens can be returned by returning an array of tokens. Each token will be passed
</span></code></td></tr><tr><td id="L516" class="css-a4x74f"><span>516</span></td><td id="LC516" class="css-1dcdqdg"><code><span class="code-comment"> * to any downstream pipeline functions and all will returned tokens will be added to the index.
</span></code></td></tr><tr><td id="L517" class="css-a4x74f"><span>517</span></td><td id="LC517" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L518" class="css-a4x74f"><span>518</span></td><td id="LC518" class="css-1dcdqdg"><code><span class="code-comment"> * Any number of pipeline functions may be chained together using a lunr.Pipeline.
</span></code></td></tr><tr><td id="L519" class="css-a4x74f"><span>519</span></td><td id="LC519" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L520" class="css-a4x74f"><span>520</span></td><td id="LC520" class="css-1dcdqdg"><code><span class="code-comment"> * @interface lunr.PipelineFunction
</span></code></td></tr><tr><td id="L521" class="css-a4x74f"><span>521</span></td><td id="LC521" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Token} token - A token from the document being processed.
</span></code></td></tr><tr><td id="L522" class="css-a4x74f"><span>522</span></td><td id="LC522" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} i - The index of this token in the complete list of tokens for this document/field.
</span></code></td></tr><tr><td id="L523" class="css-a4x74f"><span>523</span></td><td id="LC523" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Token[]} tokens - All tokens for this document/field.
</span></code></td></tr><tr><td id="L524" class="css-a4x74f"><span>524</span></td><td id="LC524" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {(?lunr.Token|lunr.Token[])}
</span></code></td></tr><tr><td id="L525" class="css-a4x74f"><span>525</span></td><td id="LC525" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L526" class="css-a4x74f"><span>526</span></td><td id="LC526" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L527" class="css-a4x74f"><span>527</span></td><td id="LC527" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L528" class="css-a4x74f"><span>528</span></td><td id="LC528" class="css-1dcdqdg"><code><span class="code-comment"> * Register a function with the pipeline.
</span></code></td></tr><tr><td id="L529" class="css-a4x74f"><span>529</span></td><td id="LC529" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L530" class="css-a4x74f"><span>530</span></td><td id="LC530" class="css-1dcdqdg"><code><span class="code-comment"> * Functions that are used in the pipeline should be registered if the pipeline
</span></code></td></tr><tr><td id="L531" class="css-a4x74f"><span>531</span></td><td id="LC531" class="css-1dcdqdg"><code><span class="code-comment"> * needs to be serialised, or a serialised pipeline needs to be loaded.
</span></code></td></tr><tr><td id="L532" class="css-a4x74f"><span>532</span></td><td id="LC532" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L533" class="css-a4x74f"><span>533</span></td><td id="LC533" class="css-1dcdqdg"><code><span class="code-comment"> * Registering a function does not add it to a pipeline, functions must still be
</span></code></td></tr><tr><td id="L534" class="css-a4x74f"><span>534</span></td><td id="LC534" class="css-1dcdqdg"><code><span class="code-comment"> * added to instances of the pipeline for them to be used when running a pipeline.
</span></code></td></tr><tr><td id="L535" class="css-a4x74f"><span>535</span></td><td id="LC535" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L536" class="css-a4x74f"><span>536</span></td><td id="LC536" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction} fn - The function to check for.
</span></code></td></tr><tr><td id="L537" class="css-a4x74f"><span>537</span></td><td id="LC537" class="css-1dcdqdg"><code><span class="code-comment"> * @param {String} label - The label to register this function with
</span></code></td></tr><tr><td id="L538" class="css-a4x74f"><span>538</span></td><td id="LC538" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L539" class="css-a4x74f"><span>539</span></td><td id="LC539" class="css-1dcdqdg"><code>lunr.Pipeline.registerFunction = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn, label</span>) </span>{
</code></td></tr><tr><td id="L540" class="css-a4x74f"><span>540</span></td><td id="LC540" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (label <span class="code-keyword">in</span> <span class="code-keyword">this</span>.registeredFunctions) {
</code></td></tr><tr><td id="L541" class="css-a4x74f"><span>541</span></td><td id="LC541" class="css-1dcdqdg"><code>    lunr.utils.warn(<span class="code-string">'Overwriting existing registered function: '</span> + label)
</code></td></tr><tr><td id="L542" class="css-a4x74f"><span>542</span></td><td id="LC542" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L543" class="css-a4x74f"><span>543</span></td><td id="LC543" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L544" class="css-a4x74f"><span>544</span></td><td id="LC544" class="css-1dcdqdg"><code>  fn.label = label
</code></td></tr><tr><td id="L545" class="css-a4x74f"><span>545</span></td><td id="LC545" class="css-1dcdqdg"><code>  lunr.Pipeline.registeredFunctions[fn.label] = fn
</code></td></tr><tr><td id="L546" class="css-a4x74f"><span>546</span></td><td id="LC546" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L547" class="css-a4x74f"><span>547</span></td><td id="LC547" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L548" class="css-a4x74f"><span>548</span></td><td id="LC548" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L549" class="css-a4x74f"><span>549</span></td><td id="LC549" class="css-1dcdqdg"><code><span class="code-comment"> * Warns if the function is not registered as a Pipeline function.
</span></code></td></tr><tr><td id="L550" class="css-a4x74f"><span>550</span></td><td id="LC550" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L551" class="css-a4x74f"><span>551</span></td><td id="LC551" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction} fn - The function to check for.
</span></code></td></tr><tr><td id="L552" class="css-a4x74f"><span>552</span></td><td id="LC552" class="css-1dcdqdg"><code><span class="code-comment"> * @private
</span></code></td></tr><tr><td id="L553" class="css-a4x74f"><span>553</span></td><td id="LC553" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L554" class="css-a4x74f"><span>554</span></td><td id="LC554" class="css-1dcdqdg"><code>lunr.Pipeline.warnIfFunctionNotRegistered = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L555" class="css-a4x74f"><span>555</span></td><td id="LC555" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> isRegistered = fn.label &amp;&amp; (fn.label <span class="code-keyword">in</span> <span class="code-keyword">this</span>.registeredFunctions)
</code></td></tr><tr><td id="L556" class="css-a4x74f"><span>556</span></td><td id="LC556" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L557" class="css-a4x74f"><span>557</span></td><td id="LC557" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!isRegistered) {
</code></td></tr><tr><td id="L558" class="css-a4x74f"><span>558</span></td><td id="LC558" class="css-1dcdqdg"><code>    lunr.utils.warn(<span class="code-string">'Function is not registered with pipeline. This may cause problems when serialising the index.\n'</span>, fn)
</code></td></tr><tr><td id="L559" class="css-a4x74f"><span>559</span></td><td id="LC559" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L560" class="css-a4x74f"><span>560</span></td><td id="LC560" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L561" class="css-a4x74f"><span>561</span></td><td id="LC561" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L562" class="css-a4x74f"><span>562</span></td><td id="LC562" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L563" class="css-a4x74f"><span>563</span></td><td id="LC563" class="css-1dcdqdg"><code><span class="code-comment"> * Loads a previously serialised pipeline.
</span></code></td></tr><tr><td id="L564" class="css-a4x74f"><span>564</span></td><td id="LC564" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L565" class="css-a4x74f"><span>565</span></td><td id="LC565" class="css-1dcdqdg"><code><span class="code-comment"> * All functions to be loaded must already be registered with lunr.Pipeline.
</span></code></td></tr><tr><td id="L566" class="css-a4x74f"><span>566</span></td><td id="LC566" class="css-1dcdqdg"><code><span class="code-comment"> * If any function from the serialised data has not been registered then an
</span></code></td></tr><tr><td id="L567" class="css-a4x74f"><span>567</span></td><td id="LC567" class="css-1dcdqdg"><code><span class="code-comment"> * error will be thrown.
</span></code></td></tr><tr><td id="L568" class="css-a4x74f"><span>568</span></td><td id="LC568" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L569" class="css-a4x74f"><span>569</span></td><td id="LC569" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object} serialised - The serialised pipeline to load.
</span></code></td></tr><tr><td id="L570" class="css-a4x74f"><span>570</span></td><td id="LC570" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Pipeline}
</span></code></td></tr><tr><td id="L571" class="css-a4x74f"><span>571</span></td><td id="LC571" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L572" class="css-a4x74f"><span>572</span></td><td id="LC572" class="css-1dcdqdg"><code>lunr.Pipeline.load = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">serialised</span>) </span>{
</code></td></tr><tr><td id="L573" class="css-a4x74f"><span>573</span></td><td id="LC573" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> pipeline = <span class="code-keyword">new</span> lunr.Pipeline
</code></td></tr><tr><td id="L574" class="css-a4x74f"><span>574</span></td><td id="LC574" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L575" class="css-a4x74f"><span>575</span></td><td id="LC575" class="css-1dcdqdg"><code>  serialised.forEach(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fnName</span>) </span>{
</code></td></tr><tr><td id="L576" class="css-a4x74f"><span>576</span></td><td id="LC576" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fn = lunr.Pipeline.registeredFunctions[fnName]
</code></td></tr><tr><td id="L577" class="css-a4x74f"><span>577</span></td><td id="LC577" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L578" class="css-a4x74f"><span>578</span></td><td id="LC578" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (fn) {
</code></td></tr><tr><td id="L579" class="css-a4x74f"><span>579</span></td><td id="LC579" class="css-1dcdqdg"><code>      pipeline.add(fn)
</code></td></tr><tr><td id="L580" class="css-a4x74f"><span>580</span></td><td id="LC580" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L581" class="css-a4x74f"><span>581</span></td><td id="LC581" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Cannot load unregistered function: '</span> + fnName)
</code></td></tr><tr><td id="L582" class="css-a4x74f"><span>582</span></td><td id="LC582" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L583" class="css-a4x74f"><span>583</span></td><td id="LC583" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L584" class="css-a4x74f"><span>584</span></td><td id="LC584" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L585" class="css-a4x74f"><span>585</span></td><td id="LC585" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> pipeline
</code></td></tr><tr><td id="L586" class="css-a4x74f"><span>586</span></td><td id="LC586" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L587" class="css-a4x74f"><span>587</span></td><td id="LC587" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L588" class="css-a4x74f"><span>588</span></td><td id="LC588" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L589" class="css-a4x74f"><span>589</span></td><td id="LC589" class="css-1dcdqdg"><code><span class="code-comment"> * Adds new functions to the end of the pipeline.
</span></code></td></tr><tr><td id="L590" class="css-a4x74f"><span>590</span></td><td id="LC590" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L591" class="css-a4x74f"><span>591</span></td><td id="LC591" class="css-1dcdqdg"><code><span class="code-comment"> * Logs a warning if the function has not been registered.
</span></code></td></tr><tr><td id="L592" class="css-a4x74f"><span>592</span></td><td id="LC592" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L593" class="css-a4x74f"><span>593</span></td><td id="LC593" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction[]} functions - Any number of functions to add to the pipeline.
</span></code></td></tr><tr><td id="L594" class="css-a4x74f"><span>594</span></td><td id="LC594" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L595" class="css-a4x74f"><span>595</span></td><td id="LC595" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.add = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L596" class="css-a4x74f"><span>596</span></td><td id="LC596" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> fns = <span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>)
</code></td></tr><tr><td id="L597" class="css-a4x74f"><span>597</span></td><td id="LC597" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L598" class="css-a4x74f"><span>598</span></td><td id="LC598" class="css-1dcdqdg"><code>  fns.forEach(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L599" class="css-a4x74f"><span>599</span></td><td id="LC599" class="css-1dcdqdg"><code>    lunr.Pipeline.warnIfFunctionNotRegistered(fn)
</code></td></tr><tr><td id="L600" class="css-a4x74f"><span>600</span></td><td id="LC600" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>._stack.push(fn)
</code></td></tr><tr><td id="L601" class="css-a4x74f"><span>601</span></td><td id="LC601" class="css-1dcdqdg"><code>  }, <span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L602" class="css-a4x74f"><span>602</span></td><td id="LC602" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L603" class="css-a4x74f"><span>603</span></td><td id="LC603" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L604" class="css-a4x74f"><span>604</span></td><td id="LC604" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L605" class="css-a4x74f"><span>605</span></td><td id="LC605" class="css-1dcdqdg"><code><span class="code-comment"> * Adds a single function after a function that already exists in the
</span></code></td></tr><tr><td id="L606" class="css-a4x74f"><span>606</span></td><td id="LC606" class="css-1dcdqdg"><code><span class="code-comment"> * pipeline.
</span></code></td></tr><tr><td id="L607" class="css-a4x74f"><span>607</span></td><td id="LC607" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L608" class="css-a4x74f"><span>608</span></td><td id="LC608" class="css-1dcdqdg"><code><span class="code-comment"> * Logs a warning if the function has not been registered.
</span></code></td></tr><tr><td id="L609" class="css-a4x74f"><span>609</span></td><td id="LC609" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L610" class="css-a4x74f"><span>610</span></td><td id="LC610" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.
</span></code></td></tr><tr><td id="L611" class="css-a4x74f"><span>611</span></td><td id="LC611" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.
</span></code></td></tr><tr><td id="L612" class="css-a4x74f"><span>612</span></td><td id="LC612" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L613" class="css-a4x74f"><span>613</span></td><td id="LC613" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.after = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">existingFn, newFn</span>) </span>{
</code></td></tr><tr><td id="L614" class="css-a4x74f"><span>614</span></td><td id="LC614" class="css-1dcdqdg"><code>  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)
</code></td></tr><tr><td id="L615" class="css-a4x74f"><span>615</span></td><td id="LC615" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L616" class="css-a4x74f"><span>616</span></td><td id="LC616" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> pos = <span class="code-keyword">this</span>._stack.indexOf(existingFn)
</code></td></tr><tr><td id="L617" class="css-a4x74f"><span>617</span></td><td id="LC617" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (pos == <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L618" class="css-a4x74f"><span>618</span></td><td id="LC618" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Cannot find existingFn'</span>)
</code></td></tr><tr><td id="L619" class="css-a4x74f"><span>619</span></td><td id="LC619" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L620" class="css-a4x74f"><span>620</span></td><td id="LC620" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L621" class="css-a4x74f"><span>621</span></td><td id="LC621" class="css-1dcdqdg"><code>  pos = pos + <span class="code-number">1</span>
</code></td></tr><tr><td id="L622" class="css-a4x74f"><span>622</span></td><td id="LC622" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._stack.splice(pos, <span class="code-number">0</span>, newFn)
</code></td></tr><tr><td id="L623" class="css-a4x74f"><span>623</span></td><td id="LC623" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L624" class="css-a4x74f"><span>624</span></td><td id="LC624" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L625" class="css-a4x74f"><span>625</span></td><td id="LC625" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L626" class="css-a4x74f"><span>626</span></td><td id="LC626" class="css-1dcdqdg"><code><span class="code-comment"> * Adds a single function before a function that already exists in the
</span></code></td></tr><tr><td id="L627" class="css-a4x74f"><span>627</span></td><td id="LC627" class="css-1dcdqdg"><code><span class="code-comment"> * pipeline.
</span></code></td></tr><tr><td id="L628" class="css-a4x74f"><span>628</span></td><td id="LC628" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L629" class="css-a4x74f"><span>629</span></td><td id="LC629" class="css-1dcdqdg"><code><span class="code-comment"> * Logs a warning if the function has not been registered.
</span></code></td></tr><tr><td id="L630" class="css-a4x74f"><span>630</span></td><td id="LC630" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L631" class="css-a4x74f"><span>631</span></td><td id="LC631" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.
</span></code></td></tr><tr><td id="L632" class="css-a4x74f"><span>632</span></td><td id="LC632" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.
</span></code></td></tr><tr><td id="L633" class="css-a4x74f"><span>633</span></td><td id="LC633" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L634" class="css-a4x74f"><span>634</span></td><td id="LC634" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.before = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">existingFn, newFn</span>) </span>{
</code></td></tr><tr><td id="L635" class="css-a4x74f"><span>635</span></td><td id="LC635" class="css-1dcdqdg"><code>  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)
</code></td></tr><tr><td id="L636" class="css-a4x74f"><span>636</span></td><td id="LC636" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L637" class="css-a4x74f"><span>637</span></td><td id="LC637" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> pos = <span class="code-keyword">this</span>._stack.indexOf(existingFn)
</code></td></tr><tr><td id="L638" class="css-a4x74f"><span>638</span></td><td id="LC638" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (pos == <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L639" class="css-a4x74f"><span>639</span></td><td id="LC639" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span>(<span class="code-string">'Cannot find existingFn'</span>)
</code></td></tr><tr><td id="L640" class="css-a4x74f"><span>640</span></td><td id="LC640" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L641" class="css-a4x74f"><span>641</span></td><td id="LC641" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L642" class="css-a4x74f"><span>642</span></td><td id="LC642" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._stack.splice(pos, <span class="code-number">0</span>, newFn)
</code></td></tr><tr><td id="L643" class="css-a4x74f"><span>643</span></td><td id="LC643" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L644" class="css-a4x74f"><span>644</span></td><td id="LC644" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L645" class="css-a4x74f"><span>645</span></td><td id="LC645" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L646" class="css-a4x74f"><span>646</span></td><td id="LC646" class="css-1dcdqdg"><code><span class="code-comment"> * Removes a function from the pipeline.
</span></code></td></tr><tr><td id="L647" class="css-a4x74f"><span>647</span></td><td id="LC647" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L648" class="css-a4x74f"><span>648</span></td><td id="LC648" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.PipelineFunction} fn The function to remove from the pipeline.
</span></code></td></tr><tr><td id="L649" class="css-a4x74f"><span>649</span></td><td id="LC649" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L650" class="css-a4x74f"><span>650</span></td><td id="LC650" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.remove = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L651" class="css-a4x74f"><span>651</span></td><td id="LC651" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> pos = <span class="code-keyword">this</span>._stack.indexOf(fn)
</code></td></tr><tr><td id="L652" class="css-a4x74f"><span>652</span></td><td id="LC652" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (pos == <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L653" class="css-a4x74f"><span>653</span></td><td id="LC653" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L654" class="css-a4x74f"><span>654</span></td><td id="LC654" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L655" class="css-a4x74f"><span>655</span></td><td id="LC655" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L656" class="css-a4x74f"><span>656</span></td><td id="LC656" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._stack.splice(pos, <span class="code-number">1</span>)
</code></td></tr><tr><td id="L657" class="css-a4x74f"><span>657</span></td><td id="LC657" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L658" class="css-a4x74f"><span>658</span></td><td id="LC658" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L659" class="css-a4x74f"><span>659</span></td><td id="LC659" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L660" class="css-a4x74f"><span>660</span></td><td id="LC660" class="css-1dcdqdg"><code><span class="code-comment"> * Runs the current list of functions that make up the pipeline against the
</span></code></td></tr><tr><td id="L661" class="css-a4x74f"><span>661</span></td><td id="LC661" class="css-1dcdqdg"><code><span class="code-comment"> * passed tokens.
</span></code></td></tr><tr><td id="L662" class="css-a4x74f"><span>662</span></td><td id="LC662" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L663" class="css-a4x74f"><span>663</span></td><td id="LC663" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Array} tokens The tokens to run through the pipeline.
</span></code></td></tr><tr><td id="L664" class="css-a4x74f"><span>664</span></td><td id="LC664" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Array}
</span></code></td></tr><tr><td id="L665" class="css-a4x74f"><span>665</span></td><td id="LC665" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L666" class="css-a4x74f"><span>666</span></td><td id="LC666" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.run = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">tokens</span>) </span>{
</code></td></tr><tr><td id="L667" class="css-a4x74f"><span>667</span></td><td id="LC667" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> stackLength = <span class="code-keyword">this</span>._stack.length
</code></td></tr><tr><td id="L668" class="css-a4x74f"><span>668</span></td><td id="LC668" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L669" class="css-a4x74f"><span>669</span></td><td id="LC669" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; stackLength; i++) {
</code></td></tr><tr><td id="L670" class="css-a4x74f"><span>670</span></td><td id="LC670" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fn = <span class="code-keyword">this</span>._stack[i]
</code></td></tr><tr><td id="L671" class="css-a4x74f"><span>671</span></td><td id="LC671" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> memo = []
</code></td></tr><tr><td id="L672" class="css-a4x74f"><span>672</span></td><td id="LC672" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L673" class="css-a4x74f"><span>673</span></td><td id="LC673" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> j = <span class="code-number">0</span>; j &lt; tokens.length; j++) {
</code></td></tr><tr><td id="L674" class="css-a4x74f"><span>674</span></td><td id="LC674" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> result = fn(tokens[j], j, tokens)
</code></td></tr><tr><td id="L675" class="css-a4x74f"><span>675</span></td><td id="LC675" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L676" class="css-a4x74f"><span>676</span></td><td id="LC676" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (result === <span class="code-literal">null</span> || result === <span class="code-keyword">void</span> <span class="code-number">0</span> || result === <span class="code-string">''</span>) <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L677" class="css-a4x74f"><span>677</span></td><td id="LC677" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L678" class="css-a4x74f"><span>678</span></td><td id="LC678" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-built_in">Array</span>.isArray(result)) {
</code></td></tr><tr><td id="L679" class="css-a4x74f"><span>679</span></td><td id="LC679" class="css-1dcdqdg"><code>        <span class="code-keyword">for</span> (<span class="code-keyword">var</span> k = <span class="code-number">0</span>; k &lt; result.length; k++) {
</code></td></tr><tr><td id="L680" class="css-a4x74f"><span>680</span></td><td id="LC680" class="css-1dcdqdg"><code>          memo.push(result[k])
</code></td></tr><tr><td id="L681" class="css-a4x74f"><span>681</span></td><td id="LC681" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L682" class="css-a4x74f"><span>682</span></td><td id="LC682" class="css-1dcdqdg"><code>      } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L683" class="css-a4x74f"><span>683</span></td><td id="LC683" class="css-1dcdqdg"><code>        memo.push(result)
</code></td></tr><tr><td id="L684" class="css-a4x74f"><span>684</span></td><td id="LC684" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L685" class="css-a4x74f"><span>685</span></td><td id="LC685" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L686" class="css-a4x74f"><span>686</span></td><td id="LC686" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L687" class="css-a4x74f"><span>687</span></td><td id="LC687" class="css-1dcdqdg"><code>    tokens = memo
</code></td></tr><tr><td id="L688" class="css-a4x74f"><span>688</span></td><td id="LC688" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L689" class="css-a4x74f"><span>689</span></td><td id="LC689" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L690" class="css-a4x74f"><span>690</span></td><td id="LC690" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> tokens
</code></td></tr><tr><td id="L691" class="css-a4x74f"><span>691</span></td><td id="LC691" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L692" class="css-a4x74f"><span>692</span></td><td id="LC692" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L693" class="css-a4x74f"><span>693</span></td><td id="LC693" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L694" class="css-a4x74f"><span>694</span></td><td id="LC694" class="css-1dcdqdg"><code><span class="code-comment"> * Convenience method for passing a string through a pipeline and getting
</span></code></td></tr><tr><td id="L695" class="css-a4x74f"><span>695</span></td><td id="LC695" class="css-1dcdqdg"><code><span class="code-comment"> * strings out. This method takes care of wrapping the passed string in a
</span></code></td></tr><tr><td id="L696" class="css-a4x74f"><span>696</span></td><td id="LC696" class="css-1dcdqdg"><code><span class="code-comment"> * token and mapping the resulting tokens back to strings.
</span></code></td></tr><tr><td id="L697" class="css-a4x74f"><span>697</span></td><td id="LC697" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L698" class="css-a4x74f"><span>698</span></td><td id="LC698" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} str - The string to pass through the pipeline.
</span></code></td></tr><tr><td id="L699" class="css-a4x74f"><span>699</span></td><td id="LC699" class="css-1dcdqdg"><code><span class="code-comment"> * @param {?object} metadata - Optional metadata to associate with the token
</span></code></td></tr><tr><td id="L700" class="css-a4x74f"><span>700</span></td><td id="LC700" class="css-1dcdqdg"><code><span class="code-comment"> * passed to the pipeline.
</span></code></td></tr><tr><td id="L701" class="css-a4x74f"><span>701</span></td><td id="LC701" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {string[]}
</span></code></td></tr><tr><td id="L702" class="css-a4x74f"><span>702</span></td><td id="LC702" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L703" class="css-a4x74f"><span>703</span></td><td id="LC703" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.runString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">str, metadata</span>) </span>{
</code></td></tr><tr><td id="L704" class="css-a4x74f"><span>704</span></td><td id="LC704" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> token = <span class="code-keyword">new</span> lunr.Token (str, metadata)
</code></td></tr><tr><td id="L705" class="css-a4x74f"><span>705</span></td><td id="LC705" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L706" class="css-a4x74f"><span>706</span></td><td id="LC706" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.run([token]).map(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">t</span>) </span>{
</code></td></tr><tr><td id="L707" class="css-a4x74f"><span>707</span></td><td id="LC707" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> t.toString()
</code></td></tr><tr><td id="L708" class="css-a4x74f"><span>708</span></td><td id="LC708" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L709" class="css-a4x74f"><span>709</span></td><td id="LC709" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L710" class="css-a4x74f"><span>710</span></td><td id="LC710" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L711" class="css-a4x74f"><span>711</span></td><td id="LC711" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L712" class="css-a4x74f"><span>712</span></td><td id="LC712" class="css-1dcdqdg"><code><span class="code-comment"> * Resets the pipeline by removing any existing processors.
</span></code></td></tr><tr><td id="L713" class="css-a4x74f"><span>713</span></td><td id="LC713" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L714" class="css-a4x74f"><span>714</span></td><td id="LC714" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L715" class="css-a4x74f"><span>715</span></td><td id="LC715" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.reset = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L716" class="css-a4x74f"><span>716</span></td><td id="LC716" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._stack = []
</code></td></tr><tr><td id="L717" class="css-a4x74f"><span>717</span></td><td id="LC717" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L718" class="css-a4x74f"><span>718</span></td><td id="LC718" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L719" class="css-a4x74f"><span>719</span></td><td id="LC719" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L720" class="css-a4x74f"><span>720</span></td><td id="LC720" class="css-1dcdqdg"><code><span class="code-comment"> * Returns a representation of the pipeline ready for serialisation.
</span></code></td></tr><tr><td id="L721" class="css-a4x74f"><span>721</span></td><td id="LC721" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L722" class="css-a4x74f"><span>722</span></td><td id="LC722" class="css-1dcdqdg"><code><span class="code-comment"> * Logs a warning if the function has not been registered.
</span></code></td></tr><tr><td id="L723" class="css-a4x74f"><span>723</span></td><td id="LC723" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L724" class="css-a4x74f"><span>724</span></td><td id="LC724" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Array}
</span></code></td></tr><tr><td id="L725" class="css-a4x74f"><span>725</span></td><td id="LC725" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L726" class="css-a4x74f"><span>726</span></td><td id="LC726" class="css-1dcdqdg"><code>lunr.Pipeline.prototype.toJSON = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L727" class="css-a4x74f"><span>727</span></td><td id="LC727" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>._stack.map(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L728" class="css-a4x74f"><span>728</span></td><td id="LC728" class="css-1dcdqdg"><code>    lunr.Pipeline.warnIfFunctionNotRegistered(fn)
</code></td></tr><tr><td id="L729" class="css-a4x74f"><span>729</span></td><td id="LC729" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L730" class="css-a4x74f"><span>730</span></td><td id="LC730" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> fn.label
</code></td></tr><tr><td id="L731" class="css-a4x74f"><span>731</span></td><td id="LC731" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L732" class="css-a4x74f"><span>732</span></td><td id="LC732" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L733" class="css-a4x74f"><span>733</span></td><td id="LC733" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L734" class="css-a4x74f"><span>734</span></td><td id="LC734" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Vector
</span></code></td></tr><tr><td id="L735" class="css-a4x74f"><span>735</span></td><td id="LC735" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L736" class="css-a4x74f"><span>736</span></td><td id="LC736" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L737" class="css-a4x74f"><span>737</span></td><td id="LC737" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L738" class="css-a4x74f"><span>738</span></td><td id="LC738" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L739" class="css-a4x74f"><span>739</span></td><td id="LC739" class="css-1dcdqdg"><code><span class="code-comment"> * A vector is used to construct the vector space of documents and queries. These
</span></code></td></tr><tr><td id="L740" class="css-a4x74f"><span>740</span></td><td id="LC740" class="css-1dcdqdg"><code><span class="code-comment"> * vectors support operations to determine the similarity between two documents or
</span></code></td></tr><tr><td id="L741" class="css-a4x74f"><span>741</span></td><td id="LC741" class="css-1dcdqdg"><code><span class="code-comment"> * a document and a query.
</span></code></td></tr><tr><td id="L742" class="css-a4x74f"><span>742</span></td><td id="LC742" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L743" class="css-a4x74f"><span>743</span></td><td id="LC743" class="css-1dcdqdg"><code><span class="code-comment"> * Normally no parameters are required for initializing a vector, but in the case of
</span></code></td></tr><tr><td id="L744" class="css-a4x74f"><span>744</span></td><td id="LC744" class="css-1dcdqdg"><code><span class="code-comment"> * loading a previously dumped vector the raw elements can be provided to the constructor.
</span></code></td></tr><tr><td id="L745" class="css-a4x74f"><span>745</span></td><td id="LC745" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L746" class="css-a4x74f"><span>746</span></td><td id="LC746" class="css-1dcdqdg"><code><span class="code-comment"> * For performance reasons vectors are implemented with a flat array, where an elements
</span></code></td></tr><tr><td id="L747" class="css-a4x74f"><span>747</span></td><td id="LC747" class="css-1dcdqdg"><code><span class="code-comment"> * index is immediately followed by its value. E.g. [index, value, index, value]. This
</span></code></td></tr><tr><td id="L748" class="css-a4x74f"><span>748</span></td><td id="LC748" class="css-1dcdqdg"><code><span class="code-comment"> * allows the underlying array to be as sparse as possible and still offer decent
</span></code></td></tr><tr><td id="L749" class="css-a4x74f"><span>749</span></td><td id="LC749" class="css-1dcdqdg"><code><span class="code-comment"> * performance when being used for vector calculations.
</span></code></td></tr><tr><td id="L750" class="css-a4x74f"><span>750</span></td><td id="LC750" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L751" class="css-a4x74f"><span>751</span></td><td id="LC751" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L752" class="css-a4x74f"><span>752</span></td><td id="LC752" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Number[]} [elements] - The flat list of element index and element value pairs.
</span></code></td></tr><tr><td id="L753" class="css-a4x74f"><span>753</span></td><td id="LC753" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L754" class="css-a4x74f"><span>754</span></td><td id="LC754" class="css-1dcdqdg"><code>lunr.Vector = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">elements</span>) </span>{
</code></td></tr><tr><td id="L755" class="css-a4x74f"><span>755</span></td><td id="LC755" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._magnitude = <span class="code-number">0</span>
</code></td></tr><tr><td id="L756" class="css-a4x74f"><span>756</span></td><td id="LC756" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.elements = elements || []
</code></td></tr><tr><td id="L757" class="css-a4x74f"><span>757</span></td><td id="LC757" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L758" class="css-a4x74f"><span>758</span></td><td id="LC758" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L759" class="css-a4x74f"><span>759</span></td><td id="LC759" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L760" class="css-a4x74f"><span>760</span></td><td id="LC760" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L761" class="css-a4x74f"><span>761</span></td><td id="LC761" class="css-1dcdqdg"><code><span class="code-comment"> * Calculates the position within the vector to insert a given index.
</span></code></td></tr><tr><td id="L762" class="css-a4x74f"><span>762</span></td><td id="LC762" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L763" class="css-a4x74f"><span>763</span></td><td id="LC763" class="css-1dcdqdg"><code><span class="code-comment"> * This is used internally by insert and upsert. If there are duplicate indexes then
</span></code></td></tr><tr><td id="L764" class="css-a4x74f"><span>764</span></td><td id="LC764" class="css-1dcdqdg"><code><span class="code-comment"> * the position is returned as if the value for that index were to be updated, but it
</span></code></td></tr><tr><td id="L765" class="css-a4x74f"><span>765</span></td><td id="LC765" class="css-1dcdqdg"><code><span class="code-comment"> * is the callers responsibility to check whether there is a duplicate at that index
</span></code></td></tr><tr><td id="L766" class="css-a4x74f"><span>766</span></td><td id="LC766" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L767" class="css-a4x74f"><span>767</span></td><td id="LC767" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Number} insertIdx - The index at which the element should be inserted.
</span></code></td></tr><tr><td id="L768" class="css-a4x74f"><span>768</span></td><td id="LC768" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Number}
</span></code></td></tr><tr><td id="L769" class="css-a4x74f"><span>769</span></td><td id="LC769" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L770" class="css-a4x74f"><span>770</span></td><td id="LC770" class="css-1dcdqdg"><code>lunr.Vector.prototype.positionForIndex = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">index</span>) </span>{
</code></td></tr><tr><td id="L771" class="css-a4x74f"><span>771</span></td><td id="LC771" class="css-1dcdqdg"><code>  <span class="code-comment">// For an empty vector the tuple can be inserted at the beginning</span>
</code></td></tr><tr><td id="L772" class="css-a4x74f"><span>772</span></td><td id="LC772" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.elements.length == <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L773" class="css-a4x74f"><span>773</span></td><td id="LC773" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-number">0</span>
</code></td></tr><tr><td id="L774" class="css-a4x74f"><span>774</span></td><td id="LC774" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L775" class="css-a4x74f"><span>775</span></td><td id="LC775" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L776" class="css-a4x74f"><span>776</span></td><td id="LC776" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> start = <span class="code-number">0</span>,
</code></td></tr><tr><td id="L777" class="css-a4x74f"><span>777</span></td><td id="LC777" class="css-1dcdqdg"><code>      end = <span class="code-keyword">this</span>.elements.length / <span class="code-number">2</span>,
</code></td></tr><tr><td id="L778" class="css-a4x74f"><span>778</span></td><td id="LC778" class="css-1dcdqdg"><code>      sliceLength = end - start,
</code></td></tr><tr><td id="L779" class="css-a4x74f"><span>779</span></td><td id="LC779" class="css-1dcdqdg"><code>      pivotPoint = <span class="code-built_in">Math</span>.floor(sliceLength / <span class="code-number">2</span>),
</code></td></tr><tr><td id="L780" class="css-a4x74f"><span>780</span></td><td id="LC780" class="css-1dcdqdg"><code>      pivotIndex = <span class="code-keyword">this</span>.elements[pivotPoint * <span class="code-number">2</span>]
</code></td></tr><tr><td id="L781" class="css-a4x74f"><span>781</span></td><td id="LC781" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L782" class="css-a4x74f"><span>782</span></td><td id="LC782" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (sliceLength &gt; <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L783" class="css-a4x74f"><span>783</span></td><td id="LC783" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (pivotIndex &lt; index) {
</code></td></tr><tr><td id="L784" class="css-a4x74f"><span>784</span></td><td id="LC784" class="css-1dcdqdg"><code>      start = pivotPoint
</code></td></tr><tr><td id="L785" class="css-a4x74f"><span>785</span></td><td id="LC785" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L786" class="css-a4x74f"><span>786</span></td><td id="LC786" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L787" class="css-a4x74f"><span>787</span></td><td id="LC787" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (pivotIndex &gt; index) {
</code></td></tr><tr><td id="L788" class="css-a4x74f"><span>788</span></td><td id="LC788" class="css-1dcdqdg"><code>      end = pivotPoint
</code></td></tr><tr><td id="L789" class="css-a4x74f"><span>789</span></td><td id="LC789" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L790" class="css-a4x74f"><span>790</span></td><td id="LC790" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L791" class="css-a4x74f"><span>791</span></td><td id="LC791" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (pivotIndex == index) {
</code></td></tr><tr><td id="L792" class="css-a4x74f"><span>792</span></td><td id="LC792" class="css-1dcdqdg"><code>      <span class="code-keyword">break</span>
</code></td></tr><tr><td id="L793" class="css-a4x74f"><span>793</span></td><td id="LC793" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L794" class="css-a4x74f"><span>794</span></td><td id="LC794" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L795" class="css-a4x74f"><span>795</span></td><td id="LC795" class="css-1dcdqdg"><code>    sliceLength = end - start
</code></td></tr><tr><td id="L796" class="css-a4x74f"><span>796</span></td><td id="LC796" class="css-1dcdqdg"><code>    pivotPoint = start + <span class="code-built_in">Math</span>.floor(sliceLength / <span class="code-number">2</span>)
</code></td></tr><tr><td id="L797" class="css-a4x74f"><span>797</span></td><td id="LC797" class="css-1dcdqdg"><code>    pivotIndex = <span class="code-keyword">this</span>.elements[pivotPoint * <span class="code-number">2</span>]
</code></td></tr><tr><td id="L798" class="css-a4x74f"><span>798</span></td><td id="LC798" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L799" class="css-a4x74f"><span>799</span></td><td id="LC799" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L800" class="css-a4x74f"><span>800</span></td><td id="LC800" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (pivotIndex == index) {
</code></td></tr><tr><td id="L801" class="css-a4x74f"><span>801</span></td><td id="LC801" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> pivotPoint * <span class="code-number">2</span>
</code></td></tr><tr><td id="L802" class="css-a4x74f"><span>802</span></td><td id="LC802" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L803" class="css-a4x74f"><span>803</span></td><td id="LC803" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L804" class="css-a4x74f"><span>804</span></td><td id="LC804" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (pivotIndex &gt; index) {
</code></td></tr><tr><td id="L805" class="css-a4x74f"><span>805</span></td><td id="LC805" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> pivotPoint * <span class="code-number">2</span>
</code></td></tr><tr><td id="L806" class="css-a4x74f"><span>806</span></td><td id="LC806" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L807" class="css-a4x74f"><span>807</span></td><td id="LC807" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L808" class="css-a4x74f"><span>808</span></td><td id="LC808" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (pivotIndex &lt; index) {
</code></td></tr><tr><td id="L809" class="css-a4x74f"><span>809</span></td><td id="LC809" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> (pivotPoint + <span class="code-number">1</span>) * <span class="code-number">2</span>
</code></td></tr><tr><td id="L810" class="css-a4x74f"><span>810</span></td><td id="LC810" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L811" class="css-a4x74f"><span>811</span></td><td id="LC811" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L812" class="css-a4x74f"><span>812</span></td><td id="LC812" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L813" class="css-a4x74f"><span>813</span></td><td id="LC813" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L814" class="css-a4x74f"><span>814</span></td><td id="LC814" class="css-1dcdqdg"><code><span class="code-comment"> * Inserts an element at an index within the vector.
</span></code></td></tr><tr><td id="L815" class="css-a4x74f"><span>815</span></td><td id="LC815" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L816" class="css-a4x74f"><span>816</span></td><td id="LC816" class="css-1dcdqdg"><code><span class="code-comment"> * Does not allow duplicates, will throw an error if there is already an entry
</span></code></td></tr><tr><td id="L817" class="css-a4x74f"><span>817</span></td><td id="LC817" class="css-1dcdqdg"><code><span class="code-comment"> * for this index.
</span></code></td></tr><tr><td id="L818" class="css-a4x74f"><span>818</span></td><td id="LC818" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L819" class="css-a4x74f"><span>819</span></td><td id="LC819" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Number} insertIdx - The index at which the element should be inserted.
</span></code></td></tr><tr><td id="L820" class="css-a4x74f"><span>820</span></td><td id="LC820" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Number} val - The value to be inserted into the vector.
</span></code></td></tr><tr><td id="L821" class="css-a4x74f"><span>821</span></td><td id="LC821" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L822" class="css-a4x74f"><span>822</span></td><td id="LC822" class="css-1dcdqdg"><code>lunr.Vector.prototype.insert = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">insertIdx, val</span>) </span>{
</code></td></tr><tr><td id="L823" class="css-a4x74f"><span>823</span></td><td id="LC823" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.upsert(insertIdx, val, <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L824" class="css-a4x74f"><span>824</span></td><td id="LC824" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-string">"duplicate index"</span>
</code></td></tr><tr><td id="L825" class="css-a4x74f"><span>825</span></td><td id="LC825" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L826" class="css-a4x74f"><span>826</span></td><td id="LC826" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L827" class="css-a4x74f"><span>827</span></td><td id="LC827" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L828" class="css-a4x74f"><span>828</span></td><td id="LC828" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L829" class="css-a4x74f"><span>829</span></td><td id="LC829" class="css-1dcdqdg"><code><span class="code-comment"> * Inserts or updates an existing index within the vector.
</span></code></td></tr><tr><td id="L830" class="css-a4x74f"><span>830</span></td><td id="LC830" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L831" class="css-a4x74f"><span>831</span></td><td id="LC831" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Number} insertIdx - The index at which the element should be inserted.
</span></code></td></tr><tr><td id="L832" class="css-a4x74f"><span>832</span></td><td id="LC832" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Number} val - The value to be inserted into the vector.
</span></code></td></tr><tr><td id="L833" class="css-a4x74f"><span>833</span></td><td id="LC833" class="css-1dcdqdg"><code><span class="code-comment"> * @param {function} fn - A function that is called for updates, the existing value and the
</span></code></td></tr><tr><td id="L834" class="css-a4x74f"><span>834</span></td><td id="LC834" class="css-1dcdqdg"><code><span class="code-comment"> * requested value are passed as arguments
</span></code></td></tr><tr><td id="L835" class="css-a4x74f"><span>835</span></td><td id="LC835" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L836" class="css-a4x74f"><span>836</span></td><td id="LC836" class="css-1dcdqdg"><code>lunr.Vector.prototype.upsert = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">insertIdx, val, fn</span>) </span>{
</code></td></tr><tr><td id="L837" class="css-a4x74f"><span>837</span></td><td id="LC837" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._magnitude = <span class="code-number">0</span>
</code></td></tr><tr><td id="L838" class="css-a4x74f"><span>838</span></td><td id="LC838" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> position = <span class="code-keyword">this</span>.positionForIndex(insertIdx)
</code></td></tr><tr><td id="L839" class="css-a4x74f"><span>839</span></td><td id="LC839" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L840" class="css-a4x74f"><span>840</span></td><td id="LC840" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.elements[position] == insertIdx) {
</code></td></tr><tr><td id="L841" class="css-a4x74f"><span>841</span></td><td id="LC841" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.elements[position + <span class="code-number">1</span>] = fn(<span class="code-keyword">this</span>.elements[position + <span class="code-number">1</span>], val)
</code></td></tr><tr><td id="L842" class="css-a4x74f"><span>842</span></td><td id="LC842" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L843" class="css-a4x74f"><span>843</span></td><td id="LC843" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.elements.splice(position, <span class="code-number">0</span>, insertIdx, val)
</code></td></tr><tr><td id="L844" class="css-a4x74f"><span>844</span></td><td id="LC844" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L845" class="css-a4x74f"><span>845</span></td><td id="LC845" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L846" class="css-a4x74f"><span>846</span></td><td id="LC846" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L847" class="css-a4x74f"><span>847</span></td><td id="LC847" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L848" class="css-a4x74f"><span>848</span></td><td id="LC848" class="css-1dcdqdg"><code><span class="code-comment"> * Calculates the magnitude of this vector.
</span></code></td></tr><tr><td id="L849" class="css-a4x74f"><span>849</span></td><td id="LC849" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L850" class="css-a4x74f"><span>850</span></td><td id="LC850" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Number}
</span></code></td></tr><tr><td id="L851" class="css-a4x74f"><span>851</span></td><td id="LC851" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L852" class="css-a4x74f"><span>852</span></td><td id="LC852" class="css-1dcdqdg"><code>lunr.Vector.prototype.magnitude = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L853" class="css-a4x74f"><span>853</span></td><td id="LC853" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>._magnitude) <span class="code-keyword">return</span> <span class="code-keyword">this</span>._magnitude
</code></td></tr><tr><td id="L854" class="css-a4x74f"><span>854</span></td><td id="LC854" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L855" class="css-a4x74f"><span>855</span></td><td id="LC855" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> sumOfSquares = <span class="code-number">0</span>,
</code></td></tr><tr><td id="L856" class="css-a4x74f"><span>856</span></td><td id="LC856" class="css-1dcdqdg"><code>      elementsLength = <span class="code-keyword">this</span>.elements.length
</code></td></tr><tr><td id="L857" class="css-a4x74f"><span>857</span></td><td id="LC857" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L858" class="css-a4x74f"><span>858</span></td><td id="LC858" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">1</span>; i &lt; elementsLength; i += <span class="code-number">2</span>) {
</code></td></tr><tr><td id="L859" class="css-a4x74f"><span>859</span></td><td id="LC859" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> val = <span class="code-keyword">this</span>.elements[i]
</code></td></tr><tr><td id="L860" class="css-a4x74f"><span>860</span></td><td id="LC860" class="css-1dcdqdg"><code>    sumOfSquares += val * val
</code></td></tr><tr><td id="L861" class="css-a4x74f"><span>861</span></td><td id="LC861" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L862" class="css-a4x74f"><span>862</span></td><td id="LC862" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L863" class="css-a4x74f"><span>863</span></td><td id="LC863" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>._magnitude = <span class="code-built_in">Math</span>.sqrt(sumOfSquares)
</code></td></tr><tr><td id="L864" class="css-a4x74f"><span>864</span></td><td id="LC864" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L865" class="css-a4x74f"><span>865</span></td><td id="LC865" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L866" class="css-a4x74f"><span>866</span></td><td id="LC866" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L867" class="css-a4x74f"><span>867</span></td><td id="LC867" class="css-1dcdqdg"><code><span class="code-comment"> * Calculates the dot product of this vector and another vector.
</span></code></td></tr><tr><td id="L868" class="css-a4x74f"><span>868</span></td><td id="LC868" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L869" class="css-a4x74f"><span>869</span></td><td id="LC869" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Vector} otherVector - The vector to compute the dot product with.
</span></code></td></tr><tr><td id="L870" class="css-a4x74f"><span>870</span></td><td id="LC870" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Number}
</span></code></td></tr><tr><td id="L871" class="css-a4x74f"><span>871</span></td><td id="LC871" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L872" class="css-a4x74f"><span>872</span></td><td id="LC872" class="css-1dcdqdg"><code>lunr.Vector.prototype.dot = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">otherVector</span>) </span>{
</code></td></tr><tr><td id="L873" class="css-a4x74f"><span>873</span></td><td id="LC873" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> dotProduct = <span class="code-number">0</span>,
</code></td></tr><tr><td id="L874" class="css-a4x74f"><span>874</span></td><td id="LC874" class="css-1dcdqdg"><code>      a = <span class="code-keyword">this</span>.elements, b = otherVector.elements,
</code></td></tr><tr><td id="L875" class="css-a4x74f"><span>875</span></td><td id="LC875" class="css-1dcdqdg"><code>      aLen = a.length, bLen = b.length,
</code></td></tr><tr><td id="L876" class="css-a4x74f"><span>876</span></td><td id="LC876" class="css-1dcdqdg"><code>      aVal = <span class="code-number">0</span>, bVal = <span class="code-number">0</span>,
</code></td></tr><tr><td id="L877" class="css-a4x74f"><span>877</span></td><td id="LC877" class="css-1dcdqdg"><code>      i = <span class="code-number">0</span>, j = <span class="code-number">0</span>
</code></td></tr><tr><td id="L878" class="css-a4x74f"><span>878</span></td><td id="LC878" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L879" class="css-a4x74f"><span>879</span></td><td id="LC879" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (i &lt; aLen &amp;&amp; j &lt; bLen) {
</code></td></tr><tr><td id="L880" class="css-a4x74f"><span>880</span></td><td id="LC880" class="css-1dcdqdg"><code>    aVal = a[i], bVal = b[j]
</code></td></tr><tr><td id="L881" class="css-a4x74f"><span>881</span></td><td id="LC881" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (aVal &lt; bVal) {
</code></td></tr><tr><td id="L882" class="css-a4x74f"><span>882</span></td><td id="LC882" class="css-1dcdqdg"><code>      i += <span class="code-number">2</span>
</code></td></tr><tr><td id="L883" class="css-a4x74f"><span>883</span></td><td id="LC883" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> <span class="code-keyword">if</span> (aVal &gt; bVal) {
</code></td></tr><tr><td id="L884" class="css-a4x74f"><span>884</span></td><td id="LC884" class="css-1dcdqdg"><code>      j += <span class="code-number">2</span>
</code></td></tr><tr><td id="L885" class="css-a4x74f"><span>885</span></td><td id="LC885" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> <span class="code-keyword">if</span> (aVal == bVal) {
</code></td></tr><tr><td id="L886" class="css-a4x74f"><span>886</span></td><td id="LC886" class="css-1dcdqdg"><code>      dotProduct += a[i + <span class="code-number">1</span>] * b[j + <span class="code-number">1</span>]
</code></td></tr><tr><td id="L887" class="css-a4x74f"><span>887</span></td><td id="LC887" class="css-1dcdqdg"><code>      i += <span class="code-number">2</span>
</code></td></tr><tr><td id="L888" class="css-a4x74f"><span>888</span></td><td id="LC888" class="css-1dcdqdg"><code>      j += <span class="code-number">2</span>
</code></td></tr><tr><td id="L889" class="css-a4x74f"><span>889</span></td><td id="LC889" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L890" class="css-a4x74f"><span>890</span></td><td id="LC890" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L891" class="css-a4x74f"><span>891</span></td><td id="LC891" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L892" class="css-a4x74f"><span>892</span></td><td id="LC892" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> dotProduct
</code></td></tr><tr><td id="L893" class="css-a4x74f"><span>893</span></td><td id="LC893" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L894" class="css-a4x74f"><span>894</span></td><td id="LC894" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L895" class="css-a4x74f"><span>895</span></td><td id="LC895" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L896" class="css-a4x74f"><span>896</span></td><td id="LC896" class="css-1dcdqdg"><code><span class="code-comment"> * Calculates the similarity between this vector and another vector.
</span></code></td></tr><tr><td id="L897" class="css-a4x74f"><span>897</span></td><td id="LC897" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L898" class="css-a4x74f"><span>898</span></td><td id="LC898" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Vector} otherVector - The other vector to calculate the
</span></code></td></tr><tr><td id="L899" class="css-a4x74f"><span>899</span></td><td id="LC899" class="css-1dcdqdg"><code><span class="code-comment"> * similarity with.
</span></code></td></tr><tr><td id="L900" class="css-a4x74f"><span>900</span></td><td id="LC900" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Number}
</span></code></td></tr><tr><td id="L901" class="css-a4x74f"><span>901</span></td><td id="LC901" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L902" class="css-a4x74f"><span>902</span></td><td id="LC902" class="css-1dcdqdg"><code>lunr.Vector.prototype.similarity = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">otherVector</span>) </span>{
</code></td></tr><tr><td id="L903" class="css-a4x74f"><span>903</span></td><td id="LC903" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.dot(otherVector) / <span class="code-keyword">this</span>.magnitude() || <span class="code-number">0</span>
</code></td></tr><tr><td id="L904" class="css-a4x74f"><span>904</span></td><td id="LC904" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L905" class="css-a4x74f"><span>905</span></td><td id="LC905" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L906" class="css-a4x74f"><span>906</span></td><td id="LC906" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L907" class="css-a4x74f"><span>907</span></td><td id="LC907" class="css-1dcdqdg"><code><span class="code-comment"> * Converts the vector to an array of the elements within the vector.
</span></code></td></tr><tr><td id="L908" class="css-a4x74f"><span>908</span></td><td id="LC908" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L909" class="css-a4x74f"><span>909</span></td><td id="LC909" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Number[]}
</span></code></td></tr><tr><td id="L910" class="css-a4x74f"><span>910</span></td><td id="LC910" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L911" class="css-a4x74f"><span>911</span></td><td id="LC911" class="css-1dcdqdg"><code>lunr.Vector.prototype.toArray = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L912" class="css-a4x74f"><span>912</span></td><td id="LC912" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> output = <span class="code-keyword">new</span> <span class="code-built_in">Array</span> (<span class="code-keyword">this</span>.elements.length / <span class="code-number">2</span>)
</code></td></tr><tr><td id="L913" class="css-a4x74f"><span>913</span></td><td id="LC913" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L914" class="css-a4x74f"><span>914</span></td><td id="LC914" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">1</span>, j = <span class="code-number">0</span>; i &lt; <span class="code-keyword">this</span>.elements.length; i += <span class="code-number">2</span>, j++) {
</code></td></tr><tr><td id="L915" class="css-a4x74f"><span>915</span></td><td id="LC915" class="css-1dcdqdg"><code>    output[j] = <span class="code-keyword">this</span>.elements[i]
</code></td></tr><tr><td id="L916" class="css-a4x74f"><span>916</span></td><td id="LC916" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L917" class="css-a4x74f"><span>917</span></td><td id="LC917" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L918" class="css-a4x74f"><span>918</span></td><td id="LC918" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> output
</code></td></tr><tr><td id="L919" class="css-a4x74f"><span>919</span></td><td id="LC919" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L920" class="css-a4x74f"><span>920</span></td><td id="LC920" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L921" class="css-a4x74f"><span>921</span></td><td id="LC921" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L922" class="css-a4x74f"><span>922</span></td><td id="LC922" class="css-1dcdqdg"><code><span class="code-comment"> * A JSON serializable representation of the vector.
</span></code></td></tr><tr><td id="L923" class="css-a4x74f"><span>923</span></td><td id="LC923" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L924" class="css-a4x74f"><span>924</span></td><td id="LC924" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Number[]}
</span></code></td></tr><tr><td id="L925" class="css-a4x74f"><span>925</span></td><td id="LC925" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L926" class="css-a4x74f"><span>926</span></td><td id="LC926" class="css-1dcdqdg"><code>lunr.Vector.prototype.toJSON = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L927" class="css-a4x74f"><span>927</span></td><td id="LC927" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.elements
</code></td></tr><tr><td id="L928" class="css-a4x74f"><span>928</span></td><td id="LC928" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L929" class="css-a4x74f"><span>929</span></td><td id="LC929" class="css-1dcdqdg"><code><span class="code-comment">/* eslint-disable */</span>
</code></td></tr><tr><td id="L930" class="css-a4x74f"><span>930</span></td><td id="LC930" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L931" class="css-a4x74f"><span>931</span></td><td id="LC931" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.stemmer
</span></code></td></tr><tr><td id="L932" class="css-a4x74f"><span>932</span></td><td id="LC932" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L933" class="css-a4x74f"><span>933</span></td><td id="LC933" class="css-1dcdqdg"><code><span class="code-comment"> * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
</span></code></td></tr><tr><td id="L934" class="css-a4x74f"><span>934</span></td><td id="LC934" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L935" class="css-a4x74f"><span>935</span></td><td id="LC935" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L936" class="css-a4x74f"><span>936</span></td><td id="LC936" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L937" class="css-a4x74f"><span>937</span></td><td id="LC937" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.stemmer is an english language stemmer, this is a JavaScript
</span></code></td></tr><tr><td id="L938" class="css-a4x74f"><span>938</span></td><td id="LC938" class="css-1dcdqdg"><code><span class="code-comment"> * implementation of the PorterStemmer taken from http://tartarus.org/~martin
</span></code></td></tr><tr><td id="L939" class="css-a4x74f"><span>939</span></td><td id="LC939" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L940" class="css-a4x74f"><span>940</span></td><td id="LC940" class="css-1dcdqdg"><code><span class="code-comment"> * @static
</span></code></td></tr><tr><td id="L941" class="css-a4x74f"><span>941</span></td><td id="LC941" class="css-1dcdqdg"><code><span class="code-comment"> * @implements {lunr.PipelineFunction}
</span></code></td></tr><tr><td id="L942" class="css-a4x74f"><span>942</span></td><td id="LC942" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Token} token - The string to stem
</span></code></td></tr><tr><td id="L943" class="css-a4x74f"><span>943</span></td><td id="LC943" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Token}
</span></code></td></tr><tr><td id="L944" class="css-a4x74f"><span>944</span></td><td id="LC944" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.Pipeline}
</span></code></td></tr><tr><td id="L945" class="css-a4x74f"><span>945</span></td><td id="LC945" class="css-1dcdqdg"><code><span class="code-comment"> * @function
</span></code></td></tr><tr><td id="L946" class="css-a4x74f"><span>946</span></td><td id="LC946" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L947" class="css-a4x74f"><span>947</span></td><td id="LC947" class="css-1dcdqdg"><code>lunr.stemmer = (<span class="code-function"><span class="code-keyword">function</span>(<span class="code-params"></span>)</span>{
</code></td></tr><tr><td id="L948" class="css-a4x74f"><span>948</span></td><td id="LC948" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> step2list = {
</code></td></tr><tr><td id="L949" class="css-a4x74f"><span>949</span></td><td id="LC949" class="css-1dcdqdg"><code>      <span class="code-string">"ational"</span> : <span class="code-string">"ate"</span>,
</code></td></tr><tr><td id="L950" class="css-a4x74f"><span>950</span></td><td id="LC950" class="css-1dcdqdg"><code>      <span class="code-string">"tional"</span> : <span class="code-string">"tion"</span>,
</code></td></tr><tr><td id="L951" class="css-a4x74f"><span>951</span></td><td id="LC951" class="css-1dcdqdg"><code>      <span class="code-string">"enci"</span> : <span class="code-string">"ence"</span>,
</code></td></tr><tr><td id="L952" class="css-a4x74f"><span>952</span></td><td id="LC952" class="css-1dcdqdg"><code>      <span class="code-string">"anci"</span> : <span class="code-string">"ance"</span>,
</code></td></tr><tr><td id="L953" class="css-a4x74f"><span>953</span></td><td id="LC953" class="css-1dcdqdg"><code>      <span class="code-string">"izer"</span> : <span class="code-string">"ize"</span>,
</code></td></tr><tr><td id="L954" class="css-a4x74f"><span>954</span></td><td id="LC954" class="css-1dcdqdg"><code>      <span class="code-string">"bli"</span> : <span class="code-string">"ble"</span>,
</code></td></tr><tr><td id="L955" class="css-a4x74f"><span>955</span></td><td id="LC955" class="css-1dcdqdg"><code>      <span class="code-string">"alli"</span> : <span class="code-string">"al"</span>,
</code></td></tr><tr><td id="L956" class="css-a4x74f"><span>956</span></td><td id="LC956" class="css-1dcdqdg"><code>      <span class="code-string">"entli"</span> : <span class="code-string">"ent"</span>,
</code></td></tr><tr><td id="L957" class="css-a4x74f"><span>957</span></td><td id="LC957" class="css-1dcdqdg"><code>      <span class="code-string">"eli"</span> : <span class="code-string">"e"</span>,
</code></td></tr><tr><td id="L958" class="css-a4x74f"><span>958</span></td><td id="LC958" class="css-1dcdqdg"><code>      <span class="code-string">"ousli"</span> : <span class="code-string">"ous"</span>,
</code></td></tr><tr><td id="L959" class="css-a4x74f"><span>959</span></td><td id="LC959" class="css-1dcdqdg"><code>      <span class="code-string">"ization"</span> : <span class="code-string">"ize"</span>,
</code></td></tr><tr><td id="L960" class="css-a4x74f"><span>960</span></td><td id="LC960" class="css-1dcdqdg"><code>      <span class="code-string">"ation"</span> : <span class="code-string">"ate"</span>,
</code></td></tr><tr><td id="L961" class="css-a4x74f"><span>961</span></td><td id="LC961" class="css-1dcdqdg"><code>      <span class="code-string">"ator"</span> : <span class="code-string">"ate"</span>,
</code></td></tr><tr><td id="L962" class="css-a4x74f"><span>962</span></td><td id="LC962" class="css-1dcdqdg"><code>      <span class="code-string">"alism"</span> : <span class="code-string">"al"</span>,
</code></td></tr><tr><td id="L963" class="css-a4x74f"><span>963</span></td><td id="LC963" class="css-1dcdqdg"><code>      <span class="code-string">"iveness"</span> : <span class="code-string">"ive"</span>,
</code></td></tr><tr><td id="L964" class="css-a4x74f"><span>964</span></td><td id="LC964" class="css-1dcdqdg"><code>      <span class="code-string">"fulness"</span> : <span class="code-string">"ful"</span>,
</code></td></tr><tr><td id="L965" class="css-a4x74f"><span>965</span></td><td id="LC965" class="css-1dcdqdg"><code>      <span class="code-string">"ousness"</span> : <span class="code-string">"ous"</span>,
</code></td></tr><tr><td id="L966" class="css-a4x74f"><span>966</span></td><td id="LC966" class="css-1dcdqdg"><code>      <span class="code-string">"aliti"</span> : <span class="code-string">"al"</span>,
</code></td></tr><tr><td id="L967" class="css-a4x74f"><span>967</span></td><td id="LC967" class="css-1dcdqdg"><code>      <span class="code-string">"iviti"</span> : <span class="code-string">"ive"</span>,
</code></td></tr><tr><td id="L968" class="css-a4x74f"><span>968</span></td><td id="LC968" class="css-1dcdqdg"><code>      <span class="code-string">"biliti"</span> : <span class="code-string">"ble"</span>,
</code></td></tr><tr><td id="L969" class="css-a4x74f"><span>969</span></td><td id="LC969" class="css-1dcdqdg"><code>      <span class="code-string">"logi"</span> : <span class="code-string">"log"</span>
</code></td></tr><tr><td id="L970" class="css-a4x74f"><span>970</span></td><td id="LC970" class="css-1dcdqdg"><code>    },
</code></td></tr><tr><td id="L971" class="css-a4x74f"><span>971</span></td><td id="LC971" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L972" class="css-a4x74f"><span>972</span></td><td id="LC972" class="css-1dcdqdg"><code>    step3list = {
</code></td></tr><tr><td id="L973" class="css-a4x74f"><span>973</span></td><td id="LC973" class="css-1dcdqdg"><code>      <span class="code-string">"icate"</span> : <span class="code-string">"ic"</span>,
</code></td></tr><tr><td id="L974" class="css-a4x74f"><span>974</span></td><td id="LC974" class="css-1dcdqdg"><code>      <span class="code-string">"ative"</span> : <span class="code-string">""</span>,
</code></td></tr><tr><td id="L975" class="css-a4x74f"><span>975</span></td><td id="LC975" class="css-1dcdqdg"><code>      <span class="code-string">"alize"</span> : <span class="code-string">"al"</span>,
</code></td></tr><tr><td id="L976" class="css-a4x74f"><span>976</span></td><td id="LC976" class="css-1dcdqdg"><code>      <span class="code-string">"iciti"</span> : <span class="code-string">"ic"</span>,
</code></td></tr><tr><td id="L977" class="css-a4x74f"><span>977</span></td><td id="LC977" class="css-1dcdqdg"><code>      <span class="code-string">"ical"</span> : <span class="code-string">"ic"</span>,
</code></td></tr><tr><td id="L978" class="css-a4x74f"><span>978</span></td><td id="LC978" class="css-1dcdqdg"><code>      <span class="code-string">"ful"</span> : <span class="code-string">""</span>,
</code></td></tr><tr><td id="L979" class="css-a4x74f"><span>979</span></td><td id="LC979" class="css-1dcdqdg"><code>      <span class="code-string">"ness"</span> : <span class="code-string">""</span>
</code></td></tr><tr><td id="L980" class="css-a4x74f"><span>980</span></td><td id="LC980" class="css-1dcdqdg"><code>    },
</code></td></tr><tr><td id="L981" class="css-a4x74f"><span>981</span></td><td id="LC981" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L982" class="css-a4x74f"><span>982</span></td><td id="LC982" class="css-1dcdqdg"><code>    c = <span class="code-string">"[^aeiou]"</span>,          <span class="code-comment">// consonant</span>
</code></td></tr><tr><td id="L983" class="css-a4x74f"><span>983</span></td><td id="LC983" class="css-1dcdqdg"><code>    v = <span class="code-string">"[aeiouy]"</span>,          <span class="code-comment">// vowel</span>
</code></td></tr><tr><td id="L984" class="css-a4x74f"><span>984</span></td><td id="LC984" class="css-1dcdqdg"><code>    C = c + <span class="code-string">"[^aeiouy]*"</span>,    <span class="code-comment">// consonant sequence</span>
</code></td></tr><tr><td id="L985" class="css-a4x74f"><span>985</span></td><td id="LC985" class="css-1dcdqdg"><code>    V = v + <span class="code-string">"[aeiou]*"</span>,      <span class="code-comment">// vowel sequence</span>
</code></td></tr><tr><td id="L986" class="css-a4x74f"><span>986</span></td><td id="LC986" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L987" class="css-a4x74f"><span>987</span></td><td id="LC987" class="css-1dcdqdg"><code>    mgr0 = <span class="code-string">"^("</span> + C + <span class="code-string">")?"</span> + V + C,               <span class="code-comment">// [C]VC... is m&gt;0</span>
</code></td></tr><tr><td id="L988" class="css-a4x74f"><span>988</span></td><td id="LC988" class="css-1dcdqdg"><code>    meq1 = <span class="code-string">"^("</span> + C + <span class="code-string">")?"</span> + V + C + <span class="code-string">"("</span> + V + <span class="code-string">")?$"</span>,  <span class="code-comment">// [C]VC[V] is m=1</span>
</code></td></tr><tr><td id="L989" class="css-a4x74f"><span>989</span></td><td id="LC989" class="css-1dcdqdg"><code>    mgr1 = <span class="code-string">"^("</span> + C + <span class="code-string">")?"</span> + V + C + V + C,       <span class="code-comment">// [C]VCVC... is m&gt;1</span>
</code></td></tr><tr><td id="L990" class="css-a4x74f"><span>990</span></td><td id="LC990" class="css-1dcdqdg"><code>    s_v = <span class="code-string">"^("</span> + C + <span class="code-string">")?"</span> + v;                   <span class="code-comment">// vowel in stem</span>
</code></td></tr><tr><td id="L991" class="css-a4x74f"><span>991</span></td><td id="LC991" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L992" class="css-a4x74f"><span>992</span></td><td id="LC992" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_mgr0 = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(mgr0);
</code></td></tr><tr><td id="L993" class="css-a4x74f"><span>993</span></td><td id="LC993" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_mgr1 = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(mgr1);
</code></td></tr><tr><td id="L994" class="css-a4x74f"><span>994</span></td><td id="LC994" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_meq1 = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(meq1);
</code></td></tr><tr><td id="L995" class="css-a4x74f"><span>995</span></td><td id="LC995" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_s_v = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(s_v);
</code></td></tr><tr><td id="L996" class="css-a4x74f"><span>996</span></td><td id="LC996" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L997" class="css-a4x74f"><span>997</span></td><td id="LC997" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_1a = <span class="code-regexp">/^(.+?)(ss|i)es$/</span>;
</code></td></tr><tr><td id="L998" class="css-a4x74f"><span>998</span></td><td id="LC998" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re2_1a = <span class="code-regexp">/^(.+?)([^s])s$/</span>;
</code></td></tr><tr><td id="L999" class="css-a4x74f"><span>999</span></td><td id="LC999" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_1b = <span class="code-regexp">/^(.+?)eed$/</span>;
</code></td></tr><tr><td id="L1000" class="css-a4x74f"><span>1000</span></td><td id="LC1000" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re2_1b = <span class="code-regexp">/^(.+?)(ed|ing)$/</span>;
</code></td></tr><tr><td id="L1001" class="css-a4x74f"><span>1001</span></td><td id="LC1001" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_1b_2 = <span class="code-regexp">/.$/</span>;
</code></td></tr><tr><td id="L1002" class="css-a4x74f"><span>1002</span></td><td id="LC1002" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re2_1b_2 = <span class="code-regexp">/(at|bl|iz)$/</span>;
</code></td></tr><tr><td id="L1003" class="css-a4x74f"><span>1003</span></td><td id="LC1003" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re3_1b_2 = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(<span class="code-string">"([^aeiouylsz])\\1$"</span>);
</code></td></tr><tr><td id="L1004" class="css-a4x74f"><span>1004</span></td><td id="LC1004" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re4_1b_2 = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(<span class="code-string">"^"</span> + C + v + <span class="code-string">"[^aeiouwxy]$"</span>);
</code></td></tr><tr><td id="L1005" class="css-a4x74f"><span>1005</span></td><td id="LC1005" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1006" class="css-a4x74f"><span>1006</span></td><td id="LC1006" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_1c = <span class="code-regexp">/^(.+?[^aeiou])y$/</span>;
</code></td></tr><tr><td id="L1007" class="css-a4x74f"><span>1007</span></td><td id="LC1007" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_2 = <span class="code-regexp">/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/</span>;
</code></td></tr><tr><td id="L1008" class="css-a4x74f"><span>1008</span></td><td id="LC1008" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1009" class="css-a4x74f"><span>1009</span></td><td id="LC1009" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_3 = <span class="code-regexp">/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/</span>;
</code></td></tr><tr><td id="L1010" class="css-a4x74f"><span>1010</span></td><td id="LC1010" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1011" class="css-a4x74f"><span>1011</span></td><td id="LC1011" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_4 = <span class="code-regexp">/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/</span>;
</code></td></tr><tr><td id="L1012" class="css-a4x74f"><span>1012</span></td><td id="LC1012" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re2_4 = <span class="code-regexp">/^(.+?)(s|t)(ion)$/</span>;
</code></td></tr><tr><td id="L1013" class="css-a4x74f"><span>1013</span></td><td id="LC1013" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1014" class="css-a4x74f"><span>1014</span></td><td id="LC1014" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_5 = <span class="code-regexp">/^(.+?)e$/</span>;
</code></td></tr><tr><td id="L1015" class="css-a4x74f"><span>1015</span></td><td id="LC1015" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re_5_1 = <span class="code-regexp">/ll$/</span>;
</code></td></tr><tr><td id="L1016" class="css-a4x74f"><span>1016</span></td><td id="LC1016" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> re3_5 = <span class="code-keyword">new</span> <span class="code-built_in">RegExp</span>(<span class="code-string">"^"</span> + C + v + <span class="code-string">"[^aeiouwxy]$"</span>);
</code></td></tr><tr><td id="L1017" class="css-a4x74f"><span>1017</span></td><td id="LC1017" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1018" class="css-a4x74f"><span>1018</span></td><td id="LC1018" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> porterStemmer = <span class="code-function"><span class="code-keyword">function</span> <span class="code-title">porterStemmer</span>(<span class="code-params">w</span>) </span>{
</code></td></tr><tr><td id="L1019" class="css-a4x74f"><span>1019</span></td><td id="LC1019" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> stem,
</code></td></tr><tr><td id="L1020" class="css-a4x74f"><span>1020</span></td><td id="LC1020" class="css-1dcdqdg"><code>      suffix,
</code></td></tr><tr><td id="L1021" class="css-a4x74f"><span>1021</span></td><td id="LC1021" class="css-1dcdqdg"><code>      firstch,
</code></td></tr><tr><td id="L1022" class="css-a4x74f"><span>1022</span></td><td id="LC1022" class="css-1dcdqdg"><code>      re,
</code></td></tr><tr><td id="L1023" class="css-a4x74f"><span>1023</span></td><td id="LC1023" class="css-1dcdqdg"><code>      re2,
</code></td></tr><tr><td id="L1024" class="css-a4x74f"><span>1024</span></td><td id="LC1024" class="css-1dcdqdg"><code>      re3,
</code></td></tr><tr><td id="L1025" class="css-a4x74f"><span>1025</span></td><td id="LC1025" class="css-1dcdqdg"><code>      re4;
</code></td></tr><tr><td id="L1026" class="css-a4x74f"><span>1026</span></td><td id="LC1026" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1027" class="css-a4x74f"><span>1027</span></td><td id="LC1027" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (w.length &lt; <span class="code-number">3</span>) { <span class="code-keyword">return</span> w; }
</code></td></tr><tr><td id="L1028" class="css-a4x74f"><span>1028</span></td><td id="LC1028" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1029" class="css-a4x74f"><span>1029</span></td><td id="LC1029" class="css-1dcdqdg"><code>    firstch = w.substr(<span class="code-number">0</span>,<span class="code-number">1</span>);
</code></td></tr><tr><td id="L1030" class="css-a4x74f"><span>1030</span></td><td id="LC1030" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (firstch == <span class="code-string">"y"</span>) {
</code></td></tr><tr><td id="L1031" class="css-a4x74f"><span>1031</span></td><td id="LC1031" class="css-1dcdqdg"><code>      w = firstch.toUpperCase() + w.substr(<span class="code-number">1</span>);
</code></td></tr><tr><td id="L1032" class="css-a4x74f"><span>1032</span></td><td id="LC1032" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1033" class="css-a4x74f"><span>1033</span></td><td id="LC1033" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1034" class="css-a4x74f"><span>1034</span></td><td id="LC1034" class="css-1dcdqdg"><code>    <span class="code-comment">// Step 1a</span>
</code></td></tr><tr><td id="L1035" class="css-a4x74f"><span>1035</span></td><td id="LC1035" class="css-1dcdqdg"><code>    re = re_1a
</code></td></tr><tr><td id="L1036" class="css-a4x74f"><span>1036</span></td><td id="LC1036" class="css-1dcdqdg"><code>    re2 = re2_1a;
</code></td></tr><tr><td id="L1037" class="css-a4x74f"><span>1037</span></td><td id="LC1037" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1038" class="css-a4x74f"><span>1038</span></td><td id="LC1038" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w)) { w = w.replace(re,<span class="code-string">"$1$2"</span>); }
</code></td></tr><tr><td id="L1039" class="css-a4x74f"><span>1039</span></td><td id="LC1039" class="css-1dcdqdg"><code>    <span class="code-keyword">else</span> <span class="code-keyword">if</span> (re2.test(w)) { w = w.replace(re2,<span class="code-string">"$1$2"</span>); }
</code></td></tr><tr><td id="L1040" class="css-a4x74f"><span>1040</span></td><td id="LC1040" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1041" class="css-a4x74f"><span>1041</span></td><td id="LC1041" class="css-1dcdqdg"><code>    <span class="code-comment">// Step 1b</span>
</code></td></tr><tr><td id="L1042" class="css-a4x74f"><span>1042</span></td><td id="LC1042" class="css-1dcdqdg"><code>    re = re_1b;
</code></td></tr><tr><td id="L1043" class="css-a4x74f"><span>1043</span></td><td id="LC1043" class="css-1dcdqdg"><code>    re2 = re2_1b;
</code></td></tr><tr><td id="L1044" class="css-a4x74f"><span>1044</span></td><td id="LC1044" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w)) {
</code></td></tr><tr><td id="L1045" class="css-a4x74f"><span>1045</span></td><td id="LC1045" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re.exec(w);
</code></td></tr><tr><td id="L1046" class="css-a4x74f"><span>1046</span></td><td id="LC1046" class="css-1dcdqdg"><code>      re = re_mgr0;
</code></td></tr><tr><td id="L1047" class="css-a4x74f"><span>1047</span></td><td id="LC1047" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (re.test(fp[<span class="code-number">1</span>])) {
</code></td></tr><tr><td id="L1048" class="css-a4x74f"><span>1048</span></td><td id="LC1048" class="css-1dcdqdg"><code>        re = re_1b_2;
</code></td></tr><tr><td id="L1049" class="css-a4x74f"><span>1049</span></td><td id="LC1049" class="css-1dcdqdg"><code>        w = w.replace(re,<span class="code-string">""</span>);
</code></td></tr><tr><td id="L1050" class="css-a4x74f"><span>1050</span></td><td id="LC1050" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1051" class="css-a4x74f"><span>1051</span></td><td id="LC1051" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> <span class="code-keyword">if</span> (re2.test(w)) {
</code></td></tr><tr><td id="L1052" class="css-a4x74f"><span>1052</span></td><td id="LC1052" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re2.exec(w);
</code></td></tr><tr><td id="L1053" class="css-a4x74f"><span>1053</span></td><td id="LC1053" class="css-1dcdqdg"><code>      stem = fp[<span class="code-number">1</span>];
</code></td></tr><tr><td id="L1054" class="css-a4x74f"><span>1054</span></td><td id="LC1054" class="css-1dcdqdg"><code>      re2 = re_s_v;
</code></td></tr><tr><td id="L1055" class="css-a4x74f"><span>1055</span></td><td id="LC1055" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (re2.test(stem)) {
</code></td></tr><tr><td id="L1056" class="css-a4x74f"><span>1056</span></td><td id="LC1056" class="css-1dcdqdg"><code>        w = stem;
</code></td></tr><tr><td id="L1057" class="css-a4x74f"><span>1057</span></td><td id="LC1057" class="css-1dcdqdg"><code>        re2 = re2_1b_2;
</code></td></tr><tr><td id="L1058" class="css-a4x74f"><span>1058</span></td><td id="LC1058" class="css-1dcdqdg"><code>        re3 = re3_1b_2;
</code></td></tr><tr><td id="L1059" class="css-a4x74f"><span>1059</span></td><td id="LC1059" class="css-1dcdqdg"><code>        re4 = re4_1b_2;
</code></td></tr><tr><td id="L1060" class="css-a4x74f"><span>1060</span></td><td id="LC1060" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (re2.test(w)) { w = w + <span class="code-string">"e"</span>; }
</code></td></tr><tr><td id="L1061" class="css-a4x74f"><span>1061</span></td><td id="LC1061" class="css-1dcdqdg"><code>        <span class="code-keyword">else</span> <span class="code-keyword">if</span> (re3.test(w)) { re = re_1b_2; w = w.replace(re,<span class="code-string">""</span>); }
</code></td></tr><tr><td id="L1062" class="css-a4x74f"><span>1062</span></td><td id="LC1062" class="css-1dcdqdg"><code>        <span class="code-keyword">else</span> <span class="code-keyword">if</span> (re4.test(w)) { w = w + <span class="code-string">"e"</span>; }
</code></td></tr><tr><td id="L1063" class="css-a4x74f"><span>1063</span></td><td id="LC1063" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1064" class="css-a4x74f"><span>1064</span></td><td id="LC1064" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1065" class="css-a4x74f"><span>1065</span></td><td id="LC1065" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1066" class="css-a4x74f"><span>1066</span></td><td id="LC1066" class="css-1dcdqdg"><code>    <span class="code-comment">// Step 1c - replace suffix y or Y by i if preceded by a non-vowel which is not the first letter of the word (so cry -&gt; cri, by -&gt; by, say -&gt; say)</span>
</code></td></tr><tr><td id="L1067" class="css-a4x74f"><span>1067</span></td><td id="LC1067" class="css-1dcdqdg"><code>    re = re_1c;
</code></td></tr><tr><td id="L1068" class="css-a4x74f"><span>1068</span></td><td id="LC1068" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w)) {
</code></td></tr><tr><td id="L1069" class="css-a4x74f"><span>1069</span></td><td id="LC1069" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re.exec(w);
</code></td></tr><tr><td id="L1070" class="css-a4x74f"><span>1070</span></td><td id="LC1070" class="css-1dcdqdg"><code>      stem = fp[<span class="code-number">1</span>];
</code></td></tr><tr><td id="L1071" class="css-a4x74f"><span>1071</span></td><td id="LC1071" class="css-1dcdqdg"><code>      w = stem + <span class="code-string">"i"</span>;
</code></td></tr><tr><td id="L1072" class="css-a4x74f"><span>1072</span></td><td id="LC1072" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1073" class="css-a4x74f"><span>1073</span></td><td id="LC1073" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1074" class="css-a4x74f"><span>1074</span></td><td id="LC1074" class="css-1dcdqdg"><code>    <span class="code-comment">// Step 2</span>
</code></td></tr><tr><td id="L1075" class="css-a4x74f"><span>1075</span></td><td id="LC1075" class="css-1dcdqdg"><code>    re = re_2;
</code></td></tr><tr><td id="L1076" class="css-a4x74f"><span>1076</span></td><td id="LC1076" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w)) {
</code></td></tr><tr><td id="L1077" class="css-a4x74f"><span>1077</span></td><td id="LC1077" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re.exec(w);
</code></td></tr><tr><td id="L1078" class="css-a4x74f"><span>1078</span></td><td id="LC1078" class="css-1dcdqdg"><code>      stem = fp[<span class="code-number">1</span>];
</code></td></tr><tr><td id="L1079" class="css-a4x74f"><span>1079</span></td><td id="LC1079" class="css-1dcdqdg"><code>      suffix = fp[<span class="code-number">2</span>];
</code></td></tr><tr><td id="L1080" class="css-a4x74f"><span>1080</span></td><td id="LC1080" class="css-1dcdqdg"><code>      re = re_mgr0;
</code></td></tr><tr><td id="L1081" class="css-a4x74f"><span>1081</span></td><td id="LC1081" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (re.test(stem)) {
</code></td></tr><tr><td id="L1082" class="css-a4x74f"><span>1082</span></td><td id="LC1082" class="css-1dcdqdg"><code>        w = stem + step2list[suffix];
</code></td></tr><tr><td id="L1083" class="css-a4x74f"><span>1083</span></td><td id="LC1083" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1084" class="css-a4x74f"><span>1084</span></td><td id="LC1084" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1085" class="css-a4x74f"><span>1085</span></td><td id="LC1085" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1086" class="css-a4x74f"><span>1086</span></td><td id="LC1086" class="css-1dcdqdg"><code>    <span class="code-comment">// Step 3</span>
</code></td></tr><tr><td id="L1087" class="css-a4x74f"><span>1087</span></td><td id="LC1087" class="css-1dcdqdg"><code>    re = re_3;
</code></td></tr><tr><td id="L1088" class="css-a4x74f"><span>1088</span></td><td id="LC1088" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w)) {
</code></td></tr><tr><td id="L1089" class="css-a4x74f"><span>1089</span></td><td id="LC1089" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re.exec(w);
</code></td></tr><tr><td id="L1090" class="css-a4x74f"><span>1090</span></td><td id="LC1090" class="css-1dcdqdg"><code>      stem = fp[<span class="code-number">1</span>];
</code></td></tr><tr><td id="L1091" class="css-a4x74f"><span>1091</span></td><td id="LC1091" class="css-1dcdqdg"><code>      suffix = fp[<span class="code-number">2</span>];
</code></td></tr><tr><td id="L1092" class="css-a4x74f"><span>1092</span></td><td id="LC1092" class="css-1dcdqdg"><code>      re = re_mgr0;
</code></td></tr><tr><td id="L1093" class="css-a4x74f"><span>1093</span></td><td id="LC1093" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (re.test(stem)) {
</code></td></tr><tr><td id="L1094" class="css-a4x74f"><span>1094</span></td><td id="LC1094" class="css-1dcdqdg"><code>        w = stem + step3list[suffix];
</code></td></tr><tr><td id="L1095" class="css-a4x74f"><span>1095</span></td><td id="LC1095" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1096" class="css-a4x74f"><span>1096</span></td><td id="LC1096" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1097" class="css-a4x74f"><span>1097</span></td><td id="LC1097" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1098" class="css-a4x74f"><span>1098</span></td><td id="LC1098" class="css-1dcdqdg"><code>    <span class="code-comment">// Step 4</span>
</code></td></tr><tr><td id="L1099" class="css-a4x74f"><span>1099</span></td><td id="LC1099" class="css-1dcdqdg"><code>    re = re_4;
</code></td></tr><tr><td id="L1100" class="css-a4x74f"><span>1100</span></td><td id="LC1100" class="css-1dcdqdg"><code>    re2 = re2_4;
</code></td></tr><tr><td id="L1101" class="css-a4x74f"><span>1101</span></td><td id="LC1101" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w)) {
</code></td></tr><tr><td id="L1102" class="css-a4x74f"><span>1102</span></td><td id="LC1102" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re.exec(w);
</code></td></tr><tr><td id="L1103" class="css-a4x74f"><span>1103</span></td><td id="LC1103" class="css-1dcdqdg"><code>      stem = fp[<span class="code-number">1</span>];
</code></td></tr><tr><td id="L1104" class="css-a4x74f"><span>1104</span></td><td id="LC1104" class="css-1dcdqdg"><code>      re = re_mgr1;
</code></td></tr><tr><td id="L1105" class="css-a4x74f"><span>1105</span></td><td id="LC1105" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (re.test(stem)) {
</code></td></tr><tr><td id="L1106" class="css-a4x74f"><span>1106</span></td><td id="LC1106" class="css-1dcdqdg"><code>        w = stem;
</code></td></tr><tr><td id="L1107" class="css-a4x74f"><span>1107</span></td><td id="LC1107" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1108" class="css-a4x74f"><span>1108</span></td><td id="LC1108" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> <span class="code-keyword">if</span> (re2.test(w)) {
</code></td></tr><tr><td id="L1109" class="css-a4x74f"><span>1109</span></td><td id="LC1109" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re2.exec(w);
</code></td></tr><tr><td id="L1110" class="css-a4x74f"><span>1110</span></td><td id="LC1110" class="css-1dcdqdg"><code>      stem = fp[<span class="code-number">1</span>] + fp[<span class="code-number">2</span>];
</code></td></tr><tr><td id="L1111" class="css-a4x74f"><span>1111</span></td><td id="LC1111" class="css-1dcdqdg"><code>      re2 = re_mgr1;
</code></td></tr><tr><td id="L1112" class="css-a4x74f"><span>1112</span></td><td id="LC1112" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (re2.test(stem)) {
</code></td></tr><tr><td id="L1113" class="css-a4x74f"><span>1113</span></td><td id="LC1113" class="css-1dcdqdg"><code>        w = stem;
</code></td></tr><tr><td id="L1114" class="css-a4x74f"><span>1114</span></td><td id="LC1114" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1115" class="css-a4x74f"><span>1115</span></td><td id="LC1115" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1116" class="css-a4x74f"><span>1116</span></td><td id="LC1116" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1117" class="css-a4x74f"><span>1117</span></td><td id="LC1117" class="css-1dcdqdg"><code>    <span class="code-comment">// Step 5</span>
</code></td></tr><tr><td id="L1118" class="css-a4x74f"><span>1118</span></td><td id="LC1118" class="css-1dcdqdg"><code>    re = re_5;
</code></td></tr><tr><td id="L1119" class="css-a4x74f"><span>1119</span></td><td id="LC1119" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w)) {
</code></td></tr><tr><td id="L1120" class="css-a4x74f"><span>1120</span></td><td id="LC1120" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fp = re.exec(w);
</code></td></tr><tr><td id="L1121" class="css-a4x74f"><span>1121</span></td><td id="LC1121" class="css-1dcdqdg"><code>      stem = fp[<span class="code-number">1</span>];
</code></td></tr><tr><td id="L1122" class="css-a4x74f"><span>1122</span></td><td id="LC1122" class="css-1dcdqdg"><code>      re = re_mgr1;
</code></td></tr><tr><td id="L1123" class="css-a4x74f"><span>1123</span></td><td id="LC1123" class="css-1dcdqdg"><code>      re2 = re_meq1;
</code></td></tr><tr><td id="L1124" class="css-a4x74f"><span>1124</span></td><td id="LC1124" class="css-1dcdqdg"><code>      re3 = re3_5;
</code></td></tr><tr><td id="L1125" class="css-a4x74f"><span>1125</span></td><td id="LC1125" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (re.test(stem) || (re2.test(stem) &amp;&amp; !(re3.test(stem)))) {
</code></td></tr><tr><td id="L1126" class="css-a4x74f"><span>1126</span></td><td id="LC1126" class="css-1dcdqdg"><code>        w = stem;
</code></td></tr><tr><td id="L1127" class="css-a4x74f"><span>1127</span></td><td id="LC1127" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1128" class="css-a4x74f"><span>1128</span></td><td id="LC1128" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1129" class="css-a4x74f"><span>1129</span></td><td id="LC1129" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1130" class="css-a4x74f"><span>1130</span></td><td id="LC1130" class="css-1dcdqdg"><code>    re = re_5_1;
</code></td></tr><tr><td id="L1131" class="css-a4x74f"><span>1131</span></td><td id="LC1131" class="css-1dcdqdg"><code>    re2 = re_mgr1;
</code></td></tr><tr><td id="L1132" class="css-a4x74f"><span>1132</span></td><td id="LC1132" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (re.test(w) &amp;&amp; re2.test(w)) {
</code></td></tr><tr><td id="L1133" class="css-a4x74f"><span>1133</span></td><td id="LC1133" class="css-1dcdqdg"><code>      re = re_1b_2;
</code></td></tr><tr><td id="L1134" class="css-a4x74f"><span>1134</span></td><td id="LC1134" class="css-1dcdqdg"><code>      w = w.replace(re,<span class="code-string">""</span>);
</code></td></tr><tr><td id="L1135" class="css-a4x74f"><span>1135</span></td><td id="LC1135" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1136" class="css-a4x74f"><span>1136</span></td><td id="LC1136" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1137" class="css-a4x74f"><span>1137</span></td><td id="LC1137" class="css-1dcdqdg"><code>    <span class="code-comment">// and turn initial Y back to y</span>
</code></td></tr><tr><td id="L1138" class="css-a4x74f"><span>1138</span></td><td id="LC1138" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1139" class="css-a4x74f"><span>1139</span></td><td id="LC1139" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (firstch == <span class="code-string">"y"</span>) {
</code></td></tr><tr><td id="L1140" class="css-a4x74f"><span>1140</span></td><td id="LC1140" class="css-1dcdqdg"><code>      w = firstch.toLowerCase() + w.substr(<span class="code-number">1</span>);
</code></td></tr><tr><td id="L1141" class="css-a4x74f"><span>1141</span></td><td id="LC1141" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1142" class="css-a4x74f"><span>1142</span></td><td id="LC1142" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1143" class="css-a4x74f"><span>1143</span></td><td id="LC1143" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> w;
</code></td></tr><tr><td id="L1144" class="css-a4x74f"><span>1144</span></td><td id="LC1144" class="css-1dcdqdg"><code>  };
</code></td></tr><tr><td id="L1145" class="css-a4x74f"><span>1145</span></td><td id="LC1145" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1146" class="css-a4x74f"><span>1146</span></td><td id="LC1146" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">token</span>) </span>{
</code></td></tr><tr><td id="L1147" class="css-a4x74f"><span>1147</span></td><td id="LC1147" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> token.update(porterStemmer);
</code></td></tr><tr><td id="L1148" class="css-a4x74f"><span>1148</span></td><td id="LC1148" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1149" class="css-a4x74f"><span>1149</span></td><td id="LC1149" class="css-1dcdqdg"><code>})();
</code></td></tr><tr><td id="L1150" class="css-a4x74f"><span>1150</span></td><td id="LC1150" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1151" class="css-a4x74f"><span>1151</span></td><td id="LC1151" class="css-1dcdqdg"><code>lunr.Pipeline.registerFunction(lunr.stemmer, <span class="code-string">'stemmer'</span>)
</code></td></tr><tr><td id="L1152" class="css-a4x74f"><span>1152</span></td><td id="LC1152" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L1153" class="css-a4x74f"><span>1153</span></td><td id="LC1153" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.stopWordFilter
</span></code></td></tr><tr><td id="L1154" class="css-a4x74f"><span>1154</span></td><td id="LC1154" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L1155" class="css-a4x74f"><span>1155</span></td><td id="LC1155" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1156" class="css-a4x74f"><span>1156</span></td><td id="LC1156" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1157" class="css-a4x74f"><span>1157</span></td><td id="LC1157" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1158" class="css-a4x74f"><span>1158</span></td><td id="LC1158" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.generateStopWordFilter builds a stopWordFilter function from the provided
</span></code></td></tr><tr><td id="L1159" class="css-a4x74f"><span>1159</span></td><td id="LC1159" class="css-1dcdqdg"><code><span class="code-comment"> * list of stop words.
</span></code></td></tr><tr><td id="L1160" class="css-a4x74f"><span>1160</span></td><td id="LC1160" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1161" class="css-a4x74f"><span>1161</span></td><td id="LC1161" class="css-1dcdqdg"><code><span class="code-comment"> * The built in lunr.stopWordFilter is built using this generator and can be used
</span></code></td></tr><tr><td id="L1162" class="css-a4x74f"><span>1162</span></td><td id="LC1162" class="css-1dcdqdg"><code><span class="code-comment"> * to generate custom stopWordFilters for applications or non English languages.
</span></code></td></tr><tr><td id="L1163" class="css-a4x74f"><span>1163</span></td><td id="LC1163" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1164" class="css-a4x74f"><span>1164</span></td><td id="LC1164" class="css-1dcdqdg"><code><span class="code-comment"> * @function
</span></code></td></tr><tr><td id="L1165" class="css-a4x74f"><span>1165</span></td><td id="LC1165" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Array} token The token to pass through the filter
</span></code></td></tr><tr><td id="L1166" class="css-a4x74f"><span>1166</span></td><td id="LC1166" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.PipelineFunction}
</span></code></td></tr><tr><td id="L1167" class="css-a4x74f"><span>1167</span></td><td id="LC1167" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Pipeline
</span></code></td></tr><tr><td id="L1168" class="css-a4x74f"><span>1168</span></td><td id="LC1168" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.stopWordFilter
</span></code></td></tr><tr><td id="L1169" class="css-a4x74f"><span>1169</span></td><td id="LC1169" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1170" class="css-a4x74f"><span>1170</span></td><td id="LC1170" class="css-1dcdqdg"><code>lunr.generateStopWordFilter = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">stopWords</span>) </span>{
</code></td></tr><tr><td id="L1171" class="css-a4x74f"><span>1171</span></td><td id="LC1171" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> words = stopWords.reduce(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">memo, stopWord</span>) </span>{
</code></td></tr><tr><td id="L1172" class="css-a4x74f"><span>1172</span></td><td id="LC1172" class="css-1dcdqdg"><code>    memo[stopWord] = stopWord
</code></td></tr><tr><td id="L1173" class="css-a4x74f"><span>1173</span></td><td id="LC1173" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> memo
</code></td></tr><tr><td id="L1174" class="css-a4x74f"><span>1174</span></td><td id="LC1174" class="css-1dcdqdg"><code>  }, {})
</code></td></tr><tr><td id="L1175" class="css-a4x74f"><span>1175</span></td><td id="LC1175" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1176" class="css-a4x74f"><span>1176</span></td><td id="LC1176" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">token</span>) </span>{
</code></td></tr><tr><td id="L1177" class="css-a4x74f"><span>1177</span></td><td id="LC1177" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (token &amp;&amp; words[token.toString()] !== token.toString()) <span class="code-keyword">return</span> token
</code></td></tr><tr><td id="L1178" class="css-a4x74f"><span>1178</span></td><td id="LC1178" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1179" class="css-a4x74f"><span>1179</span></td><td id="LC1179" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1180" class="css-a4x74f"><span>1180</span></td><td id="LC1180" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1181" class="css-a4x74f"><span>1181</span></td><td id="LC1181" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1182" class="css-a4x74f"><span>1182</span></td><td id="LC1182" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.stopWordFilter is an English language stop word list filter, any words
</span></code></td></tr><tr><td id="L1183" class="css-a4x74f"><span>1183</span></td><td id="LC1183" class="css-1dcdqdg"><code><span class="code-comment"> * contained in the list will not be passed through the filter.
</span></code></td></tr><tr><td id="L1184" class="css-a4x74f"><span>1184</span></td><td id="LC1184" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1185" class="css-a4x74f"><span>1185</span></td><td id="LC1185" class="css-1dcdqdg"><code><span class="code-comment"> * This is intended to be used in the Pipeline. If the token does not pass the
</span></code></td></tr><tr><td id="L1186" class="css-a4x74f"><span>1186</span></td><td id="LC1186" class="css-1dcdqdg"><code><span class="code-comment"> * filter then undefined will be returned.
</span></code></td></tr><tr><td id="L1187" class="css-a4x74f"><span>1187</span></td><td id="LC1187" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1188" class="css-a4x74f"><span>1188</span></td><td id="LC1188" class="css-1dcdqdg"><code><span class="code-comment"> * @function
</span></code></td></tr><tr><td id="L1189" class="css-a4x74f"><span>1189</span></td><td id="LC1189" class="css-1dcdqdg"><code><span class="code-comment"> * @implements {lunr.PipelineFunction}
</span></code></td></tr><tr><td id="L1190" class="css-a4x74f"><span>1190</span></td><td id="LC1190" class="css-1dcdqdg"><code><span class="code-comment"> * @params {lunr.Token} token - A token to check for being a stop word.
</span></code></td></tr><tr><td id="L1191" class="css-a4x74f"><span>1191</span></td><td id="LC1191" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Token}
</span></code></td></tr><tr><td id="L1192" class="css-a4x74f"><span>1192</span></td><td id="LC1192" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.Pipeline}
</span></code></td></tr><tr><td id="L1193" class="css-a4x74f"><span>1193</span></td><td id="LC1193" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1194" class="css-a4x74f"><span>1194</span></td><td id="LC1194" class="css-1dcdqdg"><code>lunr.stopWordFilter = lunr.generateStopWordFilter([
</code></td></tr><tr><td id="L1195" class="css-a4x74f"><span>1195</span></td><td id="LC1195" class="css-1dcdqdg"><code>  <span class="code-string">'a'</span>,
</code></td></tr><tr><td id="L1196" class="css-a4x74f"><span>1196</span></td><td id="LC1196" class="css-1dcdqdg"><code>  <span class="code-string">'able'</span>,
</code></td></tr><tr><td id="L1197" class="css-a4x74f"><span>1197</span></td><td id="LC1197" class="css-1dcdqdg"><code>  <span class="code-string">'about'</span>,
</code></td></tr><tr><td id="L1198" class="css-a4x74f"><span>1198</span></td><td id="LC1198" class="css-1dcdqdg"><code>  <span class="code-string">'across'</span>,
</code></td></tr><tr><td id="L1199" class="css-a4x74f"><span>1199</span></td><td id="LC1199" class="css-1dcdqdg"><code>  <span class="code-string">'after'</span>,
</code></td></tr><tr><td id="L1200" class="css-a4x74f"><span>1200</span></td><td id="LC1200" class="css-1dcdqdg"><code>  <span class="code-string">'all'</span>,
</code></td></tr><tr><td id="L1201" class="css-a4x74f"><span>1201</span></td><td id="LC1201" class="css-1dcdqdg"><code>  <span class="code-string">'almost'</span>,
</code></td></tr><tr><td id="L1202" class="css-a4x74f"><span>1202</span></td><td id="LC1202" class="css-1dcdqdg"><code>  <span class="code-string">'also'</span>,
</code></td></tr><tr><td id="L1203" class="css-a4x74f"><span>1203</span></td><td id="LC1203" class="css-1dcdqdg"><code>  <span class="code-string">'am'</span>,
</code></td></tr><tr><td id="L1204" class="css-a4x74f"><span>1204</span></td><td id="LC1204" class="css-1dcdqdg"><code>  <span class="code-string">'among'</span>,
</code></td></tr><tr><td id="L1205" class="css-a4x74f"><span>1205</span></td><td id="LC1205" class="css-1dcdqdg"><code>  <span class="code-string">'an'</span>,
</code></td></tr><tr><td id="L1206" class="css-a4x74f"><span>1206</span></td><td id="LC1206" class="css-1dcdqdg"><code>  <span class="code-string">'and'</span>,
</code></td></tr><tr><td id="L1207" class="css-a4x74f"><span>1207</span></td><td id="LC1207" class="css-1dcdqdg"><code>  <span class="code-string">'any'</span>,
</code></td></tr><tr><td id="L1208" class="css-a4x74f"><span>1208</span></td><td id="LC1208" class="css-1dcdqdg"><code>  <span class="code-string">'are'</span>,
</code></td></tr><tr><td id="L1209" class="css-a4x74f"><span>1209</span></td><td id="LC1209" class="css-1dcdqdg"><code>  <span class="code-string">'as'</span>,
</code></td></tr><tr><td id="L1210" class="css-a4x74f"><span>1210</span></td><td id="LC1210" class="css-1dcdqdg"><code>  <span class="code-string">'at'</span>,
</code></td></tr><tr><td id="L1211" class="css-a4x74f"><span>1211</span></td><td id="LC1211" class="css-1dcdqdg"><code>  <span class="code-string">'be'</span>,
</code></td></tr><tr><td id="L1212" class="css-a4x74f"><span>1212</span></td><td id="LC1212" class="css-1dcdqdg"><code>  <span class="code-string">'because'</span>,
</code></td></tr><tr><td id="L1213" class="css-a4x74f"><span>1213</span></td><td id="LC1213" class="css-1dcdqdg"><code>  <span class="code-string">'been'</span>,
</code></td></tr><tr><td id="L1214" class="css-a4x74f"><span>1214</span></td><td id="LC1214" class="css-1dcdqdg"><code>  <span class="code-string">'but'</span>,
</code></td></tr><tr><td id="L1215" class="css-a4x74f"><span>1215</span></td><td id="LC1215" class="css-1dcdqdg"><code>  <span class="code-string">'by'</span>,
</code></td></tr><tr><td id="L1216" class="css-a4x74f"><span>1216</span></td><td id="LC1216" class="css-1dcdqdg"><code>  <span class="code-string">'can'</span>,
</code></td></tr><tr><td id="L1217" class="css-a4x74f"><span>1217</span></td><td id="LC1217" class="css-1dcdqdg"><code>  <span class="code-string">'cannot'</span>,
</code></td></tr><tr><td id="L1218" class="css-a4x74f"><span>1218</span></td><td id="LC1218" class="css-1dcdqdg"><code>  <span class="code-string">'could'</span>,
</code></td></tr><tr><td id="L1219" class="css-a4x74f"><span>1219</span></td><td id="LC1219" class="css-1dcdqdg"><code>  <span class="code-string">'dear'</span>,
</code></td></tr><tr><td id="L1220" class="css-a4x74f"><span>1220</span></td><td id="LC1220" class="css-1dcdqdg"><code>  <span class="code-string">'did'</span>,
</code></td></tr><tr><td id="L1221" class="css-a4x74f"><span>1221</span></td><td id="LC1221" class="css-1dcdqdg"><code>  <span class="code-string">'do'</span>,
</code></td></tr><tr><td id="L1222" class="css-a4x74f"><span>1222</span></td><td id="LC1222" class="css-1dcdqdg"><code>  <span class="code-string">'does'</span>,
</code></td></tr><tr><td id="L1223" class="css-a4x74f"><span>1223</span></td><td id="LC1223" class="css-1dcdqdg"><code>  <span class="code-string">'either'</span>,
</code></td></tr><tr><td id="L1224" class="css-a4x74f"><span>1224</span></td><td id="LC1224" class="css-1dcdqdg"><code>  <span class="code-string">'else'</span>,
</code></td></tr><tr><td id="L1225" class="css-a4x74f"><span>1225</span></td><td id="LC1225" class="css-1dcdqdg"><code>  <span class="code-string">'ever'</span>,
</code></td></tr><tr><td id="L1226" class="css-a4x74f"><span>1226</span></td><td id="LC1226" class="css-1dcdqdg"><code>  <span class="code-string">'every'</span>,
</code></td></tr><tr><td id="L1227" class="css-a4x74f"><span>1227</span></td><td id="LC1227" class="css-1dcdqdg"><code>  <span class="code-string">'for'</span>,
</code></td></tr><tr><td id="L1228" class="css-a4x74f"><span>1228</span></td><td id="LC1228" class="css-1dcdqdg"><code>  <span class="code-string">'from'</span>,
</code></td></tr><tr><td id="L1229" class="css-a4x74f"><span>1229</span></td><td id="LC1229" class="css-1dcdqdg"><code>  <span class="code-string">'get'</span>,
</code></td></tr><tr><td id="L1230" class="css-a4x74f"><span>1230</span></td><td id="LC1230" class="css-1dcdqdg"><code>  <span class="code-string">'got'</span>,
</code></td></tr><tr><td id="L1231" class="css-a4x74f"><span>1231</span></td><td id="LC1231" class="css-1dcdqdg"><code>  <span class="code-string">'had'</span>,
</code></td></tr><tr><td id="L1232" class="css-a4x74f"><span>1232</span></td><td id="LC1232" class="css-1dcdqdg"><code>  <span class="code-string">'has'</span>,
</code></td></tr><tr><td id="L1233" class="css-a4x74f"><span>1233</span></td><td id="LC1233" class="css-1dcdqdg"><code>  <span class="code-string">'have'</span>,
</code></td></tr><tr><td id="L1234" class="css-a4x74f"><span>1234</span></td><td id="LC1234" class="css-1dcdqdg"><code>  <span class="code-string">'he'</span>,
</code></td></tr><tr><td id="L1235" class="css-a4x74f"><span>1235</span></td><td id="LC1235" class="css-1dcdqdg"><code>  <span class="code-string">'her'</span>,
</code></td></tr><tr><td id="L1236" class="css-a4x74f"><span>1236</span></td><td id="LC1236" class="css-1dcdqdg"><code>  <span class="code-string">'hers'</span>,
</code></td></tr><tr><td id="L1237" class="css-a4x74f"><span>1237</span></td><td id="LC1237" class="css-1dcdqdg"><code>  <span class="code-string">'him'</span>,
</code></td></tr><tr><td id="L1238" class="css-a4x74f"><span>1238</span></td><td id="LC1238" class="css-1dcdqdg"><code>  <span class="code-string">'his'</span>,
</code></td></tr><tr><td id="L1239" class="css-a4x74f"><span>1239</span></td><td id="LC1239" class="css-1dcdqdg"><code>  <span class="code-string">'how'</span>,
</code></td></tr><tr><td id="L1240" class="css-a4x74f"><span>1240</span></td><td id="LC1240" class="css-1dcdqdg"><code>  <span class="code-string">'however'</span>,
</code></td></tr><tr><td id="L1241" class="css-a4x74f"><span>1241</span></td><td id="LC1241" class="css-1dcdqdg"><code>  <span class="code-string">'i'</span>,
</code></td></tr><tr><td id="L1242" class="css-a4x74f"><span>1242</span></td><td id="LC1242" class="css-1dcdqdg"><code>  <span class="code-string">'if'</span>,
</code></td></tr><tr><td id="L1243" class="css-a4x74f"><span>1243</span></td><td id="LC1243" class="css-1dcdqdg"><code>  <span class="code-string">'in'</span>,
</code></td></tr><tr><td id="L1244" class="css-a4x74f"><span>1244</span></td><td id="LC1244" class="css-1dcdqdg"><code>  <span class="code-string">'into'</span>,
</code></td></tr><tr><td id="L1245" class="css-a4x74f"><span>1245</span></td><td id="LC1245" class="css-1dcdqdg"><code>  <span class="code-string">'is'</span>,
</code></td></tr><tr><td id="L1246" class="css-a4x74f"><span>1246</span></td><td id="LC1246" class="css-1dcdqdg"><code>  <span class="code-string">'it'</span>,
</code></td></tr><tr><td id="L1247" class="css-a4x74f"><span>1247</span></td><td id="LC1247" class="css-1dcdqdg"><code>  <span class="code-string">'its'</span>,
</code></td></tr><tr><td id="L1248" class="css-a4x74f"><span>1248</span></td><td id="LC1248" class="css-1dcdqdg"><code>  <span class="code-string">'just'</span>,
</code></td></tr><tr><td id="L1249" class="css-a4x74f"><span>1249</span></td><td id="LC1249" class="css-1dcdqdg"><code>  <span class="code-string">'least'</span>,
</code></td></tr><tr><td id="L1250" class="css-a4x74f"><span>1250</span></td><td id="LC1250" class="css-1dcdqdg"><code>  <span class="code-string">'let'</span>,
</code></td></tr><tr><td id="L1251" class="css-a4x74f"><span>1251</span></td><td id="LC1251" class="css-1dcdqdg"><code>  <span class="code-string">'like'</span>,
</code></td></tr><tr><td id="L1252" class="css-a4x74f"><span>1252</span></td><td id="LC1252" class="css-1dcdqdg"><code>  <span class="code-string">'likely'</span>,
</code></td></tr><tr><td id="L1253" class="css-a4x74f"><span>1253</span></td><td id="LC1253" class="css-1dcdqdg"><code>  <span class="code-string">'may'</span>,
</code></td></tr><tr><td id="L1254" class="css-a4x74f"><span>1254</span></td><td id="LC1254" class="css-1dcdqdg"><code>  <span class="code-string">'me'</span>,
</code></td></tr><tr><td id="L1255" class="css-a4x74f"><span>1255</span></td><td id="LC1255" class="css-1dcdqdg"><code>  <span class="code-string">'might'</span>,
</code></td></tr><tr><td id="L1256" class="css-a4x74f"><span>1256</span></td><td id="LC1256" class="css-1dcdqdg"><code>  <span class="code-string">'most'</span>,
</code></td></tr><tr><td id="L1257" class="css-a4x74f"><span>1257</span></td><td id="LC1257" class="css-1dcdqdg"><code>  <span class="code-string">'must'</span>,
</code></td></tr><tr><td id="L1258" class="css-a4x74f"><span>1258</span></td><td id="LC1258" class="css-1dcdqdg"><code>  <span class="code-string">'my'</span>,
</code></td></tr><tr><td id="L1259" class="css-a4x74f"><span>1259</span></td><td id="LC1259" class="css-1dcdqdg"><code>  <span class="code-string">'neither'</span>,
</code></td></tr><tr><td id="L1260" class="css-a4x74f"><span>1260</span></td><td id="LC1260" class="css-1dcdqdg"><code>  <span class="code-string">'no'</span>,
</code></td></tr><tr><td id="L1261" class="css-a4x74f"><span>1261</span></td><td id="LC1261" class="css-1dcdqdg"><code>  <span class="code-string">'nor'</span>,
</code></td></tr><tr><td id="L1262" class="css-a4x74f"><span>1262</span></td><td id="LC1262" class="css-1dcdqdg"><code>  <span class="code-string">'not'</span>,
</code></td></tr><tr><td id="L1263" class="css-a4x74f"><span>1263</span></td><td id="LC1263" class="css-1dcdqdg"><code>  <span class="code-string">'of'</span>,
</code></td></tr><tr><td id="L1264" class="css-a4x74f"><span>1264</span></td><td id="LC1264" class="css-1dcdqdg"><code>  <span class="code-string">'off'</span>,
</code></td></tr><tr><td id="L1265" class="css-a4x74f"><span>1265</span></td><td id="LC1265" class="css-1dcdqdg"><code>  <span class="code-string">'often'</span>,
</code></td></tr><tr><td id="L1266" class="css-a4x74f"><span>1266</span></td><td id="LC1266" class="css-1dcdqdg"><code>  <span class="code-string">'on'</span>,
</code></td></tr><tr><td id="L1267" class="css-a4x74f"><span>1267</span></td><td id="LC1267" class="css-1dcdqdg"><code>  <span class="code-string">'only'</span>,
</code></td></tr><tr><td id="L1268" class="css-a4x74f"><span>1268</span></td><td id="LC1268" class="css-1dcdqdg"><code>  <span class="code-string">'or'</span>,
</code></td></tr><tr><td id="L1269" class="css-a4x74f"><span>1269</span></td><td id="LC1269" class="css-1dcdqdg"><code>  <span class="code-string">'other'</span>,
</code></td></tr><tr><td id="L1270" class="css-a4x74f"><span>1270</span></td><td id="LC1270" class="css-1dcdqdg"><code>  <span class="code-string">'our'</span>,
</code></td></tr><tr><td id="L1271" class="css-a4x74f"><span>1271</span></td><td id="LC1271" class="css-1dcdqdg"><code>  <span class="code-string">'own'</span>,
</code></td></tr><tr><td id="L1272" class="css-a4x74f"><span>1272</span></td><td id="LC1272" class="css-1dcdqdg"><code>  <span class="code-string">'rather'</span>,
</code></td></tr><tr><td id="L1273" class="css-a4x74f"><span>1273</span></td><td id="LC1273" class="css-1dcdqdg"><code>  <span class="code-string">'said'</span>,
</code></td></tr><tr><td id="L1274" class="css-a4x74f"><span>1274</span></td><td id="LC1274" class="css-1dcdqdg"><code>  <span class="code-string">'say'</span>,
</code></td></tr><tr><td id="L1275" class="css-a4x74f"><span>1275</span></td><td id="LC1275" class="css-1dcdqdg"><code>  <span class="code-string">'says'</span>,
</code></td></tr><tr><td id="L1276" class="css-a4x74f"><span>1276</span></td><td id="LC1276" class="css-1dcdqdg"><code>  <span class="code-string">'she'</span>,
</code></td></tr><tr><td id="L1277" class="css-a4x74f"><span>1277</span></td><td id="LC1277" class="css-1dcdqdg"><code>  <span class="code-string">'should'</span>,
</code></td></tr><tr><td id="L1278" class="css-a4x74f"><span>1278</span></td><td id="LC1278" class="css-1dcdqdg"><code>  <span class="code-string">'since'</span>,
</code></td></tr><tr><td id="L1279" class="css-a4x74f"><span>1279</span></td><td id="LC1279" class="css-1dcdqdg"><code>  <span class="code-string">'so'</span>,
</code></td></tr><tr><td id="L1280" class="css-a4x74f"><span>1280</span></td><td id="LC1280" class="css-1dcdqdg"><code>  <span class="code-string">'some'</span>,
</code></td></tr><tr><td id="L1281" class="css-a4x74f"><span>1281</span></td><td id="LC1281" class="css-1dcdqdg"><code>  <span class="code-string">'than'</span>,
</code></td></tr><tr><td id="L1282" class="css-a4x74f"><span>1282</span></td><td id="LC1282" class="css-1dcdqdg"><code>  <span class="code-string">'that'</span>,
</code></td></tr><tr><td id="L1283" class="css-a4x74f"><span>1283</span></td><td id="LC1283" class="css-1dcdqdg"><code>  <span class="code-string">'the'</span>,
</code></td></tr><tr><td id="L1284" class="css-a4x74f"><span>1284</span></td><td id="LC1284" class="css-1dcdqdg"><code>  <span class="code-string">'their'</span>,
</code></td></tr><tr><td id="L1285" class="css-a4x74f"><span>1285</span></td><td id="LC1285" class="css-1dcdqdg"><code>  <span class="code-string">'them'</span>,
</code></td></tr><tr><td id="L1286" class="css-a4x74f"><span>1286</span></td><td id="LC1286" class="css-1dcdqdg"><code>  <span class="code-string">'then'</span>,
</code></td></tr><tr><td id="L1287" class="css-a4x74f"><span>1287</span></td><td id="LC1287" class="css-1dcdqdg"><code>  <span class="code-string">'there'</span>,
</code></td></tr><tr><td id="L1288" class="css-a4x74f"><span>1288</span></td><td id="LC1288" class="css-1dcdqdg"><code>  <span class="code-string">'these'</span>,
</code></td></tr><tr><td id="L1289" class="css-a4x74f"><span>1289</span></td><td id="LC1289" class="css-1dcdqdg"><code>  <span class="code-string">'they'</span>,
</code></td></tr><tr><td id="L1290" class="css-a4x74f"><span>1290</span></td><td id="LC1290" class="css-1dcdqdg"><code>  <span class="code-string">'this'</span>,
</code></td></tr><tr><td id="L1291" class="css-a4x74f"><span>1291</span></td><td id="LC1291" class="css-1dcdqdg"><code>  <span class="code-string">'tis'</span>,
</code></td></tr><tr><td id="L1292" class="css-a4x74f"><span>1292</span></td><td id="LC1292" class="css-1dcdqdg"><code>  <span class="code-string">'to'</span>,
</code></td></tr><tr><td id="L1293" class="css-a4x74f"><span>1293</span></td><td id="LC1293" class="css-1dcdqdg"><code>  <span class="code-string">'too'</span>,
</code></td></tr><tr><td id="L1294" class="css-a4x74f"><span>1294</span></td><td id="LC1294" class="css-1dcdqdg"><code>  <span class="code-string">'twas'</span>,
</code></td></tr><tr><td id="L1295" class="css-a4x74f"><span>1295</span></td><td id="LC1295" class="css-1dcdqdg"><code>  <span class="code-string">'us'</span>,
</code></td></tr><tr><td id="L1296" class="css-a4x74f"><span>1296</span></td><td id="LC1296" class="css-1dcdqdg"><code>  <span class="code-string">'wants'</span>,
</code></td></tr><tr><td id="L1297" class="css-a4x74f"><span>1297</span></td><td id="LC1297" class="css-1dcdqdg"><code>  <span class="code-string">'was'</span>,
</code></td></tr><tr><td id="L1298" class="css-a4x74f"><span>1298</span></td><td id="LC1298" class="css-1dcdqdg"><code>  <span class="code-string">'we'</span>,
</code></td></tr><tr><td id="L1299" class="css-a4x74f"><span>1299</span></td><td id="LC1299" class="css-1dcdqdg"><code>  <span class="code-string">'were'</span>,
</code></td></tr><tr><td id="L1300" class="css-a4x74f"><span>1300</span></td><td id="LC1300" class="css-1dcdqdg"><code>  <span class="code-string">'what'</span>,
</code></td></tr><tr><td id="L1301" class="css-a4x74f"><span>1301</span></td><td id="LC1301" class="css-1dcdqdg"><code>  <span class="code-string">'when'</span>,
</code></td></tr><tr><td id="L1302" class="css-a4x74f"><span>1302</span></td><td id="LC1302" class="css-1dcdqdg"><code>  <span class="code-string">'where'</span>,
</code></td></tr><tr><td id="L1303" class="css-a4x74f"><span>1303</span></td><td id="LC1303" class="css-1dcdqdg"><code>  <span class="code-string">'which'</span>,
</code></td></tr><tr><td id="L1304" class="css-a4x74f"><span>1304</span></td><td id="LC1304" class="css-1dcdqdg"><code>  <span class="code-string">'while'</span>,
</code></td></tr><tr><td id="L1305" class="css-a4x74f"><span>1305</span></td><td id="LC1305" class="css-1dcdqdg"><code>  <span class="code-string">'who'</span>,
</code></td></tr><tr><td id="L1306" class="css-a4x74f"><span>1306</span></td><td id="LC1306" class="css-1dcdqdg"><code>  <span class="code-string">'whom'</span>,
</code></td></tr><tr><td id="L1307" class="css-a4x74f"><span>1307</span></td><td id="LC1307" class="css-1dcdqdg"><code>  <span class="code-string">'why'</span>,
</code></td></tr><tr><td id="L1308" class="css-a4x74f"><span>1308</span></td><td id="LC1308" class="css-1dcdqdg"><code>  <span class="code-string">'will'</span>,
</code></td></tr><tr><td id="L1309" class="css-a4x74f"><span>1309</span></td><td id="LC1309" class="css-1dcdqdg"><code>  <span class="code-string">'with'</span>,
</code></td></tr><tr><td id="L1310" class="css-a4x74f"><span>1310</span></td><td id="LC1310" class="css-1dcdqdg"><code>  <span class="code-string">'would'</span>,
</code></td></tr><tr><td id="L1311" class="css-a4x74f"><span>1311</span></td><td id="LC1311" class="css-1dcdqdg"><code>  <span class="code-string">'yet'</span>,
</code></td></tr><tr><td id="L1312" class="css-a4x74f"><span>1312</span></td><td id="LC1312" class="css-1dcdqdg"><code>  <span class="code-string">'you'</span>,
</code></td></tr><tr><td id="L1313" class="css-a4x74f"><span>1313</span></td><td id="LC1313" class="css-1dcdqdg"><code>  <span class="code-string">'your'</span>
</code></td></tr><tr><td id="L1314" class="css-a4x74f"><span>1314</span></td><td id="LC1314" class="css-1dcdqdg"><code>])
</code></td></tr><tr><td id="L1315" class="css-a4x74f"><span>1315</span></td><td id="LC1315" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1316" class="css-a4x74f"><span>1316</span></td><td id="LC1316" class="css-1dcdqdg"><code>lunr.Pipeline.registerFunction(lunr.stopWordFilter, <span class="code-string">'stopWordFilter'</span>)
</code></td></tr><tr><td id="L1317" class="css-a4x74f"><span>1317</span></td><td id="LC1317" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L1318" class="css-a4x74f"><span>1318</span></td><td id="LC1318" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.trimmer
</span></code></td></tr><tr><td id="L1319" class="css-a4x74f"><span>1319</span></td><td id="LC1319" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L1320" class="css-a4x74f"><span>1320</span></td><td id="LC1320" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1321" class="css-a4x74f"><span>1321</span></td><td id="LC1321" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1322" class="css-a4x74f"><span>1322</span></td><td id="LC1322" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1323" class="css-a4x74f"><span>1323</span></td><td id="LC1323" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.trimmer is a pipeline function for trimming non word
</span></code></td></tr><tr><td id="L1324" class="css-a4x74f"><span>1324</span></td><td id="LC1324" class="css-1dcdqdg"><code><span class="code-comment"> * characters from the beginning and end of tokens before they
</span></code></td></tr><tr><td id="L1325" class="css-a4x74f"><span>1325</span></td><td id="LC1325" class="css-1dcdqdg"><code><span class="code-comment"> * enter the index.
</span></code></td></tr><tr><td id="L1326" class="css-a4x74f"><span>1326</span></td><td id="LC1326" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1327" class="css-a4x74f"><span>1327</span></td><td id="LC1327" class="css-1dcdqdg"><code><span class="code-comment"> * This implementation may not work correctly for non latin
</span></code></td></tr><tr><td id="L1328" class="css-a4x74f"><span>1328</span></td><td id="LC1328" class="css-1dcdqdg"><code><span class="code-comment"> * characters and should either be removed or adapted for use
</span></code></td></tr><tr><td id="L1329" class="css-a4x74f"><span>1329</span></td><td id="LC1329" class="css-1dcdqdg"><code><span class="code-comment"> * with languages with non-latin characters.
</span></code></td></tr><tr><td id="L1330" class="css-a4x74f"><span>1330</span></td><td id="LC1330" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1331" class="css-a4x74f"><span>1331</span></td><td id="LC1331" class="css-1dcdqdg"><code><span class="code-comment"> * @static
</span></code></td></tr><tr><td id="L1332" class="css-a4x74f"><span>1332</span></td><td id="LC1332" class="css-1dcdqdg"><code><span class="code-comment"> * @implements {lunr.PipelineFunction}
</span></code></td></tr><tr><td id="L1333" class="css-a4x74f"><span>1333</span></td><td id="LC1333" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Token} token The token to pass through the filter
</span></code></td></tr><tr><td id="L1334" class="css-a4x74f"><span>1334</span></td><td id="LC1334" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Token}
</span></code></td></tr><tr><td id="L1335" class="css-a4x74f"><span>1335</span></td><td id="LC1335" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Pipeline
</span></code></td></tr><tr><td id="L1336" class="css-a4x74f"><span>1336</span></td><td id="LC1336" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1337" class="css-a4x74f"><span>1337</span></td><td id="LC1337" class="css-1dcdqdg"><code>lunr.trimmer = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">token</span>) </span>{
</code></td></tr><tr><td id="L1338" class="css-a4x74f"><span>1338</span></td><td id="LC1338" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> token.update(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">s</span>) </span>{
</code></td></tr><tr><td id="L1339" class="css-a4x74f"><span>1339</span></td><td id="LC1339" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> s.replace(<span class="code-regexp">/^\W+/</span>, <span class="code-string">''</span>).replace(<span class="code-regexp">/\W+$/</span>, <span class="code-string">''</span>)
</code></td></tr><tr><td id="L1340" class="css-a4x74f"><span>1340</span></td><td id="LC1340" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L1341" class="css-a4x74f"><span>1341</span></td><td id="LC1341" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1342" class="css-a4x74f"><span>1342</span></td><td id="LC1342" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1343" class="css-a4x74f"><span>1343</span></td><td id="LC1343" class="css-1dcdqdg"><code>lunr.Pipeline.registerFunction(lunr.trimmer, <span class="code-string">'trimmer'</span>)
</code></td></tr><tr><td id="L1344" class="css-a4x74f"><span>1344</span></td><td id="LC1344" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L1345" class="css-a4x74f"><span>1345</span></td><td id="LC1345" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.TokenSet
</span></code></td></tr><tr><td id="L1346" class="css-a4x74f"><span>1346</span></td><td id="LC1346" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L1347" class="css-a4x74f"><span>1347</span></td><td id="LC1347" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1348" class="css-a4x74f"><span>1348</span></td><td id="LC1348" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1349" class="css-a4x74f"><span>1349</span></td><td id="LC1349" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1350" class="css-a4x74f"><span>1350</span></td><td id="LC1350" class="css-1dcdqdg"><code><span class="code-comment"> * A token set is used to store the unique list of all tokens
</span></code></td></tr><tr><td id="L1351" class="css-a4x74f"><span>1351</span></td><td id="LC1351" class="css-1dcdqdg"><code><span class="code-comment"> * within an index. Token sets are also used to represent an
</span></code></td></tr><tr><td id="L1352" class="css-a4x74f"><span>1352</span></td><td id="LC1352" class="css-1dcdqdg"><code><span class="code-comment"> * incoming query to the index, this query token set and index
</span></code></td></tr><tr><td id="L1353" class="css-a4x74f"><span>1353</span></td><td id="LC1353" class="css-1dcdqdg"><code><span class="code-comment"> * token set are then intersected to find which tokens to look
</span></code></td></tr><tr><td id="L1354" class="css-a4x74f"><span>1354</span></td><td id="LC1354" class="css-1dcdqdg"><code><span class="code-comment"> * up in the inverted index.
</span></code></td></tr><tr><td id="L1355" class="css-a4x74f"><span>1355</span></td><td id="LC1355" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1356" class="css-a4x74f"><span>1356</span></td><td id="LC1356" class="css-1dcdqdg"><code><span class="code-comment"> * A token set can hold multiple tokens, as in the case of the
</span></code></td></tr><tr><td id="L1357" class="css-a4x74f"><span>1357</span></td><td id="LC1357" class="css-1dcdqdg"><code><span class="code-comment"> * index token set, or it can hold a single token as in the
</span></code></td></tr><tr><td id="L1358" class="css-a4x74f"><span>1358</span></td><td id="LC1358" class="css-1dcdqdg"><code><span class="code-comment"> * case of a simple query token set.
</span></code></td></tr><tr><td id="L1359" class="css-a4x74f"><span>1359</span></td><td id="LC1359" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1360" class="css-a4x74f"><span>1360</span></td><td id="LC1360" class="css-1dcdqdg"><code><span class="code-comment"> * Additionally token sets are used to perform wildcard matching.
</span></code></td></tr><tr><td id="L1361" class="css-a4x74f"><span>1361</span></td><td id="LC1361" class="css-1dcdqdg"><code><span class="code-comment"> * Leading, contained and trailing wildcards are supported, and
</span></code></td></tr><tr><td id="L1362" class="css-a4x74f"><span>1362</span></td><td id="LC1362" class="css-1dcdqdg"><code><span class="code-comment"> * from this edit distance matching can also be provided.
</span></code></td></tr><tr><td id="L1363" class="css-a4x74f"><span>1363</span></td><td id="LC1363" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1364" class="css-a4x74f"><span>1364</span></td><td id="LC1364" class="css-1dcdqdg"><code><span class="code-comment"> * Token sets are implemented as a minimal finite state automata,
</span></code></td></tr><tr><td id="L1365" class="css-a4x74f"><span>1365</span></td><td id="LC1365" class="css-1dcdqdg"><code><span class="code-comment"> * where both common prefixes and suffixes are shared between tokens.
</span></code></td></tr><tr><td id="L1366" class="css-a4x74f"><span>1366</span></td><td id="LC1366" class="css-1dcdqdg"><code><span class="code-comment"> * This helps to reduce the space used for storing the token set.
</span></code></td></tr><tr><td id="L1367" class="css-a4x74f"><span>1367</span></td><td id="LC1367" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1368" class="css-a4x74f"><span>1368</span></td><td id="LC1368" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L1369" class="css-a4x74f"><span>1369</span></td><td id="LC1369" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1370" class="css-a4x74f"><span>1370</span></td><td id="LC1370" class="css-1dcdqdg"><code>lunr.TokenSet = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1371" class="css-a4x74f"><span>1371</span></td><td id="LC1371" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.final = <span class="code-literal">false</span>
</code></td></tr><tr><td id="L1372" class="css-a4x74f"><span>1372</span></td><td id="LC1372" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.edges = {}
</code></td></tr><tr><td id="L1373" class="css-a4x74f"><span>1373</span></td><td id="LC1373" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.id = lunr.TokenSet._nextId
</code></td></tr><tr><td id="L1374" class="css-a4x74f"><span>1374</span></td><td id="LC1374" class="css-1dcdqdg"><code>  lunr.TokenSet._nextId += <span class="code-number">1</span>
</code></td></tr><tr><td id="L1375" class="css-a4x74f"><span>1375</span></td><td id="LC1375" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1376" class="css-a4x74f"><span>1376</span></td><td id="LC1376" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1377" class="css-a4x74f"><span>1377</span></td><td id="LC1377" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1378" class="css-a4x74f"><span>1378</span></td><td id="LC1378" class="css-1dcdqdg"><code><span class="code-comment"> * Keeps track of the next, auto increment, identifier to assign
</span></code></td></tr><tr><td id="L1379" class="css-a4x74f"><span>1379</span></td><td id="LC1379" class="css-1dcdqdg"><code><span class="code-comment"> * to a new tokenSet.
</span></code></td></tr><tr><td id="L1380" class="css-a4x74f"><span>1380</span></td><td id="LC1380" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1381" class="css-a4x74f"><span>1381</span></td><td id="LC1381" class="css-1dcdqdg"><code><span class="code-comment"> * TokenSets require a unique identifier to be correctly minimised.
</span></code></td></tr><tr><td id="L1382" class="css-a4x74f"><span>1382</span></td><td id="LC1382" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1383" class="css-a4x74f"><span>1383</span></td><td id="LC1383" class="css-1dcdqdg"><code><span class="code-comment"> * @private
</span></code></td></tr><tr><td id="L1384" class="css-a4x74f"><span>1384</span></td><td id="LC1384" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1385" class="css-a4x74f"><span>1385</span></td><td id="LC1385" class="css-1dcdqdg"><code>lunr.TokenSet._nextId = <span class="code-number">1</span>
</code></td></tr><tr><td id="L1386" class="css-a4x74f"><span>1386</span></td><td id="LC1386" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1387" class="css-a4x74f"><span>1387</span></td><td id="LC1387" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1388" class="css-a4x74f"><span>1388</span></td><td id="LC1388" class="css-1dcdqdg"><code><span class="code-comment"> * Creates a TokenSet instance from the given sorted array of words.
</span></code></td></tr><tr><td id="L1389" class="css-a4x74f"><span>1389</span></td><td id="LC1389" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1390" class="css-a4x74f"><span>1390</span></td><td id="LC1390" class="css-1dcdqdg"><code><span class="code-comment"> * @param {String[]} arr - A sorted array of strings to create the set from.
</span></code></td></tr><tr><td id="L1391" class="css-a4x74f"><span>1391</span></td><td id="LC1391" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.TokenSet}
</span></code></td></tr><tr><td id="L1392" class="css-a4x74f"><span>1392</span></td><td id="LC1392" class="css-1dcdqdg"><code><span class="code-comment"> * @throws Will throw an error if the input array is not sorted.
</span></code></td></tr><tr><td id="L1393" class="css-a4x74f"><span>1393</span></td><td id="LC1393" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1394" class="css-a4x74f"><span>1394</span></td><td id="LC1394" class="css-1dcdqdg"><code>lunr.TokenSet.fromArray = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">arr</span>) </span>{
</code></td></tr><tr><td id="L1395" class="css-a4x74f"><span>1395</span></td><td id="LC1395" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> builder = <span class="code-keyword">new</span> lunr.TokenSet.Builder
</code></td></tr><tr><td id="L1396" class="css-a4x74f"><span>1396</span></td><td id="LC1396" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1397" class="css-a4x74f"><span>1397</span></td><td id="LC1397" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>, len = arr.length; i &lt; len; i++) {
</code></td></tr><tr><td id="L1398" class="css-a4x74f"><span>1398</span></td><td id="LC1398" class="css-1dcdqdg"><code>    builder.insert(arr[i])
</code></td></tr><tr><td id="L1399" class="css-a4x74f"><span>1399</span></td><td id="LC1399" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1400" class="css-a4x74f"><span>1400</span></td><td id="LC1400" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1401" class="css-a4x74f"><span>1401</span></td><td id="LC1401" class="css-1dcdqdg"><code>  builder.finish()
</code></td></tr><tr><td id="L1402" class="css-a4x74f"><span>1402</span></td><td id="LC1402" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> builder.root
</code></td></tr><tr><td id="L1403" class="css-a4x74f"><span>1403</span></td><td id="LC1403" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1404" class="css-a4x74f"><span>1404</span></td><td id="LC1404" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1405" class="css-a4x74f"><span>1405</span></td><td id="LC1405" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1406" class="css-a4x74f"><span>1406</span></td><td id="LC1406" class="css-1dcdqdg"><code><span class="code-comment"> * Creates a token set from a query clause.
</span></code></td></tr><tr><td id="L1407" class="css-a4x74f"><span>1407</span></td><td id="LC1407" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1408" class="css-a4x74f"><span>1408</span></td><td id="LC1408" class="css-1dcdqdg"><code><span class="code-comment"> * @private
</span></code></td></tr><tr><td id="L1409" class="css-a4x74f"><span>1409</span></td><td id="LC1409" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object} clause - A single clause from lunr.Query.
</span></code></td></tr><tr><td id="L1410" class="css-a4x74f"><span>1410</span></td><td id="LC1410" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} clause.term - The query clause term.
</span></code></td></tr><tr><td id="L1411" class="css-a4x74f"><span>1411</span></td><td id="LC1411" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} [clause.editDistance] - The optional edit distance for the term.
</span></code></td></tr><tr><td id="L1412" class="css-a4x74f"><span>1412</span></td><td id="LC1412" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.TokenSet}
</span></code></td></tr><tr><td id="L1413" class="css-a4x74f"><span>1413</span></td><td id="LC1413" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1414" class="css-a4x74f"><span>1414</span></td><td id="LC1414" class="css-1dcdqdg"><code>lunr.TokenSet.fromClause = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">clause</span>) </span>{
</code></td></tr><tr><td id="L1415" class="css-a4x74f"><span>1415</span></td><td id="LC1415" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-string">'editDistance'</span> <span class="code-keyword">in</span> clause) {
</code></td></tr><tr><td id="L1416" class="css-a4x74f"><span>1416</span></td><td id="LC1416" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> lunr.TokenSet.fromFuzzyString(clause.term, clause.editDistance)
</code></td></tr><tr><td id="L1417" class="css-a4x74f"><span>1417</span></td><td id="LC1417" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1418" class="css-a4x74f"><span>1418</span></td><td id="LC1418" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> lunr.TokenSet.fromString(clause.term)
</code></td></tr><tr><td id="L1419" class="css-a4x74f"><span>1419</span></td><td id="LC1419" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1420" class="css-a4x74f"><span>1420</span></td><td id="LC1420" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1421" class="css-a4x74f"><span>1421</span></td><td id="LC1421" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1422" class="css-a4x74f"><span>1422</span></td><td id="LC1422" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1423" class="css-a4x74f"><span>1423</span></td><td id="LC1423" class="css-1dcdqdg"><code><span class="code-comment"> * Creates a token set representing a single string with a specified
</span></code></td></tr><tr><td id="L1424" class="css-a4x74f"><span>1424</span></td><td id="LC1424" class="css-1dcdqdg"><code><span class="code-comment"> * edit distance.
</span></code></td></tr><tr><td id="L1425" class="css-a4x74f"><span>1425</span></td><td id="LC1425" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1426" class="css-a4x74f"><span>1426</span></td><td id="LC1426" class="css-1dcdqdg"><code><span class="code-comment"> * Insertions, deletions, substitutions and transpositions are each
</span></code></td></tr><tr><td id="L1427" class="css-a4x74f"><span>1427</span></td><td id="LC1427" class="css-1dcdqdg"><code><span class="code-comment"> * treated as an edit distance of 1.
</span></code></td></tr><tr><td id="L1428" class="css-a4x74f"><span>1428</span></td><td id="LC1428" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1429" class="css-a4x74f"><span>1429</span></td><td id="LC1429" class="css-1dcdqdg"><code><span class="code-comment"> * Increasing the allowed edit distance will have a dramatic impact
</span></code></td></tr><tr><td id="L1430" class="css-a4x74f"><span>1430</span></td><td id="LC1430" class="css-1dcdqdg"><code><span class="code-comment"> * on the performance of both creating and intersecting these TokenSets.
</span></code></td></tr><tr><td id="L1431" class="css-a4x74f"><span>1431</span></td><td id="LC1431" class="css-1dcdqdg"><code><span class="code-comment"> * It is advised to keep the edit distance less than 3.
</span></code></td></tr><tr><td id="L1432" class="css-a4x74f"><span>1432</span></td><td id="LC1432" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1433" class="css-a4x74f"><span>1433</span></td><td id="LC1433" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} str - The string to create the token set from.
</span></code></td></tr><tr><td id="L1434" class="css-a4x74f"><span>1434</span></td><td id="LC1434" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} editDistance - The allowed edit distance to match.
</span></code></td></tr><tr><td id="L1435" class="css-a4x74f"><span>1435</span></td><td id="LC1435" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Vector}
</span></code></td></tr><tr><td id="L1436" class="css-a4x74f"><span>1436</span></td><td id="LC1436" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1437" class="css-a4x74f"><span>1437</span></td><td id="LC1437" class="css-1dcdqdg"><code>lunr.TokenSet.fromFuzzyString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">str, editDistance</span>) </span>{
</code></td></tr><tr><td id="L1438" class="css-a4x74f"><span>1438</span></td><td id="LC1438" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> root = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1439" class="css-a4x74f"><span>1439</span></td><td id="LC1439" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1440" class="css-a4x74f"><span>1440</span></td><td id="LC1440" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> stack = [{
</code></td></tr><tr><td id="L1441" class="css-a4x74f"><span>1441</span></td><td id="LC1441" class="css-1dcdqdg"><code>    node: root,
</code></td></tr><tr><td id="L1442" class="css-a4x74f"><span>1442</span></td><td id="LC1442" class="css-1dcdqdg"><code>    editsRemaining: editDistance,
</code></td></tr><tr><td id="L1443" class="css-a4x74f"><span>1443</span></td><td id="LC1443" class="css-1dcdqdg"><code>    str: str
</code></td></tr><tr><td id="L1444" class="css-a4x74f"><span>1444</span></td><td id="LC1444" class="css-1dcdqdg"><code>  }]
</code></td></tr><tr><td id="L1445" class="css-a4x74f"><span>1445</span></td><td id="LC1445" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1446" class="css-a4x74f"><span>1446</span></td><td id="LC1446" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (stack.length) {
</code></td></tr><tr><td id="L1447" class="css-a4x74f"><span>1447</span></td><td id="LC1447" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> frame = stack.pop()
</code></td></tr><tr><td id="L1448" class="css-a4x74f"><span>1448</span></td><td id="LC1448" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1449" class="css-a4x74f"><span>1449</span></td><td id="LC1449" class="css-1dcdqdg"><code>    <span class="code-comment">// no edit</span>
</code></td></tr><tr><td id="L1450" class="css-a4x74f"><span>1450</span></td><td id="LC1450" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.str.length &gt; <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L1451" class="css-a4x74f"><span>1451</span></td><td id="LC1451" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> char = frame.str.charAt(<span class="code-number">0</span>),
</code></td></tr><tr><td id="L1452" class="css-a4x74f"><span>1452</span></td><td id="LC1452" class="css-1dcdqdg"><code>          noEditNode
</code></td></tr><tr><td id="L1453" class="css-a4x74f"><span>1453</span></td><td id="LC1453" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1454" class="css-a4x74f"><span>1454</span></td><td id="LC1454" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (char <span class="code-keyword">in</span> frame.node.edges) {
</code></td></tr><tr><td id="L1455" class="css-a4x74f"><span>1455</span></td><td id="LC1455" class="css-1dcdqdg"><code>        noEditNode = frame.node.edges[char]
</code></td></tr><tr><td id="L1456" class="css-a4x74f"><span>1456</span></td><td id="LC1456" class="css-1dcdqdg"><code>      } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1457" class="css-a4x74f"><span>1457</span></td><td id="LC1457" class="css-1dcdqdg"><code>        noEditNode = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1458" class="css-a4x74f"><span>1458</span></td><td id="LC1458" class="css-1dcdqdg"><code>        frame.node.edges[char] = noEditNode
</code></td></tr><tr><td id="L1459" class="css-a4x74f"><span>1459</span></td><td id="LC1459" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1460" class="css-a4x74f"><span>1460</span></td><td id="LC1460" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1461" class="css-a4x74f"><span>1461</span></td><td id="LC1461" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (frame.str.length == <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1462" class="css-a4x74f"><span>1462</span></td><td id="LC1462" class="css-1dcdqdg"><code>        noEditNode.final = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L1463" class="css-a4x74f"><span>1463</span></td><td id="LC1463" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1464" class="css-a4x74f"><span>1464</span></td><td id="LC1464" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1465" class="css-a4x74f"><span>1465</span></td><td id="LC1465" class="css-1dcdqdg"><code>      stack.push({
</code></td></tr><tr><td id="L1466" class="css-a4x74f"><span>1466</span></td><td id="LC1466" class="css-1dcdqdg"><code>        node: noEditNode,
</code></td></tr><tr><td id="L1467" class="css-a4x74f"><span>1467</span></td><td id="LC1467" class="css-1dcdqdg"><code>        editsRemaining: frame.editsRemaining,
</code></td></tr><tr><td id="L1468" class="css-a4x74f"><span>1468</span></td><td id="LC1468" class="css-1dcdqdg"><code>        str: frame.str.slice(<span class="code-number">1</span>)
</code></td></tr><tr><td id="L1469" class="css-a4x74f"><span>1469</span></td><td id="LC1469" class="css-1dcdqdg"><code>      })
</code></td></tr><tr><td id="L1470" class="css-a4x74f"><span>1470</span></td><td id="LC1470" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1471" class="css-a4x74f"><span>1471</span></td><td id="LC1471" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1472" class="css-a4x74f"><span>1472</span></td><td id="LC1472" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.editsRemaining == <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L1473" class="css-a4x74f"><span>1473</span></td><td id="LC1473" class="css-1dcdqdg"><code>      <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L1474" class="css-a4x74f"><span>1474</span></td><td id="LC1474" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1475" class="css-a4x74f"><span>1475</span></td><td id="LC1475" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1476" class="css-a4x74f"><span>1476</span></td><td id="LC1476" class="css-1dcdqdg"><code>    <span class="code-comment">// insertion</span>
</code></td></tr><tr><td id="L1477" class="css-a4x74f"><span>1477</span></td><td id="LC1477" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (<span class="code-string">"*"</span> <span class="code-keyword">in</span> frame.node.edges) {
</code></td></tr><tr><td id="L1478" class="css-a4x74f"><span>1478</span></td><td id="LC1478" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> insertionNode = frame.node.edges[<span class="code-string">"*"</span>]
</code></td></tr><tr><td id="L1479" class="css-a4x74f"><span>1479</span></td><td id="LC1479" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1480" class="css-a4x74f"><span>1480</span></td><td id="LC1480" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> insertionNode = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1481" class="css-a4x74f"><span>1481</span></td><td id="LC1481" class="css-1dcdqdg"><code>      frame.node.edges[<span class="code-string">"*"</span>] = insertionNode
</code></td></tr><tr><td id="L1482" class="css-a4x74f"><span>1482</span></td><td id="LC1482" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1483" class="css-a4x74f"><span>1483</span></td><td id="LC1483" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1484" class="css-a4x74f"><span>1484</span></td><td id="LC1484" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.str.length == <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L1485" class="css-a4x74f"><span>1485</span></td><td id="LC1485" class="css-1dcdqdg"><code>      insertionNode.final = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L1486" class="css-a4x74f"><span>1486</span></td><td id="LC1486" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1487" class="css-a4x74f"><span>1487</span></td><td id="LC1487" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1488" class="css-a4x74f"><span>1488</span></td><td id="LC1488" class="css-1dcdqdg"><code>    stack.push({
</code></td></tr><tr><td id="L1489" class="css-a4x74f"><span>1489</span></td><td id="LC1489" class="css-1dcdqdg"><code>      node: insertionNode,
</code></td></tr><tr><td id="L1490" class="css-a4x74f"><span>1490</span></td><td id="LC1490" class="css-1dcdqdg"><code>      editsRemaining: frame.editsRemaining - <span class="code-number">1</span>,
</code></td></tr><tr><td id="L1491" class="css-a4x74f"><span>1491</span></td><td id="LC1491" class="css-1dcdqdg"><code>      str: frame.str
</code></td></tr><tr><td id="L1492" class="css-a4x74f"><span>1492</span></td><td id="LC1492" class="css-1dcdqdg"><code>    })
</code></td></tr><tr><td id="L1493" class="css-a4x74f"><span>1493</span></td><td id="LC1493" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1494" class="css-a4x74f"><span>1494</span></td><td id="LC1494" class="css-1dcdqdg"><code>    <span class="code-comment">// deletion</span>
</code></td></tr><tr><td id="L1495" class="css-a4x74f"><span>1495</span></td><td id="LC1495" class="css-1dcdqdg"><code>    <span class="code-comment">// can only do a deletion if we have enough edits remaining</span>
</code></td></tr><tr><td id="L1496" class="css-a4x74f"><span>1496</span></td><td id="LC1496" class="css-1dcdqdg"><code>    <span class="code-comment">// and if there are characters left to delete in the string</span>
</code></td></tr><tr><td id="L1497" class="css-a4x74f"><span>1497</span></td><td id="LC1497" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.str.length &gt; <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1498" class="css-a4x74f"><span>1498</span></td><td id="LC1498" class="css-1dcdqdg"><code>      stack.push({
</code></td></tr><tr><td id="L1499" class="css-a4x74f"><span>1499</span></td><td id="LC1499" class="css-1dcdqdg"><code>        node: frame.node,
</code></td></tr><tr><td id="L1500" class="css-a4x74f"><span>1500</span></td><td id="LC1500" class="css-1dcdqdg"><code>        editsRemaining: frame.editsRemaining - <span class="code-number">1</span>,
</code></td></tr><tr><td id="L1501" class="css-a4x74f"><span>1501</span></td><td id="LC1501" class="css-1dcdqdg"><code>        str: frame.str.slice(<span class="code-number">1</span>)
</code></td></tr><tr><td id="L1502" class="css-a4x74f"><span>1502</span></td><td id="LC1502" class="css-1dcdqdg"><code>      })
</code></td></tr><tr><td id="L1503" class="css-a4x74f"><span>1503</span></td><td id="LC1503" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1504" class="css-a4x74f"><span>1504</span></td><td id="LC1504" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1505" class="css-a4x74f"><span>1505</span></td><td id="LC1505" class="css-1dcdqdg"><code>    <span class="code-comment">// deletion</span>
</code></td></tr><tr><td id="L1506" class="css-a4x74f"><span>1506</span></td><td id="LC1506" class="css-1dcdqdg"><code>    <span class="code-comment">// just removing the last character from the str</span>
</code></td></tr><tr><td id="L1507" class="css-a4x74f"><span>1507</span></td><td id="LC1507" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.str.length == <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1508" class="css-a4x74f"><span>1508</span></td><td id="LC1508" class="css-1dcdqdg"><code>      frame.node.final = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L1509" class="css-a4x74f"><span>1509</span></td><td id="LC1509" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1510" class="css-a4x74f"><span>1510</span></td><td id="LC1510" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1511" class="css-a4x74f"><span>1511</span></td><td id="LC1511" class="css-1dcdqdg"><code>    <span class="code-comment">// substitution</span>
</code></td></tr><tr><td id="L1512" class="css-a4x74f"><span>1512</span></td><td id="LC1512" class="css-1dcdqdg"><code>    <span class="code-comment">// can only do a substitution if we have enough edits remaining</span>
</code></td></tr><tr><td id="L1513" class="css-a4x74f"><span>1513</span></td><td id="LC1513" class="css-1dcdqdg"><code>    <span class="code-comment">// and if there are characters left to substitute</span>
</code></td></tr><tr><td id="L1514" class="css-a4x74f"><span>1514</span></td><td id="LC1514" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.str.length &gt;= <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1515" class="css-a4x74f"><span>1515</span></td><td id="LC1515" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-string">"*"</span> <span class="code-keyword">in</span> frame.node.edges) {
</code></td></tr><tr><td id="L1516" class="css-a4x74f"><span>1516</span></td><td id="LC1516" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> substitutionNode = frame.node.edges[<span class="code-string">"*"</span>]
</code></td></tr><tr><td id="L1517" class="css-a4x74f"><span>1517</span></td><td id="LC1517" class="css-1dcdqdg"><code>      } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1518" class="css-a4x74f"><span>1518</span></td><td id="LC1518" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> substitutionNode = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1519" class="css-a4x74f"><span>1519</span></td><td id="LC1519" class="css-1dcdqdg"><code>        frame.node.edges[<span class="code-string">"*"</span>] = substitutionNode
</code></td></tr><tr><td id="L1520" class="css-a4x74f"><span>1520</span></td><td id="LC1520" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1521" class="css-a4x74f"><span>1521</span></td><td id="LC1521" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1522" class="css-a4x74f"><span>1522</span></td><td id="LC1522" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (frame.str.length == <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1523" class="css-a4x74f"><span>1523</span></td><td id="LC1523" class="css-1dcdqdg"><code>        substitutionNode.final = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L1524" class="css-a4x74f"><span>1524</span></td><td id="LC1524" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1525" class="css-a4x74f"><span>1525</span></td><td id="LC1525" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1526" class="css-a4x74f"><span>1526</span></td><td id="LC1526" class="css-1dcdqdg"><code>      stack.push({
</code></td></tr><tr><td id="L1527" class="css-a4x74f"><span>1527</span></td><td id="LC1527" class="css-1dcdqdg"><code>        node: substitutionNode,
</code></td></tr><tr><td id="L1528" class="css-a4x74f"><span>1528</span></td><td id="LC1528" class="css-1dcdqdg"><code>        editsRemaining: frame.editsRemaining - <span class="code-number">1</span>,
</code></td></tr><tr><td id="L1529" class="css-a4x74f"><span>1529</span></td><td id="LC1529" class="css-1dcdqdg"><code>        str: frame.str.slice(<span class="code-number">1</span>)
</code></td></tr><tr><td id="L1530" class="css-a4x74f"><span>1530</span></td><td id="LC1530" class="css-1dcdqdg"><code>      })
</code></td></tr><tr><td id="L1531" class="css-a4x74f"><span>1531</span></td><td id="LC1531" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1532" class="css-a4x74f"><span>1532</span></td><td id="LC1532" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1533" class="css-a4x74f"><span>1533</span></td><td id="LC1533" class="css-1dcdqdg"><code>    <span class="code-comment">// transposition</span>
</code></td></tr><tr><td id="L1534" class="css-a4x74f"><span>1534</span></td><td id="LC1534" class="css-1dcdqdg"><code>    <span class="code-comment">// can only do a transposition if there are edits remaining</span>
</code></td></tr><tr><td id="L1535" class="css-a4x74f"><span>1535</span></td><td id="LC1535" class="css-1dcdqdg"><code>    <span class="code-comment">// and there are enough characters to transpose</span>
</code></td></tr><tr><td id="L1536" class="css-a4x74f"><span>1536</span></td><td id="LC1536" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.str.length &gt; <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1537" class="css-a4x74f"><span>1537</span></td><td id="LC1537" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> charA = frame.str.charAt(<span class="code-number">0</span>),
</code></td></tr><tr><td id="L1538" class="css-a4x74f"><span>1538</span></td><td id="LC1538" class="css-1dcdqdg"><code>          charB = frame.str.charAt(<span class="code-number">1</span>),
</code></td></tr><tr><td id="L1539" class="css-a4x74f"><span>1539</span></td><td id="LC1539" class="css-1dcdqdg"><code>          transposeNode
</code></td></tr><tr><td id="L1540" class="css-a4x74f"><span>1540</span></td><td id="LC1540" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1541" class="css-a4x74f"><span>1541</span></td><td id="LC1541" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (charB <span class="code-keyword">in</span> frame.node.edges) {
</code></td></tr><tr><td id="L1542" class="css-a4x74f"><span>1542</span></td><td id="LC1542" class="css-1dcdqdg"><code>        transposeNode = frame.node.edges[charB]
</code></td></tr><tr><td id="L1543" class="css-a4x74f"><span>1543</span></td><td id="LC1543" class="css-1dcdqdg"><code>      } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1544" class="css-a4x74f"><span>1544</span></td><td id="LC1544" class="css-1dcdqdg"><code>        transposeNode = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1545" class="css-a4x74f"><span>1545</span></td><td id="LC1545" class="css-1dcdqdg"><code>        frame.node.edges[charB] = transposeNode
</code></td></tr><tr><td id="L1546" class="css-a4x74f"><span>1546</span></td><td id="LC1546" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1547" class="css-a4x74f"><span>1547</span></td><td id="LC1547" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1548" class="css-a4x74f"><span>1548</span></td><td id="LC1548" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (frame.str.length == <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L1549" class="css-a4x74f"><span>1549</span></td><td id="LC1549" class="css-1dcdqdg"><code>        transposeNode.final = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L1550" class="css-a4x74f"><span>1550</span></td><td id="LC1550" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1551" class="css-a4x74f"><span>1551</span></td><td id="LC1551" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1552" class="css-a4x74f"><span>1552</span></td><td id="LC1552" class="css-1dcdqdg"><code>      stack.push({
</code></td></tr><tr><td id="L1553" class="css-a4x74f"><span>1553</span></td><td id="LC1553" class="css-1dcdqdg"><code>        node: transposeNode,
</code></td></tr><tr><td id="L1554" class="css-a4x74f"><span>1554</span></td><td id="LC1554" class="css-1dcdqdg"><code>        editsRemaining: frame.editsRemaining - <span class="code-number">1</span>,
</code></td></tr><tr><td id="L1555" class="css-a4x74f"><span>1555</span></td><td id="LC1555" class="css-1dcdqdg"><code>        str: charA + frame.str.slice(<span class="code-number">2</span>)
</code></td></tr><tr><td id="L1556" class="css-a4x74f"><span>1556</span></td><td id="LC1556" class="css-1dcdqdg"><code>      })
</code></td></tr><tr><td id="L1557" class="css-a4x74f"><span>1557</span></td><td id="LC1557" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1558" class="css-a4x74f"><span>1558</span></td><td id="LC1558" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1559" class="css-a4x74f"><span>1559</span></td><td id="LC1559" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1560" class="css-a4x74f"><span>1560</span></td><td id="LC1560" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> root
</code></td></tr><tr><td id="L1561" class="css-a4x74f"><span>1561</span></td><td id="LC1561" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1562" class="css-a4x74f"><span>1562</span></td><td id="LC1562" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1563" class="css-a4x74f"><span>1563</span></td><td id="LC1563" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1564" class="css-a4x74f"><span>1564</span></td><td id="LC1564" class="css-1dcdqdg"><code><span class="code-comment"> * Creates a TokenSet from a string.
</span></code></td></tr><tr><td id="L1565" class="css-a4x74f"><span>1565</span></td><td id="LC1565" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1566" class="css-a4x74f"><span>1566</span></td><td id="LC1566" class="css-1dcdqdg"><code><span class="code-comment"> * The string may contain one or more wildcard characters (*)
</span></code></td></tr><tr><td id="L1567" class="css-a4x74f"><span>1567</span></td><td id="LC1567" class="css-1dcdqdg"><code><span class="code-comment"> * that will allow wildcard matching when intersecting with
</span></code></td></tr><tr><td id="L1568" class="css-a4x74f"><span>1568</span></td><td id="LC1568" class="css-1dcdqdg"><code><span class="code-comment"> * another TokenSet.
</span></code></td></tr><tr><td id="L1569" class="css-a4x74f"><span>1569</span></td><td id="LC1569" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1570" class="css-a4x74f"><span>1570</span></td><td id="LC1570" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} str - The string to create a TokenSet from.
</span></code></td></tr><tr><td id="L1571" class="css-a4x74f"><span>1571</span></td><td id="LC1571" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.TokenSet}
</span></code></td></tr><tr><td id="L1572" class="css-a4x74f"><span>1572</span></td><td id="LC1572" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1573" class="css-a4x74f"><span>1573</span></td><td id="LC1573" class="css-1dcdqdg"><code>lunr.TokenSet.fromString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">str</span>) </span>{
</code></td></tr><tr><td id="L1574" class="css-a4x74f"><span>1574</span></td><td id="LC1574" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> node = <span class="code-keyword">new</span> lunr.TokenSet,
</code></td></tr><tr><td id="L1575" class="css-a4x74f"><span>1575</span></td><td id="LC1575" class="css-1dcdqdg"><code>      root = node
</code></td></tr><tr><td id="L1576" class="css-a4x74f"><span>1576</span></td><td id="LC1576" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1577" class="css-a4x74f"><span>1577</span></td><td id="LC1577" class="css-1dcdqdg"><code>  <span class="code-comment">/*
</span></code></td></tr><tr><td id="L1578" class="css-a4x74f"><span>1578</span></td><td id="LC1578" class="css-1dcdqdg"><code><span class="code-comment">   * Iterates through all characters within the passed string
</span></code></td></tr><tr><td id="L1579" class="css-a4x74f"><span>1579</span></td><td id="LC1579" class="css-1dcdqdg"><code><span class="code-comment">   * appending a node for each character.
</span></code></td></tr><tr><td id="L1580" class="css-a4x74f"><span>1580</span></td><td id="LC1580" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L1581" class="css-a4x74f"><span>1581</span></td><td id="LC1581" class="css-1dcdqdg"><code><span class="code-comment">   * When a wildcard character is found then a self
</span></code></td></tr><tr><td id="L1582" class="css-a4x74f"><span>1582</span></td><td id="LC1582" class="css-1dcdqdg"><code><span class="code-comment">   * referencing edge is introduced to continually match
</span></code></td></tr><tr><td id="L1583" class="css-a4x74f"><span>1583</span></td><td id="LC1583" class="css-1dcdqdg"><code><span class="code-comment">   * any number of any characters.
</span></code></td></tr><tr><td id="L1584" class="css-a4x74f"><span>1584</span></td><td id="LC1584" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1585" class="css-a4x74f"><span>1585</span></td><td id="LC1585" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>, len = str.length; i &lt; len; i++) {
</code></td></tr><tr><td id="L1586" class="css-a4x74f"><span>1586</span></td><td id="LC1586" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> char = str[i],
</code></td></tr><tr><td id="L1587" class="css-a4x74f"><span>1587</span></td><td id="LC1587" class="css-1dcdqdg"><code>        final = (i == len - <span class="code-number">1</span>)
</code></td></tr><tr><td id="L1588" class="css-a4x74f"><span>1588</span></td><td id="LC1588" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1589" class="css-a4x74f"><span>1589</span></td><td id="LC1589" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char == <span class="code-string">"*"</span>) {
</code></td></tr><tr><td id="L1590" class="css-a4x74f"><span>1590</span></td><td id="LC1590" class="css-1dcdqdg"><code>      node.edges[char] = node
</code></td></tr><tr><td id="L1591" class="css-a4x74f"><span>1591</span></td><td id="LC1591" class="css-1dcdqdg"><code>      node.final = final
</code></td></tr><tr><td id="L1592" class="css-a4x74f"><span>1592</span></td><td id="LC1592" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1593" class="css-a4x74f"><span>1593</span></td><td id="LC1593" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1594" class="css-a4x74f"><span>1594</span></td><td id="LC1594" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> next = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1595" class="css-a4x74f"><span>1595</span></td><td id="LC1595" class="css-1dcdqdg"><code>      next.final = final
</code></td></tr><tr><td id="L1596" class="css-a4x74f"><span>1596</span></td><td id="LC1596" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1597" class="css-a4x74f"><span>1597</span></td><td id="LC1597" class="css-1dcdqdg"><code>      node.edges[char] = next
</code></td></tr><tr><td id="L1598" class="css-a4x74f"><span>1598</span></td><td id="LC1598" class="css-1dcdqdg"><code>      node = next
</code></td></tr><tr><td id="L1599" class="css-a4x74f"><span>1599</span></td><td id="LC1599" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1600" class="css-a4x74f"><span>1600</span></td><td id="LC1600" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1601" class="css-a4x74f"><span>1601</span></td><td id="LC1601" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1602" class="css-a4x74f"><span>1602</span></td><td id="LC1602" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> root
</code></td></tr><tr><td id="L1603" class="css-a4x74f"><span>1603</span></td><td id="LC1603" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1604" class="css-a4x74f"><span>1604</span></td><td id="LC1604" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1605" class="css-a4x74f"><span>1605</span></td><td id="LC1605" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1606" class="css-a4x74f"><span>1606</span></td><td id="LC1606" class="css-1dcdqdg"><code><span class="code-comment"> * Converts this TokenSet into an array of strings
</span></code></td></tr><tr><td id="L1607" class="css-a4x74f"><span>1607</span></td><td id="LC1607" class="css-1dcdqdg"><code><span class="code-comment"> * contained within the TokenSet.
</span></code></td></tr><tr><td id="L1608" class="css-a4x74f"><span>1608</span></td><td id="LC1608" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1609" class="css-a4x74f"><span>1609</span></td><td id="LC1609" class="css-1dcdqdg"><code><span class="code-comment"> * This is not intended to be used on a TokenSet that
</span></code></td></tr><tr><td id="L1610" class="css-a4x74f"><span>1610</span></td><td id="LC1610" class="css-1dcdqdg"><code><span class="code-comment"> * contains wildcards, in these cases the results are
</span></code></td></tr><tr><td id="L1611" class="css-a4x74f"><span>1611</span></td><td id="LC1611" class="css-1dcdqdg"><code><span class="code-comment"> * undefined and are likely to cause an infinite loop.
</span></code></td></tr><tr><td id="L1612" class="css-a4x74f"><span>1612</span></td><td id="LC1612" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1613" class="css-a4x74f"><span>1613</span></td><td id="LC1613" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {string[]}
</span></code></td></tr><tr><td id="L1614" class="css-a4x74f"><span>1614</span></td><td id="LC1614" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1615" class="css-a4x74f"><span>1615</span></td><td id="LC1615" class="css-1dcdqdg"><code>lunr.TokenSet.prototype.toArray = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1616" class="css-a4x74f"><span>1616</span></td><td id="LC1616" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> words = []
</code></td></tr><tr><td id="L1617" class="css-a4x74f"><span>1617</span></td><td id="LC1617" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1618" class="css-a4x74f"><span>1618</span></td><td id="LC1618" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> stack = [{
</code></td></tr><tr><td id="L1619" class="css-a4x74f"><span>1619</span></td><td id="LC1619" class="css-1dcdqdg"><code>    prefix: <span class="code-string">""</span>,
</code></td></tr><tr><td id="L1620" class="css-a4x74f"><span>1620</span></td><td id="LC1620" class="css-1dcdqdg"><code>    node: <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L1621" class="css-a4x74f"><span>1621</span></td><td id="LC1621" class="css-1dcdqdg"><code>  }]
</code></td></tr><tr><td id="L1622" class="css-a4x74f"><span>1622</span></td><td id="LC1622" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1623" class="css-a4x74f"><span>1623</span></td><td id="LC1623" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (stack.length) {
</code></td></tr><tr><td id="L1624" class="css-a4x74f"><span>1624</span></td><td id="LC1624" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> frame = stack.pop(),
</code></td></tr><tr><td id="L1625" class="css-a4x74f"><span>1625</span></td><td id="LC1625" class="css-1dcdqdg"><code>        edges = <span class="code-built_in">Object</span>.keys(frame.node.edges),
</code></td></tr><tr><td id="L1626" class="css-a4x74f"><span>1626</span></td><td id="LC1626" class="css-1dcdqdg"><code>        len = edges.length
</code></td></tr><tr><td id="L1627" class="css-a4x74f"><span>1627</span></td><td id="LC1627" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1628" class="css-a4x74f"><span>1628</span></td><td id="LC1628" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (frame.node.final) {
</code></td></tr><tr><td id="L1629" class="css-a4x74f"><span>1629</span></td><td id="LC1629" class="css-1dcdqdg"><code>      <span class="code-comment">/* In Safari, at this point the prefix is sometimes corrupted, see:
</span></code></td></tr><tr><td id="L1630" class="css-a4x74f"><span>1630</span></td><td id="LC1630" class="css-1dcdqdg"><code><span class="code-comment">       * https://github.com/olivernn/lunr.js/issues/279 Calling any
</span></code></td></tr><tr><td id="L1631" class="css-a4x74f"><span>1631</span></td><td id="LC1631" class="css-1dcdqdg"><code><span class="code-comment">       * String.prototype method forces Safari to "cast" this string to what
</span></code></td></tr><tr><td id="L1632" class="css-a4x74f"><span>1632</span></td><td id="LC1632" class="css-1dcdqdg"><code><span class="code-comment">       * it's supposed to be, fixing the bug. */</span>
</code></td></tr><tr><td id="L1633" class="css-a4x74f"><span>1633</span></td><td id="LC1633" class="css-1dcdqdg"><code>      frame.prefix.charAt(<span class="code-number">0</span>)
</code></td></tr><tr><td id="L1634" class="css-a4x74f"><span>1634</span></td><td id="LC1634" class="css-1dcdqdg"><code>      words.push(frame.prefix)
</code></td></tr><tr><td id="L1635" class="css-a4x74f"><span>1635</span></td><td id="LC1635" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1636" class="css-a4x74f"><span>1636</span></td><td id="LC1636" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1637" class="css-a4x74f"><span>1637</span></td><td id="LC1637" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; len; i++) {
</code></td></tr><tr><td id="L1638" class="css-a4x74f"><span>1638</span></td><td id="LC1638" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> edge = edges[i]
</code></td></tr><tr><td id="L1639" class="css-a4x74f"><span>1639</span></td><td id="LC1639" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1640" class="css-a4x74f"><span>1640</span></td><td id="LC1640" class="css-1dcdqdg"><code>      stack.push({
</code></td></tr><tr><td id="L1641" class="css-a4x74f"><span>1641</span></td><td id="LC1641" class="css-1dcdqdg"><code>        prefix: frame.prefix.concat(edge),
</code></td></tr><tr><td id="L1642" class="css-a4x74f"><span>1642</span></td><td id="LC1642" class="css-1dcdqdg"><code>        node: frame.node.edges[edge]
</code></td></tr><tr><td id="L1643" class="css-a4x74f"><span>1643</span></td><td id="LC1643" class="css-1dcdqdg"><code>      })
</code></td></tr><tr><td id="L1644" class="css-a4x74f"><span>1644</span></td><td id="LC1644" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1645" class="css-a4x74f"><span>1645</span></td><td id="LC1645" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1646" class="css-a4x74f"><span>1646</span></td><td id="LC1646" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1647" class="css-a4x74f"><span>1647</span></td><td id="LC1647" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> words
</code></td></tr><tr><td id="L1648" class="css-a4x74f"><span>1648</span></td><td id="LC1648" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1649" class="css-a4x74f"><span>1649</span></td><td id="LC1649" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1650" class="css-a4x74f"><span>1650</span></td><td id="LC1650" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1651" class="css-a4x74f"><span>1651</span></td><td id="LC1651" class="css-1dcdqdg"><code><span class="code-comment"> * Generates a string representation of a TokenSet.
</span></code></td></tr><tr><td id="L1652" class="css-a4x74f"><span>1652</span></td><td id="LC1652" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1653" class="css-a4x74f"><span>1653</span></td><td id="LC1653" class="css-1dcdqdg"><code><span class="code-comment"> * This is intended to allow TokenSets to be used as keys
</span></code></td></tr><tr><td id="L1654" class="css-a4x74f"><span>1654</span></td><td id="LC1654" class="css-1dcdqdg"><code><span class="code-comment"> * in objects, largely to aid the construction and minimisation
</span></code></td></tr><tr><td id="L1655" class="css-a4x74f"><span>1655</span></td><td id="LC1655" class="css-1dcdqdg"><code><span class="code-comment"> * of a TokenSet. As such it is not designed to be a human
</span></code></td></tr><tr><td id="L1656" class="css-a4x74f"><span>1656</span></td><td id="LC1656" class="css-1dcdqdg"><code><span class="code-comment"> * friendly representation of the TokenSet.
</span></code></td></tr><tr><td id="L1657" class="css-a4x74f"><span>1657</span></td><td id="LC1657" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1658" class="css-a4x74f"><span>1658</span></td><td id="LC1658" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {string}
</span></code></td></tr><tr><td id="L1659" class="css-a4x74f"><span>1659</span></td><td id="LC1659" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1660" class="css-a4x74f"><span>1660</span></td><td id="LC1660" class="css-1dcdqdg"><code>lunr.TokenSet.prototype.toString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1661" class="css-a4x74f"><span>1661</span></td><td id="LC1661" class="css-1dcdqdg"><code>  <span class="code-comment">// <span class="code-doctag">NOTE:</span> Using Object.keys here as this.edges is very likely</span>
</code></td></tr><tr><td id="L1662" class="css-a4x74f"><span>1662</span></td><td id="LC1662" class="css-1dcdqdg"><code>  <span class="code-comment">// to enter 'hash-mode' with many keys being added</span>
</code></td></tr><tr><td id="L1663" class="css-a4x74f"><span>1663</span></td><td id="LC1663" class="css-1dcdqdg"><code>  <span class="code-comment">//</span>
</code></td></tr><tr><td id="L1664" class="css-a4x74f"><span>1664</span></td><td id="LC1664" class="css-1dcdqdg"><code>  <span class="code-comment">// avoiding a for-in loop here as it leads to the function</span>
</code></td></tr><tr><td id="L1665" class="css-a4x74f"><span>1665</span></td><td id="LC1665" class="css-1dcdqdg"><code>  <span class="code-comment">// being de-optimised (at least in V8). From some simple</span>
</code></td></tr><tr><td id="L1666" class="css-a4x74f"><span>1666</span></td><td id="LC1666" class="css-1dcdqdg"><code>  <span class="code-comment">// benchmarks the performance is comparable, but allowing</span>
</code></td></tr><tr><td id="L1667" class="css-a4x74f"><span>1667</span></td><td id="LC1667" class="css-1dcdqdg"><code>  <span class="code-comment">// V8 to optimize may mean easy performance wins in the future.</span>
</code></td></tr><tr><td id="L1668" class="css-a4x74f"><span>1668</span></td><td id="LC1668" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1669" class="css-a4x74f"><span>1669</span></td><td id="LC1669" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>._str) {
</code></td></tr><tr><td id="L1670" class="css-a4x74f"><span>1670</span></td><td id="LC1670" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-keyword">this</span>._str
</code></td></tr><tr><td id="L1671" class="css-a4x74f"><span>1671</span></td><td id="LC1671" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1672" class="css-a4x74f"><span>1672</span></td><td id="LC1672" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1673" class="css-a4x74f"><span>1673</span></td><td id="LC1673" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> str = <span class="code-keyword">this</span>.final ? <span class="code-string">'1'</span> : <span class="code-string">'0'</span>,
</code></td></tr><tr><td id="L1674" class="css-a4x74f"><span>1674</span></td><td id="LC1674" class="css-1dcdqdg"><code>      labels = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.edges).sort(),
</code></td></tr><tr><td id="L1675" class="css-a4x74f"><span>1675</span></td><td id="LC1675" class="css-1dcdqdg"><code>      len = labels.length
</code></td></tr><tr><td id="L1676" class="css-a4x74f"><span>1676</span></td><td id="LC1676" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1677" class="css-a4x74f"><span>1677</span></td><td id="LC1677" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; len; i++) {
</code></td></tr><tr><td id="L1678" class="css-a4x74f"><span>1678</span></td><td id="LC1678" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> label = labels[i],
</code></td></tr><tr><td id="L1679" class="css-a4x74f"><span>1679</span></td><td id="LC1679" class="css-1dcdqdg"><code>        node = <span class="code-keyword">this</span>.edges[label]
</code></td></tr><tr><td id="L1680" class="css-a4x74f"><span>1680</span></td><td id="LC1680" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1681" class="css-a4x74f"><span>1681</span></td><td id="LC1681" class="css-1dcdqdg"><code>    str = str + label + node.id
</code></td></tr><tr><td id="L1682" class="css-a4x74f"><span>1682</span></td><td id="LC1682" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1683" class="css-a4x74f"><span>1683</span></td><td id="LC1683" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1684" class="css-a4x74f"><span>1684</span></td><td id="LC1684" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> str
</code></td></tr><tr><td id="L1685" class="css-a4x74f"><span>1685</span></td><td id="LC1685" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1686" class="css-a4x74f"><span>1686</span></td><td id="LC1686" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1687" class="css-a4x74f"><span>1687</span></td><td id="LC1687" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1688" class="css-a4x74f"><span>1688</span></td><td id="LC1688" class="css-1dcdqdg"><code><span class="code-comment"> * Returns a new TokenSet that is the intersection of
</span></code></td></tr><tr><td id="L1689" class="css-a4x74f"><span>1689</span></td><td id="LC1689" class="css-1dcdqdg"><code><span class="code-comment"> * this TokenSet and the passed TokenSet.
</span></code></td></tr><tr><td id="L1690" class="css-a4x74f"><span>1690</span></td><td id="LC1690" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1691" class="css-a4x74f"><span>1691</span></td><td id="LC1691" class="css-1dcdqdg"><code><span class="code-comment"> * This intersection will take into account any wildcards
</span></code></td></tr><tr><td id="L1692" class="css-a4x74f"><span>1692</span></td><td id="LC1692" class="css-1dcdqdg"><code><span class="code-comment"> * contained within the TokenSet.
</span></code></td></tr><tr><td id="L1693" class="css-a4x74f"><span>1693</span></td><td id="LC1693" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1694" class="css-a4x74f"><span>1694</span></td><td id="LC1694" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.TokenSet} b - An other TokenSet to intersect with.
</span></code></td></tr><tr><td id="L1695" class="css-a4x74f"><span>1695</span></td><td id="LC1695" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.TokenSet}
</span></code></td></tr><tr><td id="L1696" class="css-a4x74f"><span>1696</span></td><td id="LC1696" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1697" class="css-a4x74f"><span>1697</span></td><td id="LC1697" class="css-1dcdqdg"><code>lunr.TokenSet.prototype.intersect = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">b</span>) </span>{
</code></td></tr><tr><td id="L1698" class="css-a4x74f"><span>1698</span></td><td id="LC1698" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> output = <span class="code-keyword">new</span> lunr.TokenSet,
</code></td></tr><tr><td id="L1699" class="css-a4x74f"><span>1699</span></td><td id="LC1699" class="css-1dcdqdg"><code>      frame = <span class="code-literal">undefined</span>
</code></td></tr><tr><td id="L1700" class="css-a4x74f"><span>1700</span></td><td id="LC1700" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1701" class="css-a4x74f"><span>1701</span></td><td id="LC1701" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> stack = [{
</code></td></tr><tr><td id="L1702" class="css-a4x74f"><span>1702</span></td><td id="LC1702" class="css-1dcdqdg"><code>    qNode: b,
</code></td></tr><tr><td id="L1703" class="css-a4x74f"><span>1703</span></td><td id="LC1703" class="css-1dcdqdg"><code>    output: output,
</code></td></tr><tr><td id="L1704" class="css-a4x74f"><span>1704</span></td><td id="LC1704" class="css-1dcdqdg"><code>    node: <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L1705" class="css-a4x74f"><span>1705</span></td><td id="LC1705" class="css-1dcdqdg"><code>  }]
</code></td></tr><tr><td id="L1706" class="css-a4x74f"><span>1706</span></td><td id="LC1706" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1707" class="css-a4x74f"><span>1707</span></td><td id="LC1707" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (stack.length) {
</code></td></tr><tr><td id="L1708" class="css-a4x74f"><span>1708</span></td><td id="LC1708" class="css-1dcdqdg"><code>    frame = stack.pop()
</code></td></tr><tr><td id="L1709" class="css-a4x74f"><span>1709</span></td><td id="LC1709" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1710" class="css-a4x74f"><span>1710</span></td><td id="LC1710" class="css-1dcdqdg"><code>    <span class="code-comment">// <span class="code-doctag">NOTE:</span> As with the #toString method, we are using</span>
</code></td></tr><tr><td id="L1711" class="css-a4x74f"><span>1711</span></td><td id="LC1711" class="css-1dcdqdg"><code>    <span class="code-comment">// Object.keys and a for loop instead of a for-in loop</span>
</code></td></tr><tr><td id="L1712" class="css-a4x74f"><span>1712</span></td><td id="LC1712" class="css-1dcdqdg"><code>    <span class="code-comment">// as both of these objects enter 'hash' mode, causing</span>
</code></td></tr><tr><td id="L1713" class="css-a4x74f"><span>1713</span></td><td id="LC1713" class="css-1dcdqdg"><code>    <span class="code-comment">// the function to be de-optimised in V8</span>
</code></td></tr><tr><td id="L1714" class="css-a4x74f"><span>1714</span></td><td id="LC1714" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> qEdges = <span class="code-built_in">Object</span>.keys(frame.qNode.edges),
</code></td></tr><tr><td id="L1715" class="css-a4x74f"><span>1715</span></td><td id="LC1715" class="css-1dcdqdg"><code>        qLen = qEdges.length,
</code></td></tr><tr><td id="L1716" class="css-a4x74f"><span>1716</span></td><td id="LC1716" class="css-1dcdqdg"><code>        nEdges = <span class="code-built_in">Object</span>.keys(frame.node.edges),
</code></td></tr><tr><td id="L1717" class="css-a4x74f"><span>1717</span></td><td id="LC1717" class="css-1dcdqdg"><code>        nLen = nEdges.length
</code></td></tr><tr><td id="L1718" class="css-a4x74f"><span>1718</span></td><td id="LC1718" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1719" class="css-a4x74f"><span>1719</span></td><td id="LC1719" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> q = <span class="code-number">0</span>; q &lt; qLen; q++) {
</code></td></tr><tr><td id="L1720" class="css-a4x74f"><span>1720</span></td><td id="LC1720" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> qEdge = qEdges[q]
</code></td></tr><tr><td id="L1721" class="css-a4x74f"><span>1721</span></td><td id="LC1721" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1722" class="css-a4x74f"><span>1722</span></td><td id="LC1722" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">var</span> n = <span class="code-number">0</span>; n &lt; nLen; n++) {
</code></td></tr><tr><td id="L1723" class="css-a4x74f"><span>1723</span></td><td id="LC1723" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> nEdge = nEdges[n]
</code></td></tr><tr><td id="L1724" class="css-a4x74f"><span>1724</span></td><td id="LC1724" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1725" class="css-a4x74f"><span>1725</span></td><td id="LC1725" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (nEdge == qEdge || qEdge == <span class="code-string">'*'</span>) {
</code></td></tr><tr><td id="L1726" class="css-a4x74f"><span>1726</span></td><td id="LC1726" class="css-1dcdqdg"><code>          <span class="code-keyword">var</span> node = frame.node.edges[nEdge],
</code></td></tr><tr><td id="L1727" class="css-a4x74f"><span>1727</span></td><td id="LC1727" class="css-1dcdqdg"><code>              qNode = frame.qNode.edges[qEdge],
</code></td></tr><tr><td id="L1728" class="css-a4x74f"><span>1728</span></td><td id="LC1728" class="css-1dcdqdg"><code>              final = node.final &amp;&amp; qNode.final,
</code></td></tr><tr><td id="L1729" class="css-a4x74f"><span>1729</span></td><td id="LC1729" class="css-1dcdqdg"><code>              next = <span class="code-literal">undefined</span>
</code></td></tr><tr><td id="L1730" class="css-a4x74f"><span>1730</span></td><td id="LC1730" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1731" class="css-a4x74f"><span>1731</span></td><td id="LC1731" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (nEdge <span class="code-keyword">in</span> frame.output.edges) {
</code></td></tr><tr><td id="L1732" class="css-a4x74f"><span>1732</span></td><td id="LC1732" class="css-1dcdqdg"><code>            <span class="code-comment">// an edge already exists for this character</span>
</code></td></tr><tr><td id="L1733" class="css-a4x74f"><span>1733</span></td><td id="LC1733" class="css-1dcdqdg"><code>            <span class="code-comment">// no need to create a new node, just set the finality</span>
</code></td></tr><tr><td id="L1734" class="css-a4x74f"><span>1734</span></td><td id="LC1734" class="css-1dcdqdg"><code>            <span class="code-comment">// bit unless this node is already final</span>
</code></td></tr><tr><td id="L1735" class="css-a4x74f"><span>1735</span></td><td id="LC1735" class="css-1dcdqdg"><code>            next = frame.output.edges[nEdge]
</code></td></tr><tr><td id="L1736" class="css-a4x74f"><span>1736</span></td><td id="LC1736" class="css-1dcdqdg"><code>            next.final = next.final || final
</code></td></tr><tr><td id="L1737" class="css-a4x74f"><span>1737</span></td><td id="LC1737" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1738" class="css-a4x74f"><span>1738</span></td><td id="LC1738" class="css-1dcdqdg"><code>          } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1739" class="css-a4x74f"><span>1739</span></td><td id="LC1739" class="css-1dcdqdg"><code>            <span class="code-comment">// no edge exists yet, must create one</span>
</code></td></tr><tr><td id="L1740" class="css-a4x74f"><span>1740</span></td><td id="LC1740" class="css-1dcdqdg"><code>            <span class="code-comment">// set the finality bit and insert it</span>
</code></td></tr><tr><td id="L1741" class="css-a4x74f"><span>1741</span></td><td id="LC1741" class="css-1dcdqdg"><code>            <span class="code-comment">// into the output</span>
</code></td></tr><tr><td id="L1742" class="css-a4x74f"><span>1742</span></td><td id="LC1742" class="css-1dcdqdg"><code>            next = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1743" class="css-a4x74f"><span>1743</span></td><td id="LC1743" class="css-1dcdqdg"><code>            next.final = final
</code></td></tr><tr><td id="L1744" class="css-a4x74f"><span>1744</span></td><td id="LC1744" class="css-1dcdqdg"><code>            frame.output.edges[nEdge] = next
</code></td></tr><tr><td id="L1745" class="css-a4x74f"><span>1745</span></td><td id="LC1745" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L1746" class="css-a4x74f"><span>1746</span></td><td id="LC1746" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1747" class="css-a4x74f"><span>1747</span></td><td id="LC1747" class="css-1dcdqdg"><code>          stack.push({
</code></td></tr><tr><td id="L1748" class="css-a4x74f"><span>1748</span></td><td id="LC1748" class="css-1dcdqdg"><code>            qNode: qNode,
</code></td></tr><tr><td id="L1749" class="css-a4x74f"><span>1749</span></td><td id="LC1749" class="css-1dcdqdg"><code>            output: next,
</code></td></tr><tr><td id="L1750" class="css-a4x74f"><span>1750</span></td><td id="LC1750" class="css-1dcdqdg"><code>            node: node
</code></td></tr><tr><td id="L1751" class="css-a4x74f"><span>1751</span></td><td id="LC1751" class="css-1dcdqdg"><code>          })
</code></td></tr><tr><td id="L1752" class="css-a4x74f"><span>1752</span></td><td id="LC1752" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L1753" class="css-a4x74f"><span>1753</span></td><td id="LC1753" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L1754" class="css-a4x74f"><span>1754</span></td><td id="LC1754" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1755" class="css-a4x74f"><span>1755</span></td><td id="LC1755" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1756" class="css-a4x74f"><span>1756</span></td><td id="LC1756" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1757" class="css-a4x74f"><span>1757</span></td><td id="LC1757" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> output
</code></td></tr><tr><td id="L1758" class="css-a4x74f"><span>1758</span></td><td id="LC1758" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1759" class="css-a4x74f"><span>1759</span></td><td id="LC1759" class="css-1dcdqdg"><code>lunr.TokenSet.Builder = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1760" class="css-a4x74f"><span>1760</span></td><td id="LC1760" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.previousWord = <span class="code-string">""</span>
</code></td></tr><tr><td id="L1761" class="css-a4x74f"><span>1761</span></td><td id="LC1761" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.root = <span class="code-keyword">new</span> lunr.TokenSet
</code></td></tr><tr><td id="L1762" class="css-a4x74f"><span>1762</span></td><td id="LC1762" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.uncheckedNodes = []
</code></td></tr><tr><td id="L1763" class="css-a4x74f"><span>1763</span></td><td id="LC1763" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.minimizedNodes = {}
</code></td></tr><tr><td id="L1764" class="css-a4x74f"><span>1764</span></td><td id="LC1764" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1765" class="css-a4x74f"><span>1765</span></td><td id="LC1765" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1766" class="css-a4x74f"><span>1766</span></td><td id="LC1766" class="css-1dcdqdg"><code>lunr.TokenSet.Builder.prototype.insert = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">word</span>) </span>{
</code></td></tr><tr><td id="L1767" class="css-a4x74f"><span>1767</span></td><td id="LC1767" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> node,
</code></td></tr><tr><td id="L1768" class="css-a4x74f"><span>1768</span></td><td id="LC1768" class="css-1dcdqdg"><code>      commonPrefix = <span class="code-number">0</span>
</code></td></tr><tr><td id="L1769" class="css-a4x74f"><span>1769</span></td><td id="LC1769" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1770" class="css-a4x74f"><span>1770</span></td><td id="LC1770" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (word &lt; <span class="code-keyword">this</span>.previousWord) {
</code></td></tr><tr><td id="L1771" class="css-a4x74f"><span>1771</span></td><td id="LC1771" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">Error</span> (<span class="code-string">"Out of order word insertion"</span>)
</code></td></tr><tr><td id="L1772" class="css-a4x74f"><span>1772</span></td><td id="LC1772" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1773" class="css-a4x74f"><span>1773</span></td><td id="LC1773" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1774" class="css-a4x74f"><span>1774</span></td><td id="LC1774" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; word.length &amp;&amp; i &lt; <span class="code-keyword">this</span>.previousWord.length; i++) {
</code></td></tr><tr><td id="L1775" class="css-a4x74f"><span>1775</span></td><td id="LC1775" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (word[i] != <span class="code-keyword">this</span>.previousWord[i]) <span class="code-keyword">break</span>
</code></td></tr><tr><td id="L1776" class="css-a4x74f"><span>1776</span></td><td id="LC1776" class="css-1dcdqdg"><code>    commonPrefix++
</code></td></tr><tr><td id="L1777" class="css-a4x74f"><span>1777</span></td><td id="LC1777" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1778" class="css-a4x74f"><span>1778</span></td><td id="LC1778" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1779" class="css-a4x74f"><span>1779</span></td><td id="LC1779" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.minimize(commonPrefix)
</code></td></tr><tr><td id="L1780" class="css-a4x74f"><span>1780</span></td><td id="LC1780" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1781" class="css-a4x74f"><span>1781</span></td><td id="LC1781" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.uncheckedNodes.length == <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L1782" class="css-a4x74f"><span>1782</span></td><td id="LC1782" class="css-1dcdqdg"><code>    node = <span class="code-keyword">this</span>.root
</code></td></tr><tr><td id="L1783" class="css-a4x74f"><span>1783</span></td><td id="LC1783" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1784" class="css-a4x74f"><span>1784</span></td><td id="LC1784" class="css-1dcdqdg"><code>    node = <span class="code-keyword">this</span>.uncheckedNodes[<span class="code-keyword">this</span>.uncheckedNodes.length - <span class="code-number">1</span>].child
</code></td></tr><tr><td id="L1785" class="css-a4x74f"><span>1785</span></td><td id="LC1785" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1786" class="css-a4x74f"><span>1786</span></td><td id="LC1786" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1787" class="css-a4x74f"><span>1787</span></td><td id="LC1787" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = commonPrefix; i &lt; word.length; i++) {
</code></td></tr><tr><td id="L1788" class="css-a4x74f"><span>1788</span></td><td id="LC1788" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> nextNode = <span class="code-keyword">new</span> lunr.TokenSet,
</code></td></tr><tr><td id="L1789" class="css-a4x74f"><span>1789</span></td><td id="LC1789" class="css-1dcdqdg"><code>        char = word[i]
</code></td></tr><tr><td id="L1790" class="css-a4x74f"><span>1790</span></td><td id="LC1790" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1791" class="css-a4x74f"><span>1791</span></td><td id="LC1791" class="css-1dcdqdg"><code>    node.edges[char] = nextNode
</code></td></tr><tr><td id="L1792" class="css-a4x74f"><span>1792</span></td><td id="LC1792" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1793" class="css-a4x74f"><span>1793</span></td><td id="LC1793" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.uncheckedNodes.push({
</code></td></tr><tr><td id="L1794" class="css-a4x74f"><span>1794</span></td><td id="LC1794" class="css-1dcdqdg"><code>      parent: node,
</code></td></tr><tr><td id="L1795" class="css-a4x74f"><span>1795</span></td><td id="LC1795" class="css-1dcdqdg"><code>      char: char,
</code></td></tr><tr><td id="L1796" class="css-a4x74f"><span>1796</span></td><td id="LC1796" class="css-1dcdqdg"><code>      child: nextNode
</code></td></tr><tr><td id="L1797" class="css-a4x74f"><span>1797</span></td><td id="LC1797" class="css-1dcdqdg"><code>    })
</code></td></tr><tr><td id="L1798" class="css-a4x74f"><span>1798</span></td><td id="LC1798" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1799" class="css-a4x74f"><span>1799</span></td><td id="LC1799" class="css-1dcdqdg"><code>    node = nextNode
</code></td></tr><tr><td id="L1800" class="css-a4x74f"><span>1800</span></td><td id="LC1800" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1801" class="css-a4x74f"><span>1801</span></td><td id="LC1801" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1802" class="css-a4x74f"><span>1802</span></td><td id="LC1802" class="css-1dcdqdg"><code>  node.final = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L1803" class="css-a4x74f"><span>1803</span></td><td id="LC1803" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.previousWord = word
</code></td></tr><tr><td id="L1804" class="css-a4x74f"><span>1804</span></td><td id="LC1804" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1805" class="css-a4x74f"><span>1805</span></td><td id="LC1805" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1806" class="css-a4x74f"><span>1806</span></td><td id="LC1806" class="css-1dcdqdg"><code>lunr.TokenSet.Builder.prototype.finish = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L1807" class="css-a4x74f"><span>1807</span></td><td id="LC1807" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.minimize(<span class="code-number">0</span>)
</code></td></tr><tr><td id="L1808" class="css-a4x74f"><span>1808</span></td><td id="LC1808" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1809" class="css-a4x74f"><span>1809</span></td><td id="LC1809" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1810" class="css-a4x74f"><span>1810</span></td><td id="LC1810" class="css-1dcdqdg"><code>lunr.TokenSet.Builder.prototype.minimize = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">downTo</span>) </span>{
</code></td></tr><tr><td id="L1811" class="css-a4x74f"><span>1811</span></td><td id="LC1811" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-keyword">this</span>.uncheckedNodes.length - <span class="code-number">1</span>; i &gt;= downTo; i--) {
</code></td></tr><tr><td id="L1812" class="css-a4x74f"><span>1812</span></td><td id="LC1812" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> node = <span class="code-keyword">this</span>.uncheckedNodes[i],
</code></td></tr><tr><td id="L1813" class="css-a4x74f"><span>1813</span></td><td id="LC1813" class="css-1dcdqdg"><code>        childKey = node.child.toString()
</code></td></tr><tr><td id="L1814" class="css-a4x74f"><span>1814</span></td><td id="LC1814" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1815" class="css-a4x74f"><span>1815</span></td><td id="LC1815" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (childKey <span class="code-keyword">in</span> <span class="code-keyword">this</span>.minimizedNodes) {
</code></td></tr><tr><td id="L1816" class="css-a4x74f"><span>1816</span></td><td id="LC1816" class="css-1dcdqdg"><code>      node.parent.edges[node.char] = <span class="code-keyword">this</span>.minimizedNodes[childKey]
</code></td></tr><tr><td id="L1817" class="css-a4x74f"><span>1817</span></td><td id="LC1817" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L1818" class="css-a4x74f"><span>1818</span></td><td id="LC1818" class="css-1dcdqdg"><code>      <span class="code-comment">// Cache the key for this node since</span>
</code></td></tr><tr><td id="L1819" class="css-a4x74f"><span>1819</span></td><td id="LC1819" class="css-1dcdqdg"><code>      <span class="code-comment">// we know it can't change anymore</span>
</code></td></tr><tr><td id="L1820" class="css-a4x74f"><span>1820</span></td><td id="LC1820" class="css-1dcdqdg"><code>      node.child._str = childKey
</code></td></tr><tr><td id="L1821" class="css-a4x74f"><span>1821</span></td><td id="LC1821" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1822" class="css-a4x74f"><span>1822</span></td><td id="LC1822" class="css-1dcdqdg"><code>      <span class="code-keyword">this</span>.minimizedNodes[childKey] = node.child
</code></td></tr><tr><td id="L1823" class="css-a4x74f"><span>1823</span></td><td id="LC1823" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L1824" class="css-a4x74f"><span>1824</span></td><td id="LC1824" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1825" class="css-a4x74f"><span>1825</span></td><td id="LC1825" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.uncheckedNodes.pop()
</code></td></tr><tr><td id="L1826" class="css-a4x74f"><span>1826</span></td><td id="LC1826" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1827" class="css-a4x74f"><span>1827</span></td><td id="LC1827" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1828" class="css-a4x74f"><span>1828</span></td><td id="LC1828" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L1829" class="css-a4x74f"><span>1829</span></td><td id="LC1829" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Index
</span></code></td></tr><tr><td id="L1830" class="css-a4x74f"><span>1830</span></td><td id="LC1830" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L1831" class="css-a4x74f"><span>1831</span></td><td id="LC1831" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1832" class="css-a4x74f"><span>1832</span></td><td id="LC1832" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1833" class="css-a4x74f"><span>1833</span></td><td id="LC1833" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1834" class="css-a4x74f"><span>1834</span></td><td id="LC1834" class="css-1dcdqdg"><code><span class="code-comment"> * An index contains the built index of all documents and provides a query interface
</span></code></td></tr><tr><td id="L1835" class="css-a4x74f"><span>1835</span></td><td id="LC1835" class="css-1dcdqdg"><code><span class="code-comment"> * to the index.
</span></code></td></tr><tr><td id="L1836" class="css-a4x74f"><span>1836</span></td><td id="LC1836" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1837" class="css-a4x74f"><span>1837</span></td><td id="LC1837" class="css-1dcdqdg"><code><span class="code-comment"> * Usually instances of lunr.Index will not be created using this constructor, instead
</span></code></td></tr><tr><td id="L1838" class="css-a4x74f"><span>1838</span></td><td id="LC1838" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Builder should be used to construct new indexes, or lunr.Index.load should be
</span></code></td></tr><tr><td id="L1839" class="css-a4x74f"><span>1839</span></td><td id="LC1839" class="css-1dcdqdg"><code><span class="code-comment"> * used to load previously built and serialized indexes.
</span></code></td></tr><tr><td id="L1840" class="css-a4x74f"><span>1840</span></td><td id="LC1840" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1841" class="css-a4x74f"><span>1841</span></td><td id="LC1841" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L1842" class="css-a4x74f"><span>1842</span></td><td id="LC1842" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object} attrs - The attributes of the built search index.
</span></code></td></tr><tr><td id="L1843" class="css-a4x74f"><span>1843</span></td><td id="LC1843" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object} attrs.invertedIndex - An index of term/field to document reference.
</span></code></td></tr><tr><td id="L1844" class="css-a4x74f"><span>1844</span></td><td id="LC1844" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object&lt;string, lunr.Vector&gt;} attrs.fieldVectors - Field vectors
</span></code></td></tr><tr><td id="L1845" class="css-a4x74f"><span>1845</span></td><td id="LC1845" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.TokenSet} attrs.tokenSet - An set of all corpus tokens.
</span></code></td></tr><tr><td id="L1846" class="css-a4x74f"><span>1846</span></td><td id="LC1846" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string[]} attrs.fields - The names of indexed document fields.
</span></code></td></tr><tr><td id="L1847" class="css-a4x74f"><span>1847</span></td><td id="LC1847" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Pipeline} attrs.pipeline - The pipeline to use for search terms.
</span></code></td></tr><tr><td id="L1848" class="css-a4x74f"><span>1848</span></td><td id="LC1848" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1849" class="css-a4x74f"><span>1849</span></td><td id="LC1849" class="css-1dcdqdg"><code>lunr.Index = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">attrs</span>) </span>{
</code></td></tr><tr><td id="L1850" class="css-a4x74f"><span>1850</span></td><td id="LC1850" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.invertedIndex = attrs.invertedIndex
</code></td></tr><tr><td id="L1851" class="css-a4x74f"><span>1851</span></td><td id="LC1851" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.fieldVectors = attrs.fieldVectors
</code></td></tr><tr><td id="L1852" class="css-a4x74f"><span>1852</span></td><td id="LC1852" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.tokenSet = attrs.tokenSet
</code></td></tr><tr><td id="L1853" class="css-a4x74f"><span>1853</span></td><td id="LC1853" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.fields = attrs.fields
</code></td></tr><tr><td id="L1854" class="css-a4x74f"><span>1854</span></td><td id="LC1854" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.pipeline = attrs.pipeline
</code></td></tr><tr><td id="L1855" class="css-a4x74f"><span>1855</span></td><td id="LC1855" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1856" class="css-a4x74f"><span>1856</span></td><td id="LC1856" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1857" class="css-a4x74f"><span>1857</span></td><td id="LC1857" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1858" class="css-a4x74f"><span>1858</span></td><td id="LC1858" class="css-1dcdqdg"><code><span class="code-comment"> * A result contains details of a document matching a search query.
</span></code></td></tr><tr><td id="L1859" class="css-a4x74f"><span>1859</span></td><td id="LC1859" class="css-1dcdqdg"><code><span class="code-comment"> * @typedef {Object} lunr.Index~Result
</span></code></td></tr><tr><td id="L1860" class="css-a4x74f"><span>1860</span></td><td id="LC1860" class="css-1dcdqdg"><code><span class="code-comment"> * @property {string} ref - The reference of the document this result represents.
</span></code></td></tr><tr><td id="L1861" class="css-a4x74f"><span>1861</span></td><td id="LC1861" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} score - A number between 0 and 1 representing how similar this document is to the query.
</span></code></td></tr><tr><td id="L1862" class="css-a4x74f"><span>1862</span></td><td id="LC1862" class="css-1dcdqdg"><code><span class="code-comment"> * @property {lunr.MatchData} matchData - Contains metadata about this match including which term(s) caused the match.
</span></code></td></tr><tr><td id="L1863" class="css-a4x74f"><span>1863</span></td><td id="LC1863" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1864" class="css-a4x74f"><span>1864</span></td><td id="LC1864" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1865" class="css-a4x74f"><span>1865</span></td><td id="LC1865" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1866" class="css-a4x74f"><span>1866</span></td><td id="LC1866" class="css-1dcdqdg"><code><span class="code-comment"> * Although lunr provides the ability to create queries using lunr.Query, it also provides a simple
</span></code></td></tr><tr><td id="L1867" class="css-a4x74f"><span>1867</span></td><td id="LC1867" class="css-1dcdqdg"><code><span class="code-comment"> * query language which itself is parsed into an instance of lunr.Query.
</span></code></td></tr><tr><td id="L1868" class="css-a4x74f"><span>1868</span></td><td id="LC1868" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1869" class="css-a4x74f"><span>1869</span></td><td id="LC1869" class="css-1dcdqdg"><code><span class="code-comment"> * For programmatically building queries it is advised to directly use lunr.Query, the query language
</span></code></td></tr><tr><td id="L1870" class="css-a4x74f"><span>1870</span></td><td id="LC1870" class="css-1dcdqdg"><code><span class="code-comment"> * is best used for human entered text rather than program generated text.
</span></code></td></tr><tr><td id="L1871" class="css-a4x74f"><span>1871</span></td><td id="LC1871" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1872" class="css-a4x74f"><span>1872</span></td><td id="LC1872" class="css-1dcdqdg"><code><span class="code-comment"> * At its simplest queries can just be a single term, e.g. `hello`, multiple terms are also supported
</span></code></td></tr><tr><td id="L1873" class="css-a4x74f"><span>1873</span></td><td id="LC1873" class="css-1dcdqdg"><code><span class="code-comment"> * and will be combined with OR, e.g `hello world` will match documents that contain either 'hello'
</span></code></td></tr><tr><td id="L1874" class="css-a4x74f"><span>1874</span></td><td id="LC1874" class="css-1dcdqdg"><code><span class="code-comment"> * or 'world', though those that contain both will rank higher in the results.
</span></code></td></tr><tr><td id="L1875" class="css-a4x74f"><span>1875</span></td><td id="LC1875" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1876" class="css-a4x74f"><span>1876</span></td><td id="LC1876" class="css-1dcdqdg"><code><span class="code-comment"> * Wildcards can be included in terms to match one or more unspecified characters, these wildcards can
</span></code></td></tr><tr><td id="L1877" class="css-a4x74f"><span>1877</span></td><td id="LC1877" class="css-1dcdqdg"><code><span class="code-comment"> * be inserted anywhere within the term, and more than one wildcard can exist in a single term. Adding
</span></code></td></tr><tr><td id="L1878" class="css-a4x74f"><span>1878</span></td><td id="LC1878" class="css-1dcdqdg"><code><span class="code-comment"> * wildcards will increase the number of documents that will be found but can also have a negative
</span></code></td></tr><tr><td id="L1879" class="css-a4x74f"><span>1879</span></td><td id="LC1879" class="css-1dcdqdg"><code><span class="code-comment"> * impact on query performance, especially with wildcards at the beginning of a term.
</span></code></td></tr><tr><td id="L1880" class="css-a4x74f"><span>1880</span></td><td id="LC1880" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1881" class="css-a4x74f"><span>1881</span></td><td id="LC1881" class="css-1dcdqdg"><code><span class="code-comment"> * Terms can be restricted to specific fields, e.g. `title:hello`, only documents with the term
</span></code></td></tr><tr><td id="L1882" class="css-a4x74f"><span>1882</span></td><td id="LC1882" class="css-1dcdqdg"><code><span class="code-comment"> * hello in the title field will match this query. Using a field not present in the index will lead
</span></code></td></tr><tr><td id="L1883" class="css-a4x74f"><span>1883</span></td><td id="LC1883" class="css-1dcdqdg"><code><span class="code-comment"> * to an error being thrown.
</span></code></td></tr><tr><td id="L1884" class="css-a4x74f"><span>1884</span></td><td id="LC1884" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1885" class="css-a4x74f"><span>1885</span></td><td id="LC1885" class="css-1dcdqdg"><code><span class="code-comment"> * Modifiers can also be added to terms, lunr supports edit distance and boost modifiers on terms. A term
</span></code></td></tr><tr><td id="L1886" class="css-a4x74f"><span>1886</span></td><td id="LC1886" class="css-1dcdqdg"><code><span class="code-comment"> * boost will make documents matching that term score higher, e.g. `foo^5`. Edit distance is also supported
</span></code></td></tr><tr><td id="L1887" class="css-a4x74f"><span>1887</span></td><td id="LC1887" class="css-1dcdqdg"><code><span class="code-comment"> * to provide fuzzy matching, e.g. 'hello~2' will match documents with hello with an edit distance of 2.
</span></code></td></tr><tr><td id="L1888" class="css-a4x74f"><span>1888</span></td><td id="LC1888" class="css-1dcdqdg"><code><span class="code-comment"> * Avoid large values for edit distance to improve query performance.
</span></code></td></tr><tr><td id="L1889" class="css-a4x74f"><span>1889</span></td><td id="LC1889" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1890" class="css-a4x74f"><span>1890</span></td><td id="LC1890" class="css-1dcdqdg"><code><span class="code-comment"> * Each term also supports a presence modifier. By default a term's presence in document is optional, however
</span></code></td></tr><tr><td id="L1891" class="css-a4x74f"><span>1891</span></td><td id="LC1891" class="css-1dcdqdg"><code><span class="code-comment"> * this can be changed to either required or prohibited. For a term's presence to be required in a document the
</span></code></td></tr><tr><td id="L1892" class="css-a4x74f"><span>1892</span></td><td id="LC1892" class="css-1dcdqdg"><code><span class="code-comment"> * term should be prefixed with a '+', e.g. `+foo bar` is a search for documents that must contain 'foo' and
</span></code></td></tr><tr><td id="L1893" class="css-a4x74f"><span>1893</span></td><td id="LC1893" class="css-1dcdqdg"><code><span class="code-comment"> * optionally contain 'bar'. Conversely a leading '-' sets the terms presence to prohibited, i.e. it must not
</span></code></td></tr><tr><td id="L1894" class="css-a4x74f"><span>1894</span></td><td id="LC1894" class="css-1dcdqdg"><code><span class="code-comment"> * appear in a document, e.g. `-foo bar` is a search for documents that do not contain 'foo' but may contain 'bar'.
</span></code></td></tr><tr><td id="L1895" class="css-a4x74f"><span>1895</span></td><td id="LC1895" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1896" class="css-a4x74f"><span>1896</span></td><td id="LC1896" class="css-1dcdqdg"><code><span class="code-comment"> * To escape special characters the backslash character '\' can be used, this allows searches to include
</span></code></td></tr><tr><td id="L1897" class="css-a4x74f"><span>1897</span></td><td id="LC1897" class="css-1dcdqdg"><code><span class="code-comment"> * characters that would normally be considered modifiers, e.g. `foo\~2` will search for a term "foo~2" instead
</span></code></td></tr><tr><td id="L1898" class="css-a4x74f"><span>1898</span></td><td id="LC1898" class="css-1dcdqdg"><code><span class="code-comment"> * of attempting to apply a boost of 2 to the search term "foo".
</span></code></td></tr><tr><td id="L1899" class="css-a4x74f"><span>1899</span></td><td id="LC1899" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1900" class="css-a4x74f"><span>1900</span></td><td id="LC1900" class="css-1dcdqdg"><code><span class="code-comment"> * @typedef {string} lunr.Index~QueryString
</span></code></td></tr><tr><td id="L1901" class="css-a4x74f"><span>1901</span></td><td id="LC1901" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;Simple single term query&lt;/caption&gt;
</span></code></td></tr><tr><td id="L1902" class="css-a4x74f"><span>1902</span></td><td id="LC1902" class="css-1dcdqdg"><code><span class="code-comment"> * hello
</span></code></td></tr><tr><td id="L1903" class="css-a4x74f"><span>1903</span></td><td id="LC1903" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;Multiple term query&lt;/caption&gt;
</span></code></td></tr><tr><td id="L1904" class="css-a4x74f"><span>1904</span></td><td id="LC1904" class="css-1dcdqdg"><code><span class="code-comment"> * hello world
</span></code></td></tr><tr><td id="L1905" class="css-a4x74f"><span>1905</span></td><td id="LC1905" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;term scoped to a field&lt;/caption&gt;
</span></code></td></tr><tr><td id="L1906" class="css-a4x74f"><span>1906</span></td><td id="LC1906" class="css-1dcdqdg"><code><span class="code-comment"> * title:hello
</span></code></td></tr><tr><td id="L1907" class="css-a4x74f"><span>1907</span></td><td id="LC1907" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;term with a boost of 10&lt;/caption&gt;
</span></code></td></tr><tr><td id="L1908" class="css-a4x74f"><span>1908</span></td><td id="LC1908" class="css-1dcdqdg"><code><span class="code-comment"> * hello^10
</span></code></td></tr><tr><td id="L1909" class="css-a4x74f"><span>1909</span></td><td id="LC1909" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;term with an edit distance of 2&lt;/caption&gt;
</span></code></td></tr><tr><td id="L1910" class="css-a4x74f"><span>1910</span></td><td id="LC1910" class="css-1dcdqdg"><code><span class="code-comment"> * hello~2
</span></code></td></tr><tr><td id="L1911" class="css-a4x74f"><span>1911</span></td><td id="LC1911" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;terms with presence modifiers&lt;/caption&gt;
</span></code></td></tr><tr><td id="L1912" class="css-a4x74f"><span>1912</span></td><td id="LC1912" class="css-1dcdqdg"><code><span class="code-comment"> * -foo +bar baz
</span></code></td></tr><tr><td id="L1913" class="css-a4x74f"><span>1913</span></td><td id="LC1913" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1914" class="css-a4x74f"><span>1914</span></td><td id="LC1914" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1915" class="css-a4x74f"><span>1915</span></td><td id="LC1915" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1916" class="css-a4x74f"><span>1916</span></td><td id="LC1916" class="css-1dcdqdg"><code><span class="code-comment"> * Performs a search against the index using lunr query syntax.
</span></code></td></tr><tr><td id="L1917" class="css-a4x74f"><span>1917</span></td><td id="LC1917" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1918" class="css-a4x74f"><span>1918</span></td><td id="LC1918" class="css-1dcdqdg"><code><span class="code-comment"> * Results will be returned sorted by their score, the most relevant results
</span></code></td></tr><tr><td id="L1919" class="css-a4x74f"><span>1919</span></td><td id="LC1919" class="css-1dcdqdg"><code><span class="code-comment"> * will be returned first.  For details on how the score is calculated, please see
</span></code></td></tr><tr><td id="L1920" class="css-a4x74f"><span>1920</span></td><td id="LC1920" class="css-1dcdqdg"><code><span class="code-comment"> * the {@link https://lunrjs.com/guides/searching.html#scoring|guide}.
</span></code></td></tr><tr><td id="L1921" class="css-a4x74f"><span>1921</span></td><td id="LC1921" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1922" class="css-a4x74f"><span>1922</span></td><td id="LC1922" class="css-1dcdqdg"><code><span class="code-comment"> * For more programmatic querying use lunr.Index#query.
</span></code></td></tr><tr><td id="L1923" class="css-a4x74f"><span>1923</span></td><td id="LC1923" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1924" class="css-a4x74f"><span>1924</span></td><td id="LC1924" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Index~QueryString} queryString - A string containing a lunr query.
</span></code></td></tr><tr><td id="L1925" class="css-a4x74f"><span>1925</span></td><td id="LC1925" class="css-1dcdqdg"><code><span class="code-comment"> * @throws {lunr.QueryParseError} If the passed query string cannot be parsed.
</span></code></td></tr><tr><td id="L1926" class="css-a4x74f"><span>1926</span></td><td id="LC1926" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Index~Result[]}
</span></code></td></tr><tr><td id="L1927" class="css-a4x74f"><span>1927</span></td><td id="LC1927" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1928" class="css-a4x74f"><span>1928</span></td><td id="LC1928" class="css-1dcdqdg"><code>lunr.Index.prototype.search = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">queryString</span>) </span>{
</code></td></tr><tr><td id="L1929" class="css-a4x74f"><span>1929</span></td><td id="LC1929" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.query(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">query</span>) </span>{
</code></td></tr><tr><td id="L1930" class="css-a4x74f"><span>1930</span></td><td id="LC1930" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> parser = <span class="code-keyword">new</span> lunr.QueryParser(queryString, query)
</code></td></tr><tr><td id="L1931" class="css-a4x74f"><span>1931</span></td><td id="LC1931" class="css-1dcdqdg"><code>    parser.parse()
</code></td></tr><tr><td id="L1932" class="css-a4x74f"><span>1932</span></td><td id="LC1932" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L1933" class="css-a4x74f"><span>1933</span></td><td id="LC1933" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L1934" class="css-a4x74f"><span>1934</span></td><td id="LC1934" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1935" class="css-a4x74f"><span>1935</span></td><td id="LC1935" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1936" class="css-a4x74f"><span>1936</span></td><td id="LC1936" class="css-1dcdqdg"><code><span class="code-comment"> * A query builder callback provides a query object to be used to express
</span></code></td></tr><tr><td id="L1937" class="css-a4x74f"><span>1937</span></td><td id="LC1937" class="css-1dcdqdg"><code><span class="code-comment"> * the query to perform on the index.
</span></code></td></tr><tr><td id="L1938" class="css-a4x74f"><span>1938</span></td><td id="LC1938" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1939" class="css-a4x74f"><span>1939</span></td><td id="LC1939" class="css-1dcdqdg"><code><span class="code-comment"> * @callback lunr.Index~queryBuilder
</span></code></td></tr><tr><td id="L1940" class="css-a4x74f"><span>1940</span></td><td id="LC1940" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Query} query - The query object to build up.
</span></code></td></tr><tr><td id="L1941" class="css-a4x74f"><span>1941</span></td><td id="LC1941" class="css-1dcdqdg"><code><span class="code-comment"> * @this lunr.Query
</span></code></td></tr><tr><td id="L1942" class="css-a4x74f"><span>1942</span></td><td id="LC1942" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1943" class="css-a4x74f"><span>1943</span></td><td id="LC1943" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1944" class="css-a4x74f"><span>1944</span></td><td id="LC1944" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L1945" class="css-a4x74f"><span>1945</span></td><td id="LC1945" class="css-1dcdqdg"><code><span class="code-comment"> * Performs a query against the index using the yielded lunr.Query object.
</span></code></td></tr><tr><td id="L1946" class="css-a4x74f"><span>1946</span></td><td id="LC1946" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1947" class="css-a4x74f"><span>1947</span></td><td id="LC1947" class="css-1dcdqdg"><code><span class="code-comment"> * If performing programmatic queries against the index, this method is preferred
</span></code></td></tr><tr><td id="L1948" class="css-a4x74f"><span>1948</span></td><td id="LC1948" class="css-1dcdqdg"><code><span class="code-comment"> * over lunr.Index#search so as to avoid the additional query parsing overhead.
</span></code></td></tr><tr><td id="L1949" class="css-a4x74f"><span>1949</span></td><td id="LC1949" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1950" class="css-a4x74f"><span>1950</span></td><td id="LC1950" class="css-1dcdqdg"><code><span class="code-comment"> * A query object is yielded to the supplied function which should be used to
</span></code></td></tr><tr><td id="L1951" class="css-a4x74f"><span>1951</span></td><td id="LC1951" class="css-1dcdqdg"><code><span class="code-comment"> * express the query to be run against the index.
</span></code></td></tr><tr><td id="L1952" class="css-a4x74f"><span>1952</span></td><td id="LC1952" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1953" class="css-a4x74f"><span>1953</span></td><td id="LC1953" class="css-1dcdqdg"><code><span class="code-comment"> * Note that although this function takes a callback parameter it is _not_ an
</span></code></td></tr><tr><td id="L1954" class="css-a4x74f"><span>1954</span></td><td id="LC1954" class="css-1dcdqdg"><code><span class="code-comment"> * asynchronous operation, the callback is just yielded a query object to be
</span></code></td></tr><tr><td id="L1955" class="css-a4x74f"><span>1955</span></td><td id="LC1955" class="css-1dcdqdg"><code><span class="code-comment"> * customized.
</span></code></td></tr><tr><td id="L1956" class="css-a4x74f"><span>1956</span></td><td id="LC1956" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L1957" class="css-a4x74f"><span>1957</span></td><td id="LC1957" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Index~queryBuilder} fn - A function that is used to build the query.
</span></code></td></tr><tr><td id="L1958" class="css-a4x74f"><span>1958</span></td><td id="LC1958" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Index~Result[]}
</span></code></td></tr><tr><td id="L1959" class="css-a4x74f"><span>1959</span></td><td id="LC1959" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L1960" class="css-a4x74f"><span>1960</span></td><td id="LC1960" class="css-1dcdqdg"><code>lunr.Index.prototype.query = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L1961" class="css-a4x74f"><span>1961</span></td><td id="LC1961" class="css-1dcdqdg"><code>  <span class="code-comment">// for each query clause</span>
</code></td></tr><tr><td id="L1962" class="css-a4x74f"><span>1962</span></td><td id="LC1962" class="css-1dcdqdg"><code>  <span class="code-comment">// * process terms</span>
</code></td></tr><tr><td id="L1963" class="css-a4x74f"><span>1963</span></td><td id="LC1963" class="css-1dcdqdg"><code>  <span class="code-comment">// * expand terms from token set</span>
</code></td></tr><tr><td id="L1964" class="css-a4x74f"><span>1964</span></td><td id="LC1964" class="css-1dcdqdg"><code>  <span class="code-comment">// * find matching documents and metadata</span>
</code></td></tr><tr><td id="L1965" class="css-a4x74f"><span>1965</span></td><td id="LC1965" class="css-1dcdqdg"><code>  <span class="code-comment">// * get document vectors</span>
</code></td></tr><tr><td id="L1966" class="css-a4x74f"><span>1966</span></td><td id="LC1966" class="css-1dcdqdg"><code>  <span class="code-comment">// * score documents</span>
</code></td></tr><tr><td id="L1967" class="css-a4x74f"><span>1967</span></td><td id="LC1967" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1968" class="css-a4x74f"><span>1968</span></td><td id="LC1968" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> query = <span class="code-keyword">new</span> lunr.Query(<span class="code-keyword">this</span>.fields),
</code></td></tr><tr><td id="L1969" class="css-a4x74f"><span>1969</span></td><td id="LC1969" class="css-1dcdqdg"><code>      matchingFields = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>),
</code></td></tr><tr><td id="L1970" class="css-a4x74f"><span>1970</span></td><td id="LC1970" class="css-1dcdqdg"><code>      queryVectors = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>),
</code></td></tr><tr><td id="L1971" class="css-a4x74f"><span>1971</span></td><td id="LC1971" class="css-1dcdqdg"><code>      termFieldCache = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>),
</code></td></tr><tr><td id="L1972" class="css-a4x74f"><span>1972</span></td><td id="LC1972" class="css-1dcdqdg"><code>      requiredMatches = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>),
</code></td></tr><tr><td id="L1973" class="css-a4x74f"><span>1973</span></td><td id="LC1973" class="css-1dcdqdg"><code>      prohibitedMatches = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L1974" class="css-a4x74f"><span>1974</span></td><td id="LC1974" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1975" class="css-a4x74f"><span>1975</span></td><td id="LC1975" class="css-1dcdqdg"><code>  <span class="code-comment">/*
</span></code></td></tr><tr><td id="L1976" class="css-a4x74f"><span>1976</span></td><td id="LC1976" class="css-1dcdqdg"><code><span class="code-comment">   * To support field level boosts a query vector is created per
</span></code></td></tr><tr><td id="L1977" class="css-a4x74f"><span>1977</span></td><td id="LC1977" class="css-1dcdqdg"><code><span class="code-comment">   * field. An empty vector is eagerly created to support negated
</span></code></td></tr><tr><td id="L1978" class="css-a4x74f"><span>1978</span></td><td id="LC1978" class="css-1dcdqdg"><code><span class="code-comment">   * queries.
</span></code></td></tr><tr><td id="L1979" class="css-a4x74f"><span>1979</span></td><td id="LC1979" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L1980" class="css-a4x74f"><span>1980</span></td><td id="LC1980" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; <span class="code-keyword">this</span>.fields.length; i++) {
</code></td></tr><tr><td id="L1981" class="css-a4x74f"><span>1981</span></td><td id="LC1981" class="css-1dcdqdg"><code>    queryVectors[<span class="code-keyword">this</span>.fields[i]] = <span class="code-keyword">new</span> lunr.Vector
</code></td></tr><tr><td id="L1982" class="css-a4x74f"><span>1982</span></td><td id="LC1982" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L1983" class="css-a4x74f"><span>1983</span></td><td id="LC1983" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1984" class="css-a4x74f"><span>1984</span></td><td id="LC1984" class="css-1dcdqdg"><code>  fn.call(query, query)
</code></td></tr><tr><td id="L1985" class="css-a4x74f"><span>1985</span></td><td id="LC1985" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1986" class="css-a4x74f"><span>1986</span></td><td id="LC1986" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; query.clauses.length; i++) {
</code></td></tr><tr><td id="L1987" class="css-a4x74f"><span>1987</span></td><td id="LC1987" class="css-1dcdqdg"><code>    <span class="code-comment">/*
</span></code></td></tr><tr><td id="L1988" class="css-a4x74f"><span>1988</span></td><td id="LC1988" class="css-1dcdqdg"><code><span class="code-comment">     * Unless the pipeline has been disabled for this term, which is
</span></code></td></tr><tr><td id="L1989" class="css-a4x74f"><span>1989</span></td><td id="LC1989" class="css-1dcdqdg"><code><span class="code-comment">     * the case for terms with wildcards, we need to pass the clause
</span></code></td></tr><tr><td id="L1990" class="css-a4x74f"><span>1990</span></td><td id="LC1990" class="css-1dcdqdg"><code><span class="code-comment">     * term through the search pipeline. A pipeline returns an array
</span></code></td></tr><tr><td id="L1991" class="css-a4x74f"><span>1991</span></td><td id="LC1991" class="css-1dcdqdg"><code><span class="code-comment">     * of processed terms. Pipeline functions may expand the passed
</span></code></td></tr><tr><td id="L1992" class="css-a4x74f"><span>1992</span></td><td id="LC1992" class="css-1dcdqdg"><code><span class="code-comment">     * term, which means we may end up performing multiple index lookups
</span></code></td></tr><tr><td id="L1993" class="css-a4x74f"><span>1993</span></td><td id="LC1993" class="css-1dcdqdg"><code><span class="code-comment">     * for a single query term.
</span></code></td></tr><tr><td id="L1994" class="css-a4x74f"><span>1994</span></td><td id="LC1994" class="css-1dcdqdg"><code><span class="code-comment">     */</span>
</code></td></tr><tr><td id="L1995" class="css-a4x74f"><span>1995</span></td><td id="LC1995" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> clause = query.clauses[i],
</code></td></tr><tr><td id="L1996" class="css-a4x74f"><span>1996</span></td><td id="LC1996" class="css-1dcdqdg"><code>        terms = <span class="code-literal">null</span>,
</code></td></tr><tr><td id="L1997" class="css-a4x74f"><span>1997</span></td><td id="LC1997" class="css-1dcdqdg"><code>        clauseMatches = lunr.Set.empty
</code></td></tr><tr><td id="L1998" class="css-a4x74f"><span>1998</span></td><td id="LC1998" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L1999" class="css-a4x74f"><span>1999</span></td><td id="LC1999" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (clause.usePipeline) {
</code></td></tr><tr><td id="L2000" class="css-a4x74f"><span>2000</span></td><td id="LC2000" class="css-1dcdqdg"><code>      terms = <span class="code-keyword">this</span>.pipeline.runString(clause.term, {
</code></td></tr><tr><td id="L2001" class="css-a4x74f"><span>2001</span></td><td id="LC2001" class="css-1dcdqdg"><code>        fields: clause.fields
</code></td></tr><tr><td id="L2002" class="css-a4x74f"><span>2002</span></td><td id="LC2002" class="css-1dcdqdg"><code>      })
</code></td></tr><tr><td id="L2003" class="css-a4x74f"><span>2003</span></td><td id="LC2003" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2004" class="css-a4x74f"><span>2004</span></td><td id="LC2004" class="css-1dcdqdg"><code>      terms = [clause.term]
</code></td></tr><tr><td id="L2005" class="css-a4x74f"><span>2005</span></td><td id="LC2005" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2006" class="css-a4x74f"><span>2006</span></td><td id="LC2006" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2007" class="css-a4x74f"><span>2007</span></td><td id="LC2007" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> m = <span class="code-number">0</span>; m &lt; terms.length; m++) {
</code></td></tr><tr><td id="L2008" class="css-a4x74f"><span>2008</span></td><td id="LC2008" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> term = terms[m]
</code></td></tr><tr><td id="L2009" class="css-a4x74f"><span>2009</span></td><td id="LC2009" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2010" class="css-a4x74f"><span>2010</span></td><td id="LC2010" class="css-1dcdqdg"><code>      <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2011" class="css-a4x74f"><span>2011</span></td><td id="LC2011" class="css-1dcdqdg"><code><span class="code-comment">       * Each term returned from the pipeline needs to use the same query
</span></code></td></tr><tr><td id="L2012" class="css-a4x74f"><span>2012</span></td><td id="LC2012" class="css-1dcdqdg"><code><span class="code-comment">       * clause object, e.g. the same boost and or edit distance. The
</span></code></td></tr><tr><td id="L2013" class="css-a4x74f"><span>2013</span></td><td id="LC2013" class="css-1dcdqdg"><code><span class="code-comment">       * simplest way to do this is to re-use the clause object but mutate
</span></code></td></tr><tr><td id="L2014" class="css-a4x74f"><span>2014</span></td><td id="LC2014" class="css-1dcdqdg"><code><span class="code-comment">       * its term property.
</span></code></td></tr><tr><td id="L2015" class="css-a4x74f"><span>2015</span></td><td id="LC2015" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L2016" class="css-a4x74f"><span>2016</span></td><td id="LC2016" class="css-1dcdqdg"><code>      clause.term = term
</code></td></tr><tr><td id="L2017" class="css-a4x74f"><span>2017</span></td><td id="LC2017" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2018" class="css-a4x74f"><span>2018</span></td><td id="LC2018" class="css-1dcdqdg"><code>      <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2019" class="css-a4x74f"><span>2019</span></td><td id="LC2019" class="css-1dcdqdg"><code><span class="code-comment">       * From the term in the clause we create a token set which will then
</span></code></td></tr><tr><td id="L2020" class="css-a4x74f"><span>2020</span></td><td id="LC2020" class="css-1dcdqdg"><code><span class="code-comment">       * be used to intersect the indexes token set to get a list of terms
</span></code></td></tr><tr><td id="L2021" class="css-a4x74f"><span>2021</span></td><td id="LC2021" class="css-1dcdqdg"><code><span class="code-comment">       * to lookup in the inverted index
</span></code></td></tr><tr><td id="L2022" class="css-a4x74f"><span>2022</span></td><td id="LC2022" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L2023" class="css-a4x74f"><span>2023</span></td><td id="LC2023" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> termTokenSet = lunr.TokenSet.fromClause(clause),
</code></td></tr><tr><td id="L2024" class="css-a4x74f"><span>2024</span></td><td id="LC2024" class="css-1dcdqdg"><code>          expandedTerms = <span class="code-keyword">this</span>.tokenSet.intersect(termTokenSet).toArray()
</code></td></tr><tr><td id="L2025" class="css-a4x74f"><span>2025</span></td><td id="LC2025" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2026" class="css-a4x74f"><span>2026</span></td><td id="LC2026" class="css-1dcdqdg"><code>      <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2027" class="css-a4x74f"><span>2027</span></td><td id="LC2027" class="css-1dcdqdg"><code><span class="code-comment">       * If a term marked as required does not exist in the tokenSet it is
</span></code></td></tr><tr><td id="L2028" class="css-a4x74f"><span>2028</span></td><td id="LC2028" class="css-1dcdqdg"><code><span class="code-comment">       * impossible for the search to return any matches. We set all the field
</span></code></td></tr><tr><td id="L2029" class="css-a4x74f"><span>2029</span></td><td id="LC2029" class="css-1dcdqdg"><code><span class="code-comment">       * scoped required matches set to empty and stop examining any further
</span></code></td></tr><tr><td id="L2030" class="css-a4x74f"><span>2030</span></td><td id="LC2030" class="css-1dcdqdg"><code><span class="code-comment">       * clauses.
</span></code></td></tr><tr><td id="L2031" class="css-a4x74f"><span>2031</span></td><td id="LC2031" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L2032" class="css-a4x74f"><span>2032</span></td><td id="LC2032" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (expandedTerms.length === <span class="code-number">0</span> &amp;&amp; clause.presence === lunr.Query.presence.REQUIRED) {
</code></td></tr><tr><td id="L2033" class="css-a4x74f"><span>2033</span></td><td id="LC2033" class="css-1dcdqdg"><code>        <span class="code-keyword">for</span> (<span class="code-keyword">var</span> k = <span class="code-number">0</span>; k &lt; clause.fields.length; k++) {
</code></td></tr><tr><td id="L2034" class="css-a4x74f"><span>2034</span></td><td id="LC2034" class="css-1dcdqdg"><code>          <span class="code-keyword">var</span> field = clause.fields[k]
</code></td></tr><tr><td id="L2035" class="css-a4x74f"><span>2035</span></td><td id="LC2035" class="css-1dcdqdg"><code>          requiredMatches[field] = lunr.Set.empty
</code></td></tr><tr><td id="L2036" class="css-a4x74f"><span>2036</span></td><td id="LC2036" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L2037" class="css-a4x74f"><span>2037</span></td><td id="LC2037" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2038" class="css-a4x74f"><span>2038</span></td><td id="LC2038" class="css-1dcdqdg"><code>        <span class="code-keyword">break</span>
</code></td></tr><tr><td id="L2039" class="css-a4x74f"><span>2039</span></td><td id="LC2039" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2040" class="css-a4x74f"><span>2040</span></td><td id="LC2040" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2041" class="css-a4x74f"><span>2041</span></td><td id="LC2041" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">var</span> j = <span class="code-number">0</span>; j &lt; expandedTerms.length; j++) {
</code></td></tr><tr><td id="L2042" class="css-a4x74f"><span>2042</span></td><td id="LC2042" class="css-1dcdqdg"><code>        <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2043" class="css-a4x74f"><span>2043</span></td><td id="LC2043" class="css-1dcdqdg"><code><span class="code-comment">         * For each term get the posting and termIndex, this is required for
</span></code></td></tr><tr><td id="L2044" class="css-a4x74f"><span>2044</span></td><td id="LC2044" class="css-1dcdqdg"><code><span class="code-comment">         * building the query vector.
</span></code></td></tr><tr><td id="L2045" class="css-a4x74f"><span>2045</span></td><td id="LC2045" class="css-1dcdqdg"><code><span class="code-comment">         */</span>
</code></td></tr><tr><td id="L2046" class="css-a4x74f"><span>2046</span></td><td id="LC2046" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> expandedTerm = expandedTerms[j],
</code></td></tr><tr><td id="L2047" class="css-a4x74f"><span>2047</span></td><td id="LC2047" class="css-1dcdqdg"><code>            posting = <span class="code-keyword">this</span>.invertedIndex[expandedTerm],
</code></td></tr><tr><td id="L2048" class="css-a4x74f"><span>2048</span></td><td id="LC2048" class="css-1dcdqdg"><code>            termIndex = posting._index
</code></td></tr><tr><td id="L2049" class="css-a4x74f"><span>2049</span></td><td id="LC2049" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2050" class="css-a4x74f"><span>2050</span></td><td id="LC2050" class="css-1dcdqdg"><code>        <span class="code-keyword">for</span> (<span class="code-keyword">var</span> k = <span class="code-number">0</span>; k &lt; clause.fields.length; k++) {
</code></td></tr><tr><td id="L2051" class="css-a4x74f"><span>2051</span></td><td id="LC2051" class="css-1dcdqdg"><code>          <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2052" class="css-a4x74f"><span>2052</span></td><td id="LC2052" class="css-1dcdqdg"><code><span class="code-comment">           * For each field that this query term is scoped by (by default
</span></code></td></tr><tr><td id="L2053" class="css-a4x74f"><span>2053</span></td><td id="LC2053" class="css-1dcdqdg"><code><span class="code-comment">           * all fields are in scope) we need to get all the document refs
</span></code></td></tr><tr><td id="L2054" class="css-a4x74f"><span>2054</span></td><td id="LC2054" class="css-1dcdqdg"><code><span class="code-comment">           * that have this term in that field.
</span></code></td></tr><tr><td id="L2055" class="css-a4x74f"><span>2055</span></td><td id="LC2055" class="css-1dcdqdg"><code><span class="code-comment">           *
</span></code></td></tr><tr><td id="L2056" class="css-a4x74f"><span>2056</span></td><td id="LC2056" class="css-1dcdqdg"><code><span class="code-comment">           * The posting is the entry in the invertedIndex for the matching
</span></code></td></tr><tr><td id="L2057" class="css-a4x74f"><span>2057</span></td><td id="LC2057" class="css-1dcdqdg"><code><span class="code-comment">           * term from above.
</span></code></td></tr><tr><td id="L2058" class="css-a4x74f"><span>2058</span></td><td id="LC2058" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L2059" class="css-a4x74f"><span>2059</span></td><td id="LC2059" class="css-1dcdqdg"><code>          <span class="code-keyword">var</span> field = clause.fields[k],
</code></td></tr><tr><td id="L2060" class="css-a4x74f"><span>2060</span></td><td id="LC2060" class="css-1dcdqdg"><code>              fieldPosting = posting[field],
</code></td></tr><tr><td id="L2061" class="css-a4x74f"><span>2061</span></td><td id="LC2061" class="css-1dcdqdg"><code>              matchingDocumentRefs = <span class="code-built_in">Object</span>.keys(fieldPosting),
</code></td></tr><tr><td id="L2062" class="css-a4x74f"><span>2062</span></td><td id="LC2062" class="css-1dcdqdg"><code>              termField = expandedTerm + <span class="code-string">"/"</span> + field,
</code></td></tr><tr><td id="L2063" class="css-a4x74f"><span>2063</span></td><td id="LC2063" class="css-1dcdqdg"><code>              matchingDocumentsSet = <span class="code-keyword">new</span> lunr.Set(matchingDocumentRefs)
</code></td></tr><tr><td id="L2064" class="css-a4x74f"><span>2064</span></td><td id="LC2064" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2065" class="css-a4x74f"><span>2065</span></td><td id="LC2065" class="css-1dcdqdg"><code>          <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2066" class="css-a4x74f"><span>2066</span></td><td id="LC2066" class="css-1dcdqdg"><code><span class="code-comment">           * if the presence of this term is required ensure that the matching
</span></code></td></tr><tr><td id="L2067" class="css-a4x74f"><span>2067</span></td><td id="LC2067" class="css-1dcdqdg"><code><span class="code-comment">           * documents are added to the set of required matches for this clause.
</span></code></td></tr><tr><td id="L2068" class="css-a4x74f"><span>2068</span></td><td id="LC2068" class="css-1dcdqdg"><code><span class="code-comment">           *
</span></code></td></tr><tr><td id="L2069" class="css-a4x74f"><span>2069</span></td><td id="LC2069" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L2070" class="css-a4x74f"><span>2070</span></td><td id="LC2070" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (clause.presence == lunr.Query.presence.REQUIRED) {
</code></td></tr><tr><td id="L2071" class="css-a4x74f"><span>2071</span></td><td id="LC2071" class="css-1dcdqdg"><code>            clauseMatches = clauseMatches.union(matchingDocumentsSet)
</code></td></tr><tr><td id="L2072" class="css-a4x74f"><span>2072</span></td><td id="LC2072" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2073" class="css-a4x74f"><span>2073</span></td><td id="LC2073" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span> (requiredMatches[field] === <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2074" class="css-a4x74f"><span>2074</span></td><td id="LC2074" class="css-1dcdqdg"><code>              requiredMatches[field] = lunr.Set.complete
</code></td></tr><tr><td id="L2075" class="css-a4x74f"><span>2075</span></td><td id="LC2075" class="css-1dcdqdg"><code>            }
</code></td></tr><tr><td id="L2076" class="css-a4x74f"><span>2076</span></td><td id="LC2076" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2077" class="css-a4x74f"><span>2077</span></td><td id="LC2077" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2078" class="css-a4x74f"><span>2078</span></td><td id="LC2078" class="css-1dcdqdg"><code>          <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2079" class="css-a4x74f"><span>2079</span></td><td id="LC2079" class="css-1dcdqdg"><code><span class="code-comment">           * if the presence of this term is prohibited ensure that the matching
</span></code></td></tr><tr><td id="L2080" class="css-a4x74f"><span>2080</span></td><td id="LC2080" class="css-1dcdqdg"><code><span class="code-comment">           * documents are added to the set of prohibited matches for this field,
</span></code></td></tr><tr><td id="L2081" class="css-a4x74f"><span>2081</span></td><td id="LC2081" class="css-1dcdqdg"><code><span class="code-comment">           * creating that set if it does not yet exist.
</span></code></td></tr><tr><td id="L2082" class="css-a4x74f"><span>2082</span></td><td id="LC2082" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L2083" class="css-a4x74f"><span>2083</span></td><td id="LC2083" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (clause.presence == lunr.Query.presence.PROHIBITED) {
</code></td></tr><tr><td id="L2084" class="css-a4x74f"><span>2084</span></td><td id="LC2084" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span> (prohibitedMatches[field] === <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2085" class="css-a4x74f"><span>2085</span></td><td id="LC2085" class="css-1dcdqdg"><code>              prohibitedMatches[field] = lunr.Set.empty
</code></td></tr><tr><td id="L2086" class="css-a4x74f"><span>2086</span></td><td id="LC2086" class="css-1dcdqdg"><code>            }
</code></td></tr><tr><td id="L2087" class="css-a4x74f"><span>2087</span></td><td id="LC2087" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2088" class="css-a4x74f"><span>2088</span></td><td id="LC2088" class="css-1dcdqdg"><code>            prohibitedMatches[field] = prohibitedMatches[field].union(matchingDocumentsSet)
</code></td></tr><tr><td id="L2089" class="css-a4x74f"><span>2089</span></td><td id="LC2089" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2090" class="css-a4x74f"><span>2090</span></td><td id="LC2090" class="css-1dcdqdg"><code>            <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2091" class="css-a4x74f"><span>2091</span></td><td id="LC2091" class="css-1dcdqdg"><code><span class="code-comment">             * Prohibited matches should not be part of the query vector used for
</span></code></td></tr><tr><td id="L2092" class="css-a4x74f"><span>2092</span></td><td id="LC2092" class="css-1dcdqdg"><code><span class="code-comment">             * similarity scoring and no metadata should be extracted so we continue
</span></code></td></tr><tr><td id="L2093" class="css-a4x74f"><span>2093</span></td><td id="LC2093" class="css-1dcdqdg"><code><span class="code-comment">             * to the next field
</span></code></td></tr><tr><td id="L2094" class="css-a4x74f"><span>2094</span></td><td id="LC2094" class="css-1dcdqdg"><code><span class="code-comment">             */</span>
</code></td></tr><tr><td id="L2095" class="css-a4x74f"><span>2095</span></td><td id="LC2095" class="css-1dcdqdg"><code>            <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L2096" class="css-a4x74f"><span>2096</span></td><td id="LC2096" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2097" class="css-a4x74f"><span>2097</span></td><td id="LC2097" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2098" class="css-a4x74f"><span>2098</span></td><td id="LC2098" class="css-1dcdqdg"><code>          <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2099" class="css-a4x74f"><span>2099</span></td><td id="LC2099" class="css-1dcdqdg"><code><span class="code-comment">           * The query field vector is populated using the termIndex found for
</span></code></td></tr><tr><td id="L2100" class="css-a4x74f"><span>2100</span></td><td id="LC2100" class="css-1dcdqdg"><code><span class="code-comment">           * the term and a unit value with the appropriate boost applied.
</span></code></td></tr><tr><td id="L2101" class="css-a4x74f"><span>2101</span></td><td id="LC2101" class="css-1dcdqdg"><code><span class="code-comment">           * Using upsert because there could already be an entry in the vector
</span></code></td></tr><tr><td id="L2102" class="css-a4x74f"><span>2102</span></td><td id="LC2102" class="css-1dcdqdg"><code><span class="code-comment">           * for the term we are working with. In that case we just add the scores
</span></code></td></tr><tr><td id="L2103" class="css-a4x74f"><span>2103</span></td><td id="LC2103" class="css-1dcdqdg"><code><span class="code-comment">           * together.
</span></code></td></tr><tr><td id="L2104" class="css-a4x74f"><span>2104</span></td><td id="LC2104" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L2105" class="css-a4x74f"><span>2105</span></td><td id="LC2105" class="css-1dcdqdg"><code>          queryVectors[field].upsert(termIndex, clause.boost, <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">a, b</span>) </span>{ <span class="code-keyword">return</span> a + b })
</code></td></tr><tr><td id="L2106" class="css-a4x74f"><span>2106</span></td><td id="LC2106" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2107" class="css-a4x74f"><span>2107</span></td><td id="LC2107" class="css-1dcdqdg"><code>          <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2108" class="css-a4x74f"><span>2108</span></td><td id="LC2108" class="css-1dcdqdg"><code><span class="code-comment">           * If we've already seen this term, field combo then we've already collected
</span></code></td></tr><tr><td id="L2109" class="css-a4x74f"><span>2109</span></td><td id="LC2109" class="css-1dcdqdg"><code><span class="code-comment">           * the matching documents and metadata, no need to go through all that again
</span></code></td></tr><tr><td id="L2110" class="css-a4x74f"><span>2110</span></td><td id="LC2110" class="css-1dcdqdg"><code><span class="code-comment">           */</span>
</code></td></tr><tr><td id="L2111" class="css-a4x74f"><span>2111</span></td><td id="LC2111" class="css-1dcdqdg"><code>          <span class="code-keyword">if</span> (termFieldCache[termField]) {
</code></td></tr><tr><td id="L2112" class="css-a4x74f"><span>2112</span></td><td id="LC2112" class="css-1dcdqdg"><code>            <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L2113" class="css-a4x74f"><span>2113</span></td><td id="LC2113" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2114" class="css-a4x74f"><span>2114</span></td><td id="LC2114" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2115" class="css-a4x74f"><span>2115</span></td><td id="LC2115" class="css-1dcdqdg"><code>          <span class="code-keyword">for</span> (<span class="code-keyword">var</span> l = <span class="code-number">0</span>; l &lt; matchingDocumentRefs.length; l++) {
</code></td></tr><tr><td id="L2116" class="css-a4x74f"><span>2116</span></td><td id="LC2116" class="css-1dcdqdg"><code>            <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2117" class="css-a4x74f"><span>2117</span></td><td id="LC2117" class="css-1dcdqdg"><code><span class="code-comment">             * All metadata for this term/field/document triple
</span></code></td></tr><tr><td id="L2118" class="css-a4x74f"><span>2118</span></td><td id="LC2118" class="css-1dcdqdg"><code><span class="code-comment">             * are then extracted and collected into an instance
</span></code></td></tr><tr><td id="L2119" class="css-a4x74f"><span>2119</span></td><td id="LC2119" class="css-1dcdqdg"><code><span class="code-comment">             * of lunr.MatchData ready to be returned in the query
</span></code></td></tr><tr><td id="L2120" class="css-a4x74f"><span>2120</span></td><td id="LC2120" class="css-1dcdqdg"><code><span class="code-comment">             * results
</span></code></td></tr><tr><td id="L2121" class="css-a4x74f"><span>2121</span></td><td id="LC2121" class="css-1dcdqdg"><code><span class="code-comment">             */</span>
</code></td></tr><tr><td id="L2122" class="css-a4x74f"><span>2122</span></td><td id="LC2122" class="css-1dcdqdg"><code>            <span class="code-keyword">var</span> matchingDocumentRef = matchingDocumentRefs[l],
</code></td></tr><tr><td id="L2123" class="css-a4x74f"><span>2123</span></td><td id="LC2123" class="css-1dcdqdg"><code>                matchingFieldRef = <span class="code-keyword">new</span> lunr.FieldRef (matchingDocumentRef, field),
</code></td></tr><tr><td id="L2124" class="css-a4x74f"><span>2124</span></td><td id="LC2124" class="css-1dcdqdg"><code>                metadata = fieldPosting[matchingDocumentRef],
</code></td></tr><tr><td id="L2125" class="css-a4x74f"><span>2125</span></td><td id="LC2125" class="css-1dcdqdg"><code>                fieldMatch
</code></td></tr><tr><td id="L2126" class="css-a4x74f"><span>2126</span></td><td id="LC2126" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2127" class="css-a4x74f"><span>2127</span></td><td id="LC2127" class="css-1dcdqdg"><code>            <span class="code-keyword">if</span> ((fieldMatch = matchingFields[matchingFieldRef]) === <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2128" class="css-a4x74f"><span>2128</span></td><td id="LC2128" class="css-1dcdqdg"><code>              matchingFields[matchingFieldRef] = <span class="code-keyword">new</span> lunr.MatchData (expandedTerm, field, metadata)
</code></td></tr><tr><td id="L2129" class="css-a4x74f"><span>2129</span></td><td id="LC2129" class="css-1dcdqdg"><code>            } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2130" class="css-a4x74f"><span>2130</span></td><td id="LC2130" class="css-1dcdqdg"><code>              fieldMatch.add(expandedTerm, field, metadata)
</code></td></tr><tr><td id="L2131" class="css-a4x74f"><span>2131</span></td><td id="LC2131" class="css-1dcdqdg"><code>            }
</code></td></tr><tr><td id="L2132" class="css-a4x74f"><span>2132</span></td><td id="LC2132" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2133" class="css-a4x74f"><span>2133</span></td><td id="LC2133" class="css-1dcdqdg"><code>          }
</code></td></tr><tr><td id="L2134" class="css-a4x74f"><span>2134</span></td><td id="LC2134" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2135" class="css-a4x74f"><span>2135</span></td><td id="LC2135" class="css-1dcdqdg"><code>          termFieldCache[termField] = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L2136" class="css-a4x74f"><span>2136</span></td><td id="LC2136" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L2137" class="css-a4x74f"><span>2137</span></td><td id="LC2137" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2138" class="css-a4x74f"><span>2138</span></td><td id="LC2138" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2139" class="css-a4x74f"><span>2139</span></td><td id="LC2139" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2140" class="css-a4x74f"><span>2140</span></td><td id="LC2140" class="css-1dcdqdg"><code>    <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2141" class="css-a4x74f"><span>2141</span></td><td id="LC2141" class="css-1dcdqdg"><code><span class="code-comment">     * If the presence was required we need to update the requiredMatches field sets.
</span></code></td></tr><tr><td id="L2142" class="css-a4x74f"><span>2142</span></td><td id="LC2142" class="css-1dcdqdg"><code><span class="code-comment">     * We do this after all fields for the term have collected their matches because
</span></code></td></tr><tr><td id="L2143" class="css-a4x74f"><span>2143</span></td><td id="LC2143" class="css-1dcdqdg"><code><span class="code-comment">     * the clause terms presence is required in _any_ of the fields not _all_ of the
</span></code></td></tr><tr><td id="L2144" class="css-a4x74f"><span>2144</span></td><td id="LC2144" class="css-1dcdqdg"><code><span class="code-comment">     * fields.
</span></code></td></tr><tr><td id="L2145" class="css-a4x74f"><span>2145</span></td><td id="LC2145" class="css-1dcdqdg"><code><span class="code-comment">     */</span>
</code></td></tr><tr><td id="L2146" class="css-a4x74f"><span>2146</span></td><td id="LC2146" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (clause.presence === lunr.Query.presence.REQUIRED) {
</code></td></tr><tr><td id="L2147" class="css-a4x74f"><span>2147</span></td><td id="LC2147" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">var</span> k = <span class="code-number">0</span>; k &lt; clause.fields.length; k++) {
</code></td></tr><tr><td id="L2148" class="css-a4x74f"><span>2148</span></td><td id="LC2148" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> field = clause.fields[k]
</code></td></tr><tr><td id="L2149" class="css-a4x74f"><span>2149</span></td><td id="LC2149" class="css-1dcdqdg"><code>        requiredMatches[field] = requiredMatches[field].intersect(clauseMatches)
</code></td></tr><tr><td id="L2150" class="css-a4x74f"><span>2150</span></td><td id="LC2150" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2151" class="css-a4x74f"><span>2151</span></td><td id="LC2151" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2152" class="css-a4x74f"><span>2152</span></td><td id="LC2152" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2153" class="css-a4x74f"><span>2153</span></td><td id="LC2153" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2154" class="css-a4x74f"><span>2154</span></td><td id="LC2154" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2155" class="css-a4x74f"><span>2155</span></td><td id="LC2155" class="css-1dcdqdg"><code><span class="code-comment">   * Need to combine the field scoped required and prohibited
</span></code></td></tr><tr><td id="L2156" class="css-a4x74f"><span>2156</span></td><td id="LC2156" class="css-1dcdqdg"><code><span class="code-comment">   * matching documents into a global set of required and prohibited
</span></code></td></tr><tr><td id="L2157" class="css-a4x74f"><span>2157</span></td><td id="LC2157" class="css-1dcdqdg"><code><span class="code-comment">   * matches
</span></code></td></tr><tr><td id="L2158" class="css-a4x74f"><span>2158</span></td><td id="LC2158" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2159" class="css-a4x74f"><span>2159</span></td><td id="LC2159" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> allRequiredMatches = lunr.Set.complete,
</code></td></tr><tr><td id="L2160" class="css-a4x74f"><span>2160</span></td><td id="LC2160" class="css-1dcdqdg"><code>      allProhibitedMatches = lunr.Set.empty
</code></td></tr><tr><td id="L2161" class="css-a4x74f"><span>2161</span></td><td id="LC2161" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2162" class="css-a4x74f"><span>2162</span></td><td id="LC2162" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; <span class="code-keyword">this</span>.fields.length; i++) {
</code></td></tr><tr><td id="L2163" class="css-a4x74f"><span>2163</span></td><td id="LC2163" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> field = <span class="code-keyword">this</span>.fields[i]
</code></td></tr><tr><td id="L2164" class="css-a4x74f"><span>2164</span></td><td id="LC2164" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2165" class="css-a4x74f"><span>2165</span></td><td id="LC2165" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (requiredMatches[field]) {
</code></td></tr><tr><td id="L2166" class="css-a4x74f"><span>2166</span></td><td id="LC2166" class="css-1dcdqdg"><code>      allRequiredMatches = allRequiredMatches.intersect(requiredMatches[field])
</code></td></tr><tr><td id="L2167" class="css-a4x74f"><span>2167</span></td><td id="LC2167" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2168" class="css-a4x74f"><span>2168</span></td><td id="LC2168" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2169" class="css-a4x74f"><span>2169</span></td><td id="LC2169" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (prohibitedMatches[field]) {
</code></td></tr><tr><td id="L2170" class="css-a4x74f"><span>2170</span></td><td id="LC2170" class="css-1dcdqdg"><code>      allProhibitedMatches = allProhibitedMatches.union(prohibitedMatches[field])
</code></td></tr><tr><td id="L2171" class="css-a4x74f"><span>2171</span></td><td id="LC2171" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2172" class="css-a4x74f"><span>2172</span></td><td id="LC2172" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2173" class="css-a4x74f"><span>2173</span></td><td id="LC2173" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2174" class="css-a4x74f"><span>2174</span></td><td id="LC2174" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> matchingFieldRefs = <span class="code-built_in">Object</span>.keys(matchingFields),
</code></td></tr><tr><td id="L2175" class="css-a4x74f"><span>2175</span></td><td id="LC2175" class="css-1dcdqdg"><code>      results = [],
</code></td></tr><tr><td id="L2176" class="css-a4x74f"><span>2176</span></td><td id="LC2176" class="css-1dcdqdg"><code>      matches = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2177" class="css-a4x74f"><span>2177</span></td><td id="LC2177" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2178" class="css-a4x74f"><span>2178</span></td><td id="LC2178" class="css-1dcdqdg"><code>  <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2179" class="css-a4x74f"><span>2179</span></td><td id="LC2179" class="css-1dcdqdg"><code><span class="code-comment">   * If the query is negated (contains only prohibited terms)
</span></code></td></tr><tr><td id="L2180" class="css-a4x74f"><span>2180</span></td><td id="LC2180" class="css-1dcdqdg"><code><span class="code-comment">   * we need to get _all_ fieldRefs currently existing in the
</span></code></td></tr><tr><td id="L2181" class="css-a4x74f"><span>2181</span></td><td id="LC2181" class="css-1dcdqdg"><code><span class="code-comment">   * index. This is only done when we know that the query is
</span></code></td></tr><tr><td id="L2182" class="css-a4x74f"><span>2182</span></td><td id="LC2182" class="css-1dcdqdg"><code><span class="code-comment">   * entirely prohibited terms to avoid any cost of getting all
</span></code></td></tr><tr><td id="L2183" class="css-a4x74f"><span>2183</span></td><td id="LC2183" class="css-1dcdqdg"><code><span class="code-comment">   * fieldRefs unnecessarily.
</span></code></td></tr><tr><td id="L2184" class="css-a4x74f"><span>2184</span></td><td id="LC2184" class="css-1dcdqdg"><code><span class="code-comment">   *
</span></code></td></tr><tr><td id="L2185" class="css-a4x74f"><span>2185</span></td><td id="LC2185" class="css-1dcdqdg"><code><span class="code-comment">   * Additionally, blank MatchData must be created to correctly
</span></code></td></tr><tr><td id="L2186" class="css-a4x74f"><span>2186</span></td><td id="LC2186" class="css-1dcdqdg"><code><span class="code-comment">   * populate the results.
</span></code></td></tr><tr><td id="L2187" class="css-a4x74f"><span>2187</span></td><td id="LC2187" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2188" class="css-a4x74f"><span>2188</span></td><td id="LC2188" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (query.isNegated()) {
</code></td></tr><tr><td id="L2189" class="css-a4x74f"><span>2189</span></td><td id="LC2189" class="css-1dcdqdg"><code>    matchingFieldRefs = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.fieldVectors)
</code></td></tr><tr><td id="L2190" class="css-a4x74f"><span>2190</span></td><td id="LC2190" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2191" class="css-a4x74f"><span>2191</span></td><td id="LC2191" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; matchingFieldRefs.length; i++) {
</code></td></tr><tr><td id="L2192" class="css-a4x74f"><span>2192</span></td><td id="LC2192" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> matchingFieldRef = matchingFieldRefs[i]
</code></td></tr><tr><td id="L2193" class="css-a4x74f"><span>2193</span></td><td id="LC2193" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> fieldRef = lunr.FieldRef.fromString(matchingFieldRef)
</code></td></tr><tr><td id="L2194" class="css-a4x74f"><span>2194</span></td><td id="LC2194" class="css-1dcdqdg"><code>      matchingFields[matchingFieldRef] = <span class="code-keyword">new</span> lunr.MatchData
</code></td></tr><tr><td id="L2195" class="css-a4x74f"><span>2195</span></td><td id="LC2195" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2196" class="css-a4x74f"><span>2196</span></td><td id="LC2196" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2197" class="css-a4x74f"><span>2197</span></td><td id="LC2197" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2198" class="css-a4x74f"><span>2198</span></td><td id="LC2198" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; matchingFieldRefs.length; i++) {
</code></td></tr><tr><td id="L2199" class="css-a4x74f"><span>2199</span></td><td id="LC2199" class="css-1dcdqdg"><code>    <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2200" class="css-a4x74f"><span>2200</span></td><td id="LC2200" class="css-1dcdqdg"><code><span class="code-comment">     * Currently we have document fields that match the query, but we
</span></code></td></tr><tr><td id="L2201" class="css-a4x74f"><span>2201</span></td><td id="LC2201" class="css-1dcdqdg"><code><span class="code-comment">     * need to return documents. The matchData and scores are combined
</span></code></td></tr><tr><td id="L2202" class="css-a4x74f"><span>2202</span></td><td id="LC2202" class="css-1dcdqdg"><code><span class="code-comment">     * from multiple fields belonging to the same document.
</span></code></td></tr><tr><td id="L2203" class="css-a4x74f"><span>2203</span></td><td id="LC2203" class="css-1dcdqdg"><code><span class="code-comment">     *
</span></code></td></tr><tr><td id="L2204" class="css-a4x74f"><span>2204</span></td><td id="LC2204" class="css-1dcdqdg"><code><span class="code-comment">     * Scores are calculated by field, using the query vectors created
</span></code></td></tr><tr><td id="L2205" class="css-a4x74f"><span>2205</span></td><td id="LC2205" class="css-1dcdqdg"><code><span class="code-comment">     * above, and combined into a final document score using addition.
</span></code></td></tr><tr><td id="L2206" class="css-a4x74f"><span>2206</span></td><td id="LC2206" class="css-1dcdqdg"><code><span class="code-comment">     */</span>
</code></td></tr><tr><td id="L2207" class="css-a4x74f"><span>2207</span></td><td id="LC2207" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fieldRef = lunr.FieldRef.fromString(matchingFieldRefs[i]),
</code></td></tr><tr><td id="L2208" class="css-a4x74f"><span>2208</span></td><td id="LC2208" class="css-1dcdqdg"><code>        docRef = fieldRef.docRef
</code></td></tr><tr><td id="L2209" class="css-a4x74f"><span>2209</span></td><td id="LC2209" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2210" class="css-a4x74f"><span>2210</span></td><td id="LC2210" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (!allRequiredMatches.contains(docRef)) {
</code></td></tr><tr><td id="L2211" class="css-a4x74f"><span>2211</span></td><td id="LC2211" class="css-1dcdqdg"><code>      <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L2212" class="css-a4x74f"><span>2212</span></td><td id="LC2212" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2213" class="css-a4x74f"><span>2213</span></td><td id="LC2213" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2214" class="css-a4x74f"><span>2214</span></td><td id="LC2214" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (allProhibitedMatches.contains(docRef)) {
</code></td></tr><tr><td id="L2215" class="css-a4x74f"><span>2215</span></td><td id="LC2215" class="css-1dcdqdg"><code>      <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L2216" class="css-a4x74f"><span>2216</span></td><td id="LC2216" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2217" class="css-a4x74f"><span>2217</span></td><td id="LC2217" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2218" class="css-a4x74f"><span>2218</span></td><td id="LC2218" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fieldVector = <span class="code-keyword">this</span>.fieldVectors[fieldRef],
</code></td></tr><tr><td id="L2219" class="css-a4x74f"><span>2219</span></td><td id="LC2219" class="css-1dcdqdg"><code>        score = queryVectors[fieldRef.fieldName].similarity(fieldVector),
</code></td></tr><tr><td id="L2220" class="css-a4x74f"><span>2220</span></td><td id="LC2220" class="css-1dcdqdg"><code>        docMatch
</code></td></tr><tr><td id="L2221" class="css-a4x74f"><span>2221</span></td><td id="LC2221" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2222" class="css-a4x74f"><span>2222</span></td><td id="LC2222" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> ((docMatch = matches[docRef]) !== <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2223" class="css-a4x74f"><span>2223</span></td><td id="LC2223" class="css-1dcdqdg"><code>      docMatch.score += score
</code></td></tr><tr><td id="L2224" class="css-a4x74f"><span>2224</span></td><td id="LC2224" class="css-1dcdqdg"><code>      docMatch.matchData.combine(matchingFields[fieldRef])
</code></td></tr><tr><td id="L2225" class="css-a4x74f"><span>2225</span></td><td id="LC2225" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2226" class="css-a4x74f"><span>2226</span></td><td id="LC2226" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> match = {
</code></td></tr><tr><td id="L2227" class="css-a4x74f"><span>2227</span></td><td id="LC2227" class="css-1dcdqdg"><code>        ref: docRef,
</code></td></tr><tr><td id="L2228" class="css-a4x74f"><span>2228</span></td><td id="LC2228" class="css-1dcdqdg"><code>        score: score,
</code></td></tr><tr><td id="L2229" class="css-a4x74f"><span>2229</span></td><td id="LC2229" class="css-1dcdqdg"><code>        matchData: matchingFields[fieldRef]
</code></td></tr><tr><td id="L2230" class="css-a4x74f"><span>2230</span></td><td id="LC2230" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2231" class="css-a4x74f"><span>2231</span></td><td id="LC2231" class="css-1dcdqdg"><code>      matches[docRef] = match
</code></td></tr><tr><td id="L2232" class="css-a4x74f"><span>2232</span></td><td id="LC2232" class="css-1dcdqdg"><code>      results.push(match)
</code></td></tr><tr><td id="L2233" class="css-a4x74f"><span>2233</span></td><td id="LC2233" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2234" class="css-a4x74f"><span>2234</span></td><td id="LC2234" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2235" class="css-a4x74f"><span>2235</span></td><td id="LC2235" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2236" class="css-a4x74f"><span>2236</span></td><td id="LC2236" class="css-1dcdqdg"><code>  <span class="code-comment">/*
</span></code></td></tr><tr><td id="L2237" class="css-a4x74f"><span>2237</span></td><td id="LC2237" class="css-1dcdqdg"><code><span class="code-comment">   * Sort the results objects by score, highest first.
</span></code></td></tr><tr><td id="L2238" class="css-a4x74f"><span>2238</span></td><td id="LC2238" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2239" class="css-a4x74f"><span>2239</span></td><td id="LC2239" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> results.sort(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">a, b</span>) </span>{
</code></td></tr><tr><td id="L2240" class="css-a4x74f"><span>2240</span></td><td id="LC2240" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> b.score - a.score
</code></td></tr><tr><td id="L2241" class="css-a4x74f"><span>2241</span></td><td id="LC2241" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L2242" class="css-a4x74f"><span>2242</span></td><td id="LC2242" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2243" class="css-a4x74f"><span>2243</span></td><td id="LC2243" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2244" class="css-a4x74f"><span>2244</span></td><td id="LC2244" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2245" class="css-a4x74f"><span>2245</span></td><td id="LC2245" class="css-1dcdqdg"><code><span class="code-comment"> * Prepares the index for JSON serialization.
</span></code></td></tr><tr><td id="L2246" class="css-a4x74f"><span>2246</span></td><td id="LC2246" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2247" class="css-a4x74f"><span>2247</span></td><td id="LC2247" class="css-1dcdqdg"><code><span class="code-comment"> * The schema for this JSON blob will be described in a
</span></code></td></tr><tr><td id="L2248" class="css-a4x74f"><span>2248</span></td><td id="LC2248" class="css-1dcdqdg"><code><span class="code-comment"> * separate JSON schema file.
</span></code></td></tr><tr><td id="L2249" class="css-a4x74f"><span>2249</span></td><td id="LC2249" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2250" class="css-a4x74f"><span>2250</span></td><td id="LC2250" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {Object}
</span></code></td></tr><tr><td id="L2251" class="css-a4x74f"><span>2251</span></td><td id="LC2251" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2252" class="css-a4x74f"><span>2252</span></td><td id="LC2252" class="css-1dcdqdg"><code>lunr.Index.prototype.toJSON = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2253" class="css-a4x74f"><span>2253</span></td><td id="LC2253" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> invertedIndex = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.invertedIndex)
</code></td></tr><tr><td id="L2254" class="css-a4x74f"><span>2254</span></td><td id="LC2254" class="css-1dcdqdg"><code>    .sort()
</code></td></tr><tr><td id="L2255" class="css-a4x74f"><span>2255</span></td><td id="LC2255" class="css-1dcdqdg"><code>    .map(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">term</span>) </span>{
</code></td></tr><tr><td id="L2256" class="css-a4x74f"><span>2256</span></td><td id="LC2256" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> [term, <span class="code-keyword">this</span>.invertedIndex[term]]
</code></td></tr><tr><td id="L2257" class="css-a4x74f"><span>2257</span></td><td id="LC2257" class="css-1dcdqdg"><code>    }, <span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L2258" class="css-a4x74f"><span>2258</span></td><td id="LC2258" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2259" class="css-a4x74f"><span>2259</span></td><td id="LC2259" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> fieldVectors = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.fieldVectors)
</code></td></tr><tr><td id="L2260" class="css-a4x74f"><span>2260</span></td><td id="LC2260" class="css-1dcdqdg"><code>    .map(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">ref</span>) </span>{
</code></td></tr><tr><td id="L2261" class="css-a4x74f"><span>2261</span></td><td id="LC2261" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> [ref, <span class="code-keyword">this</span>.fieldVectors[ref].toJSON()]
</code></td></tr><tr><td id="L2262" class="css-a4x74f"><span>2262</span></td><td id="LC2262" class="css-1dcdqdg"><code>    }, <span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L2263" class="css-a4x74f"><span>2263</span></td><td id="LC2263" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2264" class="css-a4x74f"><span>2264</span></td><td id="LC2264" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> {
</code></td></tr><tr><td id="L2265" class="css-a4x74f"><span>2265</span></td><td id="LC2265" class="css-1dcdqdg"><code>    version: lunr.version,
</code></td></tr><tr><td id="L2266" class="css-a4x74f"><span>2266</span></td><td id="LC2266" class="css-1dcdqdg"><code>    fields: <span class="code-keyword">this</span>.fields,
</code></td></tr><tr><td id="L2267" class="css-a4x74f"><span>2267</span></td><td id="LC2267" class="css-1dcdqdg"><code>    fieldVectors: fieldVectors,
</code></td></tr><tr><td id="L2268" class="css-a4x74f"><span>2268</span></td><td id="LC2268" class="css-1dcdqdg"><code>    invertedIndex: invertedIndex,
</code></td></tr><tr><td id="L2269" class="css-a4x74f"><span>2269</span></td><td id="LC2269" class="css-1dcdqdg"><code>    pipeline: <span class="code-keyword">this</span>.pipeline.toJSON()
</code></td></tr><tr><td id="L2270" class="css-a4x74f"><span>2270</span></td><td id="LC2270" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2271" class="css-a4x74f"><span>2271</span></td><td id="LC2271" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2272" class="css-a4x74f"><span>2272</span></td><td id="LC2272" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2273" class="css-a4x74f"><span>2273</span></td><td id="LC2273" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2274" class="css-a4x74f"><span>2274</span></td><td id="LC2274" class="css-1dcdqdg"><code><span class="code-comment"> * Loads a previously serialized lunr.Index
</span></code></td></tr><tr><td id="L2275" class="css-a4x74f"><span>2275</span></td><td id="LC2275" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2276" class="css-a4x74f"><span>2276</span></td><td id="LC2276" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Object} serializedIndex - A previously serialized lunr.Index
</span></code></td></tr><tr><td id="L2277" class="css-a4x74f"><span>2277</span></td><td id="LC2277" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Index}
</span></code></td></tr><tr><td id="L2278" class="css-a4x74f"><span>2278</span></td><td id="LC2278" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2279" class="css-a4x74f"><span>2279</span></td><td id="LC2279" class="css-1dcdqdg"><code>lunr.Index.load = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">serializedIndex</span>) </span>{
</code></td></tr><tr><td id="L2280" class="css-a4x74f"><span>2280</span></td><td id="LC2280" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> attrs = {},
</code></td></tr><tr><td id="L2281" class="css-a4x74f"><span>2281</span></td><td id="LC2281" class="css-1dcdqdg"><code>      fieldVectors = {},
</code></td></tr><tr><td id="L2282" class="css-a4x74f"><span>2282</span></td><td id="LC2282" class="css-1dcdqdg"><code>      serializedVectors = serializedIndex.fieldVectors,
</code></td></tr><tr><td id="L2283" class="css-a4x74f"><span>2283</span></td><td id="LC2283" class="css-1dcdqdg"><code>      invertedIndex = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>),
</code></td></tr><tr><td id="L2284" class="css-a4x74f"><span>2284</span></td><td id="LC2284" class="css-1dcdqdg"><code>      serializedInvertedIndex = serializedIndex.invertedIndex,
</code></td></tr><tr><td id="L2285" class="css-a4x74f"><span>2285</span></td><td id="LC2285" class="css-1dcdqdg"><code>      tokenSetBuilder = <span class="code-keyword">new</span> lunr.TokenSet.Builder,
</code></td></tr><tr><td id="L2286" class="css-a4x74f"><span>2286</span></td><td id="LC2286" class="css-1dcdqdg"><code>      pipeline = lunr.Pipeline.load(serializedIndex.pipeline)
</code></td></tr><tr><td id="L2287" class="css-a4x74f"><span>2287</span></td><td id="LC2287" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2288" class="css-a4x74f"><span>2288</span></td><td id="LC2288" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (serializedIndex.version != lunr.version) {
</code></td></tr><tr><td id="L2289" class="css-a4x74f"><span>2289</span></td><td id="LC2289" class="css-1dcdqdg"><code>    lunr.utils.warn(<span class="code-string">"Version mismatch when loading serialised index. Current version of lunr '"</span> + lunr.version + <span class="code-string">"' does not match serialized index '"</span> + serializedIndex.version + <span class="code-string">"'"</span>)
</code></td></tr><tr><td id="L2290" class="css-a4x74f"><span>2290</span></td><td id="LC2290" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2291" class="css-a4x74f"><span>2291</span></td><td id="LC2291" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2292" class="css-a4x74f"><span>2292</span></td><td id="LC2292" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; serializedVectors.length; i++) {
</code></td></tr><tr><td id="L2293" class="css-a4x74f"><span>2293</span></td><td id="LC2293" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> tuple = serializedVectors[i],
</code></td></tr><tr><td id="L2294" class="css-a4x74f"><span>2294</span></td><td id="LC2294" class="css-1dcdqdg"><code>        ref = tuple[<span class="code-number">0</span>],
</code></td></tr><tr><td id="L2295" class="css-a4x74f"><span>2295</span></td><td id="LC2295" class="css-1dcdqdg"><code>        elements = tuple[<span class="code-number">1</span>]
</code></td></tr><tr><td id="L2296" class="css-a4x74f"><span>2296</span></td><td id="LC2296" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2297" class="css-a4x74f"><span>2297</span></td><td id="LC2297" class="css-1dcdqdg"><code>    fieldVectors[ref] = <span class="code-keyword">new</span> lunr.Vector(elements)
</code></td></tr><tr><td id="L2298" class="css-a4x74f"><span>2298</span></td><td id="LC2298" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2299" class="css-a4x74f"><span>2299</span></td><td id="LC2299" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2300" class="css-a4x74f"><span>2300</span></td><td id="LC2300" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; serializedInvertedIndex.length; i++) {
</code></td></tr><tr><td id="L2301" class="css-a4x74f"><span>2301</span></td><td id="LC2301" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> tuple = serializedInvertedIndex[i],
</code></td></tr><tr><td id="L2302" class="css-a4x74f"><span>2302</span></td><td id="LC2302" class="css-1dcdqdg"><code>        term = tuple[<span class="code-number">0</span>],
</code></td></tr><tr><td id="L2303" class="css-a4x74f"><span>2303</span></td><td id="LC2303" class="css-1dcdqdg"><code>        posting = tuple[<span class="code-number">1</span>]
</code></td></tr><tr><td id="L2304" class="css-a4x74f"><span>2304</span></td><td id="LC2304" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2305" class="css-a4x74f"><span>2305</span></td><td id="LC2305" class="css-1dcdqdg"><code>    tokenSetBuilder.insert(term)
</code></td></tr><tr><td id="L2306" class="css-a4x74f"><span>2306</span></td><td id="LC2306" class="css-1dcdqdg"><code>    invertedIndex[term] = posting
</code></td></tr><tr><td id="L2307" class="css-a4x74f"><span>2307</span></td><td id="LC2307" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2308" class="css-a4x74f"><span>2308</span></td><td id="LC2308" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2309" class="css-a4x74f"><span>2309</span></td><td id="LC2309" class="css-1dcdqdg"><code>  tokenSetBuilder.finish()
</code></td></tr><tr><td id="L2310" class="css-a4x74f"><span>2310</span></td><td id="LC2310" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2311" class="css-a4x74f"><span>2311</span></td><td id="LC2311" class="css-1dcdqdg"><code>  attrs.fields = serializedIndex.fields
</code></td></tr><tr><td id="L2312" class="css-a4x74f"><span>2312</span></td><td id="LC2312" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2313" class="css-a4x74f"><span>2313</span></td><td id="LC2313" class="css-1dcdqdg"><code>  attrs.fieldVectors = fieldVectors
</code></td></tr><tr><td id="L2314" class="css-a4x74f"><span>2314</span></td><td id="LC2314" class="css-1dcdqdg"><code>  attrs.invertedIndex = invertedIndex
</code></td></tr><tr><td id="L2315" class="css-a4x74f"><span>2315</span></td><td id="LC2315" class="css-1dcdqdg"><code>  attrs.tokenSet = tokenSetBuilder.root
</code></td></tr><tr><td id="L2316" class="css-a4x74f"><span>2316</span></td><td id="LC2316" class="css-1dcdqdg"><code>  attrs.pipeline = pipeline
</code></td></tr><tr><td id="L2317" class="css-a4x74f"><span>2317</span></td><td id="LC2317" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2318" class="css-a4x74f"><span>2318</span></td><td id="LC2318" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">new</span> lunr.Index(attrs)
</code></td></tr><tr><td id="L2319" class="css-a4x74f"><span>2319</span></td><td id="LC2319" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2320" class="css-a4x74f"><span>2320</span></td><td id="LC2320" class="css-1dcdqdg"><code><span class="code-comment">/*!
</span></code></td></tr><tr><td id="L2321" class="css-a4x74f"><span>2321</span></td><td id="LC2321" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Builder
</span></code></td></tr><tr><td id="L2322" class="css-a4x74f"><span>2322</span></td><td id="LC2322" class="css-1dcdqdg"><code><span class="code-comment"> * Copyright (C) 2020 Oliver Nightingale
</span></code></td></tr><tr><td id="L2323" class="css-a4x74f"><span>2323</span></td><td id="LC2323" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2324" class="css-a4x74f"><span>2324</span></td><td id="LC2324" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2325" class="css-a4x74f"><span>2325</span></td><td id="LC2325" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2326" class="css-a4x74f"><span>2326</span></td><td id="LC2326" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Builder performs indexing on a set of documents and
</span></code></td></tr><tr><td id="L2327" class="css-a4x74f"><span>2327</span></td><td id="LC2327" class="css-1dcdqdg"><code><span class="code-comment"> * returns instances of lunr.Index ready for querying.
</span></code></td></tr><tr><td id="L2328" class="css-a4x74f"><span>2328</span></td><td id="LC2328" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2329" class="css-a4x74f"><span>2329</span></td><td id="LC2329" class="css-1dcdqdg"><code><span class="code-comment"> * All configuration of the index is done via the builder, the
</span></code></td></tr><tr><td id="L2330" class="css-a4x74f"><span>2330</span></td><td id="LC2330" class="css-1dcdqdg"><code><span class="code-comment"> * fields to index, the document reference, the text processing
</span></code></td></tr><tr><td id="L2331" class="css-a4x74f"><span>2331</span></td><td id="LC2331" class="css-1dcdqdg"><code><span class="code-comment"> * pipeline and document scoring parameters are all set on the
</span></code></td></tr><tr><td id="L2332" class="css-a4x74f"><span>2332</span></td><td id="LC2332" class="css-1dcdqdg"><code><span class="code-comment"> * builder before indexing.
</span></code></td></tr><tr><td id="L2333" class="css-a4x74f"><span>2333</span></td><td id="LC2333" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2334" class="css-a4x74f"><span>2334</span></td><td id="LC2334" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L2335" class="css-a4x74f"><span>2335</span></td><td id="LC2335" class="css-1dcdqdg"><code><span class="code-comment"> * @property {string} _ref - Internal reference to the document reference field.
</span></code></td></tr><tr><td id="L2336" class="css-a4x74f"><span>2336</span></td><td id="LC2336" class="css-1dcdqdg"><code><span class="code-comment"> * @property {string[]} _fields - Internal reference to the document fields to index.
</span></code></td></tr><tr><td id="L2337" class="css-a4x74f"><span>2337</span></td><td id="LC2337" class="css-1dcdqdg"><code><span class="code-comment"> * @property {object} invertedIndex - The inverted index maps terms to document fields.
</span></code></td></tr><tr><td id="L2338" class="css-a4x74f"><span>2338</span></td><td id="LC2338" class="css-1dcdqdg"><code><span class="code-comment"> * @property {object} documentTermFrequencies - Keeps track of document term frequencies.
</span></code></td></tr><tr><td id="L2339" class="css-a4x74f"><span>2339</span></td><td id="LC2339" class="css-1dcdqdg"><code><span class="code-comment"> * @property {object} documentLengths - Keeps track of the length of documents added to the index.
</span></code></td></tr><tr><td id="L2340" class="css-a4x74f"><span>2340</span></td><td id="LC2340" class="css-1dcdqdg"><code><span class="code-comment"> * @property {lunr.tokenizer} tokenizer - Function for splitting strings into tokens for indexing.
</span></code></td></tr><tr><td id="L2341" class="css-a4x74f"><span>2341</span></td><td id="LC2341" class="css-1dcdqdg"><code><span class="code-comment"> * @property {lunr.Pipeline} pipeline - The pipeline performs text processing on tokens before indexing.
</span></code></td></tr><tr><td id="L2342" class="css-a4x74f"><span>2342</span></td><td id="LC2342" class="css-1dcdqdg"><code><span class="code-comment"> * @property {lunr.Pipeline} searchPipeline - A pipeline for processing search terms before querying the index.
</span></code></td></tr><tr><td id="L2343" class="css-a4x74f"><span>2343</span></td><td id="LC2343" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} documentCount - Keeps track of the total number of documents indexed.
</span></code></td></tr><tr><td id="L2344" class="css-a4x74f"><span>2344</span></td><td id="LC2344" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} _b - A parameter to control field length normalization, setting this to 0 disabled normalization, 1 fully normalizes field lengths, the default value is 0.75.
</span></code></td></tr><tr><td id="L2345" class="css-a4x74f"><span>2345</span></td><td id="LC2345" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} _k1 - A parameter to control how quickly an increase in term frequency results in term frequency saturation, the default value is 1.2.
</span></code></td></tr><tr><td id="L2346" class="css-a4x74f"><span>2346</span></td><td id="LC2346" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} termIndex - A counter incremented for each unique term, used to identify a terms position in the vector space.
</span></code></td></tr><tr><td id="L2347" class="css-a4x74f"><span>2347</span></td><td id="LC2347" class="css-1dcdqdg"><code><span class="code-comment"> * @property {array} metadataWhitelist - A list of metadata keys that have been whitelisted for entry in the index.
</span></code></td></tr><tr><td id="L2348" class="css-a4x74f"><span>2348</span></td><td id="LC2348" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2349" class="css-a4x74f"><span>2349</span></td><td id="LC2349" class="css-1dcdqdg"><code>lunr.Builder = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2350" class="css-a4x74f"><span>2350</span></td><td id="LC2350" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._ref = <span class="code-string">"id"</span>
</code></td></tr><tr><td id="L2351" class="css-a4x74f"><span>2351</span></td><td id="LC2351" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._fields = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2352" class="css-a4x74f"><span>2352</span></td><td id="LC2352" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._documents = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2353" class="css-a4x74f"><span>2353</span></td><td id="LC2353" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.invertedIndex = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2354" class="css-a4x74f"><span>2354</span></td><td id="LC2354" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.fieldTermFrequencies = {}
</code></td></tr><tr><td id="L2355" class="css-a4x74f"><span>2355</span></td><td id="LC2355" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.fieldLengths = {}
</code></td></tr><tr><td id="L2356" class="css-a4x74f"><span>2356</span></td><td id="LC2356" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.tokenizer = lunr.tokenizer
</code></td></tr><tr><td id="L2357" class="css-a4x74f"><span>2357</span></td><td id="LC2357" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.pipeline = <span class="code-keyword">new</span> lunr.Pipeline
</code></td></tr><tr><td id="L2358" class="css-a4x74f"><span>2358</span></td><td id="LC2358" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.searchPipeline = <span class="code-keyword">new</span> lunr.Pipeline
</code></td></tr><tr><td id="L2359" class="css-a4x74f"><span>2359</span></td><td id="LC2359" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.documentCount = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2360" class="css-a4x74f"><span>2360</span></td><td id="LC2360" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._b = <span class="code-number">0.75</span>
</code></td></tr><tr><td id="L2361" class="css-a4x74f"><span>2361</span></td><td id="LC2361" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._k1 = <span class="code-number">1.2</span>
</code></td></tr><tr><td id="L2362" class="css-a4x74f"><span>2362</span></td><td id="LC2362" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.termIndex = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2363" class="css-a4x74f"><span>2363</span></td><td id="LC2363" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.metadataWhitelist = []
</code></td></tr><tr><td id="L2364" class="css-a4x74f"><span>2364</span></td><td id="LC2364" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2365" class="css-a4x74f"><span>2365</span></td><td id="LC2365" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2366" class="css-a4x74f"><span>2366</span></td><td id="LC2366" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2367" class="css-a4x74f"><span>2367</span></td><td id="LC2367" class="css-1dcdqdg"><code><span class="code-comment"> * Sets the document field used as the document reference. Every document must have this field.
</span></code></td></tr><tr><td id="L2368" class="css-a4x74f"><span>2368</span></td><td id="LC2368" class="css-1dcdqdg"><code><span class="code-comment"> * The type of this field in the document should be a string, if it is not a string it will be
</span></code></td></tr><tr><td id="L2369" class="css-a4x74f"><span>2369</span></td><td id="LC2369" class="css-1dcdqdg"><code><span class="code-comment"> * coerced into a string by calling toString.
</span></code></td></tr><tr><td id="L2370" class="css-a4x74f"><span>2370</span></td><td id="LC2370" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2371" class="css-a4x74f"><span>2371</span></td><td id="LC2371" class="css-1dcdqdg"><code><span class="code-comment"> * The default ref is 'id'.
</span></code></td></tr><tr><td id="L2372" class="css-a4x74f"><span>2372</span></td><td id="LC2372" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2373" class="css-a4x74f"><span>2373</span></td><td id="LC2373" class="css-1dcdqdg"><code><span class="code-comment"> * The ref should _not_ be changed during indexing, it should be set before any documents are
</span></code></td></tr><tr><td id="L2374" class="css-a4x74f"><span>2374</span></td><td id="LC2374" class="css-1dcdqdg"><code><span class="code-comment"> * added to the index. Changing it during indexing can lead to inconsistent results.
</span></code></td></tr><tr><td id="L2375" class="css-a4x74f"><span>2375</span></td><td id="LC2375" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2376" class="css-a4x74f"><span>2376</span></td><td id="LC2376" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} ref - The name of the reference field in the document.
</span></code></td></tr><tr><td id="L2377" class="css-a4x74f"><span>2377</span></td><td id="LC2377" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2378" class="css-a4x74f"><span>2378</span></td><td id="LC2378" class="css-1dcdqdg"><code>lunr.Builder.prototype.ref = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">ref</span>) </span>{
</code></td></tr><tr><td id="L2379" class="css-a4x74f"><span>2379</span></td><td id="LC2379" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._ref = ref
</code></td></tr><tr><td id="L2380" class="css-a4x74f"><span>2380</span></td><td id="LC2380" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2381" class="css-a4x74f"><span>2381</span></td><td id="LC2381" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2382" class="css-a4x74f"><span>2382</span></td><td id="LC2382" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2383" class="css-a4x74f"><span>2383</span></td><td id="LC2383" class="css-1dcdqdg"><code><span class="code-comment"> * A function that is used to extract a field from a document.
</span></code></td></tr><tr><td id="L2384" class="css-a4x74f"><span>2384</span></td><td id="LC2384" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2385" class="css-a4x74f"><span>2385</span></td><td id="LC2385" class="css-1dcdqdg"><code><span class="code-comment"> * Lunr expects a field to be at the top level of a document, if however the field
</span></code></td></tr><tr><td id="L2386" class="css-a4x74f"><span>2386</span></td><td id="LC2386" class="css-1dcdqdg"><code><span class="code-comment"> * is deeply nested within a document an extractor function can be used to extract
</span></code></td></tr><tr><td id="L2387" class="css-a4x74f"><span>2387</span></td><td id="LC2387" class="css-1dcdqdg"><code><span class="code-comment"> * the right field for indexing.
</span></code></td></tr><tr><td id="L2388" class="css-a4x74f"><span>2388</span></td><td id="LC2388" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2389" class="css-a4x74f"><span>2389</span></td><td id="LC2389" class="css-1dcdqdg"><code><span class="code-comment"> * @callback fieldExtractor
</span></code></td></tr><tr><td id="L2390" class="css-a4x74f"><span>2390</span></td><td id="LC2390" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} doc - The document being added to the index.
</span></code></td></tr><tr><td id="L2391" class="css-a4x74f"><span>2391</span></td><td id="LC2391" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {?(string|object|object[])} obj - The object that will be indexed for this field.
</span></code></td></tr><tr><td id="L2392" class="css-a4x74f"><span>2392</span></td><td id="LC2392" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;Extracting a nested field&lt;/caption&gt;
</span></code></td></tr><tr><td id="L2393" class="css-a4x74f"><span>2393</span></td><td id="LC2393" class="css-1dcdqdg"><code><span class="code-comment"> * function (doc) { return doc.nested.field }
</span></code></td></tr><tr><td id="L2394" class="css-a4x74f"><span>2394</span></td><td id="LC2394" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2395" class="css-a4x74f"><span>2395</span></td><td id="LC2395" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2396" class="css-a4x74f"><span>2396</span></td><td id="LC2396" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2397" class="css-a4x74f"><span>2397</span></td><td id="LC2397" class="css-1dcdqdg"><code><span class="code-comment"> * Adds a field to the list of document fields that will be indexed. Every document being
</span></code></td></tr><tr><td id="L2398" class="css-a4x74f"><span>2398</span></td><td id="LC2398" class="css-1dcdqdg"><code><span class="code-comment"> * indexed should have this field. Null values for this field in indexed documents will
</span></code></td></tr><tr><td id="L2399" class="css-a4x74f"><span>2399</span></td><td id="LC2399" class="css-1dcdqdg"><code><span class="code-comment"> * not cause errors but will limit the chance of that document being retrieved by searches.
</span></code></td></tr><tr><td id="L2400" class="css-a4x74f"><span>2400</span></td><td id="LC2400" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2401" class="css-a4x74f"><span>2401</span></td><td id="LC2401" class="css-1dcdqdg"><code><span class="code-comment"> * All fields should be added before adding documents to the index. Adding fields after
</span></code></td></tr><tr><td id="L2402" class="css-a4x74f"><span>2402</span></td><td id="LC2402" class="css-1dcdqdg"><code><span class="code-comment"> * a document has been indexed will have no effect on already indexed documents.
</span></code></td></tr><tr><td id="L2403" class="css-a4x74f"><span>2403</span></td><td id="LC2403" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2404" class="css-a4x74f"><span>2404</span></td><td id="LC2404" class="css-1dcdqdg"><code><span class="code-comment"> * Fields can be boosted at build time. This allows terms within that field to have more
</span></code></td></tr><tr><td id="L2405" class="css-a4x74f"><span>2405</span></td><td id="LC2405" class="css-1dcdqdg"><code><span class="code-comment"> * importance when ranking search results. Use a field boost to specify that matches within
</span></code></td></tr><tr><td id="L2406" class="css-a4x74f"><span>2406</span></td><td id="LC2406" class="css-1dcdqdg"><code><span class="code-comment"> * one field are more important than other fields.
</span></code></td></tr><tr><td id="L2407" class="css-a4x74f"><span>2407</span></td><td id="LC2407" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2408" class="css-a4x74f"><span>2408</span></td><td id="LC2408" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} fieldName - The name of a field to index in all documents.
</span></code></td></tr><tr><td id="L2409" class="css-a4x74f"><span>2409</span></td><td id="LC2409" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} attributes - Optional attributes associated with this field.
</span></code></td></tr><tr><td id="L2410" class="css-a4x74f"><span>2410</span></td><td id="LC2410" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} [attributes.boost=1] - Boost applied to all terms within this field.
</span></code></td></tr><tr><td id="L2411" class="css-a4x74f"><span>2411</span></td><td id="LC2411" class="css-1dcdqdg"><code><span class="code-comment"> * @param {fieldExtractor} [attributes.extractor] - Function to extract a field from a document.
</span></code></td></tr><tr><td id="L2412" class="css-a4x74f"><span>2412</span></td><td id="LC2412" class="css-1dcdqdg"><code><span class="code-comment"> * @throws {RangeError} fieldName cannot contain unsupported characters '/'
</span></code></td></tr><tr><td id="L2413" class="css-a4x74f"><span>2413</span></td><td id="LC2413" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2414" class="css-a4x74f"><span>2414</span></td><td id="LC2414" class="css-1dcdqdg"><code>lunr.Builder.prototype.field = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fieldName, attributes</span>) </span>{
</code></td></tr><tr><td id="L2415" class="css-a4x74f"><span>2415</span></td><td id="LC2415" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-regexp">/\//</span>.test(fieldName)) {
</code></td></tr><tr><td id="L2416" class="css-a4x74f"><span>2416</span></td><td id="LC2416" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> <span class="code-built_in">RangeError</span> (<span class="code-string">"Field '"</span> + fieldName + <span class="code-string">"' contains illegal character '/'"</span>)
</code></td></tr><tr><td id="L2417" class="css-a4x74f"><span>2417</span></td><td id="LC2417" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2418" class="css-a4x74f"><span>2418</span></td><td id="LC2418" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2419" class="css-a4x74f"><span>2419</span></td><td id="LC2419" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._fields[fieldName] = attributes || {}
</code></td></tr><tr><td id="L2420" class="css-a4x74f"><span>2420</span></td><td id="LC2420" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2421" class="css-a4x74f"><span>2421</span></td><td id="LC2421" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2422" class="css-a4x74f"><span>2422</span></td><td id="LC2422" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2423" class="css-a4x74f"><span>2423</span></td><td id="LC2423" class="css-1dcdqdg"><code><span class="code-comment"> * A parameter to tune the amount of field length normalisation that is applied when
</span></code></td></tr><tr><td id="L2424" class="css-a4x74f"><span>2424</span></td><td id="LC2424" class="css-1dcdqdg"><code><span class="code-comment"> * calculating relevance scores. A value of 0 will completely disable any normalisation
</span></code></td></tr><tr><td id="L2425" class="css-a4x74f"><span>2425</span></td><td id="LC2425" class="css-1dcdqdg"><code><span class="code-comment"> * and a value of 1 will fully normalise field lengths. The default is 0.75. Values of b
</span></code></td></tr><tr><td id="L2426" class="css-a4x74f"><span>2426</span></td><td id="LC2426" class="css-1dcdqdg"><code><span class="code-comment"> * will be clamped to the range 0 - 1.
</span></code></td></tr><tr><td id="L2427" class="css-a4x74f"><span>2427</span></td><td id="LC2427" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2428" class="css-a4x74f"><span>2428</span></td><td id="LC2428" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} number - The value to set for this tuning parameter.
</span></code></td></tr><tr><td id="L2429" class="css-a4x74f"><span>2429</span></td><td id="LC2429" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2430" class="css-a4x74f"><span>2430</span></td><td id="LC2430" class="css-1dcdqdg"><code>lunr.Builder.prototype.b = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">number</span>) </span>{
</code></td></tr><tr><td id="L2431" class="css-a4x74f"><span>2431</span></td><td id="LC2431" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (number &lt; <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L2432" class="css-a4x74f"><span>2432</span></td><td id="LC2432" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>._b = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2433" class="css-a4x74f"><span>2433</span></td><td id="LC2433" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> <span class="code-keyword">if</span> (number &gt; <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L2434" class="css-a4x74f"><span>2434</span></td><td id="LC2434" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>._b = <span class="code-number">1</span>
</code></td></tr><tr><td id="L2435" class="css-a4x74f"><span>2435</span></td><td id="LC2435" class="css-1dcdqdg"><code>  } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2436" class="css-a4x74f"><span>2436</span></td><td id="LC2436" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>._b = number
</code></td></tr><tr><td id="L2437" class="css-a4x74f"><span>2437</span></td><td id="LC2437" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2438" class="css-a4x74f"><span>2438</span></td><td id="LC2438" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2439" class="css-a4x74f"><span>2439</span></td><td id="LC2439" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2440" class="css-a4x74f"><span>2440</span></td><td id="LC2440" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2441" class="css-a4x74f"><span>2441</span></td><td id="LC2441" class="css-1dcdqdg"><code><span class="code-comment"> * A parameter that controls the speed at which a rise in term frequency results in term
</span></code></td></tr><tr><td id="L2442" class="css-a4x74f"><span>2442</span></td><td id="LC2442" class="css-1dcdqdg"><code><span class="code-comment"> * frequency saturation. The default value is 1.2. Setting this to a higher value will give
</span></code></td></tr><tr><td id="L2443" class="css-a4x74f"><span>2443</span></td><td id="LC2443" class="css-1dcdqdg"><code><span class="code-comment"> * slower saturation levels, a lower value will result in quicker saturation.
</span></code></td></tr><tr><td id="L2444" class="css-a4x74f"><span>2444</span></td><td id="LC2444" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2445" class="css-a4x74f"><span>2445</span></td><td id="LC2445" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} number - The value to set for this tuning parameter.
</span></code></td></tr><tr><td id="L2446" class="css-a4x74f"><span>2446</span></td><td id="LC2446" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2447" class="css-a4x74f"><span>2447</span></td><td id="LC2447" class="css-1dcdqdg"><code>lunr.Builder.prototype.k1 = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">number</span>) </span>{
</code></td></tr><tr><td id="L2448" class="css-a4x74f"><span>2448</span></td><td id="LC2448" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._k1 = number
</code></td></tr><tr><td id="L2449" class="css-a4x74f"><span>2449</span></td><td id="LC2449" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2450" class="css-a4x74f"><span>2450</span></td><td id="LC2450" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2451" class="css-a4x74f"><span>2451</span></td><td id="LC2451" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2452" class="css-a4x74f"><span>2452</span></td><td id="LC2452" class="css-1dcdqdg"><code><span class="code-comment"> * Adds a document to the index.
</span></code></td></tr><tr><td id="L2453" class="css-a4x74f"><span>2453</span></td><td id="LC2453" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2454" class="css-a4x74f"><span>2454</span></td><td id="LC2454" class="css-1dcdqdg"><code><span class="code-comment"> * Before adding fields to the index the index should have been fully setup, with the document
</span></code></td></tr><tr><td id="L2455" class="css-a4x74f"><span>2455</span></td><td id="LC2455" class="css-1dcdqdg"><code><span class="code-comment"> * ref and all fields to index already having been specified.
</span></code></td></tr><tr><td id="L2456" class="css-a4x74f"><span>2456</span></td><td id="LC2456" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2457" class="css-a4x74f"><span>2457</span></td><td id="LC2457" class="css-1dcdqdg"><code><span class="code-comment"> * The document must have a field name as specified by the ref (by default this is 'id') and
</span></code></td></tr><tr><td id="L2458" class="css-a4x74f"><span>2458</span></td><td id="LC2458" class="css-1dcdqdg"><code><span class="code-comment"> * it should have all fields defined for indexing, though null or undefined values will not
</span></code></td></tr><tr><td id="L2459" class="css-a4x74f"><span>2459</span></td><td id="LC2459" class="css-1dcdqdg"><code><span class="code-comment"> * cause errors.
</span></code></td></tr><tr><td id="L2460" class="css-a4x74f"><span>2460</span></td><td id="LC2460" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2461" class="css-a4x74f"><span>2461</span></td><td id="LC2461" class="css-1dcdqdg"><code><span class="code-comment"> * Entire documents can be boosted at build time. Applying a boost to a document indicates that
</span></code></td></tr><tr><td id="L2462" class="css-a4x74f"><span>2462</span></td><td id="LC2462" class="css-1dcdqdg"><code><span class="code-comment"> * this document should rank higher in search results than other documents.
</span></code></td></tr><tr><td id="L2463" class="css-a4x74f"><span>2463</span></td><td id="LC2463" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2464" class="css-a4x74f"><span>2464</span></td><td id="LC2464" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} doc - The document to add to the index.
</span></code></td></tr><tr><td id="L2465" class="css-a4x74f"><span>2465</span></td><td id="LC2465" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} attributes - Optional attributes associated with this document.
</span></code></td></tr><tr><td id="L2466" class="css-a4x74f"><span>2466</span></td><td id="LC2466" class="css-1dcdqdg"><code><span class="code-comment"> * @param {number} [attributes.boost=1] - Boost applied to all terms within this document.
</span></code></td></tr><tr><td id="L2467" class="css-a4x74f"><span>2467</span></td><td id="LC2467" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2468" class="css-a4x74f"><span>2468</span></td><td id="LC2468" class="css-1dcdqdg"><code>lunr.Builder.prototype.add = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">doc, attributes</span>) </span>{
</code></td></tr><tr><td id="L2469" class="css-a4x74f"><span>2469</span></td><td id="LC2469" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> docRef = doc[<span class="code-keyword">this</span>._ref],
</code></td></tr><tr><td id="L2470" class="css-a4x74f"><span>2470</span></td><td id="LC2470" class="css-1dcdqdg"><code>      fields = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>._fields)
</code></td></tr><tr><td id="L2471" class="css-a4x74f"><span>2471</span></td><td id="LC2471" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2472" class="css-a4x74f"><span>2472</span></td><td id="LC2472" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>._documents[docRef] = attributes || {}
</code></td></tr><tr><td id="L2473" class="css-a4x74f"><span>2473</span></td><td id="LC2473" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.documentCount += <span class="code-number">1</span>
</code></td></tr><tr><td id="L2474" class="css-a4x74f"><span>2474</span></td><td id="LC2474" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2475" class="css-a4x74f"><span>2475</span></td><td id="LC2475" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; fields.length; i++) {
</code></td></tr><tr><td id="L2476" class="css-a4x74f"><span>2476</span></td><td id="LC2476" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fieldName = fields[i],
</code></td></tr><tr><td id="L2477" class="css-a4x74f"><span>2477</span></td><td id="LC2477" class="css-1dcdqdg"><code>        extractor = <span class="code-keyword">this</span>._fields[fieldName].extractor,
</code></td></tr><tr><td id="L2478" class="css-a4x74f"><span>2478</span></td><td id="LC2478" class="css-1dcdqdg"><code>        field = extractor ? extractor(doc) : doc[fieldName],
</code></td></tr><tr><td id="L2479" class="css-a4x74f"><span>2479</span></td><td id="LC2479" class="css-1dcdqdg"><code>        tokens = <span class="code-keyword">this</span>.tokenizer(field, {
</code></td></tr><tr><td id="L2480" class="css-a4x74f"><span>2480</span></td><td id="LC2480" class="css-1dcdqdg"><code>          fields: [fieldName]
</code></td></tr><tr><td id="L2481" class="css-a4x74f"><span>2481</span></td><td id="LC2481" class="css-1dcdqdg"><code>        }),
</code></td></tr><tr><td id="L2482" class="css-a4x74f"><span>2482</span></td><td id="LC2482" class="css-1dcdqdg"><code>        terms = <span class="code-keyword">this</span>.pipeline.run(tokens),
</code></td></tr><tr><td id="L2483" class="css-a4x74f"><span>2483</span></td><td id="LC2483" class="css-1dcdqdg"><code>        fieldRef = <span class="code-keyword">new</span> lunr.FieldRef (docRef, fieldName),
</code></td></tr><tr><td id="L2484" class="css-a4x74f"><span>2484</span></td><td id="LC2484" class="css-1dcdqdg"><code>        fieldTerms = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2485" class="css-a4x74f"><span>2485</span></td><td id="LC2485" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2486" class="css-a4x74f"><span>2486</span></td><td id="LC2486" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.fieldTermFrequencies[fieldRef] = fieldTerms
</code></td></tr><tr><td id="L2487" class="css-a4x74f"><span>2487</span></td><td id="LC2487" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.fieldLengths[fieldRef] = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2488" class="css-a4x74f"><span>2488</span></td><td id="LC2488" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2489" class="css-a4x74f"><span>2489</span></td><td id="LC2489" class="css-1dcdqdg"><code>    <span class="code-comment">// store the length of this field for this document</span>
</code></td></tr><tr><td id="L2490" class="css-a4x74f"><span>2490</span></td><td id="LC2490" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.fieldLengths[fieldRef] += terms.length
</code></td></tr><tr><td id="L2491" class="css-a4x74f"><span>2491</span></td><td id="LC2491" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2492" class="css-a4x74f"><span>2492</span></td><td id="LC2492" class="css-1dcdqdg"><code>    <span class="code-comment">// calculate term frequencies for this field</span>
</code></td></tr><tr><td id="L2493" class="css-a4x74f"><span>2493</span></td><td id="LC2493" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> j = <span class="code-number">0</span>; j &lt; terms.length; j++) {
</code></td></tr><tr><td id="L2494" class="css-a4x74f"><span>2494</span></td><td id="LC2494" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> term = terms[j]
</code></td></tr><tr><td id="L2495" class="css-a4x74f"><span>2495</span></td><td id="LC2495" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2496" class="css-a4x74f"><span>2496</span></td><td id="LC2496" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (fieldTerms[term] == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2497" class="css-a4x74f"><span>2497</span></td><td id="LC2497" class="css-1dcdqdg"><code>        fieldTerms[term] = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2498" class="css-a4x74f"><span>2498</span></td><td id="LC2498" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2499" class="css-a4x74f"><span>2499</span></td><td id="LC2499" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2500" class="css-a4x74f"><span>2500</span></td><td id="LC2500" class="css-1dcdqdg"><code>      fieldTerms[term] += <span class="code-number">1</span>
</code></td></tr><tr><td id="L2501" class="css-a4x74f"><span>2501</span></td><td id="LC2501" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2502" class="css-a4x74f"><span>2502</span></td><td id="LC2502" class="css-1dcdqdg"><code>      <span class="code-comment">// add to inverted index</span>
</code></td></tr><tr><td id="L2503" class="css-a4x74f"><span>2503</span></td><td id="LC2503" class="css-1dcdqdg"><code>      <span class="code-comment">// create an initial posting if one doesn't exist</span>
</code></td></tr><tr><td id="L2504" class="css-a4x74f"><span>2504</span></td><td id="LC2504" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.invertedIndex[term] == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2505" class="css-a4x74f"><span>2505</span></td><td id="LC2505" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> posting = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2506" class="css-a4x74f"><span>2506</span></td><td id="LC2506" class="css-1dcdqdg"><code>        posting[<span class="code-string">"_index"</span>] = <span class="code-keyword">this</span>.termIndex
</code></td></tr><tr><td id="L2507" class="css-a4x74f"><span>2507</span></td><td id="LC2507" class="css-1dcdqdg"><code>        <span class="code-keyword">this</span>.termIndex += <span class="code-number">1</span>
</code></td></tr><tr><td id="L2508" class="css-a4x74f"><span>2508</span></td><td id="LC2508" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2509" class="css-a4x74f"><span>2509</span></td><td id="LC2509" class="css-1dcdqdg"><code>        <span class="code-keyword">for</span> (<span class="code-keyword">var</span> k = <span class="code-number">0</span>; k &lt; fields.length; k++) {
</code></td></tr><tr><td id="L2510" class="css-a4x74f"><span>2510</span></td><td id="LC2510" class="css-1dcdqdg"><code>          posting[fields[k]] = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2511" class="css-a4x74f"><span>2511</span></td><td id="LC2511" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L2512" class="css-a4x74f"><span>2512</span></td><td id="LC2512" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2513" class="css-a4x74f"><span>2513</span></td><td id="LC2513" class="css-1dcdqdg"><code>        <span class="code-keyword">this</span>.invertedIndex[term] = posting
</code></td></tr><tr><td id="L2514" class="css-a4x74f"><span>2514</span></td><td id="LC2514" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2515" class="css-a4x74f"><span>2515</span></td><td id="LC2515" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2516" class="css-a4x74f"><span>2516</span></td><td id="LC2516" class="css-1dcdqdg"><code>      <span class="code-comment">// add an entry for this term/fieldName/docRef to the invertedIndex</span>
</code></td></tr><tr><td id="L2517" class="css-a4x74f"><span>2517</span></td><td id="LC2517" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.invertedIndex[term][fieldName][docRef] == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2518" class="css-a4x74f"><span>2518</span></td><td id="LC2518" class="css-1dcdqdg"><code>        <span class="code-keyword">this</span>.invertedIndex[term][fieldName][docRef] = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2519" class="css-a4x74f"><span>2519</span></td><td id="LC2519" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2520" class="css-a4x74f"><span>2520</span></td><td id="LC2520" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2521" class="css-a4x74f"><span>2521</span></td><td id="LC2521" class="css-1dcdqdg"><code>      <span class="code-comment">// store all whitelisted metadata about this token in the</span>
</code></td></tr><tr><td id="L2522" class="css-a4x74f"><span>2522</span></td><td id="LC2522" class="css-1dcdqdg"><code>      <span class="code-comment">// inverted index</span>
</code></td></tr><tr><td id="L2523" class="css-a4x74f"><span>2523</span></td><td id="LC2523" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">var</span> l = <span class="code-number">0</span>; l &lt; <span class="code-keyword">this</span>.metadataWhitelist.length; l++) {
</code></td></tr><tr><td id="L2524" class="css-a4x74f"><span>2524</span></td><td id="LC2524" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> metadataKey = <span class="code-keyword">this</span>.metadataWhitelist[l],
</code></td></tr><tr><td id="L2525" class="css-a4x74f"><span>2525</span></td><td id="LC2525" class="css-1dcdqdg"><code>            metadata = term.metadata[metadataKey]
</code></td></tr><tr><td id="L2526" class="css-a4x74f"><span>2526</span></td><td id="LC2526" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2527" class="css-a4x74f"><span>2527</span></td><td id="LC2527" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.invertedIndex[term][fieldName][docRef][metadataKey] == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2528" class="css-a4x74f"><span>2528</span></td><td id="LC2528" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.invertedIndex[term][fieldName][docRef][metadataKey] = []
</code></td></tr><tr><td id="L2529" class="css-a4x74f"><span>2529</span></td><td id="LC2529" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L2530" class="css-a4x74f"><span>2530</span></td><td id="LC2530" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2531" class="css-a4x74f"><span>2531</span></td><td id="LC2531" class="css-1dcdqdg"><code>        <span class="code-keyword">this</span>.invertedIndex[term][fieldName][docRef][metadataKey].push(metadata)
</code></td></tr><tr><td id="L2532" class="css-a4x74f"><span>2532</span></td><td id="LC2532" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2533" class="css-a4x74f"><span>2533</span></td><td id="LC2533" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2534" class="css-a4x74f"><span>2534</span></td><td id="LC2534" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2535" class="css-a4x74f"><span>2535</span></td><td id="LC2535" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2536" class="css-a4x74f"><span>2536</span></td><td id="LC2536" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2537" class="css-a4x74f"><span>2537</span></td><td id="LC2537" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2538" class="css-a4x74f"><span>2538</span></td><td id="LC2538" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2539" class="css-a4x74f"><span>2539</span></td><td id="LC2539" class="css-1dcdqdg"><code><span class="code-comment"> * Calculates the average document length for this index
</span></code></td></tr><tr><td id="L2540" class="css-a4x74f"><span>2540</span></td><td id="LC2540" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2541" class="css-a4x74f"><span>2541</span></td><td id="LC2541" class="css-1dcdqdg"><code><span class="code-comment"> * @private
</span></code></td></tr><tr><td id="L2542" class="css-a4x74f"><span>2542</span></td><td id="LC2542" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2543" class="css-a4x74f"><span>2543</span></td><td id="LC2543" class="css-1dcdqdg"><code>lunr.Builder.prototype.calculateAverageFieldLengths = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2544" class="css-a4x74f"><span>2544</span></td><td id="LC2544" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2545" class="css-a4x74f"><span>2545</span></td><td id="LC2545" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> fieldRefs = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.fieldLengths),
</code></td></tr><tr><td id="L2546" class="css-a4x74f"><span>2546</span></td><td id="LC2546" class="css-1dcdqdg"><code>      numberOfFields = fieldRefs.length,
</code></td></tr><tr><td id="L2547" class="css-a4x74f"><span>2547</span></td><td id="LC2547" class="css-1dcdqdg"><code>      accumulator = {},
</code></td></tr><tr><td id="L2548" class="css-a4x74f"><span>2548</span></td><td id="LC2548" class="css-1dcdqdg"><code>      documentsWithField = {}
</code></td></tr><tr><td id="L2549" class="css-a4x74f"><span>2549</span></td><td id="LC2549" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2550" class="css-a4x74f"><span>2550</span></td><td id="LC2550" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; numberOfFields; i++) {
</code></td></tr><tr><td id="L2551" class="css-a4x74f"><span>2551</span></td><td id="LC2551" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),
</code></td></tr><tr><td id="L2552" class="css-a4x74f"><span>2552</span></td><td id="LC2552" class="css-1dcdqdg"><code>        field = fieldRef.fieldName
</code></td></tr><tr><td id="L2553" class="css-a4x74f"><span>2553</span></td><td id="LC2553" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2554" class="css-a4x74f"><span>2554</span></td><td id="LC2554" class="css-1dcdqdg"><code>    documentsWithField[field] || (documentsWithField[field] = <span class="code-number">0</span>)
</code></td></tr><tr><td id="L2555" class="css-a4x74f"><span>2555</span></td><td id="LC2555" class="css-1dcdqdg"><code>    documentsWithField[field] += <span class="code-number">1</span>
</code></td></tr><tr><td id="L2556" class="css-a4x74f"><span>2556</span></td><td id="LC2556" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2557" class="css-a4x74f"><span>2557</span></td><td id="LC2557" class="css-1dcdqdg"><code>    accumulator[field] || (accumulator[field] = <span class="code-number">0</span>)
</code></td></tr><tr><td id="L2558" class="css-a4x74f"><span>2558</span></td><td id="LC2558" class="css-1dcdqdg"><code>    accumulator[field] += <span class="code-keyword">this</span>.fieldLengths[fieldRef]
</code></td></tr><tr><td id="L2559" class="css-a4x74f"><span>2559</span></td><td id="LC2559" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2560" class="css-a4x74f"><span>2560</span></td><td id="LC2560" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2561" class="css-a4x74f"><span>2561</span></td><td id="LC2561" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> fields = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>._fields)
</code></td></tr><tr><td id="L2562" class="css-a4x74f"><span>2562</span></td><td id="LC2562" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2563" class="css-a4x74f"><span>2563</span></td><td id="LC2563" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; fields.length; i++) {
</code></td></tr><tr><td id="L2564" class="css-a4x74f"><span>2564</span></td><td id="LC2564" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fieldName = fields[i]
</code></td></tr><tr><td id="L2565" class="css-a4x74f"><span>2565</span></td><td id="LC2565" class="css-1dcdqdg"><code>    accumulator[fieldName] = accumulator[fieldName] / documentsWithField[fieldName]
</code></td></tr><tr><td id="L2566" class="css-a4x74f"><span>2566</span></td><td id="LC2566" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2567" class="css-a4x74f"><span>2567</span></td><td id="LC2567" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2568" class="css-a4x74f"><span>2568</span></td><td id="LC2568" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.averageFieldLength = accumulator
</code></td></tr><tr><td id="L2569" class="css-a4x74f"><span>2569</span></td><td id="LC2569" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2570" class="css-a4x74f"><span>2570</span></td><td id="LC2570" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2571" class="css-a4x74f"><span>2571</span></td><td id="LC2571" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2572" class="css-a4x74f"><span>2572</span></td><td id="LC2572" class="css-1dcdqdg"><code><span class="code-comment"> * Builds a vector space model of every document using lunr.Vector
</span></code></td></tr><tr><td id="L2573" class="css-a4x74f"><span>2573</span></td><td id="LC2573" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2574" class="css-a4x74f"><span>2574</span></td><td id="LC2574" class="css-1dcdqdg"><code><span class="code-comment"> * @private
</span></code></td></tr><tr><td id="L2575" class="css-a4x74f"><span>2575</span></td><td id="LC2575" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2576" class="css-a4x74f"><span>2576</span></td><td id="LC2576" class="css-1dcdqdg"><code>lunr.Builder.prototype.createFieldVectors = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2577" class="css-a4x74f"><span>2577</span></td><td id="LC2577" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> fieldVectors = {},
</code></td></tr><tr><td id="L2578" class="css-a4x74f"><span>2578</span></td><td id="LC2578" class="css-1dcdqdg"><code>      fieldRefs = <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.fieldTermFrequencies),
</code></td></tr><tr><td id="L2579" class="css-a4x74f"><span>2579</span></td><td id="LC2579" class="css-1dcdqdg"><code>      fieldRefsLength = fieldRefs.length,
</code></td></tr><tr><td id="L2580" class="css-a4x74f"><span>2580</span></td><td id="LC2580" class="css-1dcdqdg"><code>      termIdfCache = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2581" class="css-a4x74f"><span>2581</span></td><td id="LC2581" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2582" class="css-a4x74f"><span>2582</span></td><td id="LC2582" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; fieldRefsLength; i++) {
</code></td></tr><tr><td id="L2583" class="css-a4x74f"><span>2583</span></td><td id="LC2583" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),
</code></td></tr><tr><td id="L2584" class="css-a4x74f"><span>2584</span></td><td id="LC2584" class="css-1dcdqdg"><code>        fieldName = fieldRef.fieldName,
</code></td></tr><tr><td id="L2585" class="css-a4x74f"><span>2585</span></td><td id="LC2585" class="css-1dcdqdg"><code>        fieldLength = <span class="code-keyword">this</span>.fieldLengths[fieldRef],
</code></td></tr><tr><td id="L2586" class="css-a4x74f"><span>2586</span></td><td id="LC2586" class="css-1dcdqdg"><code>        fieldVector = <span class="code-keyword">new</span> lunr.Vector,
</code></td></tr><tr><td id="L2587" class="css-a4x74f"><span>2587</span></td><td id="LC2587" class="css-1dcdqdg"><code>        termFrequencies = <span class="code-keyword">this</span>.fieldTermFrequencies[fieldRef],
</code></td></tr><tr><td id="L2588" class="css-a4x74f"><span>2588</span></td><td id="LC2588" class="css-1dcdqdg"><code>        terms = <span class="code-built_in">Object</span>.keys(termFrequencies),
</code></td></tr><tr><td id="L2589" class="css-a4x74f"><span>2589</span></td><td id="LC2589" class="css-1dcdqdg"><code>        termsLength = terms.length
</code></td></tr><tr><td id="L2590" class="css-a4x74f"><span>2590</span></td><td id="LC2590" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2591" class="css-a4x74f"><span>2591</span></td><td id="LC2591" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2592" class="css-a4x74f"><span>2592</span></td><td id="LC2592" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> fieldBoost = <span class="code-keyword">this</span>._fields[fieldName].boost || <span class="code-number">1</span>,
</code></td></tr><tr><td id="L2593" class="css-a4x74f"><span>2593</span></td><td id="LC2593" class="css-1dcdqdg"><code>        docBoost = <span class="code-keyword">this</span>._documents[fieldRef.docRef].boost || <span class="code-number">1</span>
</code></td></tr><tr><td id="L2594" class="css-a4x74f"><span>2594</span></td><td id="LC2594" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2595" class="css-a4x74f"><span>2595</span></td><td id="LC2595" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> j = <span class="code-number">0</span>; j &lt; termsLength; j++) {
</code></td></tr><tr><td id="L2596" class="css-a4x74f"><span>2596</span></td><td id="LC2596" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> term = terms[j],
</code></td></tr><tr><td id="L2597" class="css-a4x74f"><span>2597</span></td><td id="LC2597" class="css-1dcdqdg"><code>          tf = termFrequencies[term],
</code></td></tr><tr><td id="L2598" class="css-a4x74f"><span>2598</span></td><td id="LC2598" class="css-1dcdqdg"><code>          termIndex = <span class="code-keyword">this</span>.invertedIndex[term]._index,
</code></td></tr><tr><td id="L2599" class="css-a4x74f"><span>2599</span></td><td id="LC2599" class="css-1dcdqdg"><code>          idf, score, scoreWithPrecision
</code></td></tr><tr><td id="L2600" class="css-a4x74f"><span>2600</span></td><td id="LC2600" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2601" class="css-a4x74f"><span>2601</span></td><td id="LC2601" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (termIdfCache[term] === <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2602" class="css-a4x74f"><span>2602</span></td><td id="LC2602" class="css-1dcdqdg"><code>        idf = lunr.idf(<span class="code-keyword">this</span>.invertedIndex[term], <span class="code-keyword">this</span>.documentCount)
</code></td></tr><tr><td id="L2603" class="css-a4x74f"><span>2603</span></td><td id="LC2603" class="css-1dcdqdg"><code>        termIdfCache[term] = idf
</code></td></tr><tr><td id="L2604" class="css-a4x74f"><span>2604</span></td><td id="LC2604" class="css-1dcdqdg"><code>      } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2605" class="css-a4x74f"><span>2605</span></td><td id="LC2605" class="css-1dcdqdg"><code>        idf = termIdfCache[term]
</code></td></tr><tr><td id="L2606" class="css-a4x74f"><span>2606</span></td><td id="LC2606" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2607" class="css-a4x74f"><span>2607</span></td><td id="LC2607" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2608" class="css-a4x74f"><span>2608</span></td><td id="LC2608" class="css-1dcdqdg"><code>      score = idf * ((<span class="code-keyword">this</span>._k1 + <span class="code-number">1</span>) * tf) / (<span class="code-keyword">this</span>._k1 * (<span class="code-number">1</span> - <span class="code-keyword">this</span>._b + <span class="code-keyword">this</span>._b * (fieldLength / <span class="code-keyword">this</span>.averageFieldLength[fieldName])) + tf)
</code></td></tr><tr><td id="L2609" class="css-a4x74f"><span>2609</span></td><td id="LC2609" class="css-1dcdqdg"><code>      score *= fieldBoost
</code></td></tr><tr><td id="L2610" class="css-a4x74f"><span>2610</span></td><td id="LC2610" class="css-1dcdqdg"><code>      score *= docBoost
</code></td></tr><tr><td id="L2611" class="css-a4x74f"><span>2611</span></td><td id="LC2611" class="css-1dcdqdg"><code>      scoreWithPrecision = <span class="code-built_in">Math</span>.round(score * <span class="code-number">1000</span>) / <span class="code-number">1000</span>
</code></td></tr><tr><td id="L2612" class="css-a4x74f"><span>2612</span></td><td id="LC2612" class="css-1dcdqdg"><code>      <span class="code-comment">// Converts 1.23456789 to 1.234.</span>
</code></td></tr><tr><td id="L2613" class="css-a4x74f"><span>2613</span></td><td id="LC2613" class="css-1dcdqdg"><code>      <span class="code-comment">// Reducing the precision so that the vectors take up less</span>
</code></td></tr><tr><td id="L2614" class="css-a4x74f"><span>2614</span></td><td id="LC2614" class="css-1dcdqdg"><code>      <span class="code-comment">// space when serialised. Doing it now so that they behave</span>
</code></td></tr><tr><td id="L2615" class="css-a4x74f"><span>2615</span></td><td id="LC2615" class="css-1dcdqdg"><code>      <span class="code-comment">// the same before and after serialisation. Also, this is</span>
</code></td></tr><tr><td id="L2616" class="css-a4x74f"><span>2616</span></td><td id="LC2616" class="css-1dcdqdg"><code>      <span class="code-comment">// the fastest approach to reducing a number's precision in</span>
</code></td></tr><tr><td id="L2617" class="css-a4x74f"><span>2617</span></td><td id="LC2617" class="css-1dcdqdg"><code>      <span class="code-comment">// JavaScript.</span>
</code></td></tr><tr><td id="L2618" class="css-a4x74f"><span>2618</span></td><td id="LC2618" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2619" class="css-a4x74f"><span>2619</span></td><td id="LC2619" class="css-1dcdqdg"><code>      fieldVector.insert(termIndex, scoreWithPrecision)
</code></td></tr><tr><td id="L2620" class="css-a4x74f"><span>2620</span></td><td id="LC2620" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2621" class="css-a4x74f"><span>2621</span></td><td id="LC2621" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2622" class="css-a4x74f"><span>2622</span></td><td id="LC2622" class="css-1dcdqdg"><code>    fieldVectors[fieldRef] = fieldVector
</code></td></tr><tr><td id="L2623" class="css-a4x74f"><span>2623</span></td><td id="LC2623" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2624" class="css-a4x74f"><span>2624</span></td><td id="LC2624" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2625" class="css-a4x74f"><span>2625</span></td><td id="LC2625" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.fieldVectors = fieldVectors
</code></td></tr><tr><td id="L2626" class="css-a4x74f"><span>2626</span></td><td id="LC2626" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2627" class="css-a4x74f"><span>2627</span></td><td id="LC2627" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2628" class="css-a4x74f"><span>2628</span></td><td id="LC2628" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2629" class="css-a4x74f"><span>2629</span></td><td id="LC2629" class="css-1dcdqdg"><code><span class="code-comment"> * Creates a token set of all tokens in the index using lunr.TokenSet
</span></code></td></tr><tr><td id="L2630" class="css-a4x74f"><span>2630</span></td><td id="LC2630" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2631" class="css-a4x74f"><span>2631</span></td><td id="LC2631" class="css-1dcdqdg"><code><span class="code-comment"> * @private
</span></code></td></tr><tr><td id="L2632" class="css-a4x74f"><span>2632</span></td><td id="LC2632" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2633" class="css-a4x74f"><span>2633</span></td><td id="LC2633" class="css-1dcdqdg"><code>lunr.Builder.prototype.createTokenSet = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2634" class="css-a4x74f"><span>2634</span></td><td id="LC2634" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.tokenSet = lunr.TokenSet.fromArray(
</code></td></tr><tr><td id="L2635" class="css-a4x74f"><span>2635</span></td><td id="LC2635" class="css-1dcdqdg"><code>    <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>.invertedIndex).sort()
</code></td></tr><tr><td id="L2636" class="css-a4x74f"><span>2636</span></td><td id="LC2636" class="css-1dcdqdg"><code>  )
</code></td></tr><tr><td id="L2637" class="css-a4x74f"><span>2637</span></td><td id="LC2637" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2638" class="css-a4x74f"><span>2638</span></td><td id="LC2638" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2639" class="css-a4x74f"><span>2639</span></td><td id="LC2639" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2640" class="css-a4x74f"><span>2640</span></td><td id="LC2640" class="css-1dcdqdg"><code><span class="code-comment"> * Builds the index, creating an instance of lunr.Index.
</span></code></td></tr><tr><td id="L2641" class="css-a4x74f"><span>2641</span></td><td id="LC2641" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2642" class="css-a4x74f"><span>2642</span></td><td id="LC2642" class="css-1dcdqdg"><code><span class="code-comment"> * This completes the indexing process and should only be called
</span></code></td></tr><tr><td id="L2643" class="css-a4x74f"><span>2643</span></td><td id="LC2643" class="css-1dcdqdg"><code><span class="code-comment"> * once all documents have been added to the index.
</span></code></td></tr><tr><td id="L2644" class="css-a4x74f"><span>2644</span></td><td id="LC2644" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2645" class="css-a4x74f"><span>2645</span></td><td id="LC2645" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Index}
</span></code></td></tr><tr><td id="L2646" class="css-a4x74f"><span>2646</span></td><td id="LC2646" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2647" class="css-a4x74f"><span>2647</span></td><td id="LC2647" class="css-1dcdqdg"><code>lunr.Builder.prototype.build = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2648" class="css-a4x74f"><span>2648</span></td><td id="LC2648" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.calculateAverageFieldLengths()
</code></td></tr><tr><td id="L2649" class="css-a4x74f"><span>2649</span></td><td id="LC2649" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.createFieldVectors()
</code></td></tr><tr><td id="L2650" class="css-a4x74f"><span>2650</span></td><td id="LC2650" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.createTokenSet()
</code></td></tr><tr><td id="L2651" class="css-a4x74f"><span>2651</span></td><td id="LC2651" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2652" class="css-a4x74f"><span>2652</span></td><td id="LC2652" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">new</span> lunr.Index({
</code></td></tr><tr><td id="L2653" class="css-a4x74f"><span>2653</span></td><td id="LC2653" class="css-1dcdqdg"><code>    invertedIndex: <span class="code-keyword">this</span>.invertedIndex,
</code></td></tr><tr><td id="L2654" class="css-a4x74f"><span>2654</span></td><td id="LC2654" class="css-1dcdqdg"><code>    fieldVectors: <span class="code-keyword">this</span>.fieldVectors,
</code></td></tr><tr><td id="L2655" class="css-a4x74f"><span>2655</span></td><td id="LC2655" class="css-1dcdqdg"><code>    tokenSet: <span class="code-keyword">this</span>.tokenSet,
</code></td></tr><tr><td id="L2656" class="css-a4x74f"><span>2656</span></td><td id="LC2656" class="css-1dcdqdg"><code>    fields: <span class="code-built_in">Object</span>.keys(<span class="code-keyword">this</span>._fields),
</code></td></tr><tr><td id="L2657" class="css-a4x74f"><span>2657</span></td><td id="LC2657" class="css-1dcdqdg"><code>    pipeline: <span class="code-keyword">this</span>.searchPipeline
</code></td></tr><tr><td id="L2658" class="css-a4x74f"><span>2658</span></td><td id="LC2658" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L2659" class="css-a4x74f"><span>2659</span></td><td id="LC2659" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2660" class="css-a4x74f"><span>2660</span></td><td id="LC2660" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2661" class="css-a4x74f"><span>2661</span></td><td id="LC2661" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2662" class="css-a4x74f"><span>2662</span></td><td id="LC2662" class="css-1dcdqdg"><code><span class="code-comment"> * Applies a plugin to the index builder.
</span></code></td></tr><tr><td id="L2663" class="css-a4x74f"><span>2663</span></td><td id="LC2663" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2664" class="css-a4x74f"><span>2664</span></td><td id="LC2664" class="css-1dcdqdg"><code><span class="code-comment"> * A plugin is a function that is called with the index builder as its context.
</span></code></td></tr><tr><td id="L2665" class="css-a4x74f"><span>2665</span></td><td id="LC2665" class="css-1dcdqdg"><code><span class="code-comment"> * Plugins can be used to customise or extend the behaviour of the index
</span></code></td></tr><tr><td id="L2666" class="css-a4x74f"><span>2666</span></td><td id="LC2666" class="css-1dcdqdg"><code><span class="code-comment"> * in some way. A plugin is just a function, that encapsulated the custom
</span></code></td></tr><tr><td id="L2667" class="css-a4x74f"><span>2667</span></td><td id="LC2667" class="css-1dcdqdg"><code><span class="code-comment"> * behaviour that should be applied when building the index.
</span></code></td></tr><tr><td id="L2668" class="css-a4x74f"><span>2668</span></td><td id="LC2668" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2669" class="css-a4x74f"><span>2669</span></td><td id="LC2669" class="css-1dcdqdg"><code><span class="code-comment"> * The plugin function will be called with the index builder as its argument, additional
</span></code></td></tr><tr><td id="L2670" class="css-a4x74f"><span>2670</span></td><td id="LC2670" class="css-1dcdqdg"><code><span class="code-comment"> * arguments can also be passed when calling use. The function will be called
</span></code></td></tr><tr><td id="L2671" class="css-a4x74f"><span>2671</span></td><td id="LC2671" class="css-1dcdqdg"><code><span class="code-comment"> * with the index builder as its context.
</span></code></td></tr><tr><td id="L2672" class="css-a4x74f"><span>2672</span></td><td id="LC2672" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2673" class="css-a4x74f"><span>2673</span></td><td id="LC2673" class="css-1dcdqdg"><code><span class="code-comment"> * @param {Function} plugin The plugin to apply.
</span></code></td></tr><tr><td id="L2674" class="css-a4x74f"><span>2674</span></td><td id="LC2674" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2675" class="css-a4x74f"><span>2675</span></td><td id="LC2675" class="css-1dcdqdg"><code>lunr.Builder.prototype.use = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">fn</span>) </span>{
</code></td></tr><tr><td id="L2676" class="css-a4x74f"><span>2676</span></td><td id="LC2676" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> args = <span class="code-built_in">Array</span>.prototype.slice.call(<span class="code-built_in">arguments</span>, <span class="code-number">1</span>)
</code></td></tr><tr><td id="L2677" class="css-a4x74f"><span>2677</span></td><td id="LC2677" class="css-1dcdqdg"><code>  args.unshift(<span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L2678" class="css-a4x74f"><span>2678</span></td><td id="LC2678" class="css-1dcdqdg"><code>  fn.apply(<span class="code-keyword">this</span>, args)
</code></td></tr><tr><td id="L2679" class="css-a4x74f"><span>2679</span></td><td id="LC2679" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2680" class="css-a4x74f"><span>2680</span></td><td id="LC2680" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2681" class="css-a4x74f"><span>2681</span></td><td id="LC2681" class="css-1dcdqdg"><code><span class="code-comment"> * Contains and collects metadata about a matching document.
</span></code></td></tr><tr><td id="L2682" class="css-a4x74f"><span>2682</span></td><td id="LC2682" class="css-1dcdqdg"><code><span class="code-comment"> * A single instance of lunr.MatchData is returned as part of every
</span></code></td></tr><tr><td id="L2683" class="css-a4x74f"><span>2683</span></td><td id="LC2683" class="css-1dcdqdg"><code><span class="code-comment"> * lunr.Index~Result.
</span></code></td></tr><tr><td id="L2684" class="css-a4x74f"><span>2684</span></td><td id="LC2684" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2685" class="css-a4x74f"><span>2685</span></td><td id="LC2685" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L2686" class="css-a4x74f"><span>2686</span></td><td id="LC2686" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} term - The term this match data is associated with
</span></code></td></tr><tr><td id="L2687" class="css-a4x74f"><span>2687</span></td><td id="LC2687" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} field - The field in which the term was found
</span></code></td></tr><tr><td id="L2688" class="css-a4x74f"><span>2688</span></td><td id="LC2688" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} metadata - The metadata recorded about this term in this field
</span></code></td></tr><tr><td id="L2689" class="css-a4x74f"><span>2689</span></td><td id="LC2689" class="css-1dcdqdg"><code><span class="code-comment"> * @property {object} metadata - A cloned collection of metadata associated with this document.
</span></code></td></tr><tr><td id="L2690" class="css-a4x74f"><span>2690</span></td><td id="LC2690" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.Index~Result}
</span></code></td></tr><tr><td id="L2691" class="css-a4x74f"><span>2691</span></td><td id="LC2691" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2692" class="css-a4x74f"><span>2692</span></td><td id="LC2692" class="css-1dcdqdg"><code>lunr.MatchData = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">term, field, metadata</span>) </span>{
</code></td></tr><tr><td id="L2693" class="css-a4x74f"><span>2693</span></td><td id="LC2693" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> clonedMetadata = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>),
</code></td></tr><tr><td id="L2694" class="css-a4x74f"><span>2694</span></td><td id="LC2694" class="css-1dcdqdg"><code>      metadataKeys = <span class="code-built_in">Object</span>.keys(metadata || {})
</code></td></tr><tr><td id="L2695" class="css-a4x74f"><span>2695</span></td><td id="LC2695" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2696" class="css-a4x74f"><span>2696</span></td><td id="LC2696" class="css-1dcdqdg"><code>  <span class="code-comment">// Cloning the metadata to prevent the original</span>
</code></td></tr><tr><td id="L2697" class="css-a4x74f"><span>2697</span></td><td id="LC2697" class="css-1dcdqdg"><code>  <span class="code-comment">// being mutated during match data combination.</span>
</code></td></tr><tr><td id="L2698" class="css-a4x74f"><span>2698</span></td><td id="LC2698" class="css-1dcdqdg"><code>  <span class="code-comment">// Metadata is kept in an array within the inverted</span>
</code></td></tr><tr><td id="L2699" class="css-a4x74f"><span>2699</span></td><td id="LC2699" class="css-1dcdqdg"><code>  <span class="code-comment">// index so cloning the data can be done with</span>
</code></td></tr><tr><td id="L2700" class="css-a4x74f"><span>2700</span></td><td id="LC2700" class="css-1dcdqdg"><code>  <span class="code-comment">// Array#slice</span>
</code></td></tr><tr><td id="L2701" class="css-a4x74f"><span>2701</span></td><td id="LC2701" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; metadataKeys.length; i++) {
</code></td></tr><tr><td id="L2702" class="css-a4x74f"><span>2702</span></td><td id="LC2702" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> key = metadataKeys[i]
</code></td></tr><tr><td id="L2703" class="css-a4x74f"><span>2703</span></td><td id="LC2703" class="css-1dcdqdg"><code>    clonedMetadata[key] = metadata[key].slice()
</code></td></tr><tr><td id="L2704" class="css-a4x74f"><span>2704</span></td><td id="LC2704" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2705" class="css-a4x74f"><span>2705</span></td><td id="LC2705" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2706" class="css-a4x74f"><span>2706</span></td><td id="LC2706" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.metadata = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2707" class="css-a4x74f"><span>2707</span></td><td id="LC2707" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2708" class="css-a4x74f"><span>2708</span></td><td id="LC2708" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (term !== <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2709" class="css-a4x74f"><span>2709</span></td><td id="LC2709" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.metadata[term] = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2710" class="css-a4x74f"><span>2710</span></td><td id="LC2710" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.metadata[term][field] = clonedMetadata
</code></td></tr><tr><td id="L2711" class="css-a4x74f"><span>2711</span></td><td id="LC2711" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2712" class="css-a4x74f"><span>2712</span></td><td id="LC2712" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2713" class="css-a4x74f"><span>2713</span></td><td id="LC2713" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2714" class="css-a4x74f"><span>2714</span></td><td id="LC2714" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2715" class="css-a4x74f"><span>2715</span></td><td id="LC2715" class="css-1dcdqdg"><code><span class="code-comment"> * An instance of lunr.MatchData will be created for every term that matches a
</span></code></td></tr><tr><td id="L2716" class="css-a4x74f"><span>2716</span></td><td id="LC2716" class="css-1dcdqdg"><code><span class="code-comment"> * document. However only one instance is required in a lunr.Index~Result. This
</span></code></td></tr><tr><td id="L2717" class="css-a4x74f"><span>2717</span></td><td id="LC2717" class="css-1dcdqdg"><code><span class="code-comment"> * method combines metadata from another instance of lunr.MatchData with this
</span></code></td></tr><tr><td id="L2718" class="css-a4x74f"><span>2718</span></td><td id="LC2718" class="css-1dcdqdg"><code><span class="code-comment"> * objects metadata.
</span></code></td></tr><tr><td id="L2719" class="css-a4x74f"><span>2719</span></td><td id="LC2719" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2720" class="css-a4x74f"><span>2720</span></td><td id="LC2720" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.MatchData} otherMatchData - Another instance of match data to merge with this one.
</span></code></td></tr><tr><td id="L2721" class="css-a4x74f"><span>2721</span></td><td id="LC2721" class="css-1dcdqdg"><code><span class="code-comment"> * @see {@link lunr.Index~Result}
</span></code></td></tr><tr><td id="L2722" class="css-a4x74f"><span>2722</span></td><td id="LC2722" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2723" class="css-a4x74f"><span>2723</span></td><td id="LC2723" class="css-1dcdqdg"><code>lunr.MatchData.prototype.combine = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">otherMatchData</span>) </span>{
</code></td></tr><tr><td id="L2724" class="css-a4x74f"><span>2724</span></td><td id="LC2724" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> terms = <span class="code-built_in">Object</span>.keys(otherMatchData.metadata)
</code></td></tr><tr><td id="L2725" class="css-a4x74f"><span>2725</span></td><td id="LC2725" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2726" class="css-a4x74f"><span>2726</span></td><td id="LC2726" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; terms.length; i++) {
</code></td></tr><tr><td id="L2727" class="css-a4x74f"><span>2727</span></td><td id="LC2727" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> term = terms[i],
</code></td></tr><tr><td id="L2728" class="css-a4x74f"><span>2728</span></td><td id="LC2728" class="css-1dcdqdg"><code>        fields = <span class="code-built_in">Object</span>.keys(otherMatchData.metadata[term])
</code></td></tr><tr><td id="L2729" class="css-a4x74f"><span>2729</span></td><td id="LC2729" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2730" class="css-a4x74f"><span>2730</span></td><td id="LC2730" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.metadata[term] == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2731" class="css-a4x74f"><span>2731</span></td><td id="LC2731" class="css-1dcdqdg"><code>      <span class="code-keyword">this</span>.metadata[term] = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2732" class="css-a4x74f"><span>2732</span></td><td id="LC2732" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2733" class="css-a4x74f"><span>2733</span></td><td id="LC2733" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2734" class="css-a4x74f"><span>2734</span></td><td id="LC2734" class="css-1dcdqdg"><code>    <span class="code-keyword">for</span> (<span class="code-keyword">var</span> j = <span class="code-number">0</span>; j &lt; fields.length; j++) {
</code></td></tr><tr><td id="L2735" class="css-a4x74f"><span>2735</span></td><td id="LC2735" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> field = fields[j],
</code></td></tr><tr><td id="L2736" class="css-a4x74f"><span>2736</span></td><td id="LC2736" class="css-1dcdqdg"><code>          keys = <span class="code-built_in">Object</span>.keys(otherMatchData.metadata[term][field])
</code></td></tr><tr><td id="L2737" class="css-a4x74f"><span>2737</span></td><td id="LC2737" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2738" class="css-a4x74f"><span>2738</span></td><td id="LC2738" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.metadata[term][field] == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2739" class="css-a4x74f"><span>2739</span></td><td id="LC2739" class="css-1dcdqdg"><code>        <span class="code-keyword">this</span>.metadata[term][field] = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2740" class="css-a4x74f"><span>2740</span></td><td id="LC2740" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2741" class="css-a4x74f"><span>2741</span></td><td id="LC2741" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2742" class="css-a4x74f"><span>2742</span></td><td id="LC2742" class="css-1dcdqdg"><code>      <span class="code-keyword">for</span> (<span class="code-keyword">var</span> k = <span class="code-number">0</span>; k &lt; keys.length; k++) {
</code></td></tr><tr><td id="L2743" class="css-a4x74f"><span>2743</span></td><td id="LC2743" class="css-1dcdqdg"><code>        <span class="code-keyword">var</span> key = keys[k]
</code></td></tr><tr><td id="L2744" class="css-a4x74f"><span>2744</span></td><td id="LC2744" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2745" class="css-a4x74f"><span>2745</span></td><td id="LC2745" class="css-1dcdqdg"><code>        <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.metadata[term][field][key] == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L2746" class="css-a4x74f"><span>2746</span></td><td id="LC2746" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.metadata[term][field][key] = otherMatchData.metadata[term][field][key]
</code></td></tr><tr><td id="L2747" class="css-a4x74f"><span>2747</span></td><td id="LC2747" class="css-1dcdqdg"><code>        } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2748" class="css-a4x74f"><span>2748</span></td><td id="LC2748" class="css-1dcdqdg"><code>          <span class="code-keyword">this</span>.metadata[term][field][key] = <span class="code-keyword">this</span>.metadata[term][field][key].concat(otherMatchData.metadata[term][field][key])
</code></td></tr><tr><td id="L2749" class="css-a4x74f"><span>2749</span></td><td id="LC2749" class="css-1dcdqdg"><code>        }
</code></td></tr><tr><td id="L2750" class="css-a4x74f"><span>2750</span></td><td id="LC2750" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2751" class="css-a4x74f"><span>2751</span></td><td id="LC2751" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L2752" class="css-a4x74f"><span>2752</span></td><td id="LC2752" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2753" class="css-a4x74f"><span>2753</span></td><td id="LC2753" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2754" class="css-a4x74f"><span>2754</span></td><td id="LC2754" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2755" class="css-a4x74f"><span>2755</span></td><td id="LC2755" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2756" class="css-a4x74f"><span>2756</span></td><td id="LC2756" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2757" class="css-a4x74f"><span>2757</span></td><td id="LC2757" class="css-1dcdqdg"><code><span class="code-comment"> * Add metadata for a term/field pair to this instance of match data.
</span></code></td></tr><tr><td id="L2758" class="css-a4x74f"><span>2758</span></td><td id="LC2758" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2759" class="css-a4x74f"><span>2759</span></td><td id="LC2759" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} term - The term this match data is associated with
</span></code></td></tr><tr><td id="L2760" class="css-a4x74f"><span>2760</span></td><td id="LC2760" class="css-1dcdqdg"><code><span class="code-comment"> * @param {string} field - The field in which the term was found
</span></code></td></tr><tr><td id="L2761" class="css-a4x74f"><span>2761</span></td><td id="LC2761" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} metadata - The metadata recorded about this term in this field
</span></code></td></tr><tr><td id="L2762" class="css-a4x74f"><span>2762</span></td><td id="LC2762" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2763" class="css-a4x74f"><span>2763</span></td><td id="LC2763" class="css-1dcdqdg"><code>lunr.MatchData.prototype.add = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">term, field, metadata</span>) </span>{
</code></td></tr><tr><td id="L2764" class="css-a4x74f"><span>2764</span></td><td id="LC2764" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!(term <span class="code-keyword">in</span> <span class="code-keyword">this</span>.metadata)) {
</code></td></tr><tr><td id="L2765" class="css-a4x74f"><span>2765</span></td><td id="LC2765" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.metadata[term] = <span class="code-built_in">Object</span>.create(<span class="code-literal">null</span>)
</code></td></tr><tr><td id="L2766" class="css-a4x74f"><span>2766</span></td><td id="LC2766" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.metadata[term][field] = metadata
</code></td></tr><tr><td id="L2767" class="css-a4x74f"><span>2767</span></td><td id="LC2767" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L2768" class="css-a4x74f"><span>2768</span></td><td id="LC2768" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2769" class="css-a4x74f"><span>2769</span></td><td id="LC2769" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2770" class="css-a4x74f"><span>2770</span></td><td id="LC2770" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!(field <span class="code-keyword">in</span> <span class="code-keyword">this</span>.metadata[term])) {
</code></td></tr><tr><td id="L2771" class="css-a4x74f"><span>2771</span></td><td id="LC2771" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.metadata[term][field] = metadata
</code></td></tr><tr><td id="L2772" class="css-a4x74f"><span>2772</span></td><td id="LC2772" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L2773" class="css-a4x74f"><span>2773</span></td><td id="LC2773" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2774" class="css-a4x74f"><span>2774</span></td><td id="LC2774" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2775" class="css-a4x74f"><span>2775</span></td><td id="LC2775" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> metadataKeys = <span class="code-built_in">Object</span>.keys(metadata)
</code></td></tr><tr><td id="L2776" class="css-a4x74f"><span>2776</span></td><td id="LC2776" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2777" class="css-a4x74f"><span>2777</span></td><td id="LC2777" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; metadataKeys.length; i++) {
</code></td></tr><tr><td id="L2778" class="css-a4x74f"><span>2778</span></td><td id="LC2778" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> key = metadataKeys[i]
</code></td></tr><tr><td id="L2779" class="css-a4x74f"><span>2779</span></td><td id="LC2779" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2780" class="css-a4x74f"><span>2780</span></td><td id="LC2780" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (key <span class="code-keyword">in</span> <span class="code-keyword">this</span>.metadata[term][field]) {
</code></td></tr><tr><td id="L2781" class="css-a4x74f"><span>2781</span></td><td id="LC2781" class="css-1dcdqdg"><code>      <span class="code-keyword">this</span>.metadata[term][field][key] = <span class="code-keyword">this</span>.metadata[term][field][key].concat(metadata[key])
</code></td></tr><tr><td id="L2782" class="css-a4x74f"><span>2782</span></td><td id="LC2782" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L2783" class="css-a4x74f"><span>2783</span></td><td id="LC2783" class="css-1dcdqdg"><code>      <span class="code-keyword">this</span>.metadata[term][field][key] = metadata[key]
</code></td></tr><tr><td id="L2784" class="css-a4x74f"><span>2784</span></td><td id="LC2784" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2785" class="css-a4x74f"><span>2785</span></td><td id="LC2785" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2786" class="css-a4x74f"><span>2786</span></td><td id="LC2786" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2787" class="css-a4x74f"><span>2787</span></td><td id="LC2787" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2788" class="css-a4x74f"><span>2788</span></td><td id="LC2788" class="css-1dcdqdg"><code><span class="code-comment"> * A lunr.Query provides a programmatic way of defining queries to be performed
</span></code></td></tr><tr><td id="L2789" class="css-a4x74f"><span>2789</span></td><td id="LC2789" class="css-1dcdqdg"><code><span class="code-comment"> * against a {@link lunr.Index}.
</span></code></td></tr><tr><td id="L2790" class="css-a4x74f"><span>2790</span></td><td id="LC2790" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2791" class="css-a4x74f"><span>2791</span></td><td id="LC2791" class="css-1dcdqdg"><code><span class="code-comment"> * Prefer constructing a lunr.Query using the {@link lunr.Index#query} method
</span></code></td></tr><tr><td id="L2792" class="css-a4x74f"><span>2792</span></td><td id="LC2792" class="css-1dcdqdg"><code><span class="code-comment"> * so the query object is pre-initialized with the right index fields.
</span></code></td></tr><tr><td id="L2793" class="css-a4x74f"><span>2793</span></td><td id="LC2793" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2794" class="css-a4x74f"><span>2794</span></td><td id="LC2794" class="css-1dcdqdg"><code><span class="code-comment"> * @constructor
</span></code></td></tr><tr><td id="L2795" class="css-a4x74f"><span>2795</span></td><td id="LC2795" class="css-1dcdqdg"><code><span class="code-comment"> * @property {lunr.Query~Clause[]} clauses - An array of query clauses.
</span></code></td></tr><tr><td id="L2796" class="css-a4x74f"><span>2796</span></td><td id="LC2796" class="css-1dcdqdg"><code><span class="code-comment"> * @property {string[]} allFields - An array of all available fields in a lunr.Index.
</span></code></td></tr><tr><td id="L2797" class="css-a4x74f"><span>2797</span></td><td id="LC2797" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2798" class="css-a4x74f"><span>2798</span></td><td id="LC2798" class="css-1dcdqdg"><code>lunr.Query = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">allFields</span>) </span>{
</code></td></tr><tr><td id="L2799" class="css-a4x74f"><span>2799</span></td><td id="LC2799" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.clauses = []
</code></td></tr><tr><td id="L2800" class="css-a4x74f"><span>2800</span></td><td id="LC2800" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.allFields = allFields
</code></td></tr><tr><td id="L2801" class="css-a4x74f"><span>2801</span></td><td id="LC2801" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2802" class="css-a4x74f"><span>2802</span></td><td id="LC2802" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2803" class="css-a4x74f"><span>2803</span></td><td id="LC2803" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2804" class="css-a4x74f"><span>2804</span></td><td id="LC2804" class="css-1dcdqdg"><code><span class="code-comment"> * Constants for indicating what kind of automatic wildcard insertion will be used when constructing a query clause.
</span></code></td></tr><tr><td id="L2805" class="css-a4x74f"><span>2805</span></td><td id="LC2805" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2806" class="css-a4x74f"><span>2806</span></td><td id="LC2806" class="css-1dcdqdg"><code><span class="code-comment"> * This allows wildcards to be added to the beginning and end of a term without having to manually do any string
</span></code></td></tr><tr><td id="L2807" class="css-a4x74f"><span>2807</span></td><td id="LC2807" class="css-1dcdqdg"><code><span class="code-comment"> * concatenation.
</span></code></td></tr><tr><td id="L2808" class="css-a4x74f"><span>2808</span></td><td id="LC2808" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2809" class="css-a4x74f"><span>2809</span></td><td id="LC2809" class="css-1dcdqdg"><code><span class="code-comment"> * The wildcard constants can be bitwise combined to select both leading and trailing wildcards.
</span></code></td></tr><tr><td id="L2810" class="css-a4x74f"><span>2810</span></td><td id="LC2810" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2811" class="css-a4x74f"><span>2811</span></td><td id="LC2811" class="css-1dcdqdg"><code><span class="code-comment"> * @constant
</span></code></td></tr><tr><td id="L2812" class="css-a4x74f"><span>2812</span></td><td id="LC2812" class="css-1dcdqdg"><code><span class="code-comment"> * @default
</span></code></td></tr><tr><td id="L2813" class="css-a4x74f"><span>2813</span></td><td id="LC2813" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} wildcard.NONE - The term will have no wildcards inserted, this is the default behaviour
</span></code></td></tr><tr><td id="L2814" class="css-a4x74f"><span>2814</span></td><td id="LC2814" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} wildcard.LEADING - Prepend the term with a wildcard, unless a leading wildcard already exists
</span></code></td></tr><tr><td id="L2815" class="css-a4x74f"><span>2815</span></td><td id="LC2815" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} wildcard.TRAILING - Append a wildcard to the term, unless a trailing wildcard already exists
</span></code></td></tr><tr><td id="L2816" class="css-a4x74f"><span>2816</span></td><td id="LC2816" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query~Clause
</span></code></td></tr><tr><td id="L2817" class="css-a4x74f"><span>2817</span></td><td id="LC2817" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query#clause
</span></code></td></tr><tr><td id="L2818" class="css-a4x74f"><span>2818</span></td><td id="LC2818" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query#term
</span></code></td></tr><tr><td id="L2819" class="css-a4x74f"><span>2819</span></td><td id="LC2819" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;query term with trailing wildcard&lt;/caption&gt;
</span></code></td></tr><tr><td id="L2820" class="css-a4x74f"><span>2820</span></td><td id="LC2820" class="css-1dcdqdg"><code><span class="code-comment"> * query.term('foo', { wildcard: lunr.Query.wildcard.TRAILING })
</span></code></td></tr><tr><td id="L2821" class="css-a4x74f"><span>2821</span></td><td id="LC2821" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;query term with leading and trailing wildcard&lt;/caption&gt;
</span></code></td></tr><tr><td id="L2822" class="css-a4x74f"><span>2822</span></td><td id="LC2822" class="css-1dcdqdg"><code><span class="code-comment"> * query.term('foo', {
</span></code></td></tr><tr><td id="L2823" class="css-a4x74f"><span>2823</span></td><td id="LC2823" class="css-1dcdqdg"><code><span class="code-comment"> *   wildcard: lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING
</span></code></td></tr><tr><td id="L2824" class="css-a4x74f"><span>2824</span></td><td id="LC2824" class="css-1dcdqdg"><code><span class="code-comment"> * })
</span></code></td></tr><tr><td id="L2825" class="css-a4x74f"><span>2825</span></td><td id="LC2825" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2826" class="css-a4x74f"><span>2826</span></td><td id="LC2826" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2827" class="css-a4x74f"><span>2827</span></td><td id="LC2827" class="css-1dcdqdg"><code>lunr.Query.wildcard = <span class="code-keyword">new</span> <span class="code-built_in">String</span> (<span class="code-string">"*"</span>)
</code></td></tr><tr><td id="L2828" class="css-a4x74f"><span>2828</span></td><td id="LC2828" class="css-1dcdqdg"><code>lunr.Query.wildcard.NONE = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2829" class="css-a4x74f"><span>2829</span></td><td id="LC2829" class="css-1dcdqdg"><code>lunr.Query.wildcard.LEADING = <span class="code-number">1</span>
</code></td></tr><tr><td id="L2830" class="css-a4x74f"><span>2830</span></td><td id="LC2830" class="css-1dcdqdg"><code>lunr.Query.wildcard.TRAILING = <span class="code-number">2</span>
</code></td></tr><tr><td id="L2831" class="css-a4x74f"><span>2831</span></td><td id="LC2831" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2832" class="css-a4x74f"><span>2832</span></td><td id="LC2832" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2833" class="css-a4x74f"><span>2833</span></td><td id="LC2833" class="css-1dcdqdg"><code><span class="code-comment"> * Constants for indicating what kind of presence a term must have in matching documents.
</span></code></td></tr><tr><td id="L2834" class="css-a4x74f"><span>2834</span></td><td id="LC2834" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2835" class="css-a4x74f"><span>2835</span></td><td id="LC2835" class="css-1dcdqdg"><code><span class="code-comment"> * @constant
</span></code></td></tr><tr><td id="L2836" class="css-a4x74f"><span>2836</span></td><td id="LC2836" class="css-1dcdqdg"><code><span class="code-comment"> * @enum {number}
</span></code></td></tr><tr><td id="L2837" class="css-a4x74f"><span>2837</span></td><td id="LC2837" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query~Clause
</span></code></td></tr><tr><td id="L2838" class="css-a4x74f"><span>2838</span></td><td id="LC2838" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query#clause
</span></code></td></tr><tr><td id="L2839" class="css-a4x74f"><span>2839</span></td><td id="LC2839" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query#term
</span></code></td></tr><tr><td id="L2840" class="css-a4x74f"><span>2840</span></td><td id="LC2840" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;query term with required presence&lt;/caption&gt;
</span></code></td></tr><tr><td id="L2841" class="css-a4x74f"><span>2841</span></td><td id="LC2841" class="css-1dcdqdg"><code><span class="code-comment"> * query.term('foo', { presence: lunr.Query.presence.REQUIRED })
</span></code></td></tr><tr><td id="L2842" class="css-a4x74f"><span>2842</span></td><td id="LC2842" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2843" class="css-a4x74f"><span>2843</span></td><td id="LC2843" class="css-1dcdqdg"><code>lunr.Query.presence = {
</code></td></tr><tr><td id="L2844" class="css-a4x74f"><span>2844</span></td><td id="LC2844" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2845" class="css-a4x74f"><span>2845</span></td><td id="LC2845" class="css-1dcdqdg"><code><span class="code-comment">   * Term's presence in a document is optional, this is the default value.
</span></code></td></tr><tr><td id="L2846" class="css-a4x74f"><span>2846</span></td><td id="LC2846" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2847" class="css-a4x74f"><span>2847</span></td><td id="LC2847" class="css-1dcdqdg"><code>  OPTIONAL: <span class="code-number">1</span>,
</code></td></tr><tr><td id="L2848" class="css-a4x74f"><span>2848</span></td><td id="LC2848" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2849" class="css-a4x74f"><span>2849</span></td><td id="LC2849" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2850" class="css-a4x74f"><span>2850</span></td><td id="LC2850" class="css-1dcdqdg"><code><span class="code-comment">   * Term's presence in a document is required, documents that do not contain
</span></code></td></tr><tr><td id="L2851" class="css-a4x74f"><span>2851</span></td><td id="LC2851" class="css-1dcdqdg"><code><span class="code-comment">   * this term will not be returned.
</span></code></td></tr><tr><td id="L2852" class="css-a4x74f"><span>2852</span></td><td id="LC2852" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2853" class="css-a4x74f"><span>2853</span></td><td id="LC2853" class="css-1dcdqdg"><code>  REQUIRED: <span class="code-number">2</span>,
</code></td></tr><tr><td id="L2854" class="css-a4x74f"><span>2854</span></td><td id="LC2854" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2855" class="css-a4x74f"><span>2855</span></td><td id="LC2855" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L2856" class="css-a4x74f"><span>2856</span></td><td id="LC2856" class="css-1dcdqdg"><code><span class="code-comment">   * Term's presence in a document is prohibited, documents that do contain
</span></code></td></tr><tr><td id="L2857" class="css-a4x74f"><span>2857</span></td><td id="LC2857" class="css-1dcdqdg"><code><span class="code-comment">   * this term will not be returned.
</span></code></td></tr><tr><td id="L2858" class="css-a4x74f"><span>2858</span></td><td id="LC2858" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L2859" class="css-a4x74f"><span>2859</span></td><td id="LC2859" class="css-1dcdqdg"><code>  PROHIBITED: <span class="code-number">3</span>
</code></td></tr><tr><td id="L2860" class="css-a4x74f"><span>2860</span></td><td id="LC2860" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2861" class="css-a4x74f"><span>2861</span></td><td id="LC2861" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2862" class="css-a4x74f"><span>2862</span></td><td id="LC2862" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2863" class="css-a4x74f"><span>2863</span></td><td id="LC2863" class="css-1dcdqdg"><code><span class="code-comment"> * A single clause in a {@link lunr.Query} contains a term and details on how to
</span></code></td></tr><tr><td id="L2864" class="css-a4x74f"><span>2864</span></td><td id="LC2864" class="css-1dcdqdg"><code><span class="code-comment"> * match that term against a {@link lunr.Index}.
</span></code></td></tr><tr><td id="L2865" class="css-a4x74f"><span>2865</span></td><td id="LC2865" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2866" class="css-a4x74f"><span>2866</span></td><td id="LC2866" class="css-1dcdqdg"><code><span class="code-comment"> * @typedef {Object} lunr.Query~Clause
</span></code></td></tr><tr><td id="L2867" class="css-a4x74f"><span>2867</span></td><td id="LC2867" class="css-1dcdqdg"><code><span class="code-comment"> * @property {string[]} fields - The fields in an index this clause should be matched against.
</span></code></td></tr><tr><td id="L2868" class="css-a4x74f"><span>2868</span></td><td id="LC2868" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} [boost=1] - Any boost that should be applied when matching this clause.
</span></code></td></tr><tr><td id="L2869" class="css-a4x74f"><span>2869</span></td><td id="LC2869" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} [editDistance] - Whether the term should have fuzzy matching applied, and how fuzzy the match should be.
</span></code></td></tr><tr><td id="L2870" class="css-a4x74f"><span>2870</span></td><td id="LC2870" class="css-1dcdqdg"><code><span class="code-comment"> * @property {boolean} [usePipeline] - Whether the term should be passed through the search pipeline.
</span></code></td></tr><tr><td id="L2871" class="css-a4x74f"><span>2871</span></td><td id="LC2871" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} [wildcard=lunr.Query.wildcard.NONE] - Whether the term should have wildcards appended or prepended.
</span></code></td></tr><tr><td id="L2872" class="css-a4x74f"><span>2872</span></td><td id="LC2872" class="css-1dcdqdg"><code><span class="code-comment"> * @property {number} [presence=lunr.Query.presence.OPTIONAL] - The terms presence in any matching documents.
</span></code></td></tr><tr><td id="L2873" class="css-a4x74f"><span>2873</span></td><td id="LC2873" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2874" class="css-a4x74f"><span>2874</span></td><td id="LC2874" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2875" class="css-a4x74f"><span>2875</span></td><td id="LC2875" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2876" class="css-a4x74f"><span>2876</span></td><td id="LC2876" class="css-1dcdqdg"><code><span class="code-comment"> * Adds a {@link lunr.Query~Clause} to this query.
</span></code></td></tr><tr><td id="L2877" class="css-a4x74f"><span>2877</span></td><td id="LC2877" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2878" class="css-a4x74f"><span>2878</span></td><td id="LC2878" class="css-1dcdqdg"><code><span class="code-comment"> * Unless the clause contains the fields to be matched all fields will be matched. In addition
</span></code></td></tr><tr><td id="L2879" class="css-a4x74f"><span>2879</span></td><td id="LC2879" class="css-1dcdqdg"><code><span class="code-comment"> * a default boost of 1 is applied to the clause.
</span></code></td></tr><tr><td id="L2880" class="css-a4x74f"><span>2880</span></td><td id="LC2880" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2881" class="css-a4x74f"><span>2881</span></td><td id="LC2881" class="css-1dcdqdg"><code><span class="code-comment"> * @param {lunr.Query~Clause} clause - The clause to add to this query.
</span></code></td></tr><tr><td id="L2882" class="css-a4x74f"><span>2882</span></td><td id="LC2882" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query~Clause
</span></code></td></tr><tr><td id="L2883" class="css-a4x74f"><span>2883</span></td><td id="LC2883" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Query}
</span></code></td></tr><tr><td id="L2884" class="css-a4x74f"><span>2884</span></td><td id="LC2884" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2885" class="css-a4x74f"><span>2885</span></td><td id="LC2885" class="css-1dcdqdg"><code>lunr.Query.prototype.clause = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">clause</span>) </span>{
</code></td></tr><tr><td id="L2886" class="css-a4x74f"><span>2886</span></td><td id="LC2886" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!(<span class="code-string">'fields'</span> <span class="code-keyword">in</span> clause)) {
</code></td></tr><tr><td id="L2887" class="css-a4x74f"><span>2887</span></td><td id="LC2887" class="css-1dcdqdg"><code>    clause.fields = <span class="code-keyword">this</span>.allFields
</code></td></tr><tr><td id="L2888" class="css-a4x74f"><span>2888</span></td><td id="LC2888" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2889" class="css-a4x74f"><span>2889</span></td><td id="LC2889" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2890" class="css-a4x74f"><span>2890</span></td><td id="LC2890" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!(<span class="code-string">'boost'</span> <span class="code-keyword">in</span> clause)) {
</code></td></tr><tr><td id="L2891" class="css-a4x74f"><span>2891</span></td><td id="LC2891" class="css-1dcdqdg"><code>    clause.boost = <span class="code-number">1</span>
</code></td></tr><tr><td id="L2892" class="css-a4x74f"><span>2892</span></td><td id="LC2892" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2893" class="css-a4x74f"><span>2893</span></td><td id="LC2893" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2894" class="css-a4x74f"><span>2894</span></td><td id="LC2894" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!(<span class="code-string">'usePipeline'</span> <span class="code-keyword">in</span> clause)) {
</code></td></tr><tr><td id="L2895" class="css-a4x74f"><span>2895</span></td><td id="LC2895" class="css-1dcdqdg"><code>    clause.usePipeline = <span class="code-literal">true</span>
</code></td></tr><tr><td id="L2896" class="css-a4x74f"><span>2896</span></td><td id="LC2896" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2897" class="css-a4x74f"><span>2897</span></td><td id="LC2897" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2898" class="css-a4x74f"><span>2898</span></td><td id="LC2898" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!(<span class="code-string">'wildcard'</span> <span class="code-keyword">in</span> clause)) {
</code></td></tr><tr><td id="L2899" class="css-a4x74f"><span>2899</span></td><td id="LC2899" class="css-1dcdqdg"><code>    clause.wildcard = lunr.Query.wildcard.NONE
</code></td></tr><tr><td id="L2900" class="css-a4x74f"><span>2900</span></td><td id="LC2900" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2901" class="css-a4x74f"><span>2901</span></td><td id="LC2901" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2902" class="css-a4x74f"><span>2902</span></td><td id="LC2902" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> ((clause.wildcard &amp; lunr.Query.wildcard.LEADING) &amp;&amp; (clause.term.charAt(<span class="code-number">0</span>) != lunr.Query.wildcard)) {
</code></td></tr><tr><td id="L2903" class="css-a4x74f"><span>2903</span></td><td id="LC2903" class="css-1dcdqdg"><code>    clause.term = <span class="code-string">"*"</span> + clause.term
</code></td></tr><tr><td id="L2904" class="css-a4x74f"><span>2904</span></td><td id="LC2904" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2905" class="css-a4x74f"><span>2905</span></td><td id="LC2905" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2906" class="css-a4x74f"><span>2906</span></td><td id="LC2906" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> ((clause.wildcard &amp; lunr.Query.wildcard.TRAILING) &amp;&amp; (clause.term.slice(<span class="code-number">-1</span>) != lunr.Query.wildcard)) {
</code></td></tr><tr><td id="L2907" class="css-a4x74f"><span>2907</span></td><td id="LC2907" class="css-1dcdqdg"><code>    clause.term = <span class="code-string">""</span> + clause.term + <span class="code-string">"*"</span>
</code></td></tr><tr><td id="L2908" class="css-a4x74f"><span>2908</span></td><td id="LC2908" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2909" class="css-a4x74f"><span>2909</span></td><td id="LC2909" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2910" class="css-a4x74f"><span>2910</span></td><td id="LC2910" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (!(<span class="code-string">'presence'</span> <span class="code-keyword">in</span> clause)) {
</code></td></tr><tr><td id="L2911" class="css-a4x74f"><span>2911</span></td><td id="LC2911" class="css-1dcdqdg"><code>    clause.presence = lunr.Query.presence.OPTIONAL
</code></td></tr><tr><td id="L2912" class="css-a4x74f"><span>2912</span></td><td id="LC2912" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2913" class="css-a4x74f"><span>2913</span></td><td id="LC2913" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2914" class="css-a4x74f"><span>2914</span></td><td id="LC2914" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.clauses.push(clause)
</code></td></tr><tr><td id="L2915" class="css-a4x74f"><span>2915</span></td><td id="LC2915" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2916" class="css-a4x74f"><span>2916</span></td><td id="LC2916" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L2917" class="css-a4x74f"><span>2917</span></td><td id="LC2917" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2918" class="css-a4x74f"><span>2918</span></td><td id="LC2918" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2919" class="css-a4x74f"><span>2919</span></td><td id="LC2919" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2920" class="css-a4x74f"><span>2920</span></td><td id="LC2920" class="css-1dcdqdg"><code><span class="code-comment"> * A negated query is one in which every clause has a presence of
</span></code></td></tr><tr><td id="L2921" class="css-a4x74f"><span>2921</span></td><td id="LC2921" class="css-1dcdqdg"><code><span class="code-comment"> * prohibited. These queries require some special processing to return
</span></code></td></tr><tr><td id="L2922" class="css-a4x74f"><span>2922</span></td><td id="LC2922" class="css-1dcdqdg"><code><span class="code-comment"> * the expected results.
</span></code></td></tr><tr><td id="L2923" class="css-a4x74f"><span>2923</span></td><td id="LC2923" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2924" class="css-a4x74f"><span>2924</span></td><td id="LC2924" class="css-1dcdqdg"><code><span class="code-comment"> * @returns boolean
</span></code></td></tr><tr><td id="L2925" class="css-a4x74f"><span>2925</span></td><td id="LC2925" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2926" class="css-a4x74f"><span>2926</span></td><td id="LC2926" class="css-1dcdqdg"><code>lunr.Query.prototype.isNegated = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2927" class="css-a4x74f"><span>2927</span></td><td id="LC2927" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; <span class="code-keyword">this</span>.clauses.length; i++) {
</code></td></tr><tr><td id="L2928" class="css-a4x74f"><span>2928</span></td><td id="LC2928" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.clauses[i].presence != lunr.Query.presence.PROHIBITED) {
</code></td></tr><tr><td id="L2929" class="css-a4x74f"><span>2929</span></td><td id="LC2929" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> <span class="code-literal">false</span>
</code></td></tr><tr><td id="L2930" class="css-a4x74f"><span>2930</span></td><td id="LC2930" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L2931" class="css-a4x74f"><span>2931</span></td><td id="LC2931" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2932" class="css-a4x74f"><span>2932</span></td><td id="LC2932" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2933" class="css-a4x74f"><span>2933</span></td><td id="LC2933" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-literal">true</span>
</code></td></tr><tr><td id="L2934" class="css-a4x74f"><span>2934</span></td><td id="LC2934" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2935" class="css-a4x74f"><span>2935</span></td><td id="LC2935" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2936" class="css-a4x74f"><span>2936</span></td><td id="LC2936" class="css-1dcdqdg"><code><span class="code-comment">/**
</span></code></td></tr><tr><td id="L2937" class="css-a4x74f"><span>2937</span></td><td id="LC2937" class="css-1dcdqdg"><code><span class="code-comment"> * Adds a term to the current query, under the covers this will create a {@link lunr.Query~Clause}
</span></code></td></tr><tr><td id="L2938" class="css-a4x74f"><span>2938</span></td><td id="LC2938" class="css-1dcdqdg"><code><span class="code-comment"> * to the list of clauses that make up this query.
</span></code></td></tr><tr><td id="L2939" class="css-a4x74f"><span>2939</span></td><td id="LC2939" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2940" class="css-a4x74f"><span>2940</span></td><td id="LC2940" class="css-1dcdqdg"><code><span class="code-comment"> * The term is used as is, i.e. no tokenization will be performed by this method. Instead conversion
</span></code></td></tr><tr><td id="L2941" class="css-a4x74f"><span>2941</span></td><td id="LC2941" class="css-1dcdqdg"><code><span class="code-comment"> * to a token or token-like string should be done before calling this method.
</span></code></td></tr><tr><td id="L2942" class="css-a4x74f"><span>2942</span></td><td id="LC2942" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2943" class="css-a4x74f"><span>2943</span></td><td id="LC2943" class="css-1dcdqdg"><code><span class="code-comment"> * The term will be converted to a string by calling `toString`. Multiple terms can be passed as an
</span></code></td></tr><tr><td id="L2944" class="css-a4x74f"><span>2944</span></td><td id="LC2944" class="css-1dcdqdg"><code><span class="code-comment"> * array, each term in the array will share the same options.
</span></code></td></tr><tr><td id="L2945" class="css-a4x74f"><span>2945</span></td><td id="LC2945" class="css-1dcdqdg"><code><span class="code-comment"> *
</span></code></td></tr><tr><td id="L2946" class="css-a4x74f"><span>2946</span></td><td id="LC2946" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object|object[]} term - The term(s) to add to the query.
</span></code></td></tr><tr><td id="L2947" class="css-a4x74f"><span>2947</span></td><td id="LC2947" class="css-1dcdqdg"><code><span class="code-comment"> * @param {object} [options] - Any additional properties to add to the query clause.
</span></code></td></tr><tr><td id="L2948" class="css-a4x74f"><span>2948</span></td><td id="LC2948" class="css-1dcdqdg"><code><span class="code-comment"> * @returns {lunr.Query}
</span></code></td></tr><tr><td id="L2949" class="css-a4x74f"><span>2949</span></td><td id="LC2949" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query#clause
</span></code></td></tr><tr><td id="L2950" class="css-a4x74f"><span>2950</span></td><td id="LC2950" class="css-1dcdqdg"><code><span class="code-comment"> * @see lunr.Query~Clause
</span></code></td></tr><tr><td id="L2951" class="css-a4x74f"><span>2951</span></td><td id="LC2951" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;adding a single term to a query&lt;/caption&gt;
</span></code></td></tr><tr><td id="L2952" class="css-a4x74f"><span>2952</span></td><td id="LC2952" class="css-1dcdqdg"><code><span class="code-comment"> * query.term("foo")
</span></code></td></tr><tr><td id="L2953" class="css-a4x74f"><span>2953</span></td><td id="LC2953" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;adding a single term to a query and specifying search fields, term boost and automatic trailing wildcard&lt;/caption&gt;
</span></code></td></tr><tr><td id="L2954" class="css-a4x74f"><span>2954</span></td><td id="LC2954" class="css-1dcdqdg"><code><span class="code-comment"> * query.term("foo", {
</span></code></td></tr><tr><td id="L2955" class="css-a4x74f"><span>2955</span></td><td id="LC2955" class="css-1dcdqdg"><code><span class="code-comment"> *   fields: ["title"],
</span></code></td></tr><tr><td id="L2956" class="css-a4x74f"><span>2956</span></td><td id="LC2956" class="css-1dcdqdg"><code><span class="code-comment"> *   boost: 10,
</span></code></td></tr><tr><td id="L2957" class="css-a4x74f"><span>2957</span></td><td id="LC2957" class="css-1dcdqdg"><code><span class="code-comment"> *   wildcard: lunr.Query.wildcard.TRAILING
</span></code></td></tr><tr><td id="L2958" class="css-a4x74f"><span>2958</span></td><td id="LC2958" class="css-1dcdqdg"><code><span class="code-comment"> * })
</span></code></td></tr><tr><td id="L2959" class="css-a4x74f"><span>2959</span></td><td id="LC2959" class="css-1dcdqdg"><code><span class="code-comment"> * @example &lt;caption&gt;using lunr.tokenizer to convert a string to tokens before using them as terms&lt;/caption&gt;
</span></code></td></tr><tr><td id="L2960" class="css-a4x74f"><span>2960</span></td><td id="LC2960" class="css-1dcdqdg"><code><span class="code-comment"> * query.term(lunr.tokenizer("foo bar"))
</span></code></td></tr><tr><td id="L2961" class="css-a4x74f"><span>2961</span></td><td id="LC2961" class="css-1dcdqdg"><code><span class="code-comment"> */</span>
</code></td></tr><tr><td id="L2962" class="css-a4x74f"><span>2962</span></td><td id="LC2962" class="css-1dcdqdg"><code>lunr.Query.prototype.term = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">term, options</span>) </span>{
</code></td></tr><tr><td id="L2963" class="css-a4x74f"><span>2963</span></td><td id="LC2963" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-built_in">Array</span>.isArray(term)) {
</code></td></tr><tr><td id="L2964" class="css-a4x74f"><span>2964</span></td><td id="LC2964" class="css-1dcdqdg"><code>    term.forEach(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">t</span>) </span>{ <span class="code-keyword">this</span>.term(t, lunr.utils.clone(options)) }, <span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L2965" class="css-a4x74f"><span>2965</span></td><td id="LC2965" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L2966" class="css-a4x74f"><span>2966</span></td><td id="LC2966" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2967" class="css-a4x74f"><span>2967</span></td><td id="LC2967" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2968" class="css-a4x74f"><span>2968</span></td><td id="LC2968" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> clause = options || {}
</code></td></tr><tr><td id="L2969" class="css-a4x74f"><span>2969</span></td><td id="LC2969" class="css-1dcdqdg"><code>  clause.term = term.toString()
</code></td></tr><tr><td id="L2970" class="css-a4x74f"><span>2970</span></td><td id="LC2970" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2971" class="css-a4x74f"><span>2971</span></td><td id="LC2971" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.clause(clause)
</code></td></tr><tr><td id="L2972" class="css-a4x74f"><span>2972</span></td><td id="LC2972" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2973" class="css-a4x74f"><span>2973</span></td><td id="LC2973" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>
</code></td></tr><tr><td id="L2974" class="css-a4x74f"><span>2974</span></td><td id="LC2974" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2975" class="css-a4x74f"><span>2975</span></td><td id="LC2975" class="css-1dcdqdg"><code>lunr.QueryParseError = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">message, start, end</span>) </span>{
</code></td></tr><tr><td id="L2976" class="css-a4x74f"><span>2976</span></td><td id="LC2976" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.name = <span class="code-string">"QueryParseError"</span>
</code></td></tr><tr><td id="L2977" class="css-a4x74f"><span>2977</span></td><td id="LC2977" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.message = message
</code></td></tr><tr><td id="L2978" class="css-a4x74f"><span>2978</span></td><td id="LC2978" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.start = start
</code></td></tr><tr><td id="L2979" class="css-a4x74f"><span>2979</span></td><td id="LC2979" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.end = end
</code></td></tr><tr><td id="L2980" class="css-a4x74f"><span>2980</span></td><td id="LC2980" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2981" class="css-a4x74f"><span>2981</span></td><td id="LC2981" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2982" class="css-a4x74f"><span>2982</span></td><td id="LC2982" class="css-1dcdqdg"><code>lunr.QueryParseError.prototype = <span class="code-keyword">new</span> <span class="code-built_in">Error</span>
</code></td></tr><tr><td id="L2983" class="css-a4x74f"><span>2983</span></td><td id="LC2983" class="css-1dcdqdg"><code>lunr.QueryLexer = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">str</span>) </span>{
</code></td></tr><tr><td id="L2984" class="css-a4x74f"><span>2984</span></td><td id="LC2984" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.lexemes = []
</code></td></tr><tr><td id="L2985" class="css-a4x74f"><span>2985</span></td><td id="LC2985" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.str = str
</code></td></tr><tr><td id="L2986" class="css-a4x74f"><span>2986</span></td><td id="LC2986" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.length = str.length
</code></td></tr><tr><td id="L2987" class="css-a4x74f"><span>2987</span></td><td id="LC2987" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.pos = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2988" class="css-a4x74f"><span>2988</span></td><td id="LC2988" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.start = <span class="code-number">0</span>
</code></td></tr><tr><td id="L2989" class="css-a4x74f"><span>2989</span></td><td id="LC2989" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.escapeCharPositions = []
</code></td></tr><tr><td id="L2990" class="css-a4x74f"><span>2990</span></td><td id="LC2990" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2991" class="css-a4x74f"><span>2991</span></td><td id="LC2991" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2992" class="css-a4x74f"><span>2992</span></td><td id="LC2992" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.run = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L2993" class="css-a4x74f"><span>2993</span></td><td id="LC2993" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> state = lunr.QueryLexer.lexText
</code></td></tr><tr><td id="L2994" class="css-a4x74f"><span>2994</span></td><td id="LC2994" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L2995" class="css-a4x74f"><span>2995</span></td><td id="LC2995" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (state) {
</code></td></tr><tr><td id="L2996" class="css-a4x74f"><span>2996</span></td><td id="LC2996" class="css-1dcdqdg"><code>    state = state(<span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L2997" class="css-a4x74f"><span>2997</span></td><td id="LC2997" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L2998" class="css-a4x74f"><span>2998</span></td><td id="LC2998" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L2999" class="css-a4x74f"><span>2999</span></td><td id="LC2999" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3000" class="css-a4x74f"><span>3000</span></td><td id="LC3000" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.sliceString = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3001" class="css-a4x74f"><span>3001</span></td><td id="LC3001" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> subSlices = [],
</code></td></tr><tr><td id="L3002" class="css-a4x74f"><span>3002</span></td><td id="LC3002" class="css-1dcdqdg"><code>      sliceStart = <span class="code-keyword">this</span>.start,
</code></td></tr><tr><td id="L3003" class="css-a4x74f"><span>3003</span></td><td id="LC3003" class="css-1dcdqdg"><code>      sliceEnd = <span class="code-keyword">this</span>.pos
</code></td></tr><tr><td id="L3004" class="css-a4x74f"><span>3004</span></td><td id="LC3004" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3005" class="css-a4x74f"><span>3005</span></td><td id="LC3005" class="css-1dcdqdg"><code>  <span class="code-keyword">for</span> (<span class="code-keyword">var</span> i = <span class="code-number">0</span>; i &lt; <span class="code-keyword">this</span>.escapeCharPositions.length; i++) {
</code></td></tr><tr><td id="L3006" class="css-a4x74f"><span>3006</span></td><td id="LC3006" class="css-1dcdqdg"><code>    sliceEnd = <span class="code-keyword">this</span>.escapeCharPositions[i]
</code></td></tr><tr><td id="L3007" class="css-a4x74f"><span>3007</span></td><td id="LC3007" class="css-1dcdqdg"><code>    subSlices.push(<span class="code-keyword">this</span>.str.slice(sliceStart, sliceEnd))
</code></td></tr><tr><td id="L3008" class="css-a4x74f"><span>3008</span></td><td id="LC3008" class="css-1dcdqdg"><code>    sliceStart = sliceEnd + <span class="code-number">1</span>
</code></td></tr><tr><td id="L3009" class="css-a4x74f"><span>3009</span></td><td id="LC3009" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3010" class="css-a4x74f"><span>3010</span></td><td id="LC3010" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3011" class="css-a4x74f"><span>3011</span></td><td id="LC3011" class="css-1dcdqdg"><code>  subSlices.push(<span class="code-keyword">this</span>.str.slice(sliceStart, <span class="code-keyword">this</span>.pos))
</code></td></tr><tr><td id="L3012" class="css-a4x74f"><span>3012</span></td><td id="LC3012" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.escapeCharPositions.length = <span class="code-number">0</span>
</code></td></tr><tr><td id="L3013" class="css-a4x74f"><span>3013</span></td><td id="LC3013" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3014" class="css-a4x74f"><span>3014</span></td><td id="LC3014" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> subSlices.join(<span class="code-string">''</span>)
</code></td></tr><tr><td id="L3015" class="css-a4x74f"><span>3015</span></td><td id="LC3015" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3016" class="css-a4x74f"><span>3016</span></td><td id="LC3016" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3017" class="css-a4x74f"><span>3017</span></td><td id="LC3017" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.emit = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">type</span>) </span>{
</code></td></tr><tr><td id="L3018" class="css-a4x74f"><span>3018</span></td><td id="LC3018" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.lexemes.push({
</code></td></tr><tr><td id="L3019" class="css-a4x74f"><span>3019</span></td><td id="LC3019" class="css-1dcdqdg"><code>    type: type,
</code></td></tr><tr><td id="L3020" class="css-a4x74f"><span>3020</span></td><td id="LC3020" class="css-1dcdqdg"><code>    str: <span class="code-keyword">this</span>.sliceString(),
</code></td></tr><tr><td id="L3021" class="css-a4x74f"><span>3021</span></td><td id="LC3021" class="css-1dcdqdg"><code>    start: <span class="code-keyword">this</span>.start,
</code></td></tr><tr><td id="L3022" class="css-a4x74f"><span>3022</span></td><td id="LC3022" class="css-1dcdqdg"><code>    end: <span class="code-keyword">this</span>.pos
</code></td></tr><tr><td id="L3023" class="css-a4x74f"><span>3023</span></td><td id="LC3023" class="css-1dcdqdg"><code>  })
</code></td></tr><tr><td id="L3024" class="css-a4x74f"><span>3024</span></td><td id="LC3024" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3025" class="css-a4x74f"><span>3025</span></td><td id="LC3025" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.start = <span class="code-keyword">this</span>.pos
</code></td></tr><tr><td id="L3026" class="css-a4x74f"><span>3026</span></td><td id="LC3026" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3027" class="css-a4x74f"><span>3027</span></td><td id="LC3027" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3028" class="css-a4x74f"><span>3028</span></td><td id="LC3028" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.escapeCharacter = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3029" class="css-a4x74f"><span>3029</span></td><td id="LC3029" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.escapeCharPositions.push(<span class="code-keyword">this</span>.pos - <span class="code-number">1</span>)
</code></td></tr><tr><td id="L3030" class="css-a4x74f"><span>3030</span></td><td id="LC3030" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.pos += <span class="code-number">1</span>
</code></td></tr><tr><td id="L3031" class="css-a4x74f"><span>3031</span></td><td id="LC3031" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3032" class="css-a4x74f"><span>3032</span></td><td id="LC3032" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3033" class="css-a4x74f"><span>3033</span></td><td id="LC3033" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.next = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3034" class="css-a4x74f"><span>3034</span></td><td id="LC3034" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.pos &gt;= <span class="code-keyword">this</span>.length) {
</code></td></tr><tr><td id="L3035" class="css-a4x74f"><span>3035</span></td><td id="LC3035" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> lunr.QueryLexer.EOS
</code></td></tr><tr><td id="L3036" class="css-a4x74f"><span>3036</span></td><td id="LC3036" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3037" class="css-a4x74f"><span>3037</span></td><td id="LC3037" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3038" class="css-a4x74f"><span>3038</span></td><td id="LC3038" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> char = <span class="code-keyword">this</span>.str.charAt(<span class="code-keyword">this</span>.pos)
</code></td></tr><tr><td id="L3039" class="css-a4x74f"><span>3039</span></td><td id="LC3039" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.pos += <span class="code-number">1</span>
</code></td></tr><tr><td id="L3040" class="css-a4x74f"><span>3040</span></td><td id="LC3040" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> char
</code></td></tr><tr><td id="L3041" class="css-a4x74f"><span>3041</span></td><td id="LC3041" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3042" class="css-a4x74f"><span>3042</span></td><td id="LC3042" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3043" class="css-a4x74f"><span>3043</span></td><td id="LC3043" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.width = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3044" class="css-a4x74f"><span>3044</span></td><td id="LC3044" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.pos - <span class="code-keyword">this</span>.start
</code></td></tr><tr><td id="L3045" class="css-a4x74f"><span>3045</span></td><td id="LC3045" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3046" class="css-a4x74f"><span>3046</span></td><td id="LC3046" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3047" class="css-a4x74f"><span>3047</span></td><td id="LC3047" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.ignore = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3048" class="css-a4x74f"><span>3048</span></td><td id="LC3048" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.start == <span class="code-keyword">this</span>.pos) {
</code></td></tr><tr><td id="L3049" class="css-a4x74f"><span>3049</span></td><td id="LC3049" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.pos += <span class="code-number">1</span>
</code></td></tr><tr><td id="L3050" class="css-a4x74f"><span>3050</span></td><td id="LC3050" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3051" class="css-a4x74f"><span>3051</span></td><td id="LC3051" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3052" class="css-a4x74f"><span>3052</span></td><td id="LC3052" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.start = <span class="code-keyword">this</span>.pos
</code></td></tr><tr><td id="L3053" class="css-a4x74f"><span>3053</span></td><td id="LC3053" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3054" class="css-a4x74f"><span>3054</span></td><td id="LC3054" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3055" class="css-a4x74f"><span>3055</span></td><td id="LC3055" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.backup = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3056" class="css-a4x74f"><span>3056</span></td><td id="LC3056" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.pos -= <span class="code-number">1</span>
</code></td></tr><tr><td id="L3057" class="css-a4x74f"><span>3057</span></td><td id="LC3057" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3058" class="css-a4x74f"><span>3058</span></td><td id="LC3058" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3059" class="css-a4x74f"><span>3059</span></td><td id="LC3059" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.acceptDigitRun = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3060" class="css-a4x74f"><span>3060</span></td><td id="LC3060" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> char, charCode
</code></td></tr><tr><td id="L3061" class="css-a4x74f"><span>3061</span></td><td id="LC3061" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3062" class="css-a4x74f"><span>3062</span></td><td id="LC3062" class="css-1dcdqdg"><code>  <span class="code-keyword">do</span> {
</code></td></tr><tr><td id="L3063" class="css-a4x74f"><span>3063</span></td><td id="LC3063" class="css-1dcdqdg"><code>    char = <span class="code-keyword">this</span>.next()
</code></td></tr><tr><td id="L3064" class="css-a4x74f"><span>3064</span></td><td id="LC3064" class="css-1dcdqdg"><code>    charCode = char.charCodeAt(<span class="code-number">0</span>)
</code></td></tr><tr><td id="L3065" class="css-a4x74f"><span>3065</span></td><td id="LC3065" class="css-1dcdqdg"><code>  } <span class="code-keyword">while</span> (charCode &gt; <span class="code-number">47</span> &amp;&amp; charCode &lt; <span class="code-number">58</span>)
</code></td></tr><tr><td id="L3066" class="css-a4x74f"><span>3066</span></td><td id="LC3066" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3067" class="css-a4x74f"><span>3067</span></td><td id="LC3067" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (char != lunr.QueryLexer.EOS) {
</code></td></tr><tr><td id="L3068" class="css-a4x74f"><span>3068</span></td><td id="LC3068" class="css-1dcdqdg"><code>    <span class="code-keyword">this</span>.backup()
</code></td></tr><tr><td id="L3069" class="css-a4x74f"><span>3069</span></td><td id="LC3069" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3070" class="css-a4x74f"><span>3070</span></td><td id="LC3070" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3071" class="css-a4x74f"><span>3071</span></td><td id="LC3071" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3072" class="css-a4x74f"><span>3072</span></td><td id="LC3072" class="css-1dcdqdg"><code>lunr.QueryLexer.prototype.more = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3073" class="css-a4x74f"><span>3073</span></td><td id="LC3073" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.pos &lt; <span class="code-keyword">this</span>.length
</code></td></tr><tr><td id="L3074" class="css-a4x74f"><span>3074</span></td><td id="LC3074" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3075" class="css-a4x74f"><span>3075</span></td><td id="LC3075" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3076" class="css-a4x74f"><span>3076</span></td><td id="LC3076" class="css-1dcdqdg"><code>lunr.QueryLexer.EOS = <span class="code-string">'EOS'</span>
</code></td></tr><tr><td id="L3077" class="css-a4x74f"><span>3077</span></td><td id="LC3077" class="css-1dcdqdg"><code>lunr.QueryLexer.FIELD = <span class="code-string">'FIELD'</span>
</code></td></tr><tr><td id="L3078" class="css-a4x74f"><span>3078</span></td><td id="LC3078" class="css-1dcdqdg"><code>lunr.QueryLexer.TERM = <span class="code-string">'TERM'</span>
</code></td></tr><tr><td id="L3079" class="css-a4x74f"><span>3079</span></td><td id="LC3079" class="css-1dcdqdg"><code>lunr.QueryLexer.EDIT_DISTANCE = <span class="code-string">'EDIT_DISTANCE'</span>
</code></td></tr><tr><td id="L3080" class="css-a4x74f"><span>3080</span></td><td id="LC3080" class="css-1dcdqdg"><code>lunr.QueryLexer.BOOST = <span class="code-string">'BOOST'</span>
</code></td></tr><tr><td id="L3081" class="css-a4x74f"><span>3081</span></td><td id="LC3081" class="css-1dcdqdg"><code>lunr.QueryLexer.PRESENCE = <span class="code-string">'PRESENCE'</span>
</code></td></tr><tr><td id="L3082" class="css-a4x74f"><span>3082</span></td><td id="LC3082" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3083" class="css-a4x74f"><span>3083</span></td><td id="LC3083" class="css-1dcdqdg"><code>lunr.QueryLexer.lexField = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">lexer</span>) </span>{
</code></td></tr><tr><td id="L3084" class="css-a4x74f"><span>3084</span></td><td id="LC3084" class="css-1dcdqdg"><code>  lexer.backup()
</code></td></tr><tr><td id="L3085" class="css-a4x74f"><span>3085</span></td><td id="LC3085" class="css-1dcdqdg"><code>  lexer.emit(lunr.QueryLexer.FIELD)
</code></td></tr><tr><td id="L3086" class="css-a4x74f"><span>3086</span></td><td id="LC3086" class="css-1dcdqdg"><code>  lexer.ignore()
</code></td></tr><tr><td id="L3087" class="css-a4x74f"><span>3087</span></td><td id="LC3087" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> lunr.QueryLexer.lexText
</code></td></tr><tr><td id="L3088" class="css-a4x74f"><span>3088</span></td><td id="LC3088" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3089" class="css-a4x74f"><span>3089</span></td><td id="LC3089" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3090" class="css-a4x74f"><span>3090</span></td><td id="LC3090" class="css-1dcdqdg"><code>lunr.QueryLexer.lexTerm = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">lexer</span>) </span>{
</code></td></tr><tr><td id="L3091" class="css-a4x74f"><span>3091</span></td><td id="LC3091" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexer.width() &gt; <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L3092" class="css-a4x74f"><span>3092</span></td><td id="LC3092" class="css-1dcdqdg"><code>    lexer.backup()
</code></td></tr><tr><td id="L3093" class="css-a4x74f"><span>3093</span></td><td id="LC3093" class="css-1dcdqdg"><code>    lexer.emit(lunr.QueryLexer.TERM)
</code></td></tr><tr><td id="L3094" class="css-a4x74f"><span>3094</span></td><td id="LC3094" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3095" class="css-a4x74f"><span>3095</span></td><td id="LC3095" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3096" class="css-a4x74f"><span>3096</span></td><td id="LC3096" class="css-1dcdqdg"><code>  lexer.ignore()
</code></td></tr><tr><td id="L3097" class="css-a4x74f"><span>3097</span></td><td id="LC3097" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3098" class="css-a4x74f"><span>3098</span></td><td id="LC3098" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexer.more()) {
</code></td></tr><tr><td id="L3099" class="css-a4x74f"><span>3099</span></td><td id="LC3099" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> lunr.QueryLexer.lexText
</code></td></tr><tr><td id="L3100" class="css-a4x74f"><span>3100</span></td><td id="LC3100" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3101" class="css-a4x74f"><span>3101</span></td><td id="LC3101" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3102" class="css-a4x74f"><span>3102</span></td><td id="LC3102" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3103" class="css-a4x74f"><span>3103</span></td><td id="LC3103" class="css-1dcdqdg"><code>lunr.QueryLexer.lexEditDistance = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">lexer</span>) </span>{
</code></td></tr><tr><td id="L3104" class="css-a4x74f"><span>3104</span></td><td id="LC3104" class="css-1dcdqdg"><code>  lexer.ignore()
</code></td></tr><tr><td id="L3105" class="css-a4x74f"><span>3105</span></td><td id="LC3105" class="css-1dcdqdg"><code>  lexer.acceptDigitRun()
</code></td></tr><tr><td id="L3106" class="css-a4x74f"><span>3106</span></td><td id="LC3106" class="css-1dcdqdg"><code>  lexer.emit(lunr.QueryLexer.EDIT_DISTANCE)
</code></td></tr><tr><td id="L3107" class="css-a4x74f"><span>3107</span></td><td id="LC3107" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> lunr.QueryLexer.lexText
</code></td></tr><tr><td id="L3108" class="css-a4x74f"><span>3108</span></td><td id="LC3108" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3109" class="css-a4x74f"><span>3109</span></td><td id="LC3109" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3110" class="css-a4x74f"><span>3110</span></td><td id="LC3110" class="css-1dcdqdg"><code>lunr.QueryLexer.lexBoost = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">lexer</span>) </span>{
</code></td></tr><tr><td id="L3111" class="css-a4x74f"><span>3111</span></td><td id="LC3111" class="css-1dcdqdg"><code>  lexer.ignore()
</code></td></tr><tr><td id="L3112" class="css-a4x74f"><span>3112</span></td><td id="LC3112" class="css-1dcdqdg"><code>  lexer.acceptDigitRun()
</code></td></tr><tr><td id="L3113" class="css-a4x74f"><span>3113</span></td><td id="LC3113" class="css-1dcdqdg"><code>  lexer.emit(lunr.QueryLexer.BOOST)
</code></td></tr><tr><td id="L3114" class="css-a4x74f"><span>3114</span></td><td id="LC3114" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> lunr.QueryLexer.lexText
</code></td></tr><tr><td id="L3115" class="css-a4x74f"><span>3115</span></td><td id="LC3115" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3116" class="css-a4x74f"><span>3116</span></td><td id="LC3116" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3117" class="css-a4x74f"><span>3117</span></td><td id="LC3117" class="css-1dcdqdg"><code>lunr.QueryLexer.lexEOS = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">lexer</span>) </span>{
</code></td></tr><tr><td id="L3118" class="css-a4x74f"><span>3118</span></td><td id="LC3118" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexer.width() &gt; <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L3119" class="css-a4x74f"><span>3119</span></td><td id="LC3119" class="css-1dcdqdg"><code>    lexer.emit(lunr.QueryLexer.TERM)
</code></td></tr><tr><td id="L3120" class="css-a4x74f"><span>3120</span></td><td id="LC3120" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3121" class="css-a4x74f"><span>3121</span></td><td id="LC3121" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3122" class="css-a4x74f"><span>3122</span></td><td id="LC3122" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3123" class="css-a4x74f"><span>3123</span></td><td id="LC3123" class="css-1dcdqdg"><code><span class="code-comment">// This matches the separator used when tokenising fields</span>
</code></td></tr><tr><td id="L3124" class="css-a4x74f"><span>3124</span></td><td id="LC3124" class="css-1dcdqdg"><code><span class="code-comment">// within a document. These should match otherwise it is</span>
</code></td></tr><tr><td id="L3125" class="css-a4x74f"><span>3125</span></td><td id="LC3125" class="css-1dcdqdg"><code><span class="code-comment">// not possible to search for some tokens within a document.</span>
</code></td></tr><tr><td id="L3126" class="css-a4x74f"><span>3126</span></td><td id="LC3126" class="css-1dcdqdg"><code><span class="code-comment">//</span>
</code></td></tr><tr><td id="L3127" class="css-a4x74f"><span>3127</span></td><td id="LC3127" class="css-1dcdqdg"><code><span class="code-comment">// It is possible for the user to change the separator on the</span>
</code></td></tr><tr><td id="L3128" class="css-a4x74f"><span>3128</span></td><td id="LC3128" class="css-1dcdqdg"><code><span class="code-comment">// tokenizer so it _might_ clash with any other of the special</span>
</code></td></tr><tr><td id="L3129" class="css-a4x74f"><span>3129</span></td><td id="LC3129" class="css-1dcdqdg"><code><span class="code-comment">// characters already used within the search string, e.g. :.</span>
</code></td></tr><tr><td id="L3130" class="css-a4x74f"><span>3130</span></td><td id="LC3130" class="css-1dcdqdg"><code><span class="code-comment">//</span>
</code></td></tr><tr><td id="L3131" class="css-a4x74f"><span>3131</span></td><td id="LC3131" class="css-1dcdqdg"><code><span class="code-comment">// This means that it is possible to change the separator in</span>
</code></td></tr><tr><td id="L3132" class="css-a4x74f"><span>3132</span></td><td id="LC3132" class="css-1dcdqdg"><code><span class="code-comment">// such a way that makes some words unsearchable using a search</span>
</code></td></tr><tr><td id="L3133" class="css-a4x74f"><span>3133</span></td><td id="LC3133" class="css-1dcdqdg"><code><span class="code-comment">// string.</span>
</code></td></tr><tr><td id="L3134" class="css-a4x74f"><span>3134</span></td><td id="LC3134" class="css-1dcdqdg"><code>lunr.QueryLexer.termSeparator = lunr.tokenizer.separator
</code></td></tr><tr><td id="L3135" class="css-a4x74f"><span>3135</span></td><td id="LC3135" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3136" class="css-a4x74f"><span>3136</span></td><td id="LC3136" class="css-1dcdqdg"><code>lunr.QueryLexer.lexText = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">lexer</span>) </span>{
</code></td></tr><tr><td id="L3137" class="css-a4x74f"><span>3137</span></td><td id="LC3137" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (<span class="code-literal">true</span>) {
</code></td></tr><tr><td id="L3138" class="css-a4x74f"><span>3138</span></td><td id="LC3138" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> char = lexer.next()
</code></td></tr><tr><td id="L3139" class="css-a4x74f"><span>3139</span></td><td id="LC3139" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3140" class="css-a4x74f"><span>3140</span></td><td id="LC3140" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char == lunr.QueryLexer.EOS) {
</code></td></tr><tr><td id="L3141" class="css-a4x74f"><span>3141</span></td><td id="LC3141" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryLexer.lexEOS
</code></td></tr><tr><td id="L3142" class="css-a4x74f"><span>3142</span></td><td id="LC3142" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3143" class="css-a4x74f"><span>3143</span></td><td id="LC3143" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3144" class="css-a4x74f"><span>3144</span></td><td id="LC3144" class="css-1dcdqdg"><code>    <span class="code-comment">// Escape character is '\'</span>
</code></td></tr><tr><td id="L3145" class="css-a4x74f"><span>3145</span></td><td id="LC3145" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char.charCodeAt(<span class="code-number">0</span>) == <span class="code-number">92</span>) {
</code></td></tr><tr><td id="L3146" class="css-a4x74f"><span>3146</span></td><td id="LC3146" class="css-1dcdqdg"><code>      lexer.escapeCharacter()
</code></td></tr><tr><td id="L3147" class="css-a4x74f"><span>3147</span></td><td id="LC3147" class="css-1dcdqdg"><code>      <span class="code-keyword">continue</span>
</code></td></tr><tr><td id="L3148" class="css-a4x74f"><span>3148</span></td><td id="LC3148" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3149" class="css-a4x74f"><span>3149</span></td><td id="LC3149" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3150" class="css-a4x74f"><span>3150</span></td><td id="LC3150" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char == <span class="code-string">":"</span>) {
</code></td></tr><tr><td id="L3151" class="css-a4x74f"><span>3151</span></td><td id="LC3151" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryLexer.lexField
</code></td></tr><tr><td id="L3152" class="css-a4x74f"><span>3152</span></td><td id="LC3152" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3153" class="css-a4x74f"><span>3153</span></td><td id="LC3153" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3154" class="css-a4x74f"><span>3154</span></td><td id="LC3154" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char == <span class="code-string">"~"</span>) {
</code></td></tr><tr><td id="L3155" class="css-a4x74f"><span>3155</span></td><td id="LC3155" class="css-1dcdqdg"><code>      lexer.backup()
</code></td></tr><tr><td id="L3156" class="css-a4x74f"><span>3156</span></td><td id="LC3156" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (lexer.width() &gt; <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L3157" class="css-a4x74f"><span>3157</span></td><td id="LC3157" class="css-1dcdqdg"><code>        lexer.emit(lunr.QueryLexer.TERM)
</code></td></tr><tr><td id="L3158" class="css-a4x74f"><span>3158</span></td><td id="LC3158" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3159" class="css-a4x74f"><span>3159</span></td><td id="LC3159" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryLexer.lexEditDistance
</code></td></tr><tr><td id="L3160" class="css-a4x74f"><span>3160</span></td><td id="LC3160" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3161" class="css-a4x74f"><span>3161</span></td><td id="LC3161" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3162" class="css-a4x74f"><span>3162</span></td><td id="LC3162" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char == <span class="code-string">"^"</span>) {
</code></td></tr><tr><td id="L3163" class="css-a4x74f"><span>3163</span></td><td id="LC3163" class="css-1dcdqdg"><code>      lexer.backup()
</code></td></tr><tr><td id="L3164" class="css-a4x74f"><span>3164</span></td><td id="LC3164" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (lexer.width() &gt; <span class="code-number">0</span>) {
</code></td></tr><tr><td id="L3165" class="css-a4x74f"><span>3165</span></td><td id="LC3165" class="css-1dcdqdg"><code>        lexer.emit(lunr.QueryLexer.TERM)
</code></td></tr><tr><td id="L3166" class="css-a4x74f"><span>3166</span></td><td id="LC3166" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3167" class="css-a4x74f"><span>3167</span></td><td id="LC3167" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryLexer.lexBoost
</code></td></tr><tr><td id="L3168" class="css-a4x74f"><span>3168</span></td><td id="LC3168" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3169" class="css-a4x74f"><span>3169</span></td><td id="LC3169" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3170" class="css-a4x74f"><span>3170</span></td><td id="LC3170" class="css-1dcdqdg"><code>    <span class="code-comment">// "+" indicates term presence is required</span>
</code></td></tr><tr><td id="L3171" class="css-a4x74f"><span>3171</span></td><td id="LC3171" class="css-1dcdqdg"><code>    <span class="code-comment">// checking for length to ensure that only</span>
</code></td></tr><tr><td id="L3172" class="css-a4x74f"><span>3172</span></td><td id="LC3172" class="css-1dcdqdg"><code>    <span class="code-comment">// leading "+" are considered</span>
</code></td></tr><tr><td id="L3173" class="css-a4x74f"><span>3173</span></td><td id="LC3173" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char == <span class="code-string">"+"</span> &amp;&amp; lexer.width() === <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L3174" class="css-a4x74f"><span>3174</span></td><td id="LC3174" class="css-1dcdqdg"><code>      lexer.emit(lunr.QueryLexer.PRESENCE)
</code></td></tr><tr><td id="L3175" class="css-a4x74f"><span>3175</span></td><td id="LC3175" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryLexer.lexText
</code></td></tr><tr><td id="L3176" class="css-a4x74f"><span>3176</span></td><td id="LC3176" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3177" class="css-a4x74f"><span>3177</span></td><td id="LC3177" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3178" class="css-a4x74f"><span>3178</span></td><td id="LC3178" class="css-1dcdqdg"><code>    <span class="code-comment">// "-" indicates term presence is prohibited</span>
</code></td></tr><tr><td id="L3179" class="css-a4x74f"><span>3179</span></td><td id="LC3179" class="css-1dcdqdg"><code>    <span class="code-comment">// checking for length to ensure that only</span>
</code></td></tr><tr><td id="L3180" class="css-a4x74f"><span>3180</span></td><td id="LC3180" class="css-1dcdqdg"><code>    <span class="code-comment">// leading "-" are considered</span>
</code></td></tr><tr><td id="L3181" class="css-a4x74f"><span>3181</span></td><td id="LC3181" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char == <span class="code-string">"-"</span> &amp;&amp; lexer.width() === <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L3182" class="css-a4x74f"><span>3182</span></td><td id="LC3182" class="css-1dcdqdg"><code>      lexer.emit(lunr.QueryLexer.PRESENCE)
</code></td></tr><tr><td id="L3183" class="css-a4x74f"><span>3183</span></td><td id="LC3183" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryLexer.lexText
</code></td></tr><tr><td id="L3184" class="css-a4x74f"><span>3184</span></td><td id="LC3184" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3185" class="css-a4x74f"><span>3185</span></td><td id="LC3185" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3186" class="css-a4x74f"><span>3186</span></td><td id="LC3186" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (char.match(lunr.QueryLexer.termSeparator)) {
</code></td></tr><tr><td id="L3187" class="css-a4x74f"><span>3187</span></td><td id="LC3187" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryLexer.lexTerm
</code></td></tr><tr><td id="L3188" class="css-a4x74f"><span>3188</span></td><td id="LC3188" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3189" class="css-a4x74f"><span>3189</span></td><td id="LC3189" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3190" class="css-a4x74f"><span>3190</span></td><td id="LC3190" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3191" class="css-a4x74f"><span>3191</span></td><td id="LC3191" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3192" class="css-a4x74f"><span>3192</span></td><td id="LC3192" class="css-1dcdqdg"><code>lunr.QueryParser = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">str, query</span>) </span>{
</code></td></tr><tr><td id="L3193" class="css-a4x74f"><span>3193</span></td><td id="LC3193" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.lexer = <span class="code-keyword">new</span> lunr.QueryLexer (str)
</code></td></tr><tr><td id="L3194" class="css-a4x74f"><span>3194</span></td><td id="LC3194" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.query = query
</code></td></tr><tr><td id="L3195" class="css-a4x74f"><span>3195</span></td><td id="LC3195" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.currentClause = {}
</code></td></tr><tr><td id="L3196" class="css-a4x74f"><span>3196</span></td><td id="LC3196" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.lexemeIdx = <span class="code-number">0</span>
</code></td></tr><tr><td id="L3197" class="css-a4x74f"><span>3197</span></td><td id="LC3197" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3198" class="css-a4x74f"><span>3198</span></td><td id="LC3198" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3199" class="css-a4x74f"><span>3199</span></td><td id="LC3199" class="css-1dcdqdg"><code>lunr.QueryParser.prototype.parse = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3200" class="css-a4x74f"><span>3200</span></td><td id="LC3200" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.lexer.run()
</code></td></tr><tr><td id="L3201" class="css-a4x74f"><span>3201</span></td><td id="LC3201" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.lexemes = <span class="code-keyword">this</span>.lexer.lexemes
</code></td></tr><tr><td id="L3202" class="css-a4x74f"><span>3202</span></td><td id="LC3202" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3203" class="css-a4x74f"><span>3203</span></td><td id="LC3203" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> state = lunr.QueryParser.parseClause
</code></td></tr><tr><td id="L3204" class="css-a4x74f"><span>3204</span></td><td id="LC3204" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3205" class="css-a4x74f"><span>3205</span></td><td id="LC3205" class="css-1dcdqdg"><code>  <span class="code-keyword">while</span> (state) {
</code></td></tr><tr><td id="L3206" class="css-a4x74f"><span>3206</span></td><td id="LC3206" class="css-1dcdqdg"><code>    state = state(<span class="code-keyword">this</span>)
</code></td></tr><tr><td id="L3207" class="css-a4x74f"><span>3207</span></td><td id="LC3207" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3208" class="css-a4x74f"><span>3208</span></td><td id="LC3208" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3209" class="css-a4x74f"><span>3209</span></td><td id="LC3209" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.query
</code></td></tr><tr><td id="L3210" class="css-a4x74f"><span>3210</span></td><td id="LC3210" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3211" class="css-a4x74f"><span>3211</span></td><td id="LC3211" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3212" class="css-a4x74f"><span>3212</span></td><td id="LC3212" class="css-1dcdqdg"><code>lunr.QueryParser.prototype.peekLexeme = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3213" class="css-a4x74f"><span>3213</span></td><td id="LC3213" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> <span class="code-keyword">this</span>.lexemes[<span class="code-keyword">this</span>.lexemeIdx]
</code></td></tr><tr><td id="L3214" class="css-a4x74f"><span>3214</span></td><td id="LC3214" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3215" class="css-a4x74f"><span>3215</span></td><td id="LC3215" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3216" class="css-a4x74f"><span>3216</span></td><td id="LC3216" class="css-1dcdqdg"><code>lunr.QueryParser.prototype.consumeLexeme = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3217" class="css-a4x74f"><span>3217</span></td><td id="LC3217" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> lexeme = <span class="code-keyword">this</span>.peekLexeme()
</code></td></tr><tr><td id="L3218" class="css-a4x74f"><span>3218</span></td><td id="LC3218" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.lexemeIdx += <span class="code-number">1</span>
</code></td></tr><tr><td id="L3219" class="css-a4x74f"><span>3219</span></td><td id="LC3219" class="css-1dcdqdg"><code>  <span class="code-keyword">return</span> lexeme
</code></td></tr><tr><td id="L3220" class="css-a4x74f"><span>3220</span></td><td id="LC3220" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3221" class="css-a4x74f"><span>3221</span></td><td id="LC3221" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3222" class="css-a4x74f"><span>3222</span></td><td id="LC3222" class="css-1dcdqdg"><code>lunr.QueryParser.prototype.nextClause = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3223" class="css-a4x74f"><span>3223</span></td><td id="LC3223" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> completedClause = <span class="code-keyword">this</span>.currentClause
</code></td></tr><tr><td id="L3224" class="css-a4x74f"><span>3224</span></td><td id="LC3224" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.query.clause(completedClause)
</code></td></tr><tr><td id="L3225" class="css-a4x74f"><span>3225</span></td><td id="LC3225" class="css-1dcdqdg"><code>  <span class="code-keyword">this</span>.currentClause = {}
</code></td></tr><tr><td id="L3226" class="css-a4x74f"><span>3226</span></td><td id="LC3226" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3227" class="css-a4x74f"><span>3227</span></td><td id="LC3227" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3228" class="css-a4x74f"><span>3228</span></td><td id="LC3228" class="css-1dcdqdg"><code>lunr.QueryParser.parseClause = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">parser</span>) </span>{
</code></td></tr><tr><td id="L3229" class="css-a4x74f"><span>3229</span></td><td id="LC3229" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> lexeme = parser.peekLexeme()
</code></td></tr><tr><td id="L3230" class="css-a4x74f"><span>3230</span></td><td id="LC3230" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3231" class="css-a4x74f"><span>3231</span></td><td id="LC3231" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3232" class="css-a4x74f"><span>3232</span></td><td id="LC3232" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3233" class="css-a4x74f"><span>3233</span></td><td id="LC3233" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3234" class="css-a4x74f"><span>3234</span></td><td id="LC3234" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3235" class="css-a4x74f"><span>3235</span></td><td id="LC3235" class="css-1dcdqdg"><code>  <span class="code-keyword">switch</span> (lexeme.type) {
</code></td></tr><tr><td id="L3236" class="css-a4x74f"><span>3236</span></td><td id="LC3236" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.PRESENCE:
</code></td></tr><tr><td id="L3237" class="css-a4x74f"><span>3237</span></td><td id="LC3237" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parsePresence
</code></td></tr><tr><td id="L3238" class="css-a4x74f"><span>3238</span></td><td id="LC3238" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.FIELD:
</code></td></tr><tr><td id="L3239" class="css-a4x74f"><span>3239</span></td><td id="LC3239" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseField
</code></td></tr><tr><td id="L3240" class="css-a4x74f"><span>3240</span></td><td id="LC3240" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.TERM:
</code></td></tr><tr><td id="L3241" class="css-a4x74f"><span>3241</span></td><td id="LC3241" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseTerm
</code></td></tr><tr><td id="L3242" class="css-a4x74f"><span>3242</span></td><td id="LC3242" class="css-1dcdqdg"><code>    <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L3243" class="css-a4x74f"><span>3243</span></td><td id="LC3243" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> errorMessage = <span class="code-string">"expected either a field or a term, found "</span> + lexeme.type
</code></td></tr><tr><td id="L3244" class="css-a4x74f"><span>3244</span></td><td id="LC3244" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3245" class="css-a4x74f"><span>3245</span></td><td id="LC3245" class="css-1dcdqdg"><code>      <span class="code-keyword">if</span> (lexeme.str.length &gt;= <span class="code-number">1</span>) {
</code></td></tr><tr><td id="L3246" class="css-a4x74f"><span>3246</span></td><td id="LC3246" class="css-1dcdqdg"><code>        errorMessage += <span class="code-string">" with value '"</span> + lexeme.str + <span class="code-string">"'"</span>
</code></td></tr><tr><td id="L3247" class="css-a4x74f"><span>3247</span></td><td id="LC3247" class="css-1dcdqdg"><code>      }
</code></td></tr><tr><td id="L3248" class="css-a4x74f"><span>3248</span></td><td id="LC3248" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3249" class="css-a4x74f"><span>3249</span></td><td id="LC3249" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
</code></td></tr><tr><td id="L3250" class="css-a4x74f"><span>3250</span></td><td id="LC3250" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3251" class="css-a4x74f"><span>3251</span></td><td id="LC3251" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3252" class="css-a4x74f"><span>3252</span></td><td id="LC3252" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3253" class="css-a4x74f"><span>3253</span></td><td id="LC3253" class="css-1dcdqdg"><code>lunr.QueryParser.parsePresence = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">parser</span>) </span>{
</code></td></tr><tr><td id="L3254" class="css-a4x74f"><span>3254</span></td><td id="LC3254" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> lexeme = parser.consumeLexeme()
</code></td></tr><tr><td id="L3255" class="css-a4x74f"><span>3255</span></td><td id="LC3255" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3256" class="css-a4x74f"><span>3256</span></td><td id="LC3256" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3257" class="css-a4x74f"><span>3257</span></td><td id="LC3257" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3258" class="css-a4x74f"><span>3258</span></td><td id="LC3258" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3259" class="css-a4x74f"><span>3259</span></td><td id="LC3259" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3260" class="css-a4x74f"><span>3260</span></td><td id="LC3260" class="css-1dcdqdg"><code>  <span class="code-keyword">switch</span> (lexeme.str) {
</code></td></tr><tr><td id="L3261" class="css-a4x74f"><span>3261</span></td><td id="LC3261" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> <span class="code-string">"-"</span>:
</code></td></tr><tr><td id="L3262" class="css-a4x74f"><span>3262</span></td><td id="LC3262" class="css-1dcdqdg"><code>      parser.currentClause.presence = lunr.Query.presence.PROHIBITED
</code></td></tr><tr><td id="L3263" class="css-a4x74f"><span>3263</span></td><td id="LC3263" class="css-1dcdqdg"><code>      <span class="code-keyword">break</span>
</code></td></tr><tr><td id="L3264" class="css-a4x74f"><span>3264</span></td><td id="LC3264" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> <span class="code-string">"+"</span>:
</code></td></tr><tr><td id="L3265" class="css-a4x74f"><span>3265</span></td><td id="LC3265" class="css-1dcdqdg"><code>      parser.currentClause.presence = lunr.Query.presence.REQUIRED
</code></td></tr><tr><td id="L3266" class="css-a4x74f"><span>3266</span></td><td id="LC3266" class="css-1dcdqdg"><code>      <span class="code-keyword">break</span>
</code></td></tr><tr><td id="L3267" class="css-a4x74f"><span>3267</span></td><td id="LC3267" class="css-1dcdqdg"><code>    <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L3268" class="css-a4x74f"><span>3268</span></td><td id="LC3268" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> errorMessage = <span class="code-string">"unrecognised presence operator'"</span> + lexeme.str + <span class="code-string">"'"</span>
</code></td></tr><tr><td id="L3269" class="css-a4x74f"><span>3269</span></td><td id="LC3269" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
</code></td></tr><tr><td id="L3270" class="css-a4x74f"><span>3270</span></td><td id="LC3270" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3271" class="css-a4x74f"><span>3271</span></td><td id="LC3271" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3272" class="css-a4x74f"><span>3272</span></td><td id="LC3272" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> nextLexeme = parser.peekLexeme()
</code></td></tr><tr><td id="L3273" class="css-a4x74f"><span>3273</span></td><td id="LC3273" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3274" class="css-a4x74f"><span>3274</span></td><td id="LC3274" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (nextLexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3275" class="css-a4x74f"><span>3275</span></td><td id="LC3275" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> errorMessage = <span class="code-string">"expecting term or field, found nothing"</span>
</code></td></tr><tr><td id="L3276" class="css-a4x74f"><span>3276</span></td><td id="LC3276" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
</code></td></tr><tr><td id="L3277" class="css-a4x74f"><span>3277</span></td><td id="LC3277" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3278" class="css-a4x74f"><span>3278</span></td><td id="LC3278" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3279" class="css-a4x74f"><span>3279</span></td><td id="LC3279" class="css-1dcdqdg"><code>  <span class="code-keyword">switch</span> (nextLexeme.type) {
</code></td></tr><tr><td id="L3280" class="css-a4x74f"><span>3280</span></td><td id="LC3280" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.FIELD:
</code></td></tr><tr><td id="L3281" class="css-a4x74f"><span>3281</span></td><td id="LC3281" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseField
</code></td></tr><tr><td id="L3282" class="css-a4x74f"><span>3282</span></td><td id="LC3282" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.TERM:
</code></td></tr><tr><td id="L3283" class="css-a4x74f"><span>3283</span></td><td id="LC3283" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseTerm
</code></td></tr><tr><td id="L3284" class="css-a4x74f"><span>3284</span></td><td id="LC3284" class="css-1dcdqdg"><code>    <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L3285" class="css-a4x74f"><span>3285</span></td><td id="LC3285" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> errorMessage = <span class="code-string">"expecting term or field, found '"</span> + nextLexeme.type + <span class="code-string">"'"</span>
</code></td></tr><tr><td id="L3286" class="css-a4x74f"><span>3286</span></td><td id="LC3286" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
</code></td></tr><tr><td id="L3287" class="css-a4x74f"><span>3287</span></td><td id="LC3287" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3288" class="css-a4x74f"><span>3288</span></td><td id="LC3288" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3289" class="css-a4x74f"><span>3289</span></td><td id="LC3289" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3290" class="css-a4x74f"><span>3290</span></td><td id="LC3290" class="css-1dcdqdg"><code>lunr.QueryParser.parseField = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">parser</span>) </span>{
</code></td></tr><tr><td id="L3291" class="css-a4x74f"><span>3291</span></td><td id="LC3291" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> lexeme = parser.consumeLexeme()
</code></td></tr><tr><td id="L3292" class="css-a4x74f"><span>3292</span></td><td id="LC3292" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3293" class="css-a4x74f"><span>3293</span></td><td id="LC3293" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3294" class="css-a4x74f"><span>3294</span></td><td id="LC3294" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3295" class="css-a4x74f"><span>3295</span></td><td id="LC3295" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3296" class="css-a4x74f"><span>3296</span></td><td id="LC3296" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3297" class="css-a4x74f"><span>3297</span></td><td id="LC3297" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (parser.query.allFields.indexOf(lexeme.str) == <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L3298" class="css-a4x74f"><span>3298</span></td><td id="LC3298" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> possibleFields = parser.query.allFields.map(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">f</span>) </span>{ <span class="code-keyword">return</span> <span class="code-string">"'"</span> + f + <span class="code-string">"'"</span> }).join(<span class="code-string">', '</span>),
</code></td></tr><tr><td id="L3299" class="css-a4x74f"><span>3299</span></td><td id="LC3299" class="css-1dcdqdg"><code>        errorMessage = <span class="code-string">"unrecognised field '"</span> + lexeme.str + <span class="code-string">"', possible fields: "</span> + possibleFields
</code></td></tr><tr><td id="L3300" class="css-a4x74f"><span>3300</span></td><td id="LC3300" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3301" class="css-a4x74f"><span>3301</span></td><td id="LC3301" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
</code></td></tr><tr><td id="L3302" class="css-a4x74f"><span>3302</span></td><td id="LC3302" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3303" class="css-a4x74f"><span>3303</span></td><td id="LC3303" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3304" class="css-a4x74f"><span>3304</span></td><td id="LC3304" class="css-1dcdqdg"><code>  parser.currentClause.fields = [lexeme.str]
</code></td></tr><tr><td id="L3305" class="css-a4x74f"><span>3305</span></td><td id="LC3305" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3306" class="css-a4x74f"><span>3306</span></td><td id="LC3306" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> nextLexeme = parser.peekLexeme()
</code></td></tr><tr><td id="L3307" class="css-a4x74f"><span>3307</span></td><td id="LC3307" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3308" class="css-a4x74f"><span>3308</span></td><td id="LC3308" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (nextLexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3309" class="css-a4x74f"><span>3309</span></td><td id="LC3309" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> errorMessage = <span class="code-string">"expecting term, found nothing"</span>
</code></td></tr><tr><td id="L3310" class="css-a4x74f"><span>3310</span></td><td id="LC3310" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
</code></td></tr><tr><td id="L3311" class="css-a4x74f"><span>3311</span></td><td id="LC3311" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3312" class="css-a4x74f"><span>3312</span></td><td id="LC3312" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3313" class="css-a4x74f"><span>3313</span></td><td id="LC3313" class="css-1dcdqdg"><code>  <span class="code-keyword">switch</span> (nextLexeme.type) {
</code></td></tr><tr><td id="L3314" class="css-a4x74f"><span>3314</span></td><td id="LC3314" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.TERM:
</code></td></tr><tr><td id="L3315" class="css-a4x74f"><span>3315</span></td><td id="LC3315" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseTerm
</code></td></tr><tr><td id="L3316" class="css-a4x74f"><span>3316</span></td><td id="LC3316" class="css-1dcdqdg"><code>    <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L3317" class="css-a4x74f"><span>3317</span></td><td id="LC3317" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> errorMessage = <span class="code-string">"expecting term, found '"</span> + nextLexeme.type + <span class="code-string">"'"</span>
</code></td></tr><tr><td id="L3318" class="css-a4x74f"><span>3318</span></td><td id="LC3318" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
</code></td></tr><tr><td id="L3319" class="css-a4x74f"><span>3319</span></td><td id="LC3319" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3320" class="css-a4x74f"><span>3320</span></td><td id="LC3320" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3321" class="css-a4x74f"><span>3321</span></td><td id="LC3321" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3322" class="css-a4x74f"><span>3322</span></td><td id="LC3322" class="css-1dcdqdg"><code>lunr.QueryParser.parseTerm = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">parser</span>) </span>{
</code></td></tr><tr><td id="L3323" class="css-a4x74f"><span>3323</span></td><td id="LC3323" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> lexeme = parser.consumeLexeme()
</code></td></tr><tr><td id="L3324" class="css-a4x74f"><span>3324</span></td><td id="LC3324" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3325" class="css-a4x74f"><span>3325</span></td><td id="LC3325" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3326" class="css-a4x74f"><span>3326</span></td><td id="LC3326" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3327" class="css-a4x74f"><span>3327</span></td><td id="LC3327" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3328" class="css-a4x74f"><span>3328</span></td><td id="LC3328" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3329" class="css-a4x74f"><span>3329</span></td><td id="LC3329" class="css-1dcdqdg"><code>  parser.currentClause.term = lexeme.str.toLowerCase()
</code></td></tr><tr><td id="L3330" class="css-a4x74f"><span>3330</span></td><td id="LC3330" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3331" class="css-a4x74f"><span>3331</span></td><td id="LC3331" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexeme.str.indexOf(<span class="code-string">"*"</span>) != <span class="code-number">-1</span>) {
</code></td></tr><tr><td id="L3332" class="css-a4x74f"><span>3332</span></td><td id="LC3332" class="css-1dcdqdg"><code>    parser.currentClause.usePipeline = <span class="code-literal">false</span>
</code></td></tr><tr><td id="L3333" class="css-a4x74f"><span>3333</span></td><td id="LC3333" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3334" class="css-a4x74f"><span>3334</span></td><td id="LC3334" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3335" class="css-a4x74f"><span>3335</span></td><td id="LC3335" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> nextLexeme = parser.peekLexeme()
</code></td></tr><tr><td id="L3336" class="css-a4x74f"><span>3336</span></td><td id="LC3336" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3337" class="css-a4x74f"><span>3337</span></td><td id="LC3337" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (nextLexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3338" class="css-a4x74f"><span>3338</span></td><td id="LC3338" class="css-1dcdqdg"><code>    parser.nextClause()
</code></td></tr><tr><td id="L3339" class="css-a4x74f"><span>3339</span></td><td id="LC3339" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3340" class="css-a4x74f"><span>3340</span></td><td id="LC3340" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3341" class="css-a4x74f"><span>3341</span></td><td id="LC3341" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3342" class="css-a4x74f"><span>3342</span></td><td id="LC3342" class="css-1dcdqdg"><code>  <span class="code-keyword">switch</span> (nextLexeme.type) {
</code></td></tr><tr><td id="L3343" class="css-a4x74f"><span>3343</span></td><td id="LC3343" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.TERM:
</code></td></tr><tr><td id="L3344" class="css-a4x74f"><span>3344</span></td><td id="LC3344" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3345" class="css-a4x74f"><span>3345</span></td><td id="LC3345" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseTerm
</code></td></tr><tr><td id="L3346" class="css-a4x74f"><span>3346</span></td><td id="LC3346" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.FIELD:
</code></td></tr><tr><td id="L3347" class="css-a4x74f"><span>3347</span></td><td id="LC3347" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3348" class="css-a4x74f"><span>3348</span></td><td id="LC3348" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseField
</code></td></tr><tr><td id="L3349" class="css-a4x74f"><span>3349</span></td><td id="LC3349" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.EDIT_DISTANCE:
</code></td></tr><tr><td id="L3350" class="css-a4x74f"><span>3350</span></td><td id="LC3350" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseEditDistance
</code></td></tr><tr><td id="L3351" class="css-a4x74f"><span>3351</span></td><td id="LC3351" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.BOOST:
</code></td></tr><tr><td id="L3352" class="css-a4x74f"><span>3352</span></td><td id="LC3352" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseBoost
</code></td></tr><tr><td id="L3353" class="css-a4x74f"><span>3353</span></td><td id="LC3353" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.PRESENCE:
</code></td></tr><tr><td id="L3354" class="css-a4x74f"><span>3354</span></td><td id="LC3354" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3355" class="css-a4x74f"><span>3355</span></td><td id="LC3355" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parsePresence
</code></td></tr><tr><td id="L3356" class="css-a4x74f"><span>3356</span></td><td id="LC3356" class="css-1dcdqdg"><code>    <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L3357" class="css-a4x74f"><span>3357</span></td><td id="LC3357" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> errorMessage = <span class="code-string">"Unexpected lexeme type '"</span> + nextLexeme.type + <span class="code-string">"'"</span>
</code></td></tr><tr><td id="L3358" class="css-a4x74f"><span>3358</span></td><td id="LC3358" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
</code></td></tr><tr><td id="L3359" class="css-a4x74f"><span>3359</span></td><td id="LC3359" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3360" class="css-a4x74f"><span>3360</span></td><td id="LC3360" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3361" class="css-a4x74f"><span>3361</span></td><td id="LC3361" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3362" class="css-a4x74f"><span>3362</span></td><td id="LC3362" class="css-1dcdqdg"><code>lunr.QueryParser.parseEditDistance = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">parser</span>) </span>{
</code></td></tr><tr><td id="L3363" class="css-a4x74f"><span>3363</span></td><td id="LC3363" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> lexeme = parser.consumeLexeme()
</code></td></tr><tr><td id="L3364" class="css-a4x74f"><span>3364</span></td><td id="LC3364" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3365" class="css-a4x74f"><span>3365</span></td><td id="LC3365" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3366" class="css-a4x74f"><span>3366</span></td><td id="LC3366" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3367" class="css-a4x74f"><span>3367</span></td><td id="LC3367" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3368" class="css-a4x74f"><span>3368</span></td><td id="LC3368" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3369" class="css-a4x74f"><span>3369</span></td><td id="LC3369" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> editDistance = <span class="code-built_in">parseInt</span>(lexeme.str, <span class="code-number">10</span>)
</code></td></tr><tr><td id="L3370" class="css-a4x74f"><span>3370</span></td><td id="LC3370" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3371" class="css-a4x74f"><span>3371</span></td><td id="LC3371" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-built_in">isNaN</span>(editDistance)) {
</code></td></tr><tr><td id="L3372" class="css-a4x74f"><span>3372</span></td><td id="LC3372" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> errorMessage = <span class="code-string">"edit distance must be numeric"</span>
</code></td></tr><tr><td id="L3373" class="css-a4x74f"><span>3373</span></td><td id="LC3373" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
</code></td></tr><tr><td id="L3374" class="css-a4x74f"><span>3374</span></td><td id="LC3374" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3375" class="css-a4x74f"><span>3375</span></td><td id="LC3375" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3376" class="css-a4x74f"><span>3376</span></td><td id="LC3376" class="css-1dcdqdg"><code>  parser.currentClause.editDistance = editDistance
</code></td></tr><tr><td id="L3377" class="css-a4x74f"><span>3377</span></td><td id="LC3377" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3378" class="css-a4x74f"><span>3378</span></td><td id="LC3378" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> nextLexeme = parser.peekLexeme()
</code></td></tr><tr><td id="L3379" class="css-a4x74f"><span>3379</span></td><td id="LC3379" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3380" class="css-a4x74f"><span>3380</span></td><td id="LC3380" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (nextLexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3381" class="css-a4x74f"><span>3381</span></td><td id="LC3381" class="css-1dcdqdg"><code>    parser.nextClause()
</code></td></tr><tr><td id="L3382" class="css-a4x74f"><span>3382</span></td><td id="LC3382" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3383" class="css-a4x74f"><span>3383</span></td><td id="LC3383" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3384" class="css-a4x74f"><span>3384</span></td><td id="LC3384" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3385" class="css-a4x74f"><span>3385</span></td><td id="LC3385" class="css-1dcdqdg"><code>  <span class="code-keyword">switch</span> (nextLexeme.type) {
</code></td></tr><tr><td id="L3386" class="css-a4x74f"><span>3386</span></td><td id="LC3386" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.TERM:
</code></td></tr><tr><td id="L3387" class="css-a4x74f"><span>3387</span></td><td id="LC3387" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3388" class="css-a4x74f"><span>3388</span></td><td id="LC3388" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseTerm
</code></td></tr><tr><td id="L3389" class="css-a4x74f"><span>3389</span></td><td id="LC3389" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.FIELD:
</code></td></tr><tr><td id="L3390" class="css-a4x74f"><span>3390</span></td><td id="LC3390" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3391" class="css-a4x74f"><span>3391</span></td><td id="LC3391" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseField
</code></td></tr><tr><td id="L3392" class="css-a4x74f"><span>3392</span></td><td id="LC3392" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.EDIT_DISTANCE:
</code></td></tr><tr><td id="L3393" class="css-a4x74f"><span>3393</span></td><td id="LC3393" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseEditDistance
</code></td></tr><tr><td id="L3394" class="css-a4x74f"><span>3394</span></td><td id="LC3394" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.BOOST:
</code></td></tr><tr><td id="L3395" class="css-a4x74f"><span>3395</span></td><td id="LC3395" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseBoost
</code></td></tr><tr><td id="L3396" class="css-a4x74f"><span>3396</span></td><td id="LC3396" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.PRESENCE:
</code></td></tr><tr><td id="L3397" class="css-a4x74f"><span>3397</span></td><td id="LC3397" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3398" class="css-a4x74f"><span>3398</span></td><td id="LC3398" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parsePresence
</code></td></tr><tr><td id="L3399" class="css-a4x74f"><span>3399</span></td><td id="LC3399" class="css-1dcdqdg"><code>    <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L3400" class="css-a4x74f"><span>3400</span></td><td id="LC3400" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> errorMessage = <span class="code-string">"Unexpected lexeme type '"</span> + nextLexeme.type + <span class="code-string">"'"</span>
</code></td></tr><tr><td id="L3401" class="css-a4x74f"><span>3401</span></td><td id="LC3401" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
</code></td></tr><tr><td id="L3402" class="css-a4x74f"><span>3402</span></td><td id="LC3402" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3403" class="css-a4x74f"><span>3403</span></td><td id="LC3403" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3404" class="css-a4x74f"><span>3404</span></td><td id="LC3404" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3405" class="css-a4x74f"><span>3405</span></td><td id="LC3405" class="css-1dcdqdg"><code>lunr.QueryParser.parseBoost = <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">parser</span>) </span>{
</code></td></tr><tr><td id="L3406" class="css-a4x74f"><span>3406</span></td><td id="LC3406" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> lexeme = parser.consumeLexeme()
</code></td></tr><tr><td id="L3407" class="css-a4x74f"><span>3407</span></td><td id="LC3407" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3408" class="css-a4x74f"><span>3408</span></td><td id="LC3408" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (lexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3409" class="css-a4x74f"><span>3409</span></td><td id="LC3409" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3410" class="css-a4x74f"><span>3410</span></td><td id="LC3410" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3411" class="css-a4x74f"><span>3411</span></td><td id="LC3411" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3412" class="css-a4x74f"><span>3412</span></td><td id="LC3412" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> boost = <span class="code-built_in">parseInt</span>(lexeme.str, <span class="code-number">10</span>)
</code></td></tr><tr><td id="L3413" class="css-a4x74f"><span>3413</span></td><td id="LC3413" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3414" class="css-a4x74f"><span>3414</span></td><td id="LC3414" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (<span class="code-built_in">isNaN</span>(boost)) {
</code></td></tr><tr><td id="L3415" class="css-a4x74f"><span>3415</span></td><td id="LC3415" class="css-1dcdqdg"><code>    <span class="code-keyword">var</span> errorMessage = <span class="code-string">"boost must be numeric"</span>
</code></td></tr><tr><td id="L3416" class="css-a4x74f"><span>3416</span></td><td id="LC3416" class="css-1dcdqdg"><code>    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
</code></td></tr><tr><td id="L3417" class="css-a4x74f"><span>3417</span></td><td id="LC3417" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3418" class="css-a4x74f"><span>3418</span></td><td id="LC3418" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3419" class="css-a4x74f"><span>3419</span></td><td id="LC3419" class="css-1dcdqdg"><code>  parser.currentClause.boost = boost
</code></td></tr><tr><td id="L3420" class="css-a4x74f"><span>3420</span></td><td id="LC3420" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3421" class="css-a4x74f"><span>3421</span></td><td id="LC3421" class="css-1dcdqdg"><code>  <span class="code-keyword">var</span> nextLexeme = parser.peekLexeme()
</code></td></tr><tr><td id="L3422" class="css-a4x74f"><span>3422</span></td><td id="LC3422" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3423" class="css-a4x74f"><span>3423</span></td><td id="LC3423" class="css-1dcdqdg"><code>  <span class="code-keyword">if</span> (nextLexeme == <span class="code-literal">undefined</span>) {
</code></td></tr><tr><td id="L3424" class="css-a4x74f"><span>3424</span></td><td id="LC3424" class="css-1dcdqdg"><code>    parser.nextClause()
</code></td></tr><tr><td id="L3425" class="css-a4x74f"><span>3425</span></td><td id="LC3425" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span>
</code></td></tr><tr><td id="L3426" class="css-a4x74f"><span>3426</span></td><td id="LC3426" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3427" class="css-a4x74f"><span>3427</span></td><td id="LC3427" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3428" class="css-a4x74f"><span>3428</span></td><td id="LC3428" class="css-1dcdqdg"><code>  <span class="code-keyword">switch</span> (nextLexeme.type) {
</code></td></tr><tr><td id="L3429" class="css-a4x74f"><span>3429</span></td><td id="LC3429" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.TERM:
</code></td></tr><tr><td id="L3430" class="css-a4x74f"><span>3430</span></td><td id="LC3430" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3431" class="css-a4x74f"><span>3431</span></td><td id="LC3431" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseTerm
</code></td></tr><tr><td id="L3432" class="css-a4x74f"><span>3432</span></td><td id="LC3432" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.FIELD:
</code></td></tr><tr><td id="L3433" class="css-a4x74f"><span>3433</span></td><td id="LC3433" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3434" class="css-a4x74f"><span>3434</span></td><td id="LC3434" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseField
</code></td></tr><tr><td id="L3435" class="css-a4x74f"><span>3435</span></td><td id="LC3435" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.EDIT_DISTANCE:
</code></td></tr><tr><td id="L3436" class="css-a4x74f"><span>3436</span></td><td id="LC3436" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseEditDistance
</code></td></tr><tr><td id="L3437" class="css-a4x74f"><span>3437</span></td><td id="LC3437" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.BOOST:
</code></td></tr><tr><td id="L3438" class="css-a4x74f"><span>3438</span></td><td id="LC3438" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parseBoost
</code></td></tr><tr><td id="L3439" class="css-a4x74f"><span>3439</span></td><td id="LC3439" class="css-1dcdqdg"><code>    <span class="code-keyword">case</span> lunr.QueryLexer.PRESENCE:
</code></td></tr><tr><td id="L3440" class="css-a4x74f"><span>3440</span></td><td id="LC3440" class="css-1dcdqdg"><code>      parser.nextClause()
</code></td></tr><tr><td id="L3441" class="css-a4x74f"><span>3441</span></td><td id="LC3441" class="css-1dcdqdg"><code>      <span class="code-keyword">return</span> lunr.QueryParser.parsePresence
</code></td></tr><tr><td id="L3442" class="css-a4x74f"><span>3442</span></td><td id="LC3442" class="css-1dcdqdg"><code>    <span class="code-keyword">default</span>:
</code></td></tr><tr><td id="L3443" class="css-a4x74f"><span>3443</span></td><td id="LC3443" class="css-1dcdqdg"><code>      <span class="code-keyword">var</span> errorMessage = <span class="code-string">"Unexpected lexeme type '"</span> + nextLexeme.type + <span class="code-string">"'"</span>
</code></td></tr><tr><td id="L3444" class="css-a4x74f"><span>3444</span></td><td id="LC3444" class="css-1dcdqdg"><code>      <span class="code-keyword">throw</span> <span class="code-keyword">new</span> lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
</code></td></tr><tr><td id="L3445" class="css-a4x74f"><span>3445</span></td><td id="LC3445" class="css-1dcdqdg"><code>  }
</code></td></tr><tr><td id="L3446" class="css-a4x74f"><span>3446</span></td><td id="LC3446" class="css-1dcdqdg"><code>}
</code></td></tr><tr><td id="L3447" class="css-a4x74f"><span>3447</span></td><td id="LC3447" class="css-1dcdqdg"><code>
</code></td></tr><tr><td id="L3448" class="css-a4x74f"><span>3448</span></td><td id="LC3448" class="css-1dcdqdg"><code>  <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3449" class="css-a4x74f"><span>3449</span></td><td id="LC3449" class="css-1dcdqdg"><code><span class="code-comment">   * export the module via AMD, CommonJS or as a browser global
</span></code></td></tr><tr><td id="L3450" class="css-a4x74f"><span>3450</span></td><td id="LC3450" class="css-1dcdqdg"><code><span class="code-comment">   * Export code from https://github.com/umdjs/umd/blob/master/returnExports.js
</span></code></td></tr><tr><td id="L3451" class="css-a4x74f"><span>3451</span></td><td id="LC3451" class="css-1dcdqdg"><code><span class="code-comment">   */</span>
</code></td></tr><tr><td id="L3452" class="css-a4x74f"><span>3452</span></td><td id="LC3452" class="css-1dcdqdg"><code>  ;(<span class="code-function"><span class="code-keyword">function</span> (<span class="code-params">root, factory</span>) </span>{
</code></td></tr><tr><td id="L3453" class="css-a4x74f"><span>3453</span></td><td id="LC3453" class="css-1dcdqdg"><code>    <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> define === <span class="code-string">'function'</span> &amp;&amp; define.amd) {
</code></td></tr><tr><td id="L3454" class="css-a4x74f"><span>3454</span></td><td id="LC3454" class="css-1dcdqdg"><code>      <span class="code-comment">// AMD. Register as an anonymous module.</span>
</code></td></tr><tr><td id="L3455" class="css-a4x74f"><span>3455</span></td><td id="LC3455" class="css-1dcdqdg"><code>      define(factory)
</code></td></tr><tr><td id="L3456" class="css-a4x74f"><span>3456</span></td><td id="LC3456" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> <span class="code-keyword">if</span> (<span class="code-keyword">typeof</span> exports === <span class="code-string">'object'</span>) {
</code></td></tr><tr><td id="L3457" class="css-a4x74f"><span>3457</span></td><td id="LC3457" class="css-1dcdqdg"><code>      <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3458" class="css-a4x74f"><span>3458</span></td><td id="LC3458" class="css-1dcdqdg"><code><span class="code-comment">       * Node. Does not work with strict CommonJS, but
</span></code></td></tr><tr><td id="L3459" class="css-a4x74f"><span>3459</span></td><td id="LC3459" class="css-1dcdqdg"><code><span class="code-comment">       * only CommonJS-like enviroments that support module.exports,
</span></code></td></tr><tr><td id="L3460" class="css-a4x74f"><span>3460</span></td><td id="LC3460" class="css-1dcdqdg"><code><span class="code-comment">       * like Node.
</span></code></td></tr><tr><td id="L3461" class="css-a4x74f"><span>3461</span></td><td id="LC3461" class="css-1dcdqdg"><code><span class="code-comment">       */</span>
</code></td></tr><tr><td id="L3462" class="css-a4x74f"><span>3462</span></td><td id="LC3462" class="css-1dcdqdg"><code>      <span class="code-built_in">module</span>.exports = factory()
</code></td></tr><tr><td id="L3463" class="css-a4x74f"><span>3463</span></td><td id="LC3463" class="css-1dcdqdg"><code>    } <span class="code-keyword">else</span> {
</code></td></tr><tr><td id="L3464" class="css-a4x74f"><span>3464</span></td><td id="LC3464" class="css-1dcdqdg"><code>      <span class="code-comment">// Browser globals (root is window)</span>
</code></td></tr><tr><td id="L3465" class="css-a4x74f"><span>3465</span></td><td id="LC3465" class="css-1dcdqdg"><code>      root.lunr = factory()
</code></td></tr><tr><td id="L3466" class="css-a4x74f"><span>3466</span></td><td id="LC3466" class="css-1dcdqdg"><code>    }
</code></td></tr><tr><td id="L3467" class="css-a4x74f"><span>3467</span></td><td id="LC3467" class="css-1dcdqdg"><code>  }(<span class="code-keyword">this</span>, <span class="code-function"><span class="code-keyword">function</span> (<span class="code-params"></span>) </span>{
</code></td></tr><tr><td id="L3468" class="css-a4x74f"><span>3468</span></td><td id="LC3468" class="css-1dcdqdg"><code>    <span class="code-comment">/**
</span></code></td></tr><tr><td id="L3469" class="css-a4x74f"><span>3469</span></td><td id="LC3469" class="css-1dcdqdg"><code><span class="code-comment">     * Just return a value to define the module export.
</span></code></td></tr><tr><td id="L3470" class="css-a4x74f"><span>3470</span></td><td id="LC3470" class="css-1dcdqdg"><code><span class="code-comment">     * This example returns an object, but the module
</span></code></td></tr><tr><td id="L3471" class="css-a4x74f"><span>3471</span></td><td id="LC3471" class="css-1dcdqdg"><code><span class="code-comment">     * can return a function as the exported value.
</span></code></td></tr><tr><td id="L3472" class="css-a4x74f"><span>3472</span></td><td id="LC3472" class="css-1dcdqdg"><code><span class="code-comment">     */</span>
</code></td></tr><tr><td id="L3473" class="css-a4x74f"><span>3473</span></td><td id="LC3473" class="css-1dcdqdg"><code>    <span class="code-keyword">return</span> lunr
</code></td></tr><tr><td id="L3474" class="css-a4x74f"><span>3474</span></td><td id="LC3474" class="css-1dcdqdg"><code>  }))
</code></td></tr><tr><td id="L3475" class="css-a4x74f"><span>3475</span></td><td id="LC3475" class="css-1dcdqdg"><code>})();
</code></td></tr></tbody></table></div></div></div></div><style data-emotion-css="1teho9j">.css-1teho9j{margin-top:5rem;background:black;color:#aaa;}</style><footer class="css-1teho9j"><style data-emotion-css="1ui8put">.css-1ui8put{max-width:940px;padding:10px 20px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-1ui8put"><p><span>Build: <!-- -->b5d1b223</span></p><p><span>© <!-- -->2021<!-- --> UNPKG</span></p><style data-emotion-css="la3nd4">.css-la3nd4{font-size:1.5rem;}</style><p class="css-la3nd4"><style data-emotion-css="bogekj">.css-bogekj{color:#aaa;display:inline-block;}.css-bogekj:hover{color:white;}</style><a href="https://twitter.com/unpkg" class="css-bogekj"><style data-emotion-css="i6dzq1">.css-i6dzq1{vertical-align:text-bottom;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><style data-emotion-css="3czw03">.css-3czw03{color:#aaa;display:inline-block;margin-left:1rem;}.css-3czw03:hover{color:white;}</style><a href="https://github.com/mjackson/unpkg" class="css-3czw03"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="css-i6dzq1" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></p></div></footer></div><script src="/react@16.8.6/umd/react.production.min.js"></script><script src="/react-dom@16.8.6/umd/react-dom.production.min.js"></script><script src="/@emotion/core@10.0.6/dist/core.umd.min.js"></script><script>'use strict';(function(l,t,c){function k(){k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return k.apply(this,arguments)}function F(a,b){if(null==a)return{};var c={},e=Object.keys(a),f;for(f=0;f<e.length;f++){var h=e[f];0<=b.indexOf(h)||(c[h]=a[h])}return c}function G(a,b){b||(b=a.slice(0));a.raw=b;return a}function H(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,
"default")?a["default"]:a}function v(a,b){return b={exports:{}},a(b,b.exports),b.exports}function I(){}function J(){}function K(a){var b,d=a.children;a=a.css;return c.jsx("div",{css:k((b={border:"1px solid #dfe2e5",borderRadius:3},b["@media (max-width: 700px)"]={borderRightWidth:0,borderLeftWidth:0},b),a)},d)}function L(a){var b,d=a.children;a=a.css;return c.jsx("div",{css:k((b={padding:10,background:"#f6f8fa",color:"#424242",border:"1px solid #d1d5da",borderTopLeftRadius:3,borderTopRightRadius:3,
margin:"-1px -1px 0",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},b["@media (max-width: 700px)"]={paddingRight:20,paddingLeft:20},b),a)},d)}function M(a){return a&&a.map(function(a,c){return l.createElement(a.tag,r({key:c},a.attr),M(a.child))})}function w(a){return function(b){return l.createElement(fa,r({attr:r({},a.attr)},b),M(a.child))}}function fa(a){var b=function(b){var c=a.size||b.size||"1em";if(b.className)var d=b.className;a.className&&(d=(d?d+" ":
"")+a.className);var h=a.attr,p=a.title,u=ha(a,["attr","title"]);return l.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},b.attr,h,u,{className:d,style:r({color:a.color||b.color},b.style,a.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),p&&l.createElement("title",null,p),a.children)};return void 0!==N?l.createElement(N.Consumer,null,function(a){return b(a)}):b(O)}function x(a,b){var d=b.css;b=F(b,["css"]);return c.jsx(a,k({css:k({},d,{verticalAlign:"text-bottom"})},
b))}function ia(a){return x(P,a)}function ja(a){return x(Q,a)}function ka(a){return x(R,a)}function la(a){return x(S,a)}function ma(a){return x(T,a)}function na(a){var b=a.path,d=a.details,e=Object.keys(d).reduce(function(a,b){var c=a.subdirs,e=a.files;b=d[b];"directory"===b.type?c.push(b):"file"===b.type&&e.push(b);return a},{subdirs:[],files:[]});a=e.subdirs;e=e.files;a.sort(U("path"));e.sort(U("path"));var f=[];"/"!==b&&f.push(c.jsx("tr",{key:".."},c.jsx("td",{css:C}),c.jsx("td",{css:n},c.jsx("a",
{title:"Parent directory",href:"../",css:D},"..")),c.jsx("td",{css:n}),c.jsx("td",{css:E})));a.forEach(function(a){a=a.path.substr(1<b.length?b.length+1:1);var d=a+"/";f.push(c.jsx("tr",{key:a},c.jsx("td",{css:C},c.jsx(ka,null)),c.jsx("td",{css:n},c.jsx("a",{title:a,href:d,css:D},a)),c.jsx("td",{css:n},"-"),c.jsx("td",{css:E},"-")))});e.forEach(function(a){var d=a.size,e=a.contentType;a=a.path.substr(1<b.length?b.length+1:1);f.push(c.jsx("tr",{key:a},c.jsx("td",{css:C},"text/plain"===e||"text/markdown"===
e?c.jsx(ia,null):c.jsx(ja,null)),c.jsx("td",{css:n},c.jsx("a",{title:a,href:a,css:D},a)),c.jsx("td",{css:n},V(d)),c.jsx("td",{css:E},e)))});var h=[];0<e.length&&h.push(e.length+" file"+(1===e.length?"":"s"));0<a.length&&h.push(a.length+" folder"+(1===a.length?"":"s"));return c.jsx(K,null,c.jsx(L,null,c.jsx("span",null,h.join(", "))),c.jsx("table",{css:{width:"100%",borderCollapse:"collapse",borderRadius:2,background:"#fff","@media (max-width: 700px)":{"& th + th + th + th, & td + td + td + td":{display:"none"}},
"& tr:first-of-type td":{borderTop:0}}},c.jsx("thead",null,c.jsx("tr",null,c.jsx("th",null,c.jsx(y,null,"Icon")),c.jsx("th",null,c.jsx(y,null,"Name")),c.jsx("th",null,c.jsx(y,null,"Size")),c.jsx("th",null,c.jsx(y,null,"Content Type")))),c.jsx("tbody",null,f)))}function oa(a){a=a.split("/");return a[a.length-1]}function pa(a){var b=a.uri;return c.jsx("div",{css:{padding:20,textAlign:"center"}},c.jsx("img",{alt:oa(a.path),src:b}))}function qa(a){a=a.highlights.slice(0);var b=a.length&&""===a[a.length-
1];b&&a.pop();return c.jsx("div",{className:"code-listing",css:{overflowX:"auto",overflowY:"hidden",paddingTop:5,paddingBottom:5}},c.jsx("table",{css:{border:"none",borderCollapse:"collapse",borderSpacing:0}},c.jsx("tbody",null,a.map(function(a,b){var d=b+1;return c.jsx("tr",{key:b},c.jsx("td",{id:"L"+d,css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},c.jsx("span",null,d)),c.jsx("td",{id:"LC"+d,css:{paddingLeft:10,
paddingRight:10,color:"#24292e",whiteSpace:"pre"}},c.jsx("code",{dangerouslySetInnerHTML:{__html:a}})))}),!b&&c.jsx("tr",{key:"no-newline"},c.jsx("td",{css:{paddingLeft:10,paddingRight:10,color:"rgba(27,31,35,.3)",textAlign:"right",verticalAlign:"top",width:"1%",minWidth:50,userSelect:"none"}},"\\"),c.jsx("td",{css:{paddingLeft:10,color:"rgba(27,31,35,.3)",userSelect:"none"}},"No newline at end of file")))))}function ra(){return c.jsx("div",{css:{padding:20}},c.jsx("p",{css:{textAlign:"center"}},
"No preview available."))}function sa(a){var b=a.packageName,d=a.packageVersion,e=a.path;a=a.details;var f=a.highlights,h=a.uri,p=a.language;return c.jsx(K,null,c.jsx(L,null,c.jsx("span",null,V(a.size)),c.jsx("span",null,p),c.jsx("span",null,c.jsx("a",{href:"/"+b+"@"+d+e,css:{display:"inline-block",marginLeft:8,padding:"2px 8px",textDecoration:"none",fontWeight:600,fontSize:"0.9rem",color:"#24292e",backgroundColor:"#eff3f6",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,":hover":{backgroundColor:"#e6ebf1",
borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},"View Raw"))),f?c.jsx(qa,{highlights:f}):h?c.jsx(pa,{path:e,uri:h}):c.jsx(ra,null))}function W(){var a=G(["\n  .code-listing {\n    background: #fbfdff;\n    color: #383a42;\n  }\n  .code-comment,\n  .code-quote {\n    color: #a0a1a7;\n    font-style: italic;\n  }\n  .code-doctag,\n  .code-keyword,\n  .code-link,\n  .code-formula {\n    color: #a626a4;\n  }\n  .code-section,\n  .code-name,\n  .code-selector-tag,\n  .code-deletion,\n  .code-subst {\n    color: #e45649;\n  }\n  .code-literal {\n    color: #0184bb;\n  }\n  .code-string,\n  .code-regexp,\n  .code-addition,\n  .code-attribute,\n  .code-meta-string {\n    color: #50a14f;\n  }\n  .code-built_in,\n  .code-class .code-title {\n    color: #c18401;\n  }\n  .code-attr,\n  .code-variable,\n  .code-template-variable,\n  .code-type,\n  .code-selector-class,\n  .code-selector-attr,\n  .code-selector-pseudo,\n  .code-number {\n    color: #986801;\n  }\n  .code-symbol,\n  .code-bullet,\n  .code-meta,\n  .code-selector-id,\n  .code-title {\n    color: #4078f2;\n  }\n  .code-emphasis {\n    font-style: italic;\n  }\n  .code-strong {\n    font-weight: bold;\n  }\n"]);
W=function(){return a};return a}function X(){var a=G(["\n  html {\n    box-sizing: border-box;\n  }\n  *,\n  *:before,\n  *:after {\n    box-sizing: inherit;\n  }\n\n  html,\n  body,\n  #root {\n    height: 100%;\n    margin: 0;\n  }\n\n  body {\n    ","\n    font-size: 16px;\n    line-height: 1.5;\n    overflow-wrap: break-word;\n    background: white;\n    color: black;\n  }\n\n  code {\n    ","\n  }\n\n  th,\n  td {\n    padding: 0;\n  }\n\n  select {\n    font-size: inherit;\n  }\n\n  #root {\n    display: flex;\n    flex-direction: column;\n  }\n"]);
X=function(){return a};return a}function Y(a){var b=a.css;a=F(a,["css"]);return c.jsx("a",k({},a,{css:k({color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},b)}))}function ta(){return c.jsx("header",{css:{marginTop:"2rem"}},c.jsx("h1",{css:{textAlign:"center",fontSize:"3rem",letterSpacing:"0.05em"}},c.jsx("a",{href:"/",css:{color:"#000",textDecoration:"none"}},"UNPKG")))}function ua(a){var b=a.packageName,d=a.packageVersion,e=a.availableVersions;a=a.filename;var f=[];if("/"===
a)f.push(b);else{var h="/browse/"+b+"@"+d;f.push(c.jsx(Y,{href:h+"/"},b));b=a.replace(/^\/+/,"").replace(/\/+$/,"").split("/");a=b.pop();b.forEach(function(a){h+="/"+a;f.push(c.jsx(Y,{href:h+"/"},a))});f.push(a)}return c.jsx("header",{css:{display:"flex",flexDirection:"row",alignItems:"center","@media (max-width: 700px)":{flexDirection:"column-reverse",alignItems:"flex-start"}}},c.jsx("h1",{css:{fontSize:"1.5rem",fontWeight:"normal",flex:1,wordBreak:"break-all"}},c.jsx("nav",null,f.map(function(a,
b,d){return c.jsx(l.Fragment,{key:b},0!==b&&c.jsx("span",{css:{paddingLeft:5,paddingRight:5}},"/"),b===d.length-1?c.jsx("strong",null,a):a)}))),c.jsx(va,{packageVersion:d,availableVersions:e,onChange:function(a){window.location.href=window.location.href.replace("@"+d,"@"+a)}}))}function va(a){var b=a.onChange;return c.jsx("p",{css:{marginLeft:20,"@media (max-width: 700px)":{marginLeft:0,marginBottom:0}}},c.jsx("label",null,"Version:"," ",c.jsx("select",{name:"version",defaultValue:a.packageVersion,
onChange:function(a){b&&b(a.target.value)},css:{appearance:"none",cursor:"pointer",padding:"4px 24px 4px 8px",fontWeight:600,fontSize:"0.9em",color:"#24292e",border:"1px solid rgba(27,31,35,.2)",borderRadius:3,backgroundColor:"#eff3f6",backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAYAAAC9vt6cAAAAAXNSR0IArs4c6QAAARFJREFUKBVjZAACNS39RhBNKrh17WI9o4quoT3Dn78HSNUMUs/CzOTI/O7Vi4dCYpJ3/jP+92BkYGAlyiBGhm8MjIxJt65e3MQM0vDu9YvLYmISILYZELOBxHABRkaGr0yMzF23r12YDFIDNgDEePv65SEhEXENBkYGFSAXuyGMjF8Z/jOsvX3tYiFIDwgwQSgIaaijnvj/P8M5IO8HsjiY/f//D4b//88A1SQhywG9jQr09PS4v/1mPAeUUPzP8B8cJowMjL+Bqu6xMQmaXL164AuyDgwDQJLa2qYSP//9vARkCoMVMzK8YeVkNbh+9uxzMB+JwGoASF5Vx0jz/98/18BqmZi171w9D2EjaaYKEwAEK00XQLdJuwAAAABJRU5ErkJggg==)",
backgroundPosition:"right 8px center",backgroundRepeat:"no-repeat",backgroundSize:"auto 25%",":hover":{backgroundColor:"#e6ebf1",borderColor:"rgba(27,31,35,.35)"},":active":{backgroundColor:"#e9ecef",borderColor:"rgba(27,31,35,.35)",boxShadow:"inset 0 0.15em 0.3em rgba(27,31,35,.15)"}}},a.availableVersions.map(function(a){return c.jsx("option",{key:a,value:a},a)}))))}function wa(a){var b=a.packageName,d=a.packageVersion;a=a.target;return"directory"===a.type?c.jsx(na,{path:a.path,details:a.details}):
"file"===a.type?c.jsx(sa,{packageName:b,packageVersion:d,path:a.path,details:a.details}):null}var Z="default"in l?l["default"]:l;t=t&&t.hasOwnProperty("default")?t["default"]:t;var xa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},aa=v(function(a,b){function c(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case f:switch(a=a.type,a){case q:case g:case p:case l:case u:case z:return a;
default:switch(a=a&&a.$$typeof,a){case m:case A:case k:return a;default:return b}}case n:case B:case h:return b}}}function e(a){return c(a)===g}Object.defineProperty(b,"__esModule",{value:!0});var f=(a="function"===typeof Symbol&&Symbol.for)?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,p=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,l=a?Symbol.for("react.profiler"):60114,k=a?Symbol.for("react.provider"):60109,m=a?Symbol.for("react.context"):
60110,q=a?Symbol.for("react.async_mode"):60111,g=a?Symbol.for("react.concurrent_mode"):60111,A=a?Symbol.for("react.forward_ref"):60112,z=a?Symbol.for("react.suspense"):60113,B=a?Symbol.for("react.memo"):60115,n=a?Symbol.for("react.lazy"):60116;b.typeOf=c;b.AsyncMode=q;b.ConcurrentMode=g;b.ContextConsumer=m;b.ContextProvider=k;b.Element=f;b.ForwardRef=A;b.Fragment=p;b.Lazy=n;b.Memo=B;b.Portal=h;b.Profiler=l;b.StrictMode=u;b.Suspense=z;b.isValidElementType=function(a){return"string"===typeof a||"function"===
typeof a||a===p||a===g||a===l||a===u||a===z||"object"===typeof a&&null!==a&&(a.$$typeof===n||a.$$typeof===B||a.$$typeof===k||a.$$typeof===m||a.$$typeof===A)};b.isAsyncMode=function(a){return e(a)||c(a)===q};b.isConcurrentMode=e;b.isContextConsumer=function(a){return c(a)===m};b.isContextProvider=function(a){return c(a)===k};b.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===f};b.isForwardRef=function(a){return c(a)===A};b.isFragment=function(a){return c(a)===p};b.isLazy=function(a){return c(a)===
n};b.isMemo=function(a){return c(a)===B};b.isPortal=function(a){return c(a)===h};b.isProfiler=function(a){return c(a)===l};b.isStrictMode=function(a){return c(a)===u};b.isSuspense=function(a){return c(a)===z}});H(aa);var ya=v(function(a,b){});H(ya);v(function(a){a.exports=aa});(function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;
var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(e){return!1}})();Function.call.bind(Object.prototype.hasOwnProperty);J.resetWarningCache=I;var za=function(){function a(a,b,c,d,l,k){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==k)throw a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),
a.name="Invariant Violation",a;}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:J,resetWarningCache:I};return c.PropTypes=c};v(function(a){a.exports=za()});var Aa=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},Ba=
{border:0,clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",padding:0,overflow:"hidden",position:"absolute"},y=function(a){return Z.createElement("div",Aa({style:Ba},a))},ba=v(function(a){(function(b,c){a.exports=c()})(xa,function(){function a(a){if(!a)return!0;if(!f(a)||0!==a.length)for(var b in a)if(n.call(a,b))return!1;return!0}function c(a){return"number"===typeof a||"[object Number]"===k.call(a)}function e(a){return"string"===typeof a||"[object String]"===k.call(a)}function f(a){return"object"===
typeof a&&"number"===typeof a.length&&"[object Array]"===k.call(a)}function h(a){var b=parseInt(a);return b.toString()===a?b:a}function p(b,g,d,f){c(g)&&(g=[g]);if(a(g))return b;if(e(g))return p(b,g.split("."),d,f);var q=h(g[0]);if(1===g.length)return g=b[q],void 0!==g&&f||(b[q]=d),g;void 0===b[q]&&(c(q)?b[q]=[]:b[q]={});return p(b[q],g.slice(1),d,f)}function l(b,d){c(d)&&(d=[d]);if(!a(b)){if(a(d))return b;if(e(d))return l(b,d.split("."));var g=h(d[0]),q=b[g];if(1===d.length)void 0!==q&&(f(b)?b.splice(g,
1):delete b[g]);else if(void 0!==b[g])return l(b[g],d.slice(1));return b}}var k=Object.prototype.toString,n=Object.prototype.hasOwnProperty,m={ensureExists:function(a,b,c){return p(a,b,c,!0)},set:function(a,b,c,d){return p(a,b,c,d)},insert:function(a,b,c,d){var e=m.get(a,b);d=~~d;f(e)||(e=[],m.set(a,b,e));e.splice(d,0,c)},empty:function(b,d){if(a(d))return b;if(!a(b)){var g,h;if(!(g=m.get(b,d)))return b;if(e(g))return m.set(b,d,"");if("boolean"===typeof g||"[object Boolean]"===k.call(g))return m.set(b,
d,!1);if(c(g))return m.set(b,d,0);if(f(g))g.length=0;else if("object"===typeof g&&"[object Object]"===k.call(g))for(h in g)n.call(g,h)&&delete g[h];else return m.set(b,d,null)}},push:function(a,b){var c=m.get(a,b);f(c)||(c=[],m.set(a,b,c));c.push.apply(c,Array.prototype.slice.call(arguments,2))},coalesce:function(a,b,c){for(var d,e=0,f=b.length;e<f;e++)if(void 0!==(d=m.get(a,b[e])))return d;return c},get:function(b,d,f){c(d)&&(d=[d]);if(a(d))return b;if(a(b))return f;if(e(d))return m.get(b,d.split("."),
f);var g=h(d[0]);return 1===d.length?void 0===b[g]?f:b[g]:m.get(b[g],d.slice(1),f)},del:function(a,b){return l(a,b)}};return m})});var ca=function(a){return function(b){return typeof b===a}};var Ca=function(a,b){var c=1,e=b||function(a,b){return b};"-"===a[0]&&(c=-1,a=a.substr(1));return function(b,d){var f;b=e(a,ba.get(b,a));d=e(a,ba.get(d,a));b<d&&(f=-1);b>d&&(f=1);b===d&&(f=0);return f*c}};var U=function(){var a=Array.prototype.slice.call(arguments),b=a.filter(ca("string")),c=a.filter(ca("function"))[0];
return function(a,d){for(var e=b.length,f=0,k=0;0===f&&k<e;)f=Ca(b[k],c)(a,d),k++;return f}};let da="B kB MB GB TB PB EB ZB YB".split(" "),ea=(a,b)=>{let c=a;"string"===typeof b?c=a.toLocaleString(b):!0===b&&(c=a.toLocaleString());return c};var V=(a,b)=>{if(!Number.isFinite(a))throw new TypeError(`Expected a finite number, got ${typeof a}: ${a}`);b=Object.assign({},b);if(b.signed&&0===a)return" 0 B";var c=0>a;let e=c?"-":b.signed?"+":"";c&&(a=-a);if(1>a)return a=ea(a,b.locale),e+a+" B";c=Math.min(Math.floor(Math.log10(a)/
3),da.length-1);a=Number((a/Math.pow(1E3,c)).toPrecision(3));a=ea(a,b.locale);return e+a+" "+da[c]},O={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N=l.createContext&&l.createContext(O),r=window&&window.__assign||function(){r=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])}return a};return r.apply(this,arguments)},ha=window&&window.__rest||function(a,b){var c={},e;for(e in a)Object.prototype.hasOwnProperty.call(a,
e)&&0>b.indexOf(e)&&(c[e]=a[e]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var f=0;for(e=Object.getOwnPropertySymbols(a);f<e.length;f++)0>b.indexOf(e[f])&&(c[e[f]]=a[e[f]])}return c},Q=function(a){return w({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.5 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4.5L8.5 1zM11 14H1V2h7l3 3v9zM5 6.98L3.5 8.5 5 10l-.5 1L2 8.5 4.5 6l.5.98zM7.5 6L10 8.5 7.5 11l-.5-.98L8.5 8.5 7 7l.5-1z"}}]})(a)};
Q.displayName="GoFileCode";var R=function(a){return w({tag:"svg",attr:{viewBox:"0 0 14 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"}}]})(a)};R.displayName="GoFileDirectory";var P=function(a){return w({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"}}]})(a)};
P.displayName="GoFile";var T=function(a){return w({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(a)};
T.displayName="FaGithub";var S=function(a){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(a)};
S.displayName="FaTwitter";var D={color:"#0076ff",textDecoration:"none",":hover":{textDecoration:"underline"}},n={paddingTop:6,paddingRight:3,paddingBottom:6,paddingLeft:3,borderTop:"1px solid #eaecef"},C=k({},n,{color:"#424242",width:17,paddingRight:2,paddingLeft:10,"@media (max-width: 700px)":{paddingLeft:20}}),E=k({},n,{textAlign:"right",paddingRight:10,"@media (max-width: 700px)":{paddingRight:20}}),Da=c.css(X(),'\nfont-family: -apple-system,\n  BlinkMacSystemFont,\n  "Segoe UI",\n  "Roboto",\n  "Oxygen",\n  "Ubuntu",\n  "Cantarell",\n  "Fira Sans",\n  "Droid Sans",\n  "Helvetica Neue",\n  sans-serif;\n',
"\nfont-family: Menlo,\n  Monaco,\n  Lucida Console,\n  Liberation Mono,\n  DejaVu Sans Mono,\n  Bitstream Vera Sans Mono,\n  Courier New,\n  monospace;\n"),Ea=c.css(W());t.hydrate(Z.createElement(function(a){var b=a.packageName,d=a.packageVersion,e=a.availableVersions;e=void 0===e?[]:e;var f=a.filename;a=a.target;return c.jsx(l.Fragment,null,c.jsx(c.Global,{styles:Da}),c.jsx(c.Global,{styles:Ea}),c.jsx("div",{css:{flex:"1 0 auto"}},c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},
c.jsx(ta,null)),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto"}},c.jsx(ua,{packageName:b,packageVersion:d,availableVersions:e,filename:f})),c.jsx("div",{css:{maxWidth:940,padding:"0 20px",margin:"0 auto","@media (max-width: 700px)":{padding:0,margin:0}}},c.jsx(wa,{packageName:b,packageVersion:d,target:a}))),c.jsx("footer",{css:{marginTop:"5rem",background:"black",color:"#aaa"}},c.jsx("div",{css:{maxWidth:940,padding:"10px 20px",margin:"0 auto",display:"flex",flexDirection:"row",alignItems:"center",
justifyContent:"space-between"}},c.jsx("p",null,c.jsx("span",null,"Build: ","b5d1b223")),c.jsx("p",null,c.jsx("span",null,"\u00a9 ",(new Date).getFullYear()," UNPKG")),c.jsx("p",{css:{fontSize:"1.5rem"}},c.jsx("a",{href:"https://twitter.com/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"}}},c.jsx(la,null)),c.jsx("a",{href:"https://github.com/mjackson/unpkg",css:{color:"#aaa",display:"inline-block",":hover":{color:"white"},marginLeft:"1rem"}},c.jsx(ma,null))))))},window.__DATA__||
{}),document.getElementById("root"))})(React,ReactDOM,emotionCore);
</script></body></html>